import{j as e,h as be,V as K,s as U,c as a,i as z,y as he,m as xe,p as Z,B as _,I as D,n as Se,S as H,T as B,t as P,b as ee,d as te,r as ve}from"./ScrollView-C2rbZF6W.js";import{r as l}from"./iframe-CS-HVAR2.js";import{u as Te}from"./useBoolean-Bga0aHqh.js";import{u as we}from"./useDisclosure-CktWiTYD.js";import{g as je}from"./array-BfAlyugE.js";import{s as ke}from"./string-L22Q3Tti.js";import{P as qe,F as Ie}from"./Popover-COzLGyI3.js";import{I as Ce}from"./InputError-CZQxTEwr.js";import{a as Ve}from"./Pressable-BviaC-N7.js";import{T as re}from"./Tag-CUh1pqWL.js";import{T as Pe}from"./index-BZqM_b-8.js";import{M as $}from"./index-gGsn9vcM.js";import{S as ce,a as I}from"./_StoriesComponents-CzI1kha9.js";import"./index-blfurcWX.js";import"./useResponsive-IOaDykJp.js";import"./function-B-I9W-1W.js";import"./BottomPanel-jcbCt7pR.js";import"./commonStyles-BBEkV6IC.js";import"./useBodyClassName-DEtqO6i0.js";import"./FocusTrap-DjqBNqnb.js";import"./Suspendable-BdCZimp1.js";import"./index-CsLzfULY.js";import"./extends-CF3RwP-h.js";import"./TransitionView-1DDsVynN.js";import"./Separator-CA24R0S9.js";const Me=U.create({scrollTracker:{position:"absolute",pointerEvents:"none",right:0,bottom:0}}),de=({ref:o,ItemSeparatorComponent:i,ListEmptyComponent:m,ListFooterComponent:h,ListHeaderComponent:k,contentContainerStyle:d,horizontal:u=!1,keyExtractor:p,onEndReached:b,onEndReachedThresholdPx:x=200,onKeyDown:S,onScroll:s,renderItem:v,renderSectionHeader:c,role:E,scrollEventThrottle:R=16,sections:T,showsScrollIndicators:q=!0,style:V})=>{const N=l.useId(),y=l.useRef(null),G=u?{top:0,width:x}:{left:0,height:x};return l.useEffect(()=>{const g=y.current;if(g!=null){const w=new IntersectionObserver(j=>{j.forEach(F=>{F.isIntersecting&&(b==null||b())})});return w.observe(g),()=>{w.unobserve(g)}}},[T.length]),e.jsxs(be,{contentContainerStyle:d,horizontal:u,onKeyDown:S,onScroll:s,ref:o,role:E,scrollEventThrottle:R,showsScrollIndicators:q,style:V,children:[k,T.length<=0?m:T.map(g=>e.jsxs(l.Fragment,{children:[c==null?void 0:c(g),g.data.map((w,j)=>e.jsxs(l.Fragment,{children:[j!==0&&i,v({item:w,index:j})]},p(w,j)))]},`group-${N}-${g.title}`)),h,e.jsx(K,{role:"none",ref:y,style:[Me.scrollTracker,G]})]})};de.__docgenInfo={description:"",methods:[],displayName:"SectionList",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:`{
  element: HTMLElement | null;
  scrollTo: (event: { x?: number; y?: number; animated?: boolean }) => void;
}`,signature:{properties:[{key:"element",value:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}],required:!0}},{key:"scrollTo",value:{name:"signature",type:"function",raw:"(event: { x?: number; y?: number; animated?: boolean }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ x?: number; y?: number; animated?: boolean }",signature:{properties:[{key:"x",value:{name:"number",required:!1}},{key:"y",value:{name:"number",required:!1}},{key:"animated",value:{name:"boolean",required:!1}}]}},name:"event"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<SectionListRef>"},description:""},ItemSeparatorComponent:{required:!1,tsType:{name:"ReactNode"},description:""},ListEmptyComponent:{required:!1,tsType:{name:"ReactNode"},description:""},ListFooterComponent:{required:!1,tsType:{name:"ReactNode"},description:""},ListHeaderComponent:{required:!1,tsType:{name:"ReactNode"},description:""},contentContainerStyle:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""},horizontal:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},keyExtractor:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: T, index: number) => string",signature:{arguments:[{type:{name:"T"},name:"item"},{type:{name:"number"},name:"index"}],return:{name:"string"}}},description:""},onEndReached:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onEndReachedThresholdPx:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"200",computed:!1}},onKeyDown:{required:!1,tsType:{name:'intersection["onKeyDown"]',raw:'ScrollViewProps["onKeyDown"]'},description:""},onScroll:{required:!1,tsType:{name:'intersection["onScroll"]',raw:'ScrollViewProps["onScroll"]'},description:""},renderItem:{required:!0,tsType:{name:"signature",type:"function",raw:"(info: ListRenderItemInfo<T>) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  item: T;
  index: number;
}`,signature:{properties:[{key:"item",value:{name:"T",required:!0}},{key:"index",value:{name:"number",required:!0}}]}},name:"info"}],return:{name:"ReactNode"}}},description:""},renderSectionHeader:{required:!1,tsType:{name:"signature",type:"function",raw:"(section: Section<T>) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  title: string;
  data: T[];
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"data",value:{name:"Array",elements:[{name:"T"}],raw:"T[]",required:!0}}]}},name:"section"}],return:{name:"ReactNode"}}},description:""},role:{required:!1,tsType:{name:"WebRole"},description:""},scrollEventThrottle:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"16",computed:!1}},sections:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  title: string;
  data: T[];
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"data",value:{name:"Array",elements:[{name:"T"}],raw:"T[]",required:!0}}]}}],raw:"Section<T>[]"},description:""},showsScrollIndicators:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},style:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""}}};const Le=120,Ee=32,Re=10.5,n=U.create({base:{...P.regular,backgroundColor:ee.accented,borderColor:a.gray[100],borderRadius:ve[6],borderWidth:1,cursor:"default",overflow:"hidden",transitionDuration:"150ms",transitionProperty:"border-color, box-shadow"},errored:{borderColor:a.negative[500]},tag:{marginRight:4,marginVertical:2},hovered:{boxShadow:te.tile},focused:{borderColor:a.gray[500],boxShadow:te.tile,outlineStyle:"none"},disabled:{backgroundColor:a.gray[50],borderColor:a.gray[100],cursor:"not-allowed"},actions:{marginVertical:"auto",position:"absolute",bottom:0,top:0,right:20},placeholder:{...P.regular,color:a.gray[300],userSelect:"none"},list:{marginVertical:4,maxHeight:Ee*Re,minHeight:224},filterContainer:{flexGrow:1,flexShrink:1,margin:16},filterInput:{...P.regular,backgroundColor:ee.accented,borderColor:a.gray[100],borderRadius:4,borderWidth:1,flexGrow:1,flexShrink:1,height:40,outlineStyle:"none",paddingHorizontal:12,paddingLeft:40,placeholderTextColor:a.gray[300]},filterFocused:{borderColor:a.gray[200]},searchIcon:{position:"absolute",left:14},tagsList:{flexWrap:"wrap",maxHeight:Le,minHeight:40,overflowY:"auto",paddingHorizontal:16,paddingRight:60,paddingVertical:8},groupTitleBase:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,justifyContent:"space-between",paddingHorizontal:16,paddingVertical:12,transitionDuration:"200ms",transitionProperty:"background-color"},groupTitle:{...P.semibold,userSelect:"none"},line:{...P.regular,paddingHorizontal:16,paddingVertical:8,transitionDuration:"200ms",transitionProperty:"background-color",userSelect:"none"},lineInGroup:{paddingLeft:24},emptyList:{height:136},emptyListText:{color:a.gray.primary}}),Y=({color:o="gray",disabled:i=!1,emptyResultText:m,enableGroups:h=!0,filterPlaceholder:k,items:d,onValueChange:u,placeholder:p,renderTagGroup:b,error:x,style:S,values:s,id:v})=>{const[c,E]=l.useState(""),[R,T]=Te(!1),q=l.useRef(!1),V=l.useRef(null),N=l.useRef(null),[y,{open:G,close:g}]=we(!1),w=a[o][50],j=a[o][100];l.useEffect(()=>{y||E("")},[y]),l.useEffect(()=>{var t,r;if(q.current){const f=(t=V.current)==null?void 0:t.scrollHeight;(r=V.current)==null||r.scrollTo({top:f})}q.current=!1},[s]);const F=t=>{q.current=!0,u([...s,t.value])},me=t=>{u(s.filter(r=>r!==t.value))},pe=()=>{u([])},ye=t=>{q.current=!0;const r=t.map(O=>O.value),f=[...new Set([...s,...r])];u(f)},X=l.useMemo(()=>{const t=new Map;return d.forEach(r=>{t.set(r.value,r)}),t},[d]),A=l.useMemo(()=>s.map(t=>X.get(t)).filter(z),[s,X]),W=l.useMemo(()=>{const t=d.filter(f=>!s.includes(f.value)),r=c.trim().toLowerCase();return r===""?t:t.filter(({label:f})=>f.toLowerCase().includes(r))},[c,d,s]),ge=l.useMemo(()=>he.filterMap(xe.entries(je(W,({group:t})=>t)),([t,r])=>r===void 0?Z.None():Z.Some({title:t,data:r})),[W]),J=l.useMemo(()=>e.jsxs(_,{direction:"row",alignItems:"center",style:n.filterContainer,children:[e.jsx(Pe,{autoComplete:"off",inputMode:"search",multiline:!1,rows:1,onChangeText:t=>E(t),placeholder:k,value:c,onFocus:T.on,onBlur:T.off,style:[n.filterInput,R&&n.filterFocused]}),e.jsx(D,{name:"search-filled",color:a[o].primary,size:20,style:n.searchIcon})]}),[c,R,T,k,o]),Q=l.useMemo(()=>e.jsxs(_,{justifyContent:"center",alignItems:"center",style:n.emptyList,children:[e.jsx(D,{name:"clipboard-search-regular",size:24,color:a.gray.primary}),Se(m)&&e.jsxs(e.Fragment,{children:[e.jsx(H,{height:8}),e.jsx(B,{style:n.emptyListText,children:m})]})]}),[m]);return e.jsxs(K,{style:S,children:[e.jsxs($,{id:v,ref:N,"aria-haspopup":"listbox","aria-expanded":y,disabled:i,onPress:G,style:({hovered:t,focused:r})=>[n.base,t&&n.hovered,(r||y)&&n.focused,i&&n.disabled,z(x)&&n.errored],children:[e.jsx(_,{ref:V,alignItems:"center",direction:"row",style:n.tagsList,children:A.length>0?A.map(t=>e.jsx(re,{color:o,onPressRemove:i?void 0:()=>me(t),style:n.tag,children:t.label},String(t.value))):p!==""?e.jsx(B,{role:"label",numberOfLines:1,style:n.placeholder,children:p}):null}),e.jsxs(_,{direction:"row",alignItems:"center",style:n.actions,children:[A.length>=1&&!i&&e.jsxs(e.Fragment,{children:[e.jsx($,{role:"button",onPress:pe,children:e.jsx(D,{name:"dismiss-filled",color:a.gray.primary,size:15})}),e.jsx(H,{width:8})]}),e.jsx(D,{color:a.gray.primary,name:y?"chevron-up-filled":"chevron-down-filled",size:20})]})]}),e.jsx(qe,{role:"listbox",matchReferenceWidth:!0,onDismiss:g,referenceRef:N,returnFocus:!0,visible:y,children:e.jsx(K,{style:n.list,children:h?e.jsx(de,{role:"listbox","aria-multiselectable":!0,keyExtractor:(t,r)=>`group-field-${String(t.value)}-${r}`,ListHeaderComponent:J,ListEmptyComponent:Q,ListFooterComponent:e.jsx(H,{height:16}),sections:ge,renderSectionHeader:({title:t,data:r})=>e.jsxs($,{role:"listitem",onPress:()=>ye(r),style:({hovered:f,pressed:O,focused:fe})=>[n.groupTitleBase,(f||fe)&&{backgroundColor:w},O&&{backgroundColor:j}],children:[e.jsx(B,{numberOfLines:1,style:n.groupTitle,children:t}),z(b)&&e.jsx(re,{color:o,children:b(r)})]}),renderItem:({item:t})=>e.jsx(ae,{color:o,filter:c,item:t,handleSelectItem:F,style:n.lineInGroup})}):e.jsx(Ie,{role:"list",data:W,keyExtractor:t=>`field-${String(t.value)}`,ListHeaderComponent:J,ListEmptyComponent:Q,ListFooterComponent:e.jsx(H,{height:8}),renderItem:({item:t})=>e.jsx(ae,{color:o,filter:c,item:t,handleSelectItem:F})})})}),e.jsx(Ce,{message:x})]})},ae=({item:o,color:i,filter:m,handleSelectItem:h,style:k})=>{const{label:d,disabled:u=!1}=o,p=m.trim().toLowerCase(),b=a[i][50],x=a[i][100],S=l.useMemo(()=>u||p===""?d:ke(d,p),[d,u,p]);return e.jsx(Ve,{role:"listitem",disabled:u,numberOfLines:1,onPress:()=>h(o),style:({hovered:s,pressed:v})=>[n.line,k,s&&{backgroundColor:b},v&&{backgroundColor:x},u&&{backgroundColor:a.gray[50],color:a.gray[100]}],children:typeof S=="string"?S:S.map((s,v)=>s.toLowerCase()===p?e.jsx(B,{style:{color:i},children:s},v):s)})};Y.__docgenInfo={description:"",methods:[],displayName:"MultiSelect",props:{color:{required:!1,tsType:{name:"union",raw:"keyof typeof colors",elements:[{name:"literal",value:"gray"},{name:"literal",value:"live"},{name:"literal",value:"sandbox"},{name:"literal",value:"positive"},{name:"literal",value:"warning"},{name:"literal",value:"negative"},{name:"literal",value:"current"},{name:"literal",value:"partner"},{name:"literal",value:"swan"},{name:"literal",value:"shakespear"},{name:"literal",value:"darkPink"},{name:"literal",value:"sunglow"},{name:"literal",value:"mediumSladeBlue"}]},description:"",defaultValue:{value:'"gray"',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},error:{required:!1,tsType:{name:"string"},description:""},emptyResultText:{required:!1,tsType:{name:"string"},description:""},enableGroups:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},filterPlaceholder:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  disabled?: boolean;
  group: string;
  label: string;
  value: Value;
}`,signature:{properties:[{key:"disabled",value:{name:"boolean",required:!1}},{key:"group",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"Value",required:!0}}]}}],raw:"MultiSelectItem<Value>[]"},description:""},onValueChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(values: Value[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Value"}],raw:"Value[]"},name:"values"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},renderTagGroup:{required:!1,tsType:{name:"signature",type:"function",raw:"(items: readonly MultiSelectItem<Value>[]) => string",signature:{arguments:[{type:{name:"unknown"},name:"items"}],return:{name:"string"}}},description:""},style:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""},values:{required:!0,tsType:{name:"Array",elements:[{name:"Value"}],raw:"Value[]"},description:""},id:{required:!1,tsType:{name:"string"},description:""}}};const Ne=U.create({select:{maxWidth:400}}),it={title:"Forms/MultiSelect",component:Y},Fe=[{label:"Camille",value:"camille",group:"C"},{label:"Charlotte",value:"charlotte",group:"C"},{label:"Francis",value:"francis",group:"F"},{label:"Émilie",value:"emilie",group:"E"},{label:"François",value:"francois",group:"F"},{label:"Laura",value:"laura",group:"L"},{label:"Marie-Anne",value:"marie_anne",group:"M"},{label:"Natasha",value:"natasha",group:"N",disabled:!0},{label:"Nicolas",value:"nicolas",group:"N"},{label:"Pierre",value:"pierre",group:"P"}],C=({initialValues:o=[],...i})=>{const[m,h]=l.useState(o);return e.jsx(Y,{placeholder:"Select people...",filterPlaceholder:"Search...",emptyResultText:"No result",values:m,items:Fe,onValueChange:h,style:Ne.select,...i})},M=()=>e.jsxs(ce,{title:"MultiSelect variations",children:[e.jsx(I,{title:"Default",children:e.jsx(C,{})}),e.jsx(I,{title:"Without groups",children:e.jsx(C,{enableGroups:!1})}),e.jsx(I,{title:"Disabled",children:e.jsx(C,{disabled:!0})}),e.jsx(I,{title:"Disabled with a value",children:e.jsx(C,{disabled:!0,initialValues:["charlotte"]})}),e.jsx(I,{title:"Without any option",children:e.jsx(C,{items:[]})})]}),L=()=>e.jsx(ce,{title:"MultiSelect colors",children:Object.keys(a).map(o=>e.jsx(I,{title:o,children:e.jsx(C,{color:o})},o))});M.__docgenInfo={description:"",methods:[],displayName:"Variations"};L.__docgenInfo={description:"",methods:[],displayName:"Colors"};var ne,oe,le;M.parameters={...M.parameters,docs:{...(ne=M.parameters)==null?void 0:ne.docs,source:{originalSource:`() => {
  return <StoryBlock title="MultiSelect variations">
      <StoryPart title="Default">
        <EditableMultiSelect />
      </StoryPart>

      <StoryPart title="Without groups">
        <EditableMultiSelect enableGroups={false} />
      </StoryPart>

      <StoryPart title="Disabled">
        <EditableMultiSelect disabled={true} />
      </StoryPart>

      <StoryPart title="Disabled with a value">
        <EditableMultiSelect disabled={true} initialValues={["charlotte"]} />
      </StoryPart>

      <StoryPart title="Without any option">
        <EditableMultiSelect items={[]} />
      </StoryPart>
    </StoryBlock>;
}`,...(le=(oe=M.parameters)==null?void 0:oe.docs)==null?void 0:le.source}}};var se,ie,ue;L.parameters={...L.parameters,docs:{...(se=L.parameters)==null?void 0:se.docs,source:{originalSource:`() => {
  return <StoryBlock title="MultiSelect colors">
      {Object.keys(colors).map(color => <StoryPart key={color} title={color}>
          <EditableMultiSelect color={color as ColorVariants} />
        </StoryPart>)}
    </StoryBlock>;
}`,...(ue=(ie=L.parameters)==null?void 0:ie.docs)==null?void 0:ue.source}}};const ut=["Variations","Colors"];export{L as Colors,M as Variations,ut as __namedExportsOrder,it as default};
//# sourceMappingURL=MultiSelect.stories-BMqD1TUM.js.map
