import{j as e,h as de,V as K,s as U,c as t,i as z,y as me,m as pe,p as Z,B as H,I as _,n as ye,S as D,T as B,t as P,b as ee,d as re,r as ge}from"./ScrollView-CdYh8F1p.js";import{r as l}from"./iframe-EA0hdwUm.js";import{u as fe}from"./useBoolean-CXDroY-E.js";import{u as be}from"./useDisclosure-Bw77-rfT.js";import{g as he}from"./array-BfAlyugE.js";import{s as Se}from"./string-CdK-oQnb.js";import{P as xe,F as ve}from"./Popover-BPiTRqTk.js";import{I as Te}from"./InputError-7tOU3njC.js";import{a as we}from"./Pressable-Co-IoQjx.js";import{T as te}from"./Tag-DJ8N-meE.js";import{T as je}from"./index-DfEjE0S4.js";import{M as $}from"./index-B4q2O5MP.js";import{S as ne,a as I}from"./_StoriesComponents-HqVIY_Tu.js";import"./index-CHHTxe1D.js";import"./preload-helper-D1IIBeq1.js";import"./useResponsive-BViRpSp3.js";import"./function-CCwB4Sau.js";import"./BottomPanel-MMFJs2MY.js";import"./commonStyles-BBEkV6IC.js";import"./useBodyClassName-CVfWNeNp.js";import"./FocusTrap-B83D_L2P.js";import"./Suspendable-Dt2Gucws.js";import"./index-GND1P5_g.js";import"./extends-CF3RwP-h.js";import"./TransitionView-D34fxdxY.js";import"./Separator-DhLvnsse.js";const ke=U.create({scrollTracker:{position:"absolute",pointerEvents:"none",right:0,bottom:0}}),oe=({ref:n,ItemSeparatorComponent:i,ListEmptyComponent:d,ListFooterComponent:f,ListHeaderComponent:j,contentContainerStyle:c,horizontal:u=!1,keyExtractor:m,onEndReached:k,onEndReachedThresholdPx:b=200,onKeyDown:h,onScroll:s,renderItem:S,renderSectionHeader:p,role:L,scrollEventThrottle:R=16,sections:x,showsScrollIndicators:q=!0,style:V})=>{const N=l.useId(),y=l.useRef(null),G=u?{top:0,width:b}:{left:0,height:b};return l.useEffect(()=>{const g=y.current;if(g!=null){const v=new IntersectionObserver(T=>{T.forEach(F=>{F.isIntersecting&&k?.()})});return v.observe(g),()=>{v.unobserve(g)}}},[x.length]),e.jsxs(de,{contentContainerStyle:c,horizontal:u,onKeyDown:h,onScroll:s,ref:n,role:L,scrollEventThrottle:R,showsScrollIndicators:q,style:V,children:[j,x.length<=0?d:x.map(g=>e.jsxs(l.Fragment,{children:[p?.(g),g.data.map((v,T)=>e.jsxs(l.Fragment,{children:[T!==0&&i,S({item:v,index:T})]},m(v,T)))]},`group-${N}-${g.title}`)),f,e.jsx(K,{role:"none",ref:y,style:[ke.scrollTracker,G]})]})};oe.__docgenInfo={description:"",methods:[],displayName:"SectionList",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:`{
  element: HTMLElement | null;
  scrollTo: (event: { x?: number; y?: number; animated?: boolean }) => void;
}`,signature:{properties:[{key:"element",value:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}],required:!0}},{key:"scrollTo",value:{name:"signature",type:"function",raw:"(event: { x?: number; y?: number; animated?: boolean }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ x?: number; y?: number; animated?: boolean }",signature:{properties:[{key:"x",value:{name:"number",required:!1}},{key:"y",value:{name:"number",required:!1}},{key:"animated",value:{name:"boolean",required:!1}}]}},name:"event"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<SectionListRef>"},description:""},ItemSeparatorComponent:{required:!1,tsType:{name:"ReactNode"},description:""},ListEmptyComponent:{required:!1,tsType:{name:"ReactNode"},description:""},ListFooterComponent:{required:!1,tsType:{name:"ReactNode"},description:""},ListHeaderComponent:{required:!1,tsType:{name:"ReactNode"},description:""},contentContainerStyle:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""},horizontal:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},keyExtractor:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: T, index: number) => string",signature:{arguments:[{type:{name:"T"},name:"item"},{type:{name:"number"},name:"index"}],return:{name:"string"}}},description:""},onEndReached:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onEndReachedThresholdPx:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"200",computed:!1}},onKeyDown:{required:!1,tsType:{name:'intersection["onKeyDown"]',raw:'ScrollViewProps["onKeyDown"]'},description:""},onScroll:{required:!1,tsType:{name:'intersection["onScroll"]',raw:'ScrollViewProps["onScroll"]'},description:""},renderItem:{required:!0,tsType:{name:"signature",type:"function",raw:"(info: ListRenderItemInfo<T>) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  item: T;
  index: number;
}`,signature:{properties:[{key:"item",value:{name:"T",required:!0}},{key:"index",value:{name:"number",required:!0}}]}},name:"info"}],return:{name:"ReactNode"}}},description:""},renderSectionHeader:{required:!1,tsType:{name:"signature",type:"function",raw:"(section: Section<T>) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  title: string;
  data: T[];
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"data",value:{name:"Array",elements:[{name:"T"}],raw:"T[]",required:!0}}]}},name:"section"}],return:{name:"ReactNode"}}},description:""},role:{required:!1,tsType:{name:"WebRole"},description:""},scrollEventThrottle:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"16",computed:!1}},sections:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  title: string;
  data: T[];
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"data",value:{name:"Array",elements:[{name:"T"}],raw:"T[]",required:!0}}]}}],raw:"Section<T>[]"},description:""},showsScrollIndicators:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},style:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""}}};const qe=120,Ie=32,Ce=10.5,a=U.create({base:{...P.regular,backgroundColor:ee.accented,borderColor:t.gray[100],borderRadius:ge[6],borderWidth:1,cursor:"default",overflow:"hidden",transitionDuration:"150ms",transitionProperty:"border-color, box-shadow"},errored:{borderColor:t.negative[500]},tag:{marginRight:4,marginVertical:2},hovered:{boxShadow:re.tile},focused:{borderColor:t.gray[500],boxShadow:re.tile,outlineStyle:"none"},disabled:{backgroundColor:t.gray[50],borderColor:t.gray[100],cursor:"not-allowed"},actions:{marginVertical:"auto",position:"absolute",bottom:0,top:0,right:20},placeholder:{...P.regular,color:t.gray[300],userSelect:"none"},list:{marginVertical:4,maxHeight:Ie*Ce,minHeight:224},filterContainer:{flexGrow:1,flexShrink:1,margin:16},filterInput:{...P.regular,backgroundColor:ee.accented,borderColor:t.gray[100],borderRadius:4,borderWidth:1,flexGrow:1,flexShrink:1,height:40,outlineStyle:"none",paddingHorizontal:12,paddingLeft:40,placeholderTextColor:t.gray[300]},filterFocused:{borderColor:t.gray[200]},searchIcon:{position:"absolute",left:14},tagsList:{flexWrap:"wrap",maxHeight:qe,minHeight:40,overflowY:"auto",paddingHorizontal:16,paddingRight:60,paddingVertical:8},groupTitleBase:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,justifyContent:"space-between",paddingHorizontal:16,paddingVertical:12,transitionDuration:"200ms",transitionProperty:"background-color"},groupTitle:{...P.semibold,userSelect:"none"},line:{...P.regular,paddingHorizontal:16,paddingVertical:8,transitionDuration:"200ms",transitionProperty:"background-color",userSelect:"none"},lineInGroup:{paddingLeft:24},emptyList:{height:136},emptyListText:{color:t.gray.primary}}),Y=({color:n="gray",disabled:i=!1,emptyResultText:d,enableGroups:f=!0,filterPlaceholder:j,items:c,onValueChange:u,placeholder:m,renderTagGroup:k,error:b,style:h,values:s,id:S})=>{const[p,L]=l.useState(""),[R,x]=fe(!1),q=l.useRef(!1),V=l.useRef(null),N=l.useRef(null),[y,{open:G,close:g}]=be(!1),v=t[n][50],T=t[n][100];l.useEffect(()=>{y||L("")},[y]),l.useEffect(()=>{if(q.current){const r=V.current?.scrollHeight;V.current?.scrollTo({top:r})}q.current=!1},[s]);const F=r=>{q.current=!0,u([...s,r.value])},le=r=>{u(s.filter(o=>o!==r.value))},se=()=>{u([])},ie=r=>{q.current=!0;const o=r.map(O=>O.value),w=[...new Set([...s,...o])];u(w)},X=l.useMemo(()=>{const r=new Map;return c.forEach(o=>{r.set(o.value,o)}),r},[c]),A=l.useMemo(()=>s.map(r=>X.get(r)).filter(z),[s,X]),W=l.useMemo(()=>{const r=c.filter(w=>!s.includes(w.value)),o=p.trim().toLowerCase();return o===""?r:r.filter(({label:w})=>w.toLowerCase().includes(o))},[p,c,s]),ue=l.useMemo(()=>me.filterMap(pe.entries(he(W,({group:r})=>r)),([r,o])=>o===void 0?Z.None():Z.Some({title:r,data:o})),[W]),J=l.useMemo(()=>e.jsxs(H,{direction:"row",alignItems:"center",style:a.filterContainer,children:[e.jsx(je,{autoComplete:"off",inputMode:"search",multiline:!1,rows:1,onChangeText:r=>L(r),placeholder:j,value:p,onFocus:x.on,onBlur:x.off,style:[a.filterInput,R&&a.filterFocused]}),e.jsx(_,{name:"search-filled",color:t[n].primary,size:20,style:a.searchIcon})]}),[p,R,x,j,n]),Q=l.useMemo(()=>e.jsxs(H,{justifyContent:"center",alignItems:"center",style:a.emptyList,children:[e.jsx(_,{name:"clipboard-search-regular",size:24,color:t.gray.primary}),ye(d)&&e.jsxs(e.Fragment,{children:[e.jsx(D,{height:8}),e.jsx(B,{style:a.emptyListText,children:d})]})]}),[d]);return e.jsxs(K,{style:h,children:[e.jsxs($,{id:S,ref:N,"aria-haspopup":"listbox","aria-expanded":y,disabled:i,onPress:G,style:({hovered:r,focused:o})=>[a.base,r&&a.hovered,(o||y)&&a.focused,i&&a.disabled,z(b)&&a.errored],children:[e.jsx(H,{ref:V,alignItems:"center",direction:"row",style:a.tagsList,children:A.length>0?A.map(r=>e.jsx(te,{color:n,onPressRemove:i?void 0:()=>le(r),style:a.tag,children:r.label},String(r.value))):m!==""?e.jsx(B,{role:"label",numberOfLines:1,style:a.placeholder,children:m}):null}),e.jsxs(H,{direction:"row",alignItems:"center",style:a.actions,children:[A.length>=1&&!i&&e.jsxs(e.Fragment,{children:[e.jsx($,{role:"button",onPress:se,children:e.jsx(_,{name:"dismiss-filled",color:t.gray.primary,size:15})}),e.jsx(D,{width:8})]}),e.jsx(_,{color:t.gray.primary,name:y?"chevron-up-filled":"chevron-down-filled",size:20})]})]}),e.jsx(xe,{role:"listbox",matchReferenceWidth:!0,onDismiss:g,referenceRef:N,returnFocus:!0,visible:y,children:e.jsx(K,{style:a.list,children:f?e.jsx(oe,{role:"listbox","aria-multiselectable":!0,keyExtractor:(r,o)=>`group-field-${String(r.value)}-${o}`,ListHeaderComponent:J,ListEmptyComponent:Q,ListFooterComponent:e.jsx(D,{height:16}),sections:ue,renderSectionHeader:({title:r,data:o})=>e.jsxs($,{role:"listitem",onPress:()=>ie(o),style:({hovered:w,pressed:O,focused:ce})=>[a.groupTitleBase,(w||ce)&&{backgroundColor:v},O&&{backgroundColor:T}],children:[e.jsx(B,{numberOfLines:1,style:a.groupTitle,children:r}),z(k)&&e.jsx(te,{color:n,children:k(o)})]}),renderItem:({item:r})=>e.jsx(ae,{color:n,filter:p,item:r,handleSelectItem:F,style:a.lineInGroup})}):e.jsx(ve,{role:"list",data:W,keyExtractor:r=>`field-${String(r.value)}`,ListHeaderComponent:J,ListEmptyComponent:Q,ListFooterComponent:e.jsx(D,{height:8}),renderItem:({item:r})=>e.jsx(ae,{color:n,filter:p,item:r,handleSelectItem:F})})})}),e.jsx(Te,{message:b})]})},ae=({item:n,color:i,filter:d,handleSelectItem:f,style:j})=>{const{label:c,disabled:u=!1}=n,m=d.trim().toLowerCase(),k=t[i][50],b=t[i][100],h=l.useMemo(()=>u||m===""?c:Se(c,m),[c,u,m]);return e.jsx(we,{role:"listitem",disabled:u,numberOfLines:1,onPress:()=>f(n),style:({hovered:s,pressed:S})=>[a.line,j,s&&{backgroundColor:k},S&&{backgroundColor:b},u&&{backgroundColor:t.gray[50],color:t.gray[100]}],children:typeof h=="string"?h:h.map((s,S)=>s.toLowerCase()===m?e.jsx(B,{style:{color:i},children:s},S):s)})};Y.__docgenInfo={description:"",methods:[],displayName:"MultiSelect",props:{color:{required:!1,tsType:{name:"union",raw:"keyof typeof colors",elements:[{name:"literal",value:"gray"},{name:"literal",value:"live"},{name:"literal",value:"sandbox"},{name:"literal",value:"positive"},{name:"literal",value:"warning"},{name:"literal",value:"negative"},{name:"literal",value:"current"},{name:"literal",value:"partner"},{name:"literal",value:"swan"},{name:"literal",value:"shakespear"},{name:"literal",value:"darkPink"},{name:"literal",value:"sunglow"},{name:"literal",value:"mediumSladeBlue"}]},description:"",defaultValue:{value:'"gray"',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},error:{required:!1,tsType:{name:"string"},description:""},emptyResultText:{required:!1,tsType:{name:"string"},description:""},enableGroups:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},filterPlaceholder:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  disabled?: boolean;
  group: string;
  label: string;
  value: Value;
}`,signature:{properties:[{key:"disabled",value:{name:"boolean",required:!1}},{key:"group",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"Value",required:!0}}]}}],raw:"MultiSelectItem<Value>[]"},description:""},onValueChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(values: Value[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Value"}],raw:"Value[]"},name:"values"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},renderTagGroup:{required:!1,tsType:{name:"signature",type:"function",raw:"(items: readonly MultiSelectItem<Value>[]) => string",signature:{arguments:[{type:{name:"unknown"},name:"items"}],return:{name:"string"}}},description:""},style:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""},values:{required:!0,tsType:{name:"Array",elements:[{name:"Value"}],raw:"Value[]"},description:""},id:{required:!1,tsType:{name:"string"},description:""}}};const Ve=U.create({select:{maxWidth:400}}),ar={title:"Forms/MultiSelect",component:Y},Pe=[{label:"Camille",value:"camille",group:"C"},{label:"Charlotte",value:"charlotte",group:"C"},{label:"Francis",value:"francis",group:"F"},{label:"Émilie",value:"emilie",group:"E"},{label:"François",value:"francois",group:"F"},{label:"Laura",value:"laura",group:"L"},{label:"Marie-Anne",value:"marie_anne",group:"M"},{label:"Natasha",value:"natasha",group:"N",disabled:!0},{label:"Nicolas",value:"nicolas",group:"N"},{label:"Pierre",value:"pierre",group:"P"}],C=({initialValues:n=[],...i})=>{const[d,f]=l.useState(n);return e.jsx(Y,{placeholder:"Select people...",filterPlaceholder:"Search...",emptyResultText:"No result",values:d,items:Pe,onValueChange:f,style:Ve.select,...i})},M=()=>e.jsxs(ne,{title:"MultiSelect variations",children:[e.jsx(I,{title:"Default",children:e.jsx(C,{})}),e.jsx(I,{title:"Without groups",children:e.jsx(C,{enableGroups:!1})}),e.jsx(I,{title:"Disabled",children:e.jsx(C,{disabled:!0})}),e.jsx(I,{title:"Disabled with a value",children:e.jsx(C,{disabled:!0,initialValues:["charlotte"]})}),e.jsx(I,{title:"Without any option",children:e.jsx(C,{items:[]})})]}),E=()=>e.jsx(ne,{title:"MultiSelect colors",children:Object.keys(t).map(n=>e.jsx(I,{title:n,children:e.jsx(C,{color:n})},n))});M.__docgenInfo={description:"",methods:[],displayName:"Variations"};E.__docgenInfo={description:"",methods:[],displayName:"Colors"};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`() => {
  return <StoryBlock title="MultiSelect variations">
      <StoryPart title="Default">
        <EditableMultiSelect />
      </StoryPart>

      <StoryPart title="Without groups">
        <EditableMultiSelect enableGroups={false} />
      </StoryPart>

      <StoryPart title="Disabled">
        <EditableMultiSelect disabled={true} />
      </StoryPart>

      <StoryPart title="Disabled with a value">
        <EditableMultiSelect disabled={true} initialValues={["charlotte"]} />
      </StoryPart>

      <StoryPart title="Without any option">
        <EditableMultiSelect items={[]} />
      </StoryPart>
    </StoryBlock>;
}`,...M.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`() => {
  return <StoryBlock title="MultiSelect colors">
      {Object.keys(colors).map(color => <StoryPart key={color} title={color}>
          <EditableMultiSelect color={color as ColorVariants} />
        </StoryPart>)}
    </StoryBlock>;
}`,...E.parameters?.docs?.source}}};const nr=["Variations","Colors"];export{E as Colors,M as Variations,nr as __namedExportsOrder,ar as default};
//# sourceMappingURL=MultiSelect.stories-CovEZtn7.js.map
