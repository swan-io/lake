{"version":3,"file":"placekit-b76d53c8.js","sources":["../../../node_modules/@placekit/client-js/dist/placekit-lite.js","../../../node_modules/@placekit/client-js/dist/placekit.js"],"sourcesContent":["/*! @placekit/client-js v2.0.0 | © placekit.io | MIT license | https://github.com/placekit/client-js#readme */\nconst extensions = new Map();\nfunction getUserAgent() {\n  const chunks = [];\n  if (typeof window !== 'undefined' && navigator.userAgent) {\n    chunks.push(navigator.userAgent);\n  }\n  chunks.push(`PlaceKit/2.0.0 (Client=JavaScript)`);\n  if (typeof process !== 'undefined' && process.version) {\n    chunks.push(`NodeJS/${process.version}`);\n  }\n  return chunks.join(' ');\n}\nfunction placekit(apiKey, options = {}) {\n  if (!['string', 'undefined'].includes(typeof apiKey)) {\n    throw Error('PlaceKit: `apiKey` argument is invalid, expected a string.');\n  } else if (!apiKey) {\n    console.warn('PlaceKit: missing or empty `apiKey` argument.');\n  }\n  let currentHost = 0;\n  const hosts = [\n    `https://api.placekit.co`,\n  ];\n  let hasGeolocation = false;\n  const globalParams = {\n    maxResults: 5,\n  };\n  if (typeof window !== 'undefined' && navigator.language) {\n    globalParams.language = navigator.language.slice(0, 2);\n  }\n  const userAgent = getUserAgent();\n  function request(method = 'POST', resource = '', opts = {}) {\n    const { timeout, forwardIP, ...params } = opts;\n    const controller = new AbortController();\n    const id = typeof timeout !== 'undefined' ? setTimeout(() => controller.abort(), timeout) : undefined;\n    const url = new URL(resource.trim().replace(/^\\/+/, ''), hosts[currentHost]);\n    const headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n      'User-Agent': userAgent,\n      'x-placekit-api-key': apiKey,\n    };\n    if (forwardIP) {\n      headers['x-forwarded-for'] = forwardIP;\n    }\n    return fetch(url, {\n      method,\n      headers,\n      signal: controller.signal,\n      body: JSON.stringify(params),\n    }).then(async (res) => {\n      clearTimeout(id);\n      const body = await res.json();\n      if (!res.ok) {\n        throw ({\n          status: res.status,\n          statusText: res.statusText,\n          ...body,\n        });\n      }\n      return body;\n    }).catch((err) => {\n      if (err.name === 'AbortError' || (err.status && err.status >= 500)) {\n        currentHost++;\n        if (currentHost < hosts.length-1) {\n          return request(method, resource, opts);\n        }\n      }\n      throw err;\n    });\n  }  const client = {\n    get options() {\n      return globalParams;\n    },\n    get hasGeolocation() {\n      return hasGeolocation;\n    },\n    configure(opts = {}) {\n      if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n        throw Error('PlaceKit.configure: `opts` argument is invalid, expected an object.');\n      }\n      Object.assign(globalParams, opts);\n    },\n    requestGeolocation(opts = {}) {\n      if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n        throw Error('PlaceKit.requestGeolocation: `opts` argument is invalid, expected an object.');\n      }\n      return new Promise((resolve, reject) => {\n        if (typeof window === 'undefined' || !navigator.geolocation) {\n          reject(Error('PlaceKit.requestGeolocation: geolocation is only available in the browser.'));\n        } else {\n          navigator.geolocation.getCurrentPosition(\n            (pos) => {\n              hasGeolocation = true;\n              globalParams.coordinates = `${pos.coords.latitude},${pos.coords.longitude}`;\n              resolve(pos);\n            },\n            (err) => {\n              hasGeolocation = false;\n              delete globalParams.coordinates;\n              reject(Error(`PlaceKit.requestGeolocation: (${err.code}) ${err.message}`));\n            },\n            opts\n          );\n        }\n      });\n    },\n    clearGeolocation() {\n      hasGeolocation = false;\n      delete globalParams.coordinates;\n    },\n  };\n  for (const [resource, init] of extensions.entries()) {\n    if (resource in client) {\n      throw Error(`PlaceKit extend: \\`client.${resource}\\` already exists.`);\n    }\n    client[resource] = init(request, client);\n  }\n  client.configure(options);\n  return client;\n}\nplacekit.extend = function(resource, init) {\n  if (!init?.call) {\n    throw Error('PlaceKit extend: `init` argument is invalid, expected a function.');\n  }\n  extensions.set(resource, init);\n};\nplacekit.extend('search', (request, client) => (query, opts = {}) => {\n  if (!['string', 'undefined'].includes(typeof query)) {\n    throw Error('PlaceKit `client.search`: `query` argument is invalid, expected a string.');\n  }\n  if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n    throw Error('PlaceKit.search: `opts` argument is invalid, expected an object.');\n  }\n  return request('POST', 'search', {\n    ...client.options,\n    ...opts,\n    query,\n  });\n});\nplacekit.extend('reverse', (request, client) => (opts = {}) => {\n  if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n    throw Error('PlaceKit.reverse: `opts` argument is invalid, expected an object.');\n  }\n  return request('POST', 'reverse', {\n    ...client.options,\n    ...opts,\n  });\n});\n\nexport { placekit as default };\n","/*! @placekit/client-js v2.0.0 | © placekit.io | MIT license | https://github.com/placekit/client-js#readme */\nimport placekit from './placekit-lite.js';\n\nplacekit.extend('patch', (request) => ({\n  list(opts = {}) {\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.list: `opts` argument is invalid, expected an object.');\n    }\n    return request('POST', `patch/search`, opts);\n  },\n  create(update, opts = {}, origin) {\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.create: `opts` argument is invalid, expected an object.');\n    }\n    const method = typeof origin === 'undefined' ? 'POST' : 'PUT';\n    const data = typeof origin === 'undefined' ? { record: update } : {\n      origin,\n      update,\n    };\n    return request(method, 'patch', {\n      ...data,\n      status: opts?.status,\n      language: opts?.language,\n    });\n  },\n  get(id, language) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.get: `id` argument is invalid, expected a string.');\n    }\n    if (!['string', 'undefined'].includes(typeof language)) {\n      throw Error('PlaceKit.patch.get: `language` argument is invalid, expected a string.');\n    }\n    return request('GET', `patch/${id}`, {\n      params: {\n        language,\n      },\n    });\n  },\n  update(id, update, opts = {}) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.update: `id` argument is invalid, expected a string.');\n    }\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.update: `opts` argument is invalid, expected an object.');\n    }\n    return request('PATCH', `patch/${id}`, {\n      update,\n      status: opts?.status,\n      language: opts?.language,\n    });\n  },\n  delete(id) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.delete: `id` argument is invalid, expected a string.');\n    }\n    return request('DELETE', `patch/${id}`);\n  },\n  deleteLang(id, language) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.deleteLang: `id` argument is invalid, expected a string.');\n    }\n    if (typeof language !== 'string' || !language) {\n      throw Error('PlaceKit.patch.deleteLang: `language` argument is invalid, expected a string.');\n    }\n    return request('DELETE', `patch/${id}/language/${language}`);\n  },\n}));\n\nexport { placekit as default };\n"],"names":["extensions","getUserAgent","chunks","placekit","apiKey","options","currentHost","hosts","hasGeolocation","globalParams","userAgent","request","method","resource","opts","timeout","forwardIP","params","controller","id","url","headers","res","body","err","client","resolve","reject","pos","init","query","update","origin","language"],"mappings":"AAAA,8GACA,MAAMA,EAAa,IAAI,IACvB,SAASC,GAAe,CACtB,MAAMC,EAAS,CAAA,EACf,OAAI,OAAO,OAAW,KAAe,UAAU,WAC7CA,EAAO,KAAK,UAAU,SAAS,EAEjCA,EAAO,KAAK,oCAAoC,EAC5C,OAAO,QAAY,KAAe,QAAQ,SAC5CA,EAAO,KAAK,UAAU,QAAQ,OAAO,EAAE,EAElCA,EAAO,KAAK,GAAG,CACxB,CACA,SAASC,EAASC,EAAQC,EAAU,GAAI,CACtC,GAAK,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOD,CAAM,EAEvCA,GACV,QAAQ,KAAK,+CAA+C,MAF5D,OAAM,MAAM,4DAA4D,EAI1E,IAAIE,EAAc,EAClB,MAAMC,EAAQ,CACZ,yBACJ,EACE,IAAIC,EAAiB,GACrB,MAAMC,EAAe,CACnB,WAAY,CAChB,EACM,OAAO,OAAW,KAAe,UAAU,WAC7CA,EAAa,SAAW,UAAU,SAAS,MAAM,EAAG,CAAC,GAEvD,MAAMC,EAAYT,IAClB,SAASU,EAAQC,EAAS,OAAQC,EAAW,GAAIC,EAAO,GAAI,CAC1D,KAAM,CAAE,QAAAC,EAAS,UAAAC,EAAW,GAAGC,CAAM,EAAKH,EACpCI,EAAa,IAAI,gBACjBC,EAAK,OAAOJ,EAAY,IAAc,WAAW,IAAMG,EAAW,MAAO,EAAEH,CAAO,EAAI,OACtFK,EAAM,IAAI,IAAIP,EAAS,KAAM,EAAC,QAAQ,OAAQ,EAAE,EAAGN,EAAMD,CAAW,CAAC,EACrEe,EAAU,CACd,eAAgB,kCAChB,aAAcX,EACd,qBAAsBN,CAC5B,EACI,OAAIY,IACFK,EAAQ,iBAAiB,EAAIL,GAExB,MAAMI,EAAK,CAChB,OAAAR,EACA,QAAAS,EACA,OAAQH,EAAW,OACnB,KAAM,KAAK,UAAUD,CAAM,CACjC,CAAK,EAAE,KAAK,MAAOK,GAAQ,CACrB,aAAaH,CAAE,EACf,MAAMI,EAAO,MAAMD,EAAI,OACvB,GAAI,CAACA,EAAI,GACP,KAAO,CACL,OAAQA,EAAI,OACZ,WAAYA,EAAI,WAChB,GAAGC,CACb,EAEM,OAAOA,CACb,CAAK,EAAE,MAAOC,GAAQ,CAChB,IAAIA,EAAI,OAAS,cAAiBA,EAAI,QAAUA,EAAI,QAAU,OAC5DlB,IACIA,EAAcC,EAAM,OAAO,GAC7B,OAAOI,EAAQC,EAAQC,EAAUC,CAAI,EAGzC,MAAMU,CACZ,CAAK,CACF,CAAE,MAAMC,EAAS,CAChB,IAAI,SAAU,CACZ,OAAOhB,CACR,EACD,IAAI,gBAAiB,CACnB,OAAOD,CACR,EACD,UAAUM,EAAO,GAAI,CACnB,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOA,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,qEAAqE,EAEnF,OAAO,OAAOL,EAAcK,CAAI,CACjC,EACD,mBAAmBA,EAAO,GAAI,CAC5B,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOA,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,8EAA8E,EAE5F,OAAO,IAAI,QAAQ,CAACY,EAASC,IAAW,CAClC,OAAO,OAAW,KAAe,CAAC,UAAU,YAC9CA,EAAO,MAAM,4EAA4E,CAAC,EAE1F,UAAU,YAAY,mBACnBC,GAAQ,CACPpB,EAAiB,GACjBC,EAAa,YAAc,GAAGmB,EAAI,OAAO,QAAQ,IAAIA,EAAI,OAAO,SAAS,GACzEF,EAAQE,CAAG,CACZ,EACAJ,GAAQ,CACPhB,EAAiB,GACjB,OAAOC,EAAa,YACpBkB,EAAO,MAAM,iCAAiCH,EAAI,IAAI,KAAKA,EAAI,OAAO,EAAE,CAAC,CAC1E,EACDV,CACZ,CAEA,CAAO,CACF,EACD,kBAAmB,CACjBN,EAAiB,GACjB,OAAOC,EAAa,WACrB,CACL,EACE,SAAW,CAACI,EAAUgB,CAAI,IAAK7B,EAAW,QAAO,EAAI,CACnD,GAAIa,KAAYY,EACd,MAAM,MAAM,6BAA6BZ,CAAQ,oBAAoB,EAEvEY,EAAOZ,CAAQ,EAAIgB,EAAKlB,EAASc,CAAM,CACxC,CACD,OAAAA,EAAO,UAAUpB,CAAO,EACjBoB,CACT,CACAtB,EAAS,OAAS,SAASU,EAAUgB,EAAM,CACzC,GAAI,EAACA,GAAA,MAAAA,EAAM,MACT,MAAM,MAAM,mEAAmE,EAEjF7B,EAAW,IAAIa,EAAUgB,CAAI,CAC/B,EACA1B,EAAS,OAAO,SAAU,CAACQ,EAASc,IAAW,CAACK,EAAOhB,EAAO,KAAO,CACnE,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOgB,CAAK,EAChD,MAAM,MAAM,2EAA2E,EAEzF,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOhB,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,kEAAkE,EAEhF,OAAOH,EAAQ,OAAQ,SAAU,CAC/B,GAAGc,EAAO,QACV,GAAGX,EACH,MAAAgB,CACJ,CAAG,CACH,CAAC,EACD3B,EAAS,OAAO,UAAW,CAACQ,EAASc,IAAW,CAACX,EAAO,KAAO,CAC7D,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOA,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,mEAAmE,EAEjF,OAAOH,EAAQ,OAAQ,UAAW,CAChC,GAAGc,EAAO,QACV,GAAGX,CACP,CAAG,CACH,CAAC,ECnJD,8GAGAX,EAAS,OAAO,QAAUQ,IAAa,CACrC,KAAKG,EAAO,GAAI,CACd,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOA,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,sEAAsE,EAEpF,OAAOH,EAAQ,OAAQ,eAAgBG,CAAI,CAC5C,EACD,OAAOiB,EAAQjB,EAAO,CAAA,EAAIkB,EAAQ,CAChC,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOlB,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,wEAAwE,EAOtF,OAAOH,EALQ,OAAOqB,EAAW,IAAc,OAAS,MAKjC,QAAS,CAC9B,GALW,OAAOA,EAAW,IAAc,CAAE,OAAQD,GAAW,CAChE,OAAAC,EACA,OAAAD,CACN,EAGM,OAAQjB,GAAA,YAAAA,EAAM,OACd,SAAUA,GAAA,YAAAA,EAAM,QACtB,CAAK,CACF,EACD,IAAIK,EAAIc,EAAU,CAChB,GAAI,OAAOd,GAAO,UAAY,CAACA,EAC7B,MAAM,MAAM,kEAAkE,EAEhF,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOc,CAAQ,EACnD,MAAM,MAAM,wEAAwE,EAEtF,OAAOtB,EAAQ,MAAO,SAASQ,CAAE,GAAI,CACnC,OAAQ,CACN,SAAAc,CACD,CACP,CAAK,CACF,EACD,OAAOd,EAAIY,EAAQjB,EAAO,CAAA,EAAI,CAC5B,GAAI,OAAOK,GAAO,UAAY,CAACA,EAC7B,MAAM,MAAM,qEAAqE,EAEnF,GAAI,CAAC,CAAC,SAAU,WAAW,EAAE,SAAS,OAAOL,CAAI,GAAK,MAAM,QAAQA,CAAI,GAAKA,IAAS,KACpF,MAAM,MAAM,wEAAwE,EAEtF,OAAOH,EAAQ,QAAS,SAASQ,CAAE,GAAI,CACrC,OAAAY,EACA,OAAQjB,GAAA,YAAAA,EAAM,OACd,SAAUA,GAAA,YAAAA,EAAM,QACtB,CAAK,CACF,EACD,OAAOK,EAAI,CACT,GAAI,OAAOA,GAAO,UAAY,CAACA,EAC7B,MAAM,MAAM,qEAAqE,EAEnF,OAAOR,EAAQ,SAAU,SAASQ,CAAE,EAAE,CACvC,EACD,WAAWA,EAAIc,EAAU,CACvB,GAAI,OAAOd,GAAO,UAAY,CAACA,EAC7B,MAAM,MAAM,yEAAyE,EAEvF,GAAI,OAAOc,GAAa,UAAY,CAACA,EACnC,MAAM,MAAM,+EAA+E,EAE7F,OAAOtB,EAAQ,SAAU,SAASQ,CAAE,aAAac,CAAQ,EAAE,CAC5D,CACH,EAAE","x_google_ignoreList":[0,1]}