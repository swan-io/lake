import{S as ae,c as d,f as ee,t as Q,r as te,e as D,s as se,n as ce,h as ue,d as s,j as p,V as K,a as e,T as S,b,p as de,F as j,L as pe}from"./Space-10c0535d.js";import{K as he}from"./index-b1631bd3.js";import{r as o}from"./index-ebeaab24.js";import{K as fe,S as M,B as me}from"./index-33d543aa.js";import{u as ie,a as we}from"./useMergeRefs-1578fbfc.js";import{n as ge}from"./function-fbf93c31.js";import{F as ye}from"./FocusTrap-2cf0eb49.js";import{I as $}from"./Icon-a62b9fe2.js";import{L as Z}from"./Link-3ac003f5.js";import{a as be}from"./Pressable-d8a27403.js";import{T as Fe}from"./TransitionView-1fbfd49f.js";import{S as ke}from"./_StoriesComponents-95aa232a.js";import"./extends-98964cd2.js";import"./with-selector-6c55c874.js";import"./index-1cb3eff1.js";import"./Boxed-dafb0729.js";import"./array-b3630b94.js";import"./Svg-e4713af8.js";const ve=40,r=ae.create({container:{borderBottomWidth:1,borderBottomColor:d.gray[100],backgroundColor:ee.default,zIndex:10},link:{...Q.medium,position:"relative",color:d.gray[700],height:ve,whiteSpace:"nowrap",display:"flex",flexDirection:"row",alignItems:"center"},activeLink:{color:d.current[500],boxShadow:`inset 0 -2px ${d.gray[700]}`},hoveredLink:{boxShadow:`inset 0 -2px ${d.gray[700]}`},underline:{position:"absolute",bottom:0,height:2,width:1,backgroundColor:d.current[500]},animatedUnderline:{transformOrigin:"0 0",transition:"200ms ease-in-out transform"},placeholder:{position:"absolute",top:0,left:0,right:0,visibility:"hidden",flexDirection:"row",alignItems:"flex-end",overflow:"hidden",pointerEvents:"none"},count:{...Q.smallRegular,color:d.current[500],backgroundColor:d.current[50],borderColor:d.current[100],borderWidth:1,borderRadius:te[4],paddingHorizontal:D[4],minWidth:D[24],display:"inline-block",textAlign:"center"},dropdownHandleContainer:{alignItems:"center",justifyContent:"center",alignSelf:"stretch"},dropdownPlacement:{position:"absolute",right:0,top:"100%"},dropdown:{position:"absolute",right:0,top:"100%",backgroundColor:ee.accented,borderRadius:te[8],boxShadow:se.modal,paddingVertical:D[8]},dropdownLink:{...Q.regular,paddingHorizontal:D[16],paddingVertical:D[8],whiteSpace:"nowrap"},dropdownLinkTextHovered:{backgroundColor:d.gray[50]},dropdownLinkTextActive:{boxShadow:`inset 3px 0 ${d.current.primary}`,color:d.current.primary},separator:{position:"absolute",top:0,left:ce[16],bottom:0,width:1,backgroundColor:d.gray[100]},sticky:{position:"sticky",top:-1}}),Te=({tabs:h,onHoverStart:R,onHoverEnd:I,onLinkFocus:A,onLinkBlur:F,onLinkPress:c})=>{const t=o.useRef(null);return ie(t,{onHoverStart:R,onHoverEnd:I}),e(K,{role:"menu",style:r.dropdown,ref:t,children:h.map(({url:g,label:v})=>e(Z,{to:g,onFocus:A,onBlur:F,onPress:c,role:"menuitem",ariaCurrentValue:"location",style:({active:f,hovered:T})=>[r.dropdownLink,f&&r.dropdownLinkTextActive,T&&r.dropdownLinkTextHovered],children:v},g))})},Ce=new Set(["ForcedOpen","OpenFromFocus"]),Se=new Set(["Open","ForcedOpen","OpenFromFocus"]),Le=new Set(["ForcedOpen"]),Oe=o.forwardRef(({tabs:h,otherLabel:R,currentUrl:I},A)=>{const[F,c]=o.useReducer((w,l)=>fe([l,w]).with(["ForceToggle","Closed"],["ForceToggle","Open"],["ForceToggle","ForcedClosed"],()=>"ForcedOpen").with(["ForceToggle","OpenFromFocus"],["ForceToggle","ForcedOpen"],()=>"ForcedClosed").with(["ForceClose",M.any],()=>"ForcedClosed").with(["FocusHandle","ForcedClosed"],()=>"Closed").with(["Open","ForcedOpen"],["FocusHandle","ForcedOpen"],["Close","ForcedOpen"],()=>"ForcedOpen").with(["Open",M.any],()=>"Open").with(["FocusHandle",M.any],()=>"OpenFromFocus").with(["Close",M.any],()=>"Closed").exhaustive(),"Closed"),t=o.useRef(void 0),g=o.useRef(null),v=o.useRef(null),f=o.useRef(null),{onHandleFocus:T,onLinkFocus:X,onAnyBlur:x,onHoverStart:B,onHoverEnd:U,onPress:Y,onPressOutside:q,onEscapeKey:L}=o.useMemo(()=>({onHandleFocus:w=>{if(ue(v.current))return;f.current=Date.now();const l=v.current,i=w;l.contains(i.relatedTarget)||(s(t.current)&&clearTimeout(t.current),c("FocusHandle"))},onLinkFocus:()=>{s(t.current)&&clearTimeout(t.current),c("Open")},onAnyBlur:()=>{s(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(()=>{c("Close")},300)},onHoverStart:()=>{s(t.current)&&clearTimeout(t.current),c("Open")},onHoverEnd:()=>{s(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(()=>{c("Close")},300)},onPress:()=>{f.current!=null&&Date.now()-f.current<32||(s(t.current)&&clearTimeout(t.current),c("ForceToggle"))},onPressOutside:w=>{s(g.current)&&g.current.contains(w.target)||(s(t.current)&&clearTimeout(t.current),c("ForceClose"),t.current=window.setTimeout(()=>{c("Close")},300))},onEscapeKey:()=>{s(t.current)&&clearTimeout(t.current),c("ForceClose"),t.current=window.setTimeout(()=>{c("Close")},300)}}),[]);o.useEffect(()=>()=>{s(t.current)&&clearTimeout(t.current)},[]);const _=Se.has(F),z=Ce.has(F),H=Le.has(F);ie(g,{onHoverStart:B,onHoverEnd:U});const E=we(v,A),P=h.find(({url:w})=>w===I);return p(K,{style:r.dropdownHandleContainer,ref:E,children:[p(be,{ref:g,role:"button","aria-expanded":_,"aria-haspopup":"true",onFocus:T,onBlur:x,onPress:Y,style:({hovered:w})=>[r.link,s(P)?r.activeLink:w?r.hoveredLink:null],children:[e(S,{children:R}),e(b,{width:8}),e(S,{style:r.count,children:h.length}),e(b,{width:4}),e($,{name:"chevron-down-filled",size:12})]}),e(Fe,{...de.fadeAndSlideInFromBottom,style:r.dropdownPlacement,children:_?e(ye,{autoFocus:z,focusLock:H,returnFocus:H,onClickOutside:q,onEscapeKey:H?L:void 0,children:e(Te,{tabs:h,onHoverStart:B,onHoverEnd:U,onLinkFocus:X,onLinkBlur:x,onLinkPress:L})}):null})]})}),G=({tabs:h,otherLabel:R,hideIfSingleItem:I=!0,sticky:A=!1,padding:F,style:c})=>{const t=o.useRef(null),g=o.useRef(null),v=o.useRef(null),f=o.useRef({}),T=o.useRef({}),[{left:X,width:x},B]=o.useState({left:0,width:0}),[U,Y]=o.useState(!1),[[q,L],_]=o.useState([[],[]]),z=he(),{path:H}=z,E=z.toString();o.useEffect(()=>{if(s(f.current)){const l=Object.entries(f.current),i=t.current;for(const[a,u]of l)if("/"+H.join("/")===a&&s(u)&&s(i)){u.measureLayout(i,(m,k,V)=>{B({left:m-(F??0),width:V})},ge);return}}B({left:0,width:0})},[H,q,L,F]),o.useEffect(()=>{Y(x>0)},[x]);const P=o.useCallback(({width:l})=>{const i=h.map(n=>{if(T.current){const y=T.current[n.url];if(s(y)){const J=y.getBoundingClientRect().width;return{tab:n,width:J+32}}else return{tab:n,width:0}}else return{tab:n,width:0}}),a=[],u=[];let m=0;i.forEach(n=>{if(m+=n.width,m<l)a.push({...n.tab,width:n.width});else if(E.startsWith(n.tab.url)){for(;a.length!==0&&a.reduce((y,C)=>y+C.width,0)+(n.width+16)>=l;){const y=a.pop();s(y)&&(u.unshift(y),m-=y.width)}a.push({...n.tab,width:n.width})}else u.push({...n.tab,width:n.width})});const k=v.current;let V=100;s(k)&&(V=k.getBoundingClientRect().width);const O=a.findIndex(n=>E.startsWith(n.url));if(O!==-1){const n=a[O],y=(n==null?void 0:n.width)??0,C=[...a.slice(0,O),...a.slice(O+1)];for(;C.length!==0&&C.reduce((W,le)=>W+le.width,0)+y+(u.length>=1?V:0)>=l;){const W=C.pop();s(W)&&u.unshift(W)}const J=[...C.slice(0,O),...n!=null?[n]:[],...C.slice(O)];_([J,u])}else _([a,u])},[h,E]),w=o.useCallback(({target:l,nativeEvent:{layout:{width:i}}})=>{P({container:l,width:i})},[P]);return o.useLayoutEffect(()=>{const l=g.current;if(l){const i=l,a=i.getBoundingClientRect().width;P({container:i,width:a})}},[P]),h.length<=1&&I?null:p(me,{alignItems:"center",direction:"row",role:"tablist",ref:t,style:[r.container,A&&r.sticky,{paddingHorizontal:F},c],children:[p(K,{style:r.placeholder,"aria-hidden":!0,ref:g,onLayout:w,children:[h.map(({label:l,url:i,icon:a,count:u})=>p(o.Fragment,{children:[p(Z,{ref:m=>{T.current&&(T.current[i]=m)},to:i,style:({active:m,hovered:k})=>[r.link,m?r.activeLink:k?r.hoveredLink:null],children:[s(a)&&p(j,{children:[e($,{name:a,size:16,color:"currentColor"}),e(b,{width:8})]}),e(S,{children:l}),u!=null?p(j,{children:[e(b,{width:8}),e(S,{style:r.count,children:u})]}):null]}),e(b,{width:32})]},i)),p(pe,{ref:v,style:r.link,children:[e(S,{children:R}),e(b,{width:8}),e(S,{style:r.count,children:h.length}),e(b,{width:4}),e($,{name:"chevron-down-filled",size:12})]})]}),q.map(({label:l,url:i,icon:a,withSeparator:u,count:m})=>p(o.Fragment,{children:[p(Z,{role:"tab",ref:k=>{f.current&&(f.current[i]=k)},to:i,style:({active:k,hovered:V})=>[r.link,k?r.activeLink:V?r.hoveredLink:null],children:[u===!0&&e(K,{style:r.separator,role:"none"}),s(a)&&p(j,{children:[e($,{name:a,size:16,color:"currentColor"}),e(b,{width:8})]}),e(S,{children:l}),m!=null?p(j,{children:[e(b,{width:8}),e(S,{style:r.count,children:m})]}):null]}),e(b,{width:32})]},i)),L.length>0?e(Oe,{ref:l=>{L.forEach(i=>{f.current&&(f.current[i.url]=l)})},tabs:L,currentUrl:E,otherLabel:R}):null,U&&e(K,{style:[r.underline,r.animatedUnderline,{transform:`translateX(${X}px) scaleX(${x})`}]})]})};try{G.displayName="TabView",G.__docgenInfo={description:"",displayName:"TabView",props:{tabs:{defaultValue:null,description:"",name:"tabs",required:!0,type:{name:"Tab[]"}},otherLabel:{defaultValue:null,description:"",name:"otherLabel",required:!0,type:{name:"string"}},hideIfSingleItem:{defaultValue:{value:"true"},description:"",name:"hideIfSingleItem",required:!1,type:{name:"boolean"}},padding:{defaultValue:null,description:"",name:"padding",required:!1,type:{name:"enum",value:[{value:"16"},{value:"4"},{value:"8"},{value:"12"},{value:"20"},{value:"24"},{value:"32"},{value:"40"},{value:"48"},{value:"72"},{value:"96"}]}},sticky:{defaultValue:{value:"false"},description:"",name:"sticky",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"StyleProp<ViewStyle>"}}}}}catch{}const Ne={title:"Interactivity/TabView",component:G},N=()=>e(ke,{title:"TabView",description:"You can reduce window's width to see behavior when there isn't enough space to display all tabs",children:e(G,{tabs:[{label:"SEPA Credit Transfers",url:"/simulator/sct",count:2},{label:"SEPA Direct Debits",url:"/simulator/sdd",icon:"building-regular"},{label:"Cards",url:"/simulator/cards",withSeparator:!0},{label:"Apple Pay/Google Pay",url:"/simulator/apple-pay-google-pay"},{label:"Account holders",url:"/simulator/account-holders"},{label:"Merchant acquiring",url:"/simulator/merchant-acquiring"}],otherLabel:"More"})});var re,oe,ne;N.parameters={...N.parameters,docs:{...(re=N.parameters)==null?void 0:re.docs,source:{originalSource:`() => {
  return <StoryBlock title="TabView" description="You can reduce window's width to see behavior when there isn't enough space to display all tabs">
      <TabView tabs={[{
      label: "SEPA Credit Transfers",
      url: "/simulator/sct",
      count: 2
    }, {
      label: "SEPA Direct Debits",
      url: "/simulator/sdd",
      icon: "building-regular"
    }, {
      label: "Cards",
      url: "/simulator/cards",
      withSeparator: true
    }, {
      label: "Apple Pay/Google Pay",
      url: "/simulator/apple-pay-google-pay"
    }, {
      label: "Account holders",
      url: "/simulator/account-holders"
    }, {
      label: "Merchant acquiring",
      url: "/simulator/merchant-acquiring"
    }]} otherLabel="More" />
    </StoryBlock>;
}`,...(ne=(oe=N.parameters)==null?void 0:oe.docs)==null?void 0:ne.source}}};const $e=["Default"];export{N as Default,$e as __namedExportsOrder,Ne as default};
//# sourceMappingURL=TabView.stories-af294ee8.js.map
