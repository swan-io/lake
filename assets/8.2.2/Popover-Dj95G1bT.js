import{s as m,d as R,r as D,b as T,g as O,p as v,u as W,$ as h,q as _,j as t,P as H,V as x,F as L}from"./Space-lmyxvGbk.js";import{r as o}from"./index-BwDkhjyp.js";import{u as M}from"./useResponsive-DRRSsHxR.js";import{n as A}from"./function-DBvrCb5C.js";import{B as N}from"./BottomPanel-DHh3Qs46.js";import{F as z}from"./FocusTrap-BcslRKIi.js";import{T as G}from"./TransitionView-kPqyOI0T.js";import{M as y}from"./index-Biq_vGhO.js";const n=m.create({container:{...m.absoluteFillObject,pointerEvents:"none"},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popoverContainer:{position:"absolute",display:"flex"},popover:{pointerEvents:"auto",display:"flex",flexDirection:"column",backgroundColor:R.accented,borderRadius:D[8],marginVertical:T[8],overflow:"hidden",boxShadow:O.modal,flexGrow:1,alignSelf:"stretch"},popoverContents:{alignItems:"stretch"}}),K={...v.fadeAndSlideInFromBottom,leave:[v.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},U=600,$=o.memo(({children:a,id:w,label:C,role:P="dialog",describedBy:E,matchReferenceWidth:b=!1,matchReferenceMinWidth:g=!1,onDismiss:l=A,onEscapeKey:V=l,referenceRef:u,returnFocus:j=!0,autoFocus:F=!0,visible:r,underlay:d=!0,forcedMode:S})=>{const[c,f]=o.useState(null),p=o.useRef(null),{desktop:k}=M(U),{position:s}=W({referenceRef:u,visible:r,matchReferenceWidth:b,matchReferenceMinWidth:g});o.useEffect(()=>{const e=p.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),o.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),f(e),()=>{f(null),e.remove()}},[]);const q=o.useCallback(e=>{e.preventDefault(),l()},[l]),B=o.useCallback(({target:e})=>{const i=u.current;(!(i instanceof Element)||!(e instanceof Element)||i!==e&&!i.contains(e))&&l()},[u,l]),I=o.useCallback(e=>{e.preventDefault()},[]);return c==null?null:h(S).with(_.nullish,()=>k?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?t.jsx(N,{visible:r,onPressClose:l,returnFocus:!1,children:typeof a=="function"?a({mode:"panel"}):a}):t.jsxs(H,{container:c,children:[r&&d?t.jsx(y,{ref:p,style:n.underlay,onPress:q,"aria-label":"Close"}):null,t.jsx(G,{style:n.container,...K,children:s.isSome()?t.jsx(x,{style:s.get().rootStyle,children:t.jsx(x,{style:[n.popoverContainer,s.get().style,{alignItems:h(s.get().horizontalPosition).with("left",()=>"flex-start").with("center",()=>"center").with("right",()=>"flex-end").exhaustive()}],children:t.jsx(L,{style:n.popover,contentContainerStyle:n.popoverContents,id:w,role:P,"aria-describedby":E,"aria-label":C,children:t.jsx(z,{focusLock:!0,returnFocus:j,autoFocus:F,onEscapeKey:V,onClickOutside:d?void 0:B,children:t.jsx(y,{tabIndex:-1,onPress:I,style:n.defaultCursor,children:typeof a=="function"?a({mode:"dropdown"}):a})})})})}):null})]})});$.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{role:{defaultValue:{value:'"dialog"',computed:!1},required:!1},matchReferenceWidth:{defaultValue:{value:"false",computed:!1},required:!1},matchReferenceMinWidth:{defaultValue:{value:"false",computed:!1},required:!1},onDismiss:{defaultValue:{value:"() => {}",computed:!1},required:!1},onEscapeKey:{defaultValue:{value:"onDismiss = noop",computed:!1},required:!1},returnFocus:{defaultValue:{value:"true",computed:!1},required:!1},autoFocus:{defaultValue:{value:"true",computed:!1},required:!1},underlay:{defaultValue:{value:"true",computed:!1},required:!1}}};export{$ as P};
//# sourceMappingURL=Popover-Dj95G1bT.js.map
