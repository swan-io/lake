import{H as u,N as xe,$ as T,v as W,q as g,J as N,s as je,g as De,f as Re,j as h,V as H,c as k,B as ce,I as P,S as _,L as X,n as Me,P as Pe,p as ue,h as Be}from"./Space-D2q7n8S5.js";import{L as A}from"./LakeButton-BNRBDyBQ.js";import{m as Ve,d as Ge,y as qe}from"./Request-C8ancilI.js";import{r as D}from"./index-CBqU2yxZ.js";import{t as pe}from"./i18n-C5rYGjGC.js";import{w as We}from"./with-selector-D-Y2eL2T.js";import{A as Q,E as Z}from"./Animated-Cf3tGJi3.js";import{P as me}from"./Pressable-CWb70MP5.js";import{T as Ue}from"./TransitionGroupView-Bmm9lv8u.js";import{C as $e}from"./index-DGaDRGzj.js";import{S as Ke,a as ee}from"./_StoriesComponents-CS-ilBhq.js";import"./extends-CCbyfPlC.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BtM5VmRH.js";import"./commonStyles-t4XfA7cz.js";import"./index-Dm7YbrF-.js";import"./rifm-BZLOgeyN.js";import"./utc-DJvBpWoA.js";import"./array-rjEBP2Ry.js";import"./index-2gMGMzvj.js";import"./index-BcAlVOME.js";import"./index-By6nUqFK.js";import"./TransitionView-nGFg5jNw.js";var v={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"},U={QUERY:"query",MUTATION:"mutation",SUBSCRIPTION:"subscription"};class he extends Error{constructor(t,r,n,s,i,o,c){super(t),this.name="GraphQLError",this.message=t,i&&(this.path=i),r&&(this.nodes=Array.isArray(r)?r:[r]),n&&(this.source=n),s&&(this.positions=s),o&&(this.originalError=o);var l=c;if(!l&&o){var p=o.extensions;p&&typeof p=="object"&&(l=p)}this.extensions=l||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var Qe=function(e){return e[e.Const=1]="Const",e[e.Var=2]="Var",e[e.Int=3]="Int",e[e.Float=4]="Float",e[e.BlockString=5]="BlockString",e[e.String=6]="String",e[e.Enum=7]="Enum",e}(Qe||{}),ze=function(e){return e[e.Spread=1]="Spread",e[e.Name=2]="Name",e}(ze||{}),V={};function ne(e,t){var r=[],n=[];try{var s=function i(o,c,l){var p=!1,a=t[o.kind]&&t[o.kind].enter||t[o.kind]||t.enter,m=a&&a.call(t,o,c,l,n,r);if(m===!1)return o;if(m===null)return null;if(m===V)throw V;m&&typeof m.kind=="string"&&(p=m!==o,o=m),l&&r.push(l);var f,y={...o};for(var S in o){n.push(S);var d=o[S];if(Array.isArray(d)){for(var E=[],b=0;b<d.length;b++)d[b]!=null&&typeof d[b].kind=="string"&&(r.push(o),n.push(b),f=i(d[b],b,d),n.pop(),r.pop(),f==null?p=!0:(p=p||f!==d[b],E.push(f)));d=E}else d!=null&&typeof d.kind=="string"&&(f=i(d,S,o))!==void 0&&(p=p||d!==f,d=f);n.pop(),p&&(y[S]=d)}l&&r.pop();var I=t[o.kind]&&t[o.kind].leave||t.leave,R=I&&I.call(t,o,c,l,n,r);if(R===V)throw V;return R!==void 0?R:m!==void 0?p?y:m:p?y:o}(e);return s!==void 0&&s!==!1?s:e}catch(i){if(i!==V)throw i;return e}}var G=Symbol.for("DEEP_MERGE_DELETE"),B=Symbol.for("__requestedKeys"),$=(e,t)=>{if(e instanceof Set&&t instanceof Set)return new Set([...e,...t]);const r=Array.isArray(e)?Array(e.length):Array.isArray(t)?Array(t.length):{};return Object.getOwnPropertyNames(e).forEach(n=>{t[n]!==G&&(r[n]=e[n])}),Object.getOwnPropertySymbols(e).forEach(n=>{t[n]!==G&&(r[n]=e[n])}),Object.getOwnPropertyNames(t).forEach(n=>{t[n]!==G&&(w(r[n])&&w(t[n])?r[n]=$(r[n],t[n]):r[n]=t[n])}),Object.getOwnPropertySymbols(t).forEach(n=>{t[n]!==G&&(w(r[n])&&w(t[n])?r[n]=$(r[n],t[n]):r[n]=t[n])}),r},we=(e,t)=>[...t.values()].every(n=>e.has(n)),w=e=>e!=null&&typeof e=="object",J=Object.prototype.hasOwnProperty,Ne=(e,t)=>{if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r)if(!J.call(t,s)||!Ne(e[s],t[s]))return!1;return!0},se=e=>JSON.stringify(e),z=e=>T(e).with({__typename:g.select(g.union("Query","Mutation","Subscription"))},t=>u.Some(Symbol.for(t))).with({__typename:g.select("name",g.string),id:g.select("id",g.string)},({name:t,id:r})=>u.Some(Symbol.for(`${t}<${r}>`))).otherwise(()=>u.None()),Te=e=>T(e.operation).with(U.QUERY,()=>u.Some(Symbol.for("Query"))).with(U.SUBSCRIPTION,()=>u.Some(Symbol.for("Subscription"))).otherwise(()=>u.None()),fe=class{constructor(e){this.cache=new Map,this.operationCache=new Map,this.schemaConfig=Object.fromEntries(Object.entries(e.interfaceToTypes).map(([t,r])=>[t,new Set(r)]))}isTypeCompatible(e,t){if(e===t)return!0;const r=this.schemaConfig[t];return r==null?!1:r.has(e)}dump(){return this.cache}getOperationFromCache(e,t){const r=se(t);return u.fromNullable(this.operationCache.get(e)).flatMap(n=>u.fromNullable(n.get(r))).flatMap(n=>n)}setOperationInCache(e,t,r){const n=se(t),s=u.fromNullable(this.operationCache.get(e)).getOr(new Map);s.set(n,u.Some(r)),this.operationCache.set(e,s)}getFromCache(e,t){return this.get(e).flatMap(r=>w(r)?we(r[B],t)?u.Some(r):u.None():u.Some(r))}getFromCacheWithoutKey(e){return this.get(e).flatMap(t=>u.Some(t))}get(e){return this.cache.has(e)?u.Some(this.cache.get(e)):u.None()}getOrDefault(e){return this.cache.has(e)?this.cache.get(e):{}}set(e,t){this.cache.set(e,t)}cacheIfEligible(e,t){const r=z(e);if(r.isSome()){const n=r.get(),s=this.getOrDefault(n);return this.set(n,$(s,w(e)?{...e,[B]:t}:e)),n}else return e}updateFieldInClosestCachedAncestor({originalFieldName:e,fieldNameWithArguments:t,value:r,path:n,ancestors:s,variables:i,rootTypename:o,selectedKeys:c}){const l=s.concat(),p=n.concat(),a=[];let m;for(;m=l.pop();){const f=z(l.length===0?{...m,__typename:o}:m);if(f.isSome()){const y=f.get(),S=this.getOrDefault(y);w(r)&&!N.isArray(r)&&(typeof r.__typename=="string"&&r.__typename.endsWith("Connection")&&(r.__connectionCacheKey=y.description,r.__connectionCachePath=[[...a,t].map(E=>typeof E=="symbol"?{symbol:E.description}:E)],r.__connectionArguments=i),r[B]=c);const d=a.reduce((E,b)=>({[b]:E}),{[e]:G,[t]:r});this.set(y,$(S,d));break}a.push(p.pop())}}unsafe__update(e,t,r){this.get(e).map(n=>{t.reduce((i,o)=>i.flatMap(c=>u.fromNullable(w(c)?c[o]:null)),u.fromNullable(n)).map(i=>{const o=t.reduce((c,l)=>({[l]:c}),r(i));this.set(e,$(n,o))})})}updateConnection(e,t){T(e).with({__connectionCacheKey:g.string,__connectionCachePath:g.array(g.array(g.union({symbol:g.string},g.string)))},({__connectionCacheKey:r,__connectionCachePath:n})=>{const s=Symbol.for(r),i=n.map(p=>p.map(a=>typeof a=="string"?a:Symbol.for(a.symbol))),o=Symbol.for("__typename"),c=Symbol.for("edges"),l=Symbol.for("node");T(t).with({prepend:g.select(g.nonNullable)},p=>{const a=i[0];a!=null&&this.unsafe__update(s,a,m=>!w(m)||!N.isArray(m[c])?m:{...m,[c]:[...N.filterMap(p,({node:f,__typename:y})=>z(f).flatMap(S=>this.getFromCacheWithoutKey(S).map(()=>({[o]:y,[l]:S})))),...m[c]]})}).with({append:g.select(g.nonNullable)},p=>{const a=i[i.length-1];a!=null&&this.unsafe__update(s,a,m=>!w(m)||!N.isArray(m[c])?m:{...m,[c]:[...m[c],...N.filterMap(p,({node:f,__typename:y})=>z(f).flatMap(S=>this.getFromCacheWithoutKey(S).map(()=>({[o]:y,[l]:S}))))]})}).with({remove:g.select(g.array())},p=>{i.forEach(a=>{this.unsafe__update(s,a,m=>w(m)&&N.isArray(m[c])?{...m,[c]:m[c].filter(f=>{const y=f[l];return!p.some(S=>{var d;return(d=y.description)==null?void 0:d.includes(`<${S}>`)})})}:m)})}).exhaustive()}).otherwise(()=>{})}},M=(e,t)=>{const r=new Set,n=s=>{s.selections.forEach(i=>{if(i.kind===v.FIELD){const o=Y(i,t);r.add(o)}else i.kind===v.INLINE_FRAGMENT&&n(i.selectionSet)})};return e.selectionSet&&n(e.selectionSet),r},Y=(e,t)=>{const r=ae(e),n=Oe(e,t);return Object.keys(n).length===0?Symbol.for(r):Symbol.for(`${r}(${JSON.stringify(n)})`)},Oe=(e,t)=>{var r;const n=(r=e.arguments)!=null?r:[];return Object.fromEntries(n.map(({name:{value:s},value:i})=>[s,oe(i,t)]))},oe=(e,t)=>T(e).with({kind:v.NULL},()=>null).with({kind:g.union(v.INT,v.FLOAT,v.STRING,v.BOOLEAN,v.ENUM)},({value:r})=>r).with({kind:v.LIST},({values:r})=>r.map(n=>oe(n,t))).with({kind:v.OBJECT},({fields:r})=>Object.fromEntries(r.map(({name:{value:n},value:s})=>[n,s]))).with({kind:v.VARIABLE},({name:{value:r}})=>t[r]).exhaustive(),ae=e=>e.alias?e.alias.value:e.name.value,Je=e=>{const t={};ne(e,{[v.FRAGMENT_DEFINITION](n){t[n.name.value]=n}});const r=n=>{if(n.kind===v.FRAGMENT_SPREAD){const s=n.name.value,i=t[s];if(!i)throw new Error(`Fragment "${s}" is not defined.`);return{kind:v.INLINE_FRAGMENT,typeCondition:i.typeCondition,selectionSet:i.selectionSet}}return n.kind===v.SELECTION_SET?{...n,selections:n.selections.map(s=>r(s))}:"selectionSet"in n&&n.selectionSet!=null?{...n,selectionSet:r(n.selectionSet)}:n};return ne(e,{[v.FRAGMENT_DEFINITION]:()=>null,enter:r})},Ye={kind:v.FIELD,name:{kind:v.NAME,value:"__typename"}},te=e=>ne(e,{[v.SELECTION_SET]:t=>t.selections.find(r=>r.kind===v.FIELD&&r.name.value==="__typename")?t:{...t,selections:[Ye,...t.selections]}}),He=e=>N.findMap(e.definitions,t=>t.kind===v.OPERATION_DEFINITION?u.fromNullable(t.name).map(r=>r.value):u.None()),ie=e=>T(e).with({kind:v.FIELD},t=>t.name.value==="id"?u.Some(t):u.None()).with({kind:v.INLINE_FRAGMENT},t=>N.findMap(t.selectionSet.selections,ie)).otherwise(()=>u.None()),de=(e,t)=>{const r=N.findMap(e.selections,ie);return N.findMap(t.selections,ie).isSome()?t:r.map(s=>({...t,selections:[s,...t.selections]})).getOr(t)},Xe=(e,t)=>N.isArray(e.directives)?e.directives.some(r=>r.name.value==="include"&&r.arguments!=null&&r.arguments.some(n=>n.name.value==="if"&&oe(n.value,t)===!1)):!1,ge=(e,t,r)=>typeof t=="symbol"?e.getFromCache(t,r).flatMap(u.fromNullable):w(t)&&B in t&&t[B]instanceof Set?we(t[B],r)?u.Some(t):u.None():u.Some(t),ye=(e,t)=>typeof t=="symbol"?e.getFromCacheWithoutKey(t).flatMap(u.fromNullable):u.Some(t),re=new WeakMap,Ze=Symbol.for("EXCLUDED"),Se=(e,t,r)=>{const n=(s,i)=>s.selections.reduce((o,c)=>o.flatMap(l=>{var p;if(c.kind===v.FIELD){const a=c,m=ae(a),f=Y(a,r);if(l==null)return u.None();if(!(J.call(l,m)||J.call(l,f)))return Xe(a,r)?u.Some({...l,[m]:Ze}):u.None();const S=m in l?l[m]:l[f];if(S==null)return u.Some({...l,[m]:S});if(N.isArray(S)){const d=M(a,r);return u.all(S.map(E=>ge(e,E,d).flatMap(I=>w(I)&&a.selectionSet!=null?n(a.selectionSet,I):u.Some(I)))).map(E=>({...l,[m]:E}))}else{const d=M(a,r);return ge(e,S,d).flatMap(b=>w(b)&&a.selectionSet!=null?n(a.selectionSet,b).map(I=>({...l,[m]:I})):u.Some({...l,[m]:b}))}}if(c.kind===v.INLINE_FRAGMENT){const a=c,m=(p=a.typeCondition)==null?void 0:p.name.value,f=T(l).with({__typename:g.select(g.string)},y=>y).with({__typename:g.array({__typename:g.select(g.string)})},y=>y[0]).otherwise(()=>{});return m!=null&&f!=null?e.isTypeCompatible(f,m)?n(a.selectionSet,l):a.selectionSet.selections.some(y=>y.kind===v.INLINE_FRAGMENT)?n({...a.selectionSet,selections:a.selectionSet.selections.filter(y=>{var S;if(y.kind===v.INLINE_FRAGMENT){const d=(S=y.typeCondition)==null?void 0:S.name.value;return d==null?!0:e.isTypeCompatible(f,d)}return!0})},l):u.Some(l):n(a.selectionSet,l)}else return u.None()}),u.Some(i));return N.findMap(t.definitions,s=>s.kind===v.OPERATION_DEFINITION?u.Some(s):u.None()).flatMap(s=>Te(s).map(i=>({operation:s,cacheKey:i}))).flatMap(({operation:s,cacheKey:i})=>e.getFromCache(i,M(s,r)).map(o=>({cache:o,operation:s}))).flatMap(({operation:s,cache:i})=>n(s.selectionSet,i)).map(s=>JSON.parse(JSON.stringify(s))).flatMap(s=>{var i;const o=se(r),c=u.fromNullable(re.get(t)).flatMap(l=>u.fromNullable(l.get(o))).flatMap(l=>l);if(c.flatMap(l=>l.toOption()).map(l=>Ne(s,l)).getOr(!1))return c;{const l=u.Some(W.Ok(s)),p=(i=re.get(t))!=null?i:new Map;return p.set(o,l),re.set(t,p),l}})},et=(e,t,r)=>{const n=(s,i,o)=>{const c=N.filterMap(s.selections,l=>T(l).with({kind:v.FIELD},p=>{const a=Y(p,r);if(i==null)return u.Some(p);if(!J.call(i,a))return u.Some(p);if(o.has(a)){const f=i[a],y=M(p,r);if(N.isArray(f))return f.reduce((S,d)=>{const E=ye(e,d);if(E.isNone())return u.Some(p);const b=p.selectionSet;return b!=null?n(b,E.get(),y).map(I=>({...p,selectionSet:de(b,I)})):S},u.None());{const S=ye(e,f);if(S.isNone())return u.Some(p);const d=p.selectionSet;return d!=null?n(d,S.get(),y).map(E=>({...p,selectionSet:de(d,E)})):u.None()}}else return u.Some(p)}).with({kind:v.INLINE_FRAGMENT},p=>n(p.selectionSet,i,o).map(a=>({...p,selectionSet:a}))).with({kind:v.FRAGMENT_SPREAD},()=>u.None()).exhaustive());return c.length>0?u.Some({...s,selections:c}):u.None()};return N.findMap(t.definitions,s=>s.kind===v.OPERATION_DEFINITION?u.Some(s):u.None()).flatMap(s=>Te(s).map(i=>({operation:s,cacheKey:i}))).flatMap(({operation:s,cacheKey:i})=>{const o=M(s,r);return e.getFromCache(i,o).map(c=>({cache:c,operation:s,selectedKeys:o}))}).flatMap(({operation:s,cache:i,selectedKeys:o})=>n(s.selectionSet,i,o).map(c=>({...t,definitions:[{...s,selectionSet:c}]})))},tt=(e,t,r,n)=>{const s=(i,o,c=[],l)=>{i.selections.forEach(p=>{T(p).with({kind:v.FIELD},a=>{const m=ae(a),f=Y(a,n),y=Oe(a,n),S=o[o.length-1],d=S[m],E=M(a,n);if(d!=null)if(Array.isArray(d)){e.updateFieldInClosestCachedAncestor({originalFieldName:m,fieldNameWithArguments:f,value:d,path:c,ancestors:o,variables:y,rootTypename:l,selectedKeys:E});const b=Array(d.length);e.updateFieldInClosestCachedAncestor({originalFieldName:m,fieldNameWithArguments:f,value:b,path:[...c,f],ancestors:[...o,d],variables:y,rootTypename:l,selectedKeys:E}),d.forEach((I,R)=>{const Le=e.cacheIfEligible(I,E);e.updateFieldInClosestCachedAncestor({originalFieldName:R.toString(),fieldNameWithArguments:R.toString(),value:Le,path:[...c,f],ancestors:[...o,d],variables:y,rootTypename:l,selectedKeys:E}),w(I)&&s(a.selectionSet,[...o,d,I],[...c,f,R.toString()],l)})}else{const b=e.cacheIfEligible(d,E);e.updateFieldInClosestCachedAncestor({originalFieldName:m,fieldNameWithArguments:f,value:b,path:c,ancestors:o,variables:y,rootTypename:l,selectedKeys:E}),w(d)&&a.selectionSet!=null&&s(a.selectionSet,[...o,d],[...c,f],l)}else m in S&&e.updateFieldInClosestCachedAncestor({originalFieldName:m,fieldNameWithArguments:f,value:d,path:c,ancestors:o,variables:y,rootTypename:l,selectedKeys:E})}).with({kind:v.INLINE_FRAGMENT},a=>{s(a.selectionSet,o,c,l)}).with({kind:v.FRAGMENT_SPREAD},()=>{}).exhaustive()})};return t.definitions.forEach(i=>{if(i.kind===v.OPERATION_DEFINITION){const o=T(i.operation).with(U.QUERY,()=>"Query").with(U.SUBSCRIPTION,()=>"Subscription").with(U.MUTATION,()=>"Mutation").exhaustive();e.cacheIfEligible(w(r)?{...r,__typename:o}:r,M(i,n)),s(i.selectionSet,[r],[],o)}}),e},rt=class Ie extends Error{constructor(t){super("Received an invalid GraphQL response"),Object.setPrototypeOf(this,Ie.prototype),this.name="InvalidGraphQLResponseError",this.response=t}},nt=e=>T(e).with({message:g.string,nodes:g.optional(g.any),source:g.optional(g.any),positions:g.optional(g.any),path:g.optional(g.any),error:g.optional(g.any),extensions:g.optional(g.any)},({message:t,nodes:r,source:n,positions:s,path:i,error:o,extensions:c})=>{const l=T(o).with({message:g.string},({message:p})=>new Error(p)).otherwise(()=>{});return new he(t,r,n,s,i,l,c)}).otherwise(t=>new he(JSON.stringify(t))),ke={toArray:e=>Array.isArray(e)?e:[e],forEach:(e,t)=>{ke.toArray(e).forEach(t)}},st=e=>JSON.stringify(e),it=e=>'"""'+e.replace(/"""/g,'\\"""')+'"""',C=e=>!!(e&&e.length),ot=80,O={OperationDefinition(e){if(e.operation==="query"&&!e.name&&!C(e.variableDefinitions)&&!C(e.directives))return O.SelectionSet(e.selectionSet);let t=e.operation;return e.name&&(t+=" "+e.name.value),C(e.variableDefinitions)&&(e.name||(t+=" "),t+="("+e.variableDefinitions.map(O.VariableDefinition).join(", ")+")"),C(e.directives)&&(t+=" "+e.directives.map(O.Directive).join(" ")),t+" "+O.SelectionSet(e.selectionSet)},VariableDefinition(e){let t=O.Variable(e.variable)+": "+F(e.type);return e.defaultValue&&(t+=" = "+F(e.defaultValue)),C(e.directives)&&(t+=" "+e.directives.map(O.Directive).join(" ")),t},Field(e){let t=(e.alias?e.alias.value+": ":"")+e.name.value;if(C(e.arguments)){const r=e.arguments.map(O.Argument),n=t+"("+r.join(", ")+")";t=n.length>ot?t+"("+r.join(" ")+")":n}return C(e.directives)&&(t+=" "+e.directives.map(O.Directive).join(" ")),e.selectionSet?t+" "+O.SelectionSet(e.selectionSet):t},StringValue(e){return e.block?it(e.value):st(e.value)},BooleanValue(e){return String(e.value)},NullValue(){return"null"},IntValue(e){return e.value},FloatValue(e){return e.value},EnumValue(e){return e.value},Name(e){return e.value},Variable(e){return"$"+e.name.value},ListValue(e){return"["+e.values.map(F).join(", ")+"]"},ObjectValue(e){return"{"+e.fields.map(O.ObjectField).join(", ")+"}"},ObjectField(e){return e.name.value+": "+F(e.value)},Document(e){return C(e.definitions)?e.definitions.map(F).join(" "):""},SelectionSet(e){return"{"+e.selections.map(F).join(" ")+"}"},Argument(e){return e.name.value+": "+F(e.value)},FragmentSpread(e){let t="..."+e.name.value;return C(e.directives)&&(t+=" "+e.directives.map(O.Directive).join(" ")),t},InlineFragment(e){let t="...";return e.typeCondition&&(t+=" on "+e.typeCondition.name.value),C(e.directives)&&(t+=" "+e.directives.map(O.Directive).join(" ")),t+" "+F(e.selectionSet)},FragmentDefinition(e){let t="fragment "+e.name.value;return t+=" on "+e.typeCondition.name.value,C(e.directives)&&(t+=" "+e.directives.map(O.Directive).join(" ")),t+" "+F(e.selectionSet)},Directive(e){let t="@"+e.name.value;return C(e.arguments)&&(t+="("+e.arguments.map(O.Argument).join(", ")+")"),t},NamedType(e){return e.name.value},ListType(e){return"["+F(e.type)+"]"},NonNullType(e){return F(e.type)+"!"}},F=e=>typeof O[e.kind]=="function"?O[e.kind](e):"",at=({url:e,headers:t,operationName:r,withCredentials:n,document:s,variables:i})=>Ve.make({url:e,method:"POST",responseType:"json",headers:t,withCredentials:u.fromNullable(n).getOr(!1),body:JSON.stringify({operationName:r,query:F(s),variables:i})}).mapOkToResult(Ge).mapOkToResult(qe).mapOkToResult(o=>T(o).returnType().with({errors:g.select(g.array())},c=>W.Error(c.map(nt))).with({data:g.select(g.nonNullable)},c=>W.Ok(c)).otherwise(c=>W.Error(new rt(c)))),lt=(e,t)=>[e,{prepend:t}],ct=(e,t)=>[e,{append:t}],ut=(e,t)=>[e,{remove:t}],pt=class{constructor(e){var t,r;this.url=e.url,this.headers=(t=e.headers)!=null?t:{"Content-Type":"application/json"},this.schemaConfig=e.schemaConfig,this.cache=new fe(e.schemaConfig),this.makeRequest=(r=e.makeRequest)!=null?r:at,this.subscribers=new Set,this.transformedDocuments=new Map,this.transformedDocumentsForRequest=new Map}getTransformedDocument(e){if(this.transformedDocuments.has(e))return this.transformedDocuments.get(e);{const t=Je(te(e));return this.transformedDocuments.set(e,t),t}}getTransformedDocumentsForRequest(e){if(this.transformedDocumentsForRequest.has(e))return this.transformedDocumentsForRequest.get(e);{const t=te(e);return this.transformedDocumentsForRequest.set(e,t),t}}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}request(e,t,{optimize:r=!1,connectionUpdates:n,overrides:s}={}){const i=this.getTransformedDocument(e),o=this.getTransformedDocumentsForRequest(e),c=He(i).getOr("Untitled"),l=t,p=r?et(this.cache,i,l).map(te):u.Some(o);if(p.isNone()){const a=Se(this.cache,i,l);if(a.isSome())return xe.value(a.get())}return this.makeRequest({url:this.url,operationName:c,document:p.getOr(o),variables:l,...s,headers:{...this.headers,...s!=null?s.headers:null}}).mapOk(a=>a).tapOk(a=>{tt(this.cache,i,a,l)}).tapOk(a=>{n!==void 0&&n.forEach(m=>{m({data:a,variables:t,prepend:lt,append:ct,remove:ut}).map(([f,y])=>{this.cache.updateConnection(f,y)})})}).tap(a=>{this.cache.setOperationInCache(i,l,a),this.subscribers.forEach(m=>{m()})})}readFromCache(e,t){const r=t,n=this.getTransformedDocument(e);return T(this.cache.getOperationFromCache(n,r)).with(u.P.Some(W.P.Error(g._)),s=>s).otherwise(()=>Se(this.cache,n,r))}query(e,t,r){return this.request(e,t,r)}commitMutation(e,t,r){return this.request(e,t,r)}purge(){this.cache=new fe(this.schemaConfig),this.subscribers.forEach(e=>{e()})}};D.createContext(new pt({url:"/graphql",schemaConfig:{interfaceToTypes:{}}}));function mt(e){const t=new Set;let r=e;return{get:()=>r,set(n){r=typeof n=="function"?n(r):n,t.forEach(s=>s(r))},subscribe:n=>(t.add(n),()=>{t.delete(n)}),reset(){r=e,t.forEach(n=>n(r))}}}function ht(e){return e}function ft(e,t){return t===void 0&&(t=Object.is),We.useSyncExternalStoreWithSelector(e.subscribe,e.get,e.get,ht,t)}const dt=e=>{const{duration:t,onStart:r,onReset:n,onEnd:s}=e;let i=0,o=t;const c=()=>{document.removeEventListener("visibilitychange",a),window.clearTimeout(i)},l=()=>{o<=0||(i=window.setTimeout(()=>{o=0,c(),s()},o),r(t))},p=()=>{window.clearTimeout(i),o=t,i=window.setTimeout(()=>{o=0,c(),s()},t),n(t)},a=()=>{document.removeEventListener("visibilitychange",a),l()};return document.hidden?document.addEventListener("visibilitychange",a):l(),{duration:t,clear:c,reset:p}},K=mt([]),gt=()=>ft(K),Ce=e=>{var r,n;const t=K.get().find(s=>s.uid===e);t&&((r=t.timeout)==null||r.clear(),(n=t.progress)==null||n.stopAnimation(),K.set(s=>s.filter(i=>i.uid!==e)))};let Fe=new WeakMap;const yt=e=>{Fe=e},St=()=>Fe,L=({variant:e,title:t,description:r,error:n,autoClose:s})=>{const i=`${e} - ${t} - ${r??""}`,o=K.get().find(a=>a.uid===i);if(o!=null)return o.timeout&&o.progress&&(o.timeout.clear(),Q.timing(o.progress,{duration:100,easing:Z.linear,toValue:1,useNativeDriver:!1}).start(()=>{var a;(a=o.timeout)==null||a.reset()})),i;const l=s??(e==="info"||e==="success")?new Q.Value(1):void 0,p=l?dt({duration:1e4,onStart:a=>{Q.timing(l,{duration:a,easing:Z.linear,toValue:0,useNativeDriver:!1}).start()},onReset:a=>{Q.timing(l,{duration:a,easing:Z.linear,toValue:0,useNativeDriver:!1}).start()},onEnd:()=>{Ce(i)}}):void 0;return K.set(a=>[{uid:i,variant:e,title:t,description:r,error:n,progress:l,timeout:p},...a]),i},j=je.create({list:{position:"absolute",right:0,bottom:0,maxHeight:"100%",maxWidth:400,paddingVertical:8,width:"100%",zIndex:10},toastWrapper:{paddingHorizontal:16,paddingVertical:8},toast:{padding:24,borderRadius:4,borderWidth:1,borderLeftWidth:4,overflow:"hidden",boxShadow:De.modal},contentContainer:{paddingRight:36},closeButton:{zIndex:1,position:"absolute",width:24,height:24,right:24,top:0,bottom:0,margin:"auto"},progressBar:{height:2,transformOrigin:"left"},copyTooltip:{alignSelf:"flex-start"},copyButton:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1}}),vt=D.memo(({variant:e,uid:t,title:r,description:n,error:s,progress:i,onClose:o})=>{const c=D.useRef(null),[l,p]=D.useState("copy"),a=Be(n),[m]=D.useState(()=>s==null?u.None():N.findMap(ke.toArray(s),y=>y instanceof Error?u.fromNullable(St().get(y)):u.None())),f=T(e).returnType().with("success",()=>"positive").with("error",()=>"negative").with("info",()=>"shakespear").with("warning",()=>"warning").exhaustive();return D.useEffect(()=>{if(Re(i))return;const y=i.addListener(({value:S})=>{c.current instanceof HTMLElement&&(c.current.style.transform=`scaleX(${S})`)});return()=>i.removeListener(y)},[i]),h.jsx(H,{style:j.toastWrapper,children:h.jsxs(H,{style:[j.toast,{borderColor:k[f][200],borderLeftColor:k[f][500],backgroundColor:k[f][0]}],children:[h.jsxs(ce,{style:j.contentContainer,children:[h.jsxs(ce,{direction:"row",alignItems:"center",children:[T(e).with("success",()=>h.jsx(P,{name:"checkmark-circle-regular",size:20,color:k[f][700]})).with("error",()=>h.jsx(P,{name:"dismiss-circle-regular",size:20,color:k[f][700]})).with("info",()=>h.jsx(P,{name:"info-regular",size:20,color:k[f][700]})).with("warning",()=>h.jsx(P,{name:"warning-regular",size:20,color:k[f][700]})).exhaustive(),h.jsx(_,{width:12}),h.jsx(X,{variant:"regular",color:k[f][700],children:r})]}),a&&h.jsxs(h.Fragment,{children:[h.jsx(_,{height:8}),h.jsx(X,{variant:"smallRegular",color:k.gray[700],children:n})]}),T(m).with(u.P.None,()=>null).with(u.P.Some(g.select()),y=>h.jsxs(h.Fragment,{children:[h.jsx(_,{height:a?4:8}),h.jsx(Me,{describedBy:"copy",onHide:()=>p("copy"),togglableOnFocus:!0,placement:"center",containerStyle:j.copyTooltip,content:l==="copy"?pe("copyButton.copyTooltip"):pe("copyButton.copiedTooltip"),children:h.jsxs(me,{style:j.copyButton,onPress:S=>{S.stopPropagation(),S.preventDefault(),$e.setString(y??""),p("copied")},children:[h.jsx(P,{color:k.gray[700],size:14,name:"copy-regular"}),h.jsx(_,{width:4}),h.jsxs(X,{numberOfLines:1,variant:"smallRegular",color:k.gray[700],children:["ID: ",y]})]})})]})).exhaustive()]}),h.jsx(me,{onPress:()=>o(t),style:j.closeButton,children:h.jsx(P,{name:"lake-close",size:24,color:k.gray[500]})}),i!=null&&h.jsxs(h.Fragment,{children:[h.jsx(_,{height:24}),h.jsx(H,{ref:c,role:"progressbar",style:[j.progressBar,{backgroundColor:k[f][500]}]})]})]})})}),le=()=>{const e=gt(),[t,r]=D.useState(()=>{});return D.useEffect(()=>{const n=document.createElement("div");return document.body.append(n),r(n),()=>{n.remove(),r(void 0)}},[]),t==null?null:h.jsx(Pe,{container:t,children:h.jsx(Ue,{style:j.list,enter:ue.fadeAndSlideInFromRight.enter,leave:ue.fadeAndSlideInFromRight.leave,children:e.map(n=>h.jsx(vt,{uid:n.uid,variant:n.variant,title:n.title,description:n.description,error:n.error,progress:n.progress,onClose:Ce},n.uid))})})};le.__docgenInfo={description:"",methods:[],displayName:"ToastStack"};const x={button:{width:200}},Wt={title:"Interactivity/Toast",component:le},_e=new WeakMap;yt(_e);const Ae=new Error;_e.set(Ae,"req-thvfknqp");const q=()=>h.jsxs(h.Fragment,{children:[h.jsx(le,{}),h.jsxs(Ke,{title:"Toast",children:[h.jsxs(ee,{title:"With only title",children:[h.jsx(A,{color:"positive",style:x.button,onPress:()=>L({variant:"success",title:"Successfully copy to clipboard !"}),children:"Open success toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"negative",style:x.button,onPress:()=>L({variant:"error",title:"Oops ! Something went wrong"}),children:"Open error toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"shakespear",style:x.button,onPress:()=>L({variant:"info",title:"Successfully copy to clipboard !"}),children:"Open success toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"warning",style:x.button,onPress:()=>L({variant:"warning",title:"Oops ! Something went wrong"}),children:"Open warning toast"})]}),h.jsxs(ee,{title:"With title and description",children:[h.jsx(A,{color:"positive",style:x.button,onPress:()=>L({variant:"success",title:"Successfully copy to clipboard !",description:"You can now paste it anywhere"}),children:"Open success toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"negative",style:x.button,onPress:()=>L({variant:"error",title:"Oops ! Something went wrong",error:Ae,description:"Please retry or contact us"}),children:"Open error toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"shakespear",style:x.button,onPress:()=>L({variant:"info",title:"Successfully copy to clipboard !",description:"You can now paste it anywhere"}),children:"Open success toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"warning",style:x.button,onPress:()=>L({variant:"warning",title:"Oops ! Something went wrong",description:"Talk to an expert"}),children:"Open warning toast"})]}),h.jsxs(ee,{title:"With long title and description",children:[h.jsx(A,{color:"positive",style:x.button,onPress:()=>L({variant:"success",title:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut"}),children:"Open success toast"}),h.jsx(_,{height:16}),h.jsx(A,{color:"positive",style:x.button,onPress:()=>L({variant:"success",title:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut"}),children:"Open success toast"})]})]})]});q.__docgenInfo={description:"",methods:[],displayName:"Default"};var ve,Ee,be;q.parameters={...q.parameters,docs:{...(ve=q.parameters)==null?void 0:ve.docs,source:{originalSource:`() => {
  return <>
      <ToastStack />

      <StoryBlock title="Toast">
        <StoryPart title="With only title">
          <LakeButton color="positive" style={styles.button} onPress={() => showToast({
          variant: "success",
          title: "Successfully copy to clipboard !"
        })}>
            Open success toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="negative" style={styles.button} onPress={() => showToast({
          variant: "error",
          title: "Oops ! Something went wrong"
        })}>
            Open error toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="shakespear" style={styles.button} onPress={() => showToast({
          variant: "info",
          title: "Successfully copy to clipboard !"
        })}>
            Open success toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="warning" style={styles.button} onPress={() => showToast({
          variant: "warning",
          title: "Oops ! Something went wrong"
        })}>
            Open warning toast
          </LakeButton>
        </StoryPart>

        <StoryPart title="With title and description">
          <LakeButton color="positive" style={styles.button} onPress={() => showToast({
          variant: "success",
          title: "Successfully copy to clipboard !",
          description: "You can now paste it anywhere"
        })}>
            Open success toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="negative" style={styles.button} onPress={() => showToast({
          variant: "error",
          title: "Oops ! Something went wrong",
          error,
          description: "Please retry or contact us"
        })}>
            Open error toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="shakespear" style={styles.button} onPress={() => showToast({
          variant: "info",
          title: "Successfully copy to clipboard !",
          description: "You can now paste it anywhere"
        })}>
            Open success toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="warning" style={styles.button} onPress={() => showToast({
          variant: "warning",
          title: "Oops ! Something went wrong",
          description: "Talk to an expert"
        })}>
            Open warning toast
          </LakeButton>
        </StoryPart>

        <StoryPart title="With long title and description">
          <LakeButton color="positive" style={styles.button} onPress={() => showToast({
          variant: "success",
          title: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut"
        })}>
            Open success toast
          </LakeButton>

          <Space height={16} />

          <LakeButton color="positive" style={styles.button} onPress={() => showToast({
          variant: "success",
          title: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut",
          description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut"
        })}>
            Open success toast
          </LakeButton>
        </StoryPart>
      </StoryBlock>
    </>;
}`,...(be=(Ee=q.parameters)==null?void 0:Ee.docs)==null?void 0:be.source}}};const Ut=["Default"];export{q as Default,Ut as __namedExportsOrder,Wt as default};
//# sourceMappingURL=Toast.stories-CHoOjBfF.js.map
