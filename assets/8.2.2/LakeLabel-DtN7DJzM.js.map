{"version":3,"file":"LakeLabel-DtN7DJzM.js","sources":["../../../packages/lake/src/components/LakeLabel.tsx"],"sourcesContent":["import { ReactNode, useCallback, useRef, useState } from \"react\";\nimport {\n  StyleProp,\n  StyleSheet,\n  TextProps,\n  View,\n  ViewStyle,\n  unstable_createElement,\n} from \"react-native\";\nimport { match } from \"ts-pattern\";\nimport { v4 as uuid } from \"uuid\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { ColorVariants, colors, fonts, spacings, texts } from \"../constants/design\";\nimport { isNotNullish } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { LakeText } from \"./LakeText\";\nimport { Space, SpacingValue } from \"./Space\";\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: spacings[4],\n  },\n  label: {\n    ...texts.medium,\n    fontFamily: fonts.primary,\n    color: colors.gray[700],\n  },\n  shrink: {\n    flexShrink: 1,\n  },\n  optionalLabel: {\n    fontStyle: \"italic\",\n  },\n});\n\ntype LabelType = \"form\" | \"formSmall\" | \"view\" | \"viewSmall\" | \"radioGroup\";\n\ntype Props = {\n  label: string;\n  optionalLabel?: string;\n  readOnlyColor?: string;\n  color?: ColorVariants;\n  type?: LabelType;\n  extra?: () => ReactNode;\n  help?: ReactNode;\n  render: (id: string) => ReactNode;\n  actions?: ReactNode;\n  readOnly?: boolean;\n  style?: StyleProp<ViewStyle>;\n};\n\nconst Label = (\n  props: TextProps & { htmlFor: string; onClick: (event: React.MouseEvent) => void },\n) => {\n  return unstable_createElement(\"label\", props);\n};\n\nconst defaultLabelType: LabelType = \"formSmall\";\n\nexport const LakeLabel = ({\n  label,\n  optionalLabel,\n  extra,\n  readOnly = false,\n  color = \"current\",\n  readOnlyColor = colors[color].primary,\n  type = defaultLabelType,\n  help,\n  render,\n  actions,\n  style,\n}: Props) => {\n  const [id] = useState(() => uuid());\n  const containerRef = useRef<View | null>(null);\n\n  const onClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault();\n      if (containerRef.current != null) {\n        const container = containerRef.current as unknown as HTMLElement;\n        const target = container.querySelector(`[id=\"${id}\"]`) as HTMLElement;\n        target?.focus();\n      }\n    },\n    [id],\n  );\n\n  return (\n    <Box\n      style={[styles.container, style]}\n      direction=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"spaceBetween\"\n    >\n      <View style={commonStyles.fill} ref={containerRef}>\n        <Box direction=\"row\" justifyContent=\"spaceBetween\" alignItems=\"center\">\n          <Box direction=\"row\" style={styles.shrink}>\n            {type === \"form\" || type === \"formSmall\" || type === \"radioGroup\" ? (\n              <Label\n                onClick={onClick}\n                htmlFor={id}\n                style={[styles.label, readOnly && { color: readOnlyColor }]}\n              >\n                {label}\n\n                {optionalLabel != null ? (\n                  <>\n                    {\" - \"}\n                    <LakeText color={colors.gray[400]} style={styles.optionalLabel}>\n                      {optionalLabel}\n                    </LakeText>\n                  </>\n                ) : null}\n              </Label>\n            ) : (\n              <LakeText variant=\"medium\" color={readOnlyColor} id={id}>\n                {label}\n\n                {optionalLabel != null ? (\n                  <>\n                    {\" - \"}\n                    <LakeText color={colors.gray[400]} style={styles.optionalLabel}>\n                      {optionalLabel}\n                    </LakeText>\n                  </>\n                ) : null}\n              </LakeText>\n            )}\n\n            {isNotNullish(extra) && extra()}\n          </Box>\n\n          {isNotNullish(help) && (\n            <>\n              <Space width={16} />\n\n              {help}\n            </>\n          )}\n        </Box>\n\n        <Space\n          height={match(type)\n            .returnType<SpacingValue>()\n            .with(\"formSmall\", \"viewSmall\", () => 4)\n            .with(\"form\", \"view\", () => 8)\n            .with(\"radioGroup\", () => 12)\n            .exhaustive()}\n        />\n\n        <View aria-labelledby={type === \"view\" || type === \"viewSmall\" ? id : undefined}>\n          {render(id)}\n        </View>\n      </View>\n\n      {isNotNullish(actions) && (\n        <>\n          <Space width={16} />\n\n          {actions}\n        </>\n      )}\n    </Box>\n  );\n};\n"],"names":["styles","StyleSheet","spacings","texts","fonts","colors","Label","props","unstable_createElement","defaultLabelType","LakeLabel","label","optionalLabel","extra","readOnly","color","readOnlyColor","type","help","render","actions","style","id","useState","uuid","containerRef","useRef","onClick","useCallback","event","target","jsxs","Box","View","commonStyles","Fragment","jsx","LakeText","isNotNullish","Space","match"],"mappings":"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"}