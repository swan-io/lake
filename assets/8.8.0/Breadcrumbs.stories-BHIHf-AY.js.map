{"version":3,"file":"Breadcrumbs.stories-BHIHf-AY.js","sources":["../../../packages/lake/src/components/Breadcrumbs.tsx"],"sourcesContent":["import {\n  Dispatch,\n  MutableRefObject,\n  ReactNode,\n  SetStateAction,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  NativeSyntheticEvent,\n  Pressable,\n  StyleSheet,\n  TargetedEvent,\n  Text,\n  View,\n} from \"react-native\";\nimport { P, match } from \"ts-pattern\";\nimport { SetRequired } from \"type-fest\";\nimport { v4 as uuid } from \"uuid\";\nimport {\n  animations,\n  backgroundColor,\n  colors,\n  gray75,\n  radii,\n  shadows,\n  spacings,\n  texts,\n} from \"../constants/design\";\nimport { useHover } from \"../hooks/useHover\";\nimport { usePreviousValue } from \"../hooks/usePreviousValue\";\nimport { noop } from \"../utils/function\";\nimport { isNotNullish, isNullish } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { FocusTrap } from \"./FocusTrap\";\nimport { Icon } from \"./Icon\";\nimport { LakeText } from \"./LakeText\";\nimport { Link } from \"./Link\";\nimport { Space } from \"./Space\";\nimport { TransitionView } from \"./TransitionView\";\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    zIndex: 10,\n    transform: \"translateZ(0px)\",\n  },\n  item: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    borderRadius: radii[6],\n    transitionProperty: \"opacity\",\n    transitionDuration: \"150ms\",\n  },\n  itemPressed: {\n    opacity: 0.2,\n  },\n  itemForcedOpen: {\n    backgroundColor: colors.gray[50],\n  },\n  chevron: {\n    padding: spacings[8],\n  },\n  horizontalLink: {\n    paddingVertical: spacings[8],\n  },\n  horizontalLinkText: {\n    paddingHorizontal: spacings[8],\n    alignItems: \"center\",\n    display: \"inline-flex\",\n  },\n  horizontalLinkTextHovered: {\n    color: colors.gray[900],\n    boxShadow: `0 1px currentColor`,\n  },\n  activeHorizontalLinkText: {\n    color: colors.gray[800],\n    backgroundColor: gray75,\n    borderRadius: radii[4],\n    boxShadow: \"none\",\n  },\n  dropdown: {\n    position: \"absolute\",\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    top: \"100%\",\n    backgroundColor: backgroundColor.accented,\n    borderRadius: radii[8],\n    boxShadow: shadows.modal,\n    paddingVertical: spacings[8],\n  },\n  siblingsDropdown: {\n    position: \"absolute\",\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    top: \"100%\",\n    backgroundColor: backgroundColor.accented,\n    borderRadius: radii[8],\n    boxShadow: shadows.modal,\n    paddingVertical: spacings[8],\n    alignItems: \"stretch\",\n  },\n  dropdownLink: {\n    paddingHorizontal: spacings[16],\n    paddingVertical: spacings[8],\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  dropdownLinkText: {\n    ...texts.regular,\n    whiteSpace: \"nowrap\",\n  },\n  dropdownLinkTextHovered: {\n    color: colors.gray[500],\n  },\n  dropdownLinkActive: {\n    backgroundColor: colors.gray[50],\n  },\n  dropdownContainer: {\n    position: \"absolute\",\n    left: \"50%\",\n    top: \"100%\",\n  },\n  dropdownLinkContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"stretch\",\n  },\n  tick: {\n    position: \"absolute\",\n    top: \"50%\",\n    right: spacings[16],\n    transform: \"translateY(-50%)\",\n  },\n});\n\nexport type Crumb = {\n  label: string;\n  link: string;\n  siblings?: { label: string; url: string; isMatching: boolean }[];\n};\n\ntype CrumbWithId = {\n  id: string;\n  crumb?: Crumb;\n  isRootCrumb: boolean;\n  index?: number;\n};\n\ntype CrumbWithIdAndPosition = {\n  id: string;\n  crumb: Crumb;\n  isFirst: boolean;\n  isLast: boolean;\n  isRootCrumb: boolean;\n};\n\nconst emptyCrumbWithIdArray: readonly CrumbWithId[] = [];\nconst emptyCrumbArray: readonly Crumb[] = [];\n\nconst defaultContext: readonly [\n  readonly CrumbWithId[],\n  readonly CrumbWithId[],\n  Dispatch<SetStateAction<readonly CrumbWithId[]>>,\n  MutableRefObject<number>,\n] = [emptyCrumbWithIdArray, emptyCrumbWithIdArray, noop, { current: -1 }];\n\nconst BreadcrumbsContext = createContext(defaultContext);\n\ntype Props = {\n  rootLevelCrumbs?: readonly Crumb[];\n  children: ReactNode;\n};\n\nexport const BreadcrumbsRoot = ({ rootLevelCrumbs = emptyCrumbArray, children }: Props) => {\n  const [crumbs, setCrumbs] = useState(emptyCrumbWithIdArray);\n  const isFirstRenderRef = useRef(true);\n  const currentIndexRef = useRef(-1);\n\n  const [rootCrumbs, setRootCrumbs] = useState(() =>\n    rootLevelCrumbs.map(crumb => ({ id: uuid(), crumb, isRootCrumb: true })),\n  );\n\n  useEffect(() => {\n    if (isFirstRenderRef.current) {\n      isFirstRenderRef.current = false;\n      return;\n    }\n    setRootCrumbs(rootLevelCrumbs.map(crumb => ({ id: uuid(), crumb, isRootCrumb: true })));\n  }, [rootLevelCrumbs]);\n\n  const orderedCrumbs = useMemo(\n    () => [...crumbs].sort((a, b) => ((b.index ?? -1) > (a.index ?? -1) ? -1 : 1)),\n    [crumbs],\n  );\n\n  const value = useMemo(\n    () => [rootCrumbs, orderedCrumbs, setCrumbs, currentIndexRef] as const,\n    [rootCrumbs, orderedCrumbs, setCrumbs, currentIndexRef],\n  );\n\n  return <BreadcrumbsContext.Provider value={value}>{children}</BreadcrumbsContext.Provider>;\n};\n\nconst useBreadcrumbs = () => {\n  const [initialCrumbs, crumbs] = useContext(BreadcrumbsContext);\n  return useMemo(() => [...initialCrumbs, ...crumbs], [initialCrumbs, crumbs]);\n};\n\nexport const useCrumb = (crumb?: Crumb) => {\n  const [, , setValue, currentIndex] = useContext(BreadcrumbsContext);\n  const [id] = useState(() => uuid());\n  const initialCrumb = useRef(crumb);\n\n  const [index] = useState(() => ++currentIndex.current);\n\n  useEffect(() => {\n    setValue(existingCrumbs => {\n      const nextCrumbs = existingCrumbs.concat([\n        { id, crumb: initialCrumb.current, isRootCrumb: false, index },\n      ]);\n      return nextCrumbs;\n    });\n    return () => {\n      setValue(existingCrumbs => existingCrumbs.filter(existingCrumb => existingCrumb.id !== id));\n    };\n  }, [id, setValue, index]);\n\n  useEffect(() => {\n    setValue(existingCrumbs => {\n      const exisitingCrumb = existingCrumbs.find(existingCrumb => existingCrumb.id === id);\n      if (isNotNullish(exisitingCrumb) && exisitingCrumb.crumb !== crumb) {\n        return existingCrumbs.map(existingCrumb => {\n          return existingCrumb.id === id\n            ? { id, crumb, isRootCrumb: exisitingCrumb.isRootCrumb, index }\n            : existingCrumb;\n        });\n      }\n      return existingCrumbs;\n    });\n  }, [id, crumb, setValue, index]);\n};\n\nconst CHEVRON = (\n  <View style={styles.chevron}>\n    <Icon name=\"chevron-right-filled\" color={colors.gray[500]} size={16} />\n  </View>\n);\n\nconst BreadcrumbsSiblingsDropdown = ({\n  siblings,\n  isLast,\n  onPress,\n}: {\n  siblings: NonNullable<Crumb[\"siblings\"]>;\n  isLast: boolean;\n  onPress: () => void;\n}) => {\n  return (\n    <View style={styles.siblingsDropdown}>\n      {siblings.map(({ url, label, isMatching }) => {\n        return (\n          <Link\n            to={url}\n            key={url}\n            ariaCurrentValue=\"location\"\n            onPress={(event: React.MouseEvent<HTMLAnchorElement>) => {\n              if (isMatching && isLast) {\n                event.preventDefault();\n              }\n              onPress();\n            }}\n            style={styles.dropdownLinkContainer}\n          >\n            {({ hovered }) => (\n              <View style={[styles.dropdownLink, isMatching && styles.dropdownLinkActive]}>\n                <LakeText\n                  style={[styles.dropdownLinkText, hovered && styles.dropdownLinkTextHovered]}\n                >\n                  {label}\n                </LakeText>\n\n                {isMatching && (\n                  <>\n                    <Space width={32} />\n\n                    <Icon\n                      color={colors.positive[500]}\n                      name=\"checkmark-filled\"\n                      size={14}\n                      style={styles.tick}\n                    />\n                  </>\n                )}\n              </View>\n            )}\n          </Link>\n        );\n      })}\n    </View>\n  );\n};\n\nconst BreadcrumbsItem = ({\n  crumb,\n  isFirstItem = false,\n  isLastItem = false,\n  shouldAnimate,\n}: {\n  isFirstItem?: boolean;\n  isLastItem?: boolean;\n  crumb: Crumb;\n  shouldAnimate: boolean;\n}) => {\n  const [isHovered, setIsHovered] = useState(() => false);\n  const hoverRef = useRef(null);\n  const [siblings, setSiblings] = useState<Crumb[\"siblings\"] | null>(null);\n\n  useHover(hoverRef, {\n    onHoverStart: () => setIsHovered(true),\n    onHoverEnd: () => setIsHovered(false),\n  });\n\n  const handlePress = useCallback(\n    (event: React.MouseEvent<HTMLAnchorElement>) => {\n      if (crumb.siblings != null) {\n        event.preventDefault();\n        setSiblings(crumb.siblings);\n      }\n    },\n    [crumb.siblings],\n  );\n\n  return (\n    <View style={[styles.item, shouldAnimate ? animations.fadeAndSlideInFromRight.enter : null]}>\n      {!isFirstItem ? CHEVRON : null}\n\n      <View>\n        <Link to={crumb.link} ariaCurrentValue=\"location\" onPress={handlePress}>\n          <View\n            ref={hoverRef}\n            style={[\n              styles.horizontalLink,\n              shouldAnimate && animations.fadeAndSlideInFromRight.enter,\n            ]}\n          >\n            <LakeText\n              color={colors.gray[800]}\n              style={[styles.horizontalLinkText, isLastItem && styles.activeHorizontalLinkText]}\n            >\n              <Text style={isHovered && !isLastItem ? styles.horizontalLinkTextHovered : undefined}>\n                {crumb.label}\n              </Text>\n\n              {crumb.siblings != null ? (\n                <>\n                  <Space width={4} />\n                  <Icon name=\"chevron-down-filled\" color={colors.gray[500]} size={16} />\n                </>\n              ) : null}\n            </LakeText>\n          </View>\n        </Link>\n\n        <View style={styles.dropdownContainer}>\n          <TransitionView {...animations.fadeAndSlideInFromBottom}>\n            {siblings ? (\n              <FocusTrap\n                autoFocus={true}\n                focusLock={true}\n                returnFocus={true}\n                onClickOutside={() => setSiblings(null)}\n                onEscapeKey={() => setSiblings(null)}\n              >\n                <BreadcrumbsSiblingsDropdown\n                  siblings={siblings}\n                  isLast={isLastItem}\n                  onPress={() => setSiblings(null)}\n                />\n              </FocusTrap>\n            ) : null}\n          </TransitionView>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst BreadcrumbsDropdown = ({\n  crumbs,\n  onHoverStart,\n  onHoverEnd,\n  onLinkFocus,\n  onLinkBlur,\n  onLinkPress,\n}: {\n  crumbs: CrumbWithIdAndPosition[];\n  onHoverStart: () => void;\n  onHoverEnd: () => void;\n  onLinkFocus: () => void;\n  onLinkBlur: () => void;\n  onLinkPress: () => void;\n}) => {\n  const containerRef = useRef(null);\n\n  useHover(containerRef, {\n    onHoverStart,\n    onHoverEnd,\n  });\n\n  return (\n    <View style={styles.dropdown} ref={containerRef}>\n      {crumbs.map(({ id, crumb }) => {\n        return (\n          <Link\n            to={crumb.link}\n            key={id}\n            onFocus={onLinkFocus}\n            onBlur={onLinkBlur}\n            onPress={onLinkPress}\n            ariaCurrentValue=\"location\"\n          >\n            {({ hovered }) => (\n              <View style={styles.dropdownLink}>\n                <LakeText\n                  style={[styles.dropdownLinkText, hovered && styles.dropdownLinkTextHovered]}\n                >\n                  {crumb.label}\n                </LakeText>\n              </View>\n            )}\n          </Link>\n        );\n      })}\n    </View>\n  );\n};\n\ntype DropdownOpeningState = \"Open\" | \"OpenFromFocus\" | \"ForcedOpen\" | \"Closed\" | \"ForcedClosed\";\n\ntype DropdownAction = \"Open\" | \"FocusHandle\" | \"Close\" | \"ForceClose\" | \"ForceToggle\";\n\nconst SHOULD_AUTOFOCUS = new Set<DropdownOpeningState>([\"ForcedOpen\", \"OpenFromFocus\"]);\nconst SHOULD_OPEN = new Set<DropdownOpeningState>([\"Open\", \"ForcedOpen\", \"OpenFromFocus\"]);\nconst SHOULD_LOCK_FOCUS = new Set<DropdownOpeningState>([\"ForcedOpen\"]);\n\nconst BreadcrumbsDropdownItems = ({ crumbs }: { crumbs: CrumbWithIdAndPosition[] }) => {\n  const [openingStatus, dispatch] = useReducer(\n    (state: DropdownOpeningState, action: DropdownAction): DropdownOpeningState => {\n      return match([action, state])\n        .returnType<DropdownOpeningState>()\n        .with(\n          [\"ForceToggle\", \"Closed\"],\n          [\"ForceToggle\", \"Open\"],\n          [\"ForceToggle\", \"ForcedClosed\"],\n          () => \"ForcedOpen\",\n        )\n        .with([\"ForceToggle\", \"OpenFromFocus\"], [\"ForceToggle\", \"ForcedOpen\"], () => \"ForcedClosed\")\n        .with([\"ForceClose\", P._], () => \"ForcedClosed\")\n        .with([\"FocusHandle\", \"ForcedClosed\"], () => \"Closed\")\n        .with(\n          [\"Open\", \"ForcedOpen\"],\n          [\"FocusHandle\", \"ForcedOpen\"],\n          [\"Close\", \"ForcedOpen\"],\n          () => \"ForcedOpen\",\n        )\n        .with([\"Open\", P._], () => \"Open\")\n        .with([\"FocusHandle\", P._], () => \"OpenFromFocus\")\n        .with([\"Close\", P._], () => \"Closed\")\n        .exhaustive();\n    },\n    \"Closed\",\n  );\n\n  const timeoutRef = useRef<number | undefined>(undefined);\n  const handleRef = useRef<View>(null);\n  const containerRef = useRef<View>(null);\n\n  const {\n    onHandleFocus,\n    onLinkFocus,\n    onAnyBlur,\n    onHoverStart,\n    onHoverEnd,\n    onPress,\n    onPressOutside,\n    onEscapeKey,\n  } = useMemo(\n    () => ({\n      onHandleFocus: (event: NativeSyntheticEvent<TargetedEvent>) => {\n        if (isNullish(containerRef.current)) {\n          return;\n        }\n        const container = containerRef.current as unknown as Element;\n        const focusEvent = event as unknown as FocusEvent;\n        // Don't reopen if leaving\n        if (!container.contains(focusEvent.relatedTarget as Node | null)) {\n          if (isNotNullish(timeoutRef.current)) {\n            clearTimeout(timeoutRef.current);\n          }\n          dispatch(\"FocusHandle\");\n        }\n      },\n      onLinkFocus: () => {\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        dispatch(\"Open\");\n      },\n      onAnyBlur: () => {\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        timeoutRef.current = window.setTimeout(() => {\n          dispatch(\"Close\");\n        }, 300);\n      },\n      onHoverStart: () => {\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        dispatch(\"Open\");\n      },\n\n      onHoverEnd: () => {\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        timeoutRef.current = window.setTimeout(() => {\n          dispatch(\"Close\");\n        }, 300);\n      },\n\n      onPress: () => {\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        dispatch(\"ForceToggle\");\n      },\n\n      onPressOutside: (event: MouseEvent | TouchEvent) => {\n        if (isNotNullish(handleRef.current)) {\n          const handle = handleRef.current as unknown as Element;\n          if (handle.contains(event.target as Node | null)) {\n            return;\n          }\n        }\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        // Only force closing in case the focus comes directly to the handle\n        // Then put it back to a regular closed state\n        dispatch(\"ForceClose\");\n        timeoutRef.current = window.setTimeout(() => {\n          dispatch(\"Close\");\n        }, 300);\n      },\n\n      onEscapeKey: () => {\n        if (isNotNullish(timeoutRef.current)) {\n          clearTimeout(timeoutRef.current);\n        }\n        dispatch(\"ForceClose\");\n        timeoutRef.current = window.setTimeout(() => {\n          dispatch(\"Close\");\n        }, 300);\n      },\n    }),\n    [],\n  );\n\n  useEffect(() => {\n    return () => {\n      if (isNotNullish(timeoutRef.current)) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  const shouldOpen = SHOULD_OPEN.has(openingStatus);\n  const shouldAutoFocus = SHOULD_AUTOFOCUS.has(openingStatus);\n  const shouldLockFocus = SHOULD_LOCK_FOCUS.has(openingStatus);\n\n  useHover(handleRef, {\n    onHoverStart,\n    onHoverEnd,\n  });\n\n  return (\n    <Box direction=\"row\" alignItems=\"center\">\n      {CHEVRON}\n\n      <View ref={containerRef}>\n        <Pressable\n          ref={handleRef}\n          style={({ pressed }) => [\n            styles.item,\n            pressed && styles.itemPressed,\n            openingStatus === \"ForcedOpen\" && styles.itemForcedOpen,\n          ]}\n          tabIndex={0}\n          onFocus={onHandleFocus}\n          onBlur={onAnyBlur}\n          onPress={onPress}\n        >\n          <View style={styles.horizontalLink}>\n            <LakeText style={[styles.horizontalLinkText, styles.activeHorizontalLinkText]}>\n              {\"…\"}\n            </LakeText>\n          </View>\n        </Pressable>\n\n        <TransitionView {...animations.fadeAndSlideInFromBottom}>\n          {shouldOpen ? (\n            <FocusTrap\n              autoFocus={shouldAutoFocus}\n              focusLock={shouldLockFocus}\n              returnFocus={shouldLockFocus}\n              onClickOutside={onPressOutside}\n              onEscapeKey={shouldLockFocus ? onEscapeKey : undefined}\n            >\n              <BreadcrumbsDropdown\n                crumbs={crumbs}\n                onHoverStart={onHoverStart}\n                onHoverEnd={onHoverEnd}\n                onLinkFocus={onLinkFocus}\n                onLinkBlur={onAnyBlur}\n                onLinkPress={onEscapeKey}\n              />\n            </FocusTrap>\n          ) : null}\n        </TransitionView>\n      </View>\n    </Box>\n  );\n};\n\n// In order to preserve the horizontal space, we collapse the breadcrumbs once\n// there's strictly more than three crumbs. In that case, the expected behavior\n// is as follows:\n// - Display the root crumb (the first one) inline\n// - Collapse any crumb between the first and the penultimate item in a dropdown\n// - Display the last two crumbs inline\nconst arrangeArray = <T,>(array: T[]): { start: T[]; collapsed: T[]; end: T[] } => {\n  if (array.length <= 3) {\n    return {\n      start: array,\n      collapsed: [],\n      end: [],\n    };\n  }\n  return {\n    start: array.slice(0, 1),\n    collapsed: array.slice(1, -2),\n    end: array.slice(-2),\n  };\n};\n\nexport const Breadcrumbs = () => {\n  const crumbs = useBreadcrumbs();\n\n  const cleanCrumbs = useMemo(() => {\n    const hasCrumb = (value: CrumbWithId): value is SetRequired<CrumbWithId, \"crumb\"> =>\n      isNotNullish(value.crumb);\n\n    return crumbs.filter(hasCrumb);\n  }, [crumbs]);\n\n  const previousCrumbs = usePreviousValue(\n    useMemo(() => {\n      return new Set(cleanCrumbs.map(crumb => crumb.id));\n    }, [cleanCrumbs]),\n  );\n\n  const { start, collapsed, end } = useMemo(() => {\n    return arrangeArray(\n      cleanCrumbs.map(\n        ({ id, crumb, isRootCrumb }, index): CrumbWithIdAndPosition => ({\n          id,\n          crumb,\n          isFirst: index === 0,\n          isLast: index === cleanCrumbs.length - 1,\n          isRootCrumb,\n        }),\n      ),\n    );\n  }, [cleanCrumbs]);\n\n  return (\n    <View role=\"navigation\" style={styles.container}>\n      {start.map(({ id, crumb, isFirst, isLast, isRootCrumb }) => (\n        <BreadcrumbsItem\n          key={id}\n          crumb={crumb}\n          isFirstItem={isFirst}\n          isLastItem={isLast}\n          shouldAnimate={!previousCrumbs.has(id) && !isRootCrumb}\n        />\n      ))}\n\n      {collapsed.length > 0 ? <BreadcrumbsDropdownItems crumbs={collapsed} /> : null}\n\n      {end.map(({ id, crumb, isLast, isRootCrumb }) => (\n        <BreadcrumbsItem\n          key={id}\n          crumb={crumb}\n          isLastItem={isLast}\n          shouldAnimate={!previousCrumbs.has(id) && !isRootCrumb}\n        />\n      ))}\n    </View>\n  );\n};\n"],"names":["styles","StyleSheet","radii","colors","spacings","gray75","backgroundColor","shadows","texts","emptyCrumbWithIdArray","emptyCrumbArray","defaultContext","noop","BreadcrumbsContext","createContext","BreadcrumbsRoot","rootLevelCrumbs","children","crumbs","setCrumbs","useState","isFirstRenderRef","useRef","currentIndexRef","rootCrumbs","setRootCrumbs","crumb","uuid","useEffect","orderedCrumbs","useMemo","a","b","value","jsx","useBreadcrumbs","initialCrumbs","useContext","useCrumb","setValue","currentIndex","id","initialCrumb","index","existingCrumbs","existingCrumb","exisitingCrumb","isNotNullish","CHEVRON","View","Icon","BreadcrumbsSiblingsDropdown","siblings","isLast","onPress","url","label","isMatching","Link","event","hovered","jsxs","LakeText","Fragment","Space","BreadcrumbsItem","isFirstItem","isLastItem","shouldAnimate","isHovered","setIsHovered","hoverRef","setSiblings","useHover","handlePress","useCallback","animations","Text","TransitionView","FocusTrap","BreadcrumbsDropdown","onHoverStart","onHoverEnd","onLinkFocus","onLinkBlur","onLinkPress","containerRef","SHOULD_AUTOFOCUS","SHOULD_OPEN","SHOULD_LOCK_FOCUS","BreadcrumbsDropdownItems","openingStatus","dispatch","useReducer","state","action","match","P","timeoutRef","handleRef","onHandleFocus","onAnyBlur","onPressOutside","onEscapeKey","isNullish","container","focusEvent","shouldOpen","shouldAutoFocus","shouldLockFocus","Box","Pressable","pressed","arrangeArray","array","Breadcrumbs","cleanCrumbs","hasCrumb","previousCrumbs","usePreviousValue","start","collapsed","end","isRootCrumb","isFirst"],"mappings":"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"}