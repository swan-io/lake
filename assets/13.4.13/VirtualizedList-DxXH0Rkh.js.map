{"version":3,"file":"VirtualizedList-DxXH0Rkh.js","sources":["../../../packages/lake/src/components/Cells.tsx","../../../packages/lake/src/components/VirtualizedList.tsx"],"sourcesContent":["import { ComponentProps, ReactNode, useCallback, useState } from \"react\";\nimport { GestureResponderEvent, StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\nimport { match } from \"ts-pattern\";\nimport { Except } from \"type-fest\";\nimport { colors, invariantColors, spacings } from \"../constants/design\";\nimport { setClipboardText } from \"../utils/clipboard\";\nimport { isNotNullish, isNullish } from \"../utils/nullish\";\nimport { Icon } from \"./Icon\";\nimport { LakeText, TextVariant } from \"./LakeText\";\nimport { LakeTooltip } from \"./LakeTooltip\";\nimport { Pressable } from \"./Pressable\";\nimport { Space } from \"./Space\";\n\nconst directionStyles = StyleSheet.create({\n  column: { flexDirection: \"column\" },\n  row: { flexDirection: \"row\" },\n});\n\nconst alignItemsStyles = StyleSheet.create({\n  left: { alignItems: \"flex-start\" },\n  center: { alignItems: \"center\" },\n  right: { alignItems: \"flex-end\" },\n});\n\nconst justifyContentStyles = StyleSheet.create({\n  left: { justifyContent: \"flex-start\" },\n  center: { justifyContent: \"center\" },\n  right: { justifyContent: \"flex-end\" },\n});\n\nconst fadeOnLeftMask = `linear-gradient(to right, ${invariantColors.transparent}, ${invariantColors.black} ${spacings[8]})`;\nconst fadeOnRightMask = `linear-gradient(to left, ${invariantColors.transparent}, ${invariantColors.black} ${spacings[8]})`;\n\nconst styles = StyleSheet.create({\n  cell: {\n    flexDirection: \"row\",\n    flexGrow: 1,\n    flexShrink: 1,\n    paddingHorizontal: spacings[8],\n  },\n  cellContentContainer: {\n    flexGrow: 1,\n    flexShrink: 1,\n    overflow: \"hidden\",\n  },\n  fadeOnLeft: {\n    maskImage: fadeOnLeftMask,\n    WebkitMaskImage: fadeOnLeftMask,\n  },\n  fadeOnRight: {\n    maskImage: fadeOnRightMask,\n    WebkitMaskImage: fadeOnRightMask,\n  },\n  noCursor: {\n    cursor: \"text\",\n  },\n  sortIcon: {\n    transitionProperty: \"transform\",\n    transitionDuration: \"300ms\",\n    transitionTimingFunction: \"ease-in-out\",\n  },\n  rotated: {\n    transform: \"rotate(-180deg)\",\n  },\n  headerUnderline: {\n    backgroundColor: colors.gray[900],\n    borderBottomColor: colors.current[500],\n    bottom: -10,\n    height: 2,\n    position: \"absolute\",\n    width: \"100%\",\n  },\n  headerUnderlineActive: {\n    backgroundColor: colors.current[500],\n  },\n  buttonUnderline: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: spacings[8],\n    height: 2,\n    backgroundColor: \"currentColor\",\n  },\n  buttonEndUnderline: {\n    right: 0,\n    left: spacings[8],\n  },\n  fullHeight: {\n    height: \"100%\",\n  },\n  button: {\n    justifyContent: \"center\",\n    height: \"100%\",\n    paddingRight: spacings[8],\n  },\n  buttonEnd: {\n    paddingRight: 0,\n    paddingLeft: spacings[8],\n  },\n});\n\ntype Align = \"left\" | \"center\" | \"right\";\ntype FadeOn = \"left\" | \"right\";\ntype SortDirection = \"Desc\" | \"Asc\";\ntype TooltipProp = Except<ComponentProps<typeof LakeTooltip>, \"children\">;\n\ntype CellProps = {\n  children: ReactNode;\n  align?: Align;\n  direction?: keyof typeof directionStyles;\n  fadeOn?: FadeOn;\n  style?: StyleProp<ViewStyle>;\n  contentContainerStyle?: StyleProp<ViewStyle>;\n};\n\nexport const Cell = ({\n  children,\n  align = \"left\",\n  direction = \"row\",\n  fadeOn,\n  style,\n  contentContainerStyle,\n}: CellProps) => (\n  <View style={[styles.cell, style]}>\n    <View\n      style={[\n        styles.cellContentContainer,\n        directionStyles[direction],\n        alignItemsStyles[direction === \"row\" ? \"center\" : align],\n        justifyContentStyles[direction === \"row\" ? align : \"center\"],\n        fadeOn === \"left\" && styles.fadeOnLeft,\n        fadeOn === \"right\" && styles.fadeOnRight,\n        contentContainerStyle,\n      ]}\n    >\n      {children}\n    </View>\n  </View>\n);\n\ntype HeaderCellProps = {\n  align?: Align;\n  sort?: SortDirection;\n  text: string;\n  onPress?: (direction: SortDirection) => void;\n};\n\nexport const HeaderCell = ({ align = \"left\", sort, text, onPress }: HeaderCellProps) => {\n  const sortActive = isNotNullish(sort) && isNotNullish(onPress);\n  const disabled = isNullish(onPress);\n\n  return (\n    <Pressable\n      role=\"columnheader\"\n      disabled={disabled}\n      style={[styles.cell, disabled && styles.noCursor]}\n      onPress={() => {\n        onPress?.(\n          match(sort)\n            .returnType<SortDirection>()\n            .with(\"Desc\", () => \"Asc\")\n            .otherwise(() => \"Desc\"),\n        );\n      }}\n    >\n      {({ hovered }) => (\n        <View\n          style={[\n            styles.cellContentContainer,\n            directionStyles[\"row\"],\n            alignItemsStyles[\"center\"],\n            justifyContentStyles[align],\n          ]}\n        >\n          <LakeText\n            numberOfLines={1}\n            align={align}\n            color={sortActive ? colors.current[500] : colors.gray[900]}\n            variant=\"medium\"\n          >\n            {text}\n          </LakeText>\n\n          {isNotNullish(onPress) && (\n            <>\n              <Space width={8} />\n\n              <Icon\n                size={15}\n                color={sortActive ? colors.current[500] : colors.gray[500]}\n                name={sortActive ? \"arrow-down-filled\" : \"chevron-up-down-regular\"}\n                style={[styles.sortIcon, sort === \"Asc\" && styles.rotated]}\n              />\n            </>\n          )}\n\n          {(hovered || sortActive) && (\n            <View style={[styles.headerUnderline, sortActive && styles.headerUnderlineActive]} />\n          )}\n        </View>\n      )}\n    </Pressable>\n  );\n};\n\ntype TextCellProps = {\n  align?: Align;\n  color?: string;\n  text: string;\n  tooltip?: TooltipProp;\n  variant?: TextVariant;\n};\n\nexport const TextCell = ({\n  align = \"left\",\n  color = colors.gray[900],\n  text,\n  tooltip,\n  variant = \"regular\",\n}: TextCellProps) => (\n  <Cell align={align}>\n    <LakeText numberOfLines={1} align={align} color={color} tooltip={tooltip} variant={variant}>\n      {text}\n    </LakeText>\n  </Cell>\n);\n\ntype CopyableTextCellProps = {\n  copiedWording: string;\n  copyWording: string;\n  text: string;\n  textToCopy?: string;\n  tooltip?: TooltipProp;\n  variant?: TextVariant;\n};\n\nexport const CopyableTextCell = ({\n  copiedWording,\n  copyWording,\n  text,\n  textToCopy,\n  tooltip,\n  variant = \"regular\",\n}: CopyableTextCellProps) => {\n  const [visibleState, setVisibleState] = useState<\"copy\" | \"copied\">(\"copy\");\n  const clipboardText = textToCopy ?? text;\n\n  const onPress = useCallback(\n    (event: GestureResponderEvent) => {\n      event.preventDefault();\n      setClipboardText(clipboardText);\n      setVisibleState(\"copied\");\n    },\n    [clipboardText],\n  );\n\n  return (\n    <Cell style={styles.fullHeight}>\n      <LakeTooltip\n        content={visibleState === \"copy\" ? copyWording : copiedWording}\n        onHide={() => setVisibleState(\"copy\")}\n        placement=\"left\"\n        togglableOnFocus={true}\n        containerStyle={styles.fullHeight}\n      >\n        <Pressable aria-label={copyWording} role=\"button\" onPress={onPress} style={styles.button}>\n          {({ hovered }) => (\n            <>\n              <Icon\n                name={hovered ? \"copy-filled\" : \"copy-regular\"}\n                color=\"currentColor\"\n                size={14}\n              />\n\n              {hovered && <View role=\"none\" style={styles.buttonUnderline} />}\n            </>\n          )}\n        </Pressable>\n      </LakeTooltip>\n\n      <LakeText numberOfLines={1} color={colors.gray[900]} tooltip={tooltip} variant={variant}>\n        {text}\n      </LakeText>\n    </Cell>\n  );\n};\n\ntype BalanceCellProps = {\n  align?: Align;\n  currency: string;\n  formatCurrency: (value: number, currency: string) => string;\n  originalValue?: { value: number; currency: string };\n  value: number;\n  variant?: TextVariant;\n};\n\n// TODO: handle `+` sign properly\nexport const BalanceCell = ({\n  align = \"left\",\n  currency,\n  formatCurrency,\n  originalValue,\n  value,\n  variant = \"medium\",\n}: BalanceCellProps) => (\n  <Cell align={align} direction=\"column\">\n    <LakeText\n      numberOfLines={1}\n      align={align}\n      color={colors.gray[900]}\n      variant={variant}\n      style={[\n        value > 0 && { color: colors.positive.primary },\n        value < 0 && { color: colors.negative.primary },\n      ]}\n    >\n      {(value > 0 ? \"+\" : \"\") + formatCurrency(value, currency)}\n    </LakeText>\n\n    {isNotNullish(originalValue) && originalValue.currency !== currency && (\n      <LakeText numberOfLines={1} align={align} color={colors.gray[500]} variant=\"smallRegular\">\n        {(originalValue.value > 0 ? \"+\" : \"\") +\n          formatCurrency(originalValue.value, originalValue.currency)}\n      </LakeText>\n    )}\n  </Cell>\n);\n\ntype LinkCellProps = {\n  buttonPosition?: \"start\" | \"end\";\n  children: ReactNode;\n  external?: boolean;\n  fadeOn?: FadeOn;\n  onPress: () => void;\n  tooltip?: TooltipProp;\n  variant?: TextVariant;\n};\n\nexport const LinkCell = ({\n  buttonPosition = \"start\",\n  children,\n  external = false,\n  fadeOn,\n  onPress,\n  tooltip,\n  variant = \"medium\",\n}: LinkCellProps) => {\n  const atEnd = buttonPosition === \"end\";\n\n  const button = (\n    <Pressable\n      style={[styles.button, atEnd && styles.buttonEnd]}\n      onPress={event => {\n        event.preventDefault();\n        onPress();\n      }}\n    >\n      {({ hovered }) => (\n        <>\n          <Icon size={14} name={external ? \"open-regular\" : \"arrow-right-filled\"} />\n\n          {hovered && (\n            <View\n              role=\"none\"\n              style={[styles.buttonUnderline, atEnd && styles.buttonEndUnderline]}\n            />\n          )}\n        </>\n      )}\n    </Pressable>\n  );\n\n  const text = (\n    <LakeText numberOfLines={1} color={colors.gray[900]} variant={variant} tooltip={tooltip}>\n      {children}\n    </LakeText>\n  );\n\n  return (\n    <Cell fadeOn={fadeOn}>\n      {atEnd ? (\n        <>\n          {text}\n          {button}\n        </>\n      ) : (\n        <>\n          {button}\n          {text}\n        </>\n      )}\n    </Cell>\n  );\n};\n","import { Option } from \"@swan-io/boxed\";\nimport {\n  cloneElement,\n  memo,\n  ReactElement,\n  ReactNode,\n  RefObject,\n  useCallback,\n  useEffect,\n  useId,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { backgroundColor as backgroundColorVariants, colors, spacings } from \"../constants/design\";\nimport { useHover } from \"../hooks/useHover\";\nimport { Pressable } from \"./Pressable\";\nimport { ScrollView, ScrollViewRef } from \"./ScrollView\";\nimport { Space } from \"./Space\";\n\nconst HORIZONTAL_ROW_PADDING = 16;\n\nconst styles = StyleSheet.create({\n  container: {\n    ...commonStyles.fill,\n    height: 1,\n    alignSelf: \"stretch\",\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  contentContainer: {\n    minWidth: \"100%\",\n  },\n  emptyListContentContainer: {\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: spacings[48],\n    minHeight: \"100%\",\n  },\n  headerRow: {\n    position: \"sticky\",\n    top: 0,\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    zIndex: 2,\n  },\n  cellsContainer: {\n    boxShadow: `0 -1px ${colors.gray[100]}`,\n    flexDirection: \"row\",\n    transform: \"translateZ(0)\",\n  },\n  stickedToStartColumnGroup: {\n    position: \"sticky\",\n    left: 0,\n    zIndex: 1,\n  },\n  stickedToStartColumnGroupLocked: {\n    position: \"relative\",\n  },\n  centerColumnGroup: {\n    flexGrow: 1,\n  },\n  stickedToEndColumnGroup: {\n    position: \"sticky\",\n    right: 0,\n    zIndex: 1,\n  },\n  stickedToEndColumnGroupLocked: {\n    position: \"relative\",\n  },\n  rowsContainer: {\n    position: \"relative\",\n  },\n  row: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    transitionProperty: \"top\",\n    transitionDuration: \"300ms\",\n    transitionTimingFunction: \"ease-in-out\",\n  },\n  headerCell: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  cell: {\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n  },\n  shadowsLayerContainer: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    pointerEvents: \"none\",\n    zIndex: 4,\n  },\n  shadowsLayer: {\n    position: \"sticky\",\n    top: 12,\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n  },\n  startColumnsShadow: {\n    position: \"sticky\",\n    left: 0,\n    top: 0,\n    boxShadow: \"15px 0 10px -12px rgba(0, 0, 0, 0.1)\",\n    transition: \"100ms ease-in-out opacity\",\n  },\n  endColumnsShadow: {\n    position: \"sticky\",\n    right: 0,\n    top: 0,\n    boxShadow: \"-15px 0 10px -12px rgba(0, 0, 0, 0.1)\",\n    transition: \"100ms ease-in-out opacity\",\n  },\n  scrollTracker: {\n    pointerEvents: \"none\",\n    position: \"absolute\",\n    left: 0,\n    bottom: 0,\n    right: 0,\n  },\n  placeholderRowContainer: {\n    position: \"absolute\",\n    alignItems: \"flex-start\",\n    top: 0,\n    left: 0,\n    right: 0,\n    animationKeyframes: {\n      \"50%\": {\n        opacity: 0.6,\n      },\n    },\n    animationDuration: \"2000ms\",\n    animationTimingFunction: \"linear\",\n    animationIterationCount: \"infinite\",\n    boxShadow: `inset 0 -1px ${colors.gray[100]}`,\n  },\n  placeholderRowContents: {\n    position: \"sticky\",\n    width: \"50%\",\n    left: 0,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n    flexGrow: 1,\n    paddingHorizontal: spacings[24],\n  },\n  loadingPlaceholder: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n  },\n  placeholderRow: {\n    height: 14,\n    width: \"30%\",\n    backgroundColor: colors.gray[100],\n  },\n  placeholderRowEnd: {\n    paddingHorizontal: spacings[20],\n    position: \"sticky\",\n    right: 0,\n    flexGrow: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n  },\n  smallPlaceholderRow: {\n    width: \"10%\",\n  },\n  resizeHandleZone: {\n    position: \"absolute\",\n    cursor: \"ew-resize\",\n    top: 0,\n    bottom: 0,\n    width: spacings[24],\n  },\n  resizeHandleZoneStart: {\n    right: 0,\n    alignItems: \"flex-end\",\n  },\n  resizeHandleZoneEnd: {\n    right: \"auto\",\n    left: 0,\n    alignItems: \"flex-start\",\n  },\n  resizeHandleLeft: {\n    right: \"auto\",\n    left: 0,\n  },\n  resizeHandle: {\n    backgroundColor: colors.gray[200],\n    height: \"100%\",\n    opacity: 0,\n    transitionDuration: \"200ms\",\n    transitionProperty: \"opacity\",\n    width: 3,\n  },\n  resizeHandleActive: {\n    opacity: 1,\n  },\n});\n\nexport type ColumnTitleConfig<ExtraInfo> = {\n  title: string;\n  extraInfo: ExtraInfo;\n  id: string;\n};\n\nexport type ColumnCellConfig<T, ExtraInfo> = {\n  columnId: string;\n  item: T;\n  isHovered: boolean;\n  index: number;\n  extraInfo: ExtraInfo;\n};\n\nexport type ColumnConfig<T, ExtraInfo> = {\n  id: string;\n  grow?: boolean;\n  width: number;\n  title: string;\n  renderTitle: (props: ColumnTitleConfig<ExtraInfo>) => ReactNode;\n  renderCell: (props: ColumnCellConfig<T, ExtraInfo>) => ReactNode;\n};\n\nexport type LinkConfig<T, ExtraInfo> = {\n  item: T;\n  index: number;\n  extraInfo: ExtraInfo;\n};\n\nexport type VirtualizedListProps<T, ExtraInfo> = {\n  variant: \"default\" | \"accented\";\n  data: T[];\n  keyExtractor: (item: T, index: number) => string;\n  headerHeight: number;\n  rowHeight: number;\n  extraInfo: ExtraInfo;\n  stickedToStartColumns?: ColumnConfig<T, ExtraInfo>[];\n  columns: ColumnConfig<T, ExtraInfo>[];\n  stickedToEndColumns?: ColumnConfig<T, ExtraInfo>[];\n  renderThreshold?: number;\n  onEndReached?: () => void;\n  onEndReachedThreshold?: number;\n  getRowLink?: (config: LinkConfig<T, ExtraInfo>) => ReactElement | undefined;\n  renderEmptyList: () => ReactNode;\n  marginHorizontal?: string;\n  loading?: {\n    isLoading: boolean;\n    count: number;\n  };\n  onColumnResize?: (values: { id: string; width: number }) => void;\n};\n\ntype ResizeHandleProps = {\n  id: string;\n  width: number;\n  end?: boolean;\n  onResize?: (values: { id: string; width: number }) => void;\n  scrollViewRef: RefObject<ScrollViewRef | null>;\n};\n\nconst ResizeHandle = ({ id, end = false, width, onResize, scrollViewRef }: ResizeHandleProps) => {\n  const ref = useRef<View>(null);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const widthRef = useRef(width);\n  const onResizeRef = useRef(onResize);\n\n  useLayoutEffect(() => {\n    widthRef.current = width;\n    onResizeRef.current = onResize;\n  }, [width, onResize]);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies(scrollViewRef.current.element.style): _\n  // biome-ignore lint/correctness/useExhaustiveDependencies(scrollViewRef.current?.element): _\n  useEffect(() => {\n    const element = ref.current as HTMLDivElement | null;\n    if (element != null) {\n      let startX: number | null = null;\n      let startWidth: number | null = null;\n\n      const onMouseMove = (event: MouseEvent) => {\n        if (startX != null && startWidth != null) {\n          onResizeRef.current?.({\n            id,\n            width: Math.max(24, startWidth + (event.clientX - startX) * (end ? -1 : 1)),\n          });\n        }\n      };\n\n      const onMouseUp = (event: MouseEvent) => {\n        if (scrollViewRef.current?.element != null) {\n          scrollViewRef.current.element.style.webkitUserSelect = \"\";\n        }\n        if (startX != null && startWidth != null) {\n          onResizeRef.current?.({\n            id,\n            width: Math.max(24, startWidth + (event.clientX - startX) * (end ? -1 : 1)),\n          });\n        }\n        startX = null;\n        document.documentElement.removeEventListener(\"mousemove\", onMouseMove);\n        setIsDragging(false);\n      };\n\n      const onMouseDown = (event: MouseEvent) => {\n        if (scrollViewRef.current?.element != null) {\n          scrollViewRef.current.element.style.webkitUserSelect = \"none\";\n        }\n        startX = event.clientX;\n        startWidth = widthRef.current;\n        document.documentElement.addEventListener(\"mousemove\", onMouseMove);\n        document.documentElement.addEventListener(\"mouseup\", onMouseUp);\n        setIsDragging(true);\n      };\n\n      element.addEventListener(\"mousedown\", onMouseDown);\n\n      return () => {\n        if (scrollViewRef.current?.element != null) {\n          scrollViewRef.current.element.style.webkitUserSelect = \"\";\n        }\n        setIsDragging(false);\n        element.removeEventListener(\"mousedown\", onMouseDown);\n        document.documentElement.removeEventListener(\"mousemove\", onMouseMove);\n        document.documentElement.removeEventListener(\"mouseup\", onMouseUp);\n      };\n    }\n  }, [id, end]);\n\n  return (\n    <Pressable\n      ref={ref}\n      role=\"none\"\n      style={[\n        styles.resizeHandleZone,\n        end ? styles.resizeHandleZoneEnd : styles.resizeHandleZoneStart,\n      ]}\n    >\n      {({ hovered }) => (\n        <View style={[styles.resizeHandle, (hovered || isDragging) && styles.resizeHandleActive]} />\n      )}\n    </Pressable>\n  );\n};\n\nexport const VirtualizedList = <T, ExtraInfo>({\n  variant,\n  data,\n  stickedToStartColumns,\n  columns,\n  stickedToEndColumns,\n  headerHeight,\n  rowHeight,\n  renderThreshold = 1000,\n  onEndReached,\n  onEndReachedThreshold = 200,\n  loading,\n  extraInfo,\n  keyExtractor,\n  marginHorizontal,\n  renderEmptyList,\n  onColumnResize,\n  getRowLink,\n}: VirtualizedListProps<T, ExtraInfo>) => {\n  // Used for unique IDs generation (usefull for header IDs and cells aria-describedBy pointing to them)\n  const viewId = useId();\n  const scrollViewRef = useRef<ScrollViewRef>(null);\n  const scrollTrackerRef = useRef<View>(null);\n\n  // Theoretical height of all actual data if rendered\n  const fullDataHeight = rowHeight * data.length;\n\n  const loadingDataPlaceholderHeight = Option.fromNullable(loading)\n    .flatMap(({ isLoading, count }) => (isLoading ? Option.Some(rowHeight * count) : Option.None()))\n    .getOr(0);\n\n  const containerContainerHeight = headerHeight + fullDataHeight + loadingDataPlaceholderHeight;\n\n  const stickedToStartFirstCellLeftPadding = Option.fromNullable(stickedToStartColumns)\n    .map(() => HORIZONTAL_ROW_PADDING)\n    .getOr(0);\n\n  const centerFirstCellLeftPadding = Option.fromNullable(stickedToStartColumns)\n    .map(() => 0)\n    .getOr(HORIZONTAL_ROW_PADDING);\n\n  const centerLastCellLeftPadding = Option.fromNullable(stickedToEndColumns)\n    .map(() => 0)\n    .getOr(HORIZONTAL_ROW_PADDING);\n\n  const stickedToEndLastCellRightPadding = Option.fromNullable(stickedToEndColumns)\n    .map(() => HORIZONTAL_ROW_PADDING)\n    .getOr(0);\n\n  const stickedToStartColumnsWidth = useMemo(\n    () =>\n      Option.fromNullable(stickedToStartColumns)\n        .map(columns => columns.reduce((acc, column) => acc + column.width, 0))\n        .getOr(0) + stickedToStartFirstCellLeftPadding,\n    [stickedToStartColumns, stickedToStartFirstCellLeftPadding],\n  );\n\n  const centerColumnsWidth = useMemo(\n    () =>\n      columns.reduce((acc, column) => acc + column.width, 0) +\n      centerFirstCellLeftPadding +\n      centerLastCellLeftPadding,\n    [columns, centerFirstCellLeftPadding, centerLastCellLeftPadding],\n  );\n\n  const stickedToEndColumnsWidth = useMemo(\n    () =>\n      Option.fromNullable(stickedToEndColumns)\n        .map(columns => columns.reduce((acc, column) => acc + column.width, 0))\n        .getOr(0) + stickedToEndLastCellRightPadding,\n    [stickedToEndColumns, stickedToEndLastCellRightPadding],\n  );\n\n  const contentContainerWidth =\n    stickedToStartColumnsWidth + centerColumnsWidth + stickedToEndColumnsWidth;\n\n  const backgroundColor = backgroundColorVariants[variant];\n\n  // We store the `startIndex` and `endIndex` rather than the scroll position\n  // so that it triggers way less re-renders\n  const [rangeToRender, setRangeToRender] = useState<\n    { startIndex: number; endIndex: number } | undefined\n  >(undefined);\n\n  const [clientHeight, setClientHeight] = useState<number | undefined>(undefined);\n\n  const [horizontalScrollPosition, setHasHorizontalScrollPosition] = useState<\n    \"Start\" | \"Middle\" | \"End\" | \"NoScroll\" | undefined\n  >(undefined);\n\n  const rowsToRender = useMemo(() => {\n    return Option.fromNullable(rangeToRender).map(({ startIndex, endIndex }) => {\n      const clampedEndIndex = Math.min(data.length, endIndex);\n      return {\n        startIndex,\n        endIndex: clampedEndIndex,\n        data: data.slice(startIndex, clampedEndIndex),\n      };\n    });\n  }, [data, rangeToRender]);\n\n  const onLayoutUpdate = useCallback(() => {\n    const element = Option.fromNullable(scrollViewRef.current).flatMap(ref =>\n      Option.fromNullable(ref.element),\n    );\n    setRangeToRender(previousRangeToRender =>\n      element\n        .map(scrollView => {\n          const startIndex = Math.max(\n            0,\n            Math.floor((scrollView.scrollTop - renderThreshold) / rowHeight),\n          );\n\n          const endIndex =\n            startIndex + Math.ceil((scrollView.scrollHeight + renderThreshold * 2) / rowHeight);\n\n          if (\n            previousRangeToRender?.startIndex === startIndex &&\n            previousRangeToRender.endIndex === endIndex\n          ) {\n            return previousRangeToRender;\n          }\n\n          return { startIndex, endIndex };\n        })\n        .toUndefined(),\n    );\n\n    setClientHeight(element.map(scrollView => scrollView.clientHeight).toUndefined());\n\n    setHasHorizontalScrollPosition(\n      element\n        .map(scrollView =>\n          scrollView.scrollWidth === scrollView.clientWidth ||\n          scrollView.clientWidth - (stickedToEndColumnsWidth + stickedToStartColumnsWidth) < 300\n            ? \"NoScroll\"\n            : scrollView.scrollLeft <= 0\n              ? \"Start\"\n              : scrollView.scrollLeft >= scrollView.scrollWidth - scrollView.clientWidth\n                ? \"End\"\n                : \"Middle\",\n        )\n        .toUndefined(),\n    );\n  }, [renderThreshold, rowHeight, stickedToStartColumnsWidth, stickedToEndColumnsWidth]);\n\n  useLayoutEffect(() => {\n    onLayoutUpdate();\n  }, [onLayoutUpdate]);\n\n  const scrollTimeoutRef = useRef<number>(undefined);\n  const rowsContainerRef = useRef<View>(null);\n\n  const onScroll = useCallback(() => {\n    // Disable interactions in cells during scroll, avoids useless\n    // re-renders\n    if (scrollTimeoutRef.current != null) {\n      clearTimeout(scrollTimeoutRef.current);\n    }\n    if (rowsContainerRef.current instanceof HTMLElement) {\n      rowsContainerRef.current.style.pointerEvents = \"none\";\n    }\n    scrollTimeoutRef.current = window.setTimeout(() => {\n      if (rowsContainerRef.current instanceof HTMLElement) {\n        rowsContainerRef.current.style.pointerEvents = \"auto\";\n      }\n    }, 100);\n\n    onLayoutUpdate();\n  }, [onLayoutUpdate]);\n\n  useEffect(() => {\n    const element = Option.fromNullable(scrollViewRef.current).flatMap(ref =>\n      Option.fromNullable(ref.element),\n    );\n    return element\n      .map(element => {\n        const resizeObserver = new ResizeObserver(() => {\n          onLayoutUpdate();\n        });\n        resizeObserver.observe(element);\n        return () => resizeObserver.unobserve(element);\n      })\n      .toUndefined();\n  }, [onLayoutUpdate]);\n\n  // tracks if the threshold to initiate the next data load is reached\n  // biome-ignore lint/correctness/useExhaustiveDependencies(data.length):\n  useEffect(() => {\n    const scrollTracker = scrollTrackerRef.current;\n    if (scrollTracker != null) {\n      const scrollTrackerElement = scrollTracker as unknown as HTMLElement;\n      const intersectionObserver = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            if (onEndReached != null) {\n              onEndReached();\n            }\n          }\n        });\n      });\n      intersectionObserver.observe(scrollTrackerElement);\n      return () => intersectionObserver.unobserve(scrollTrackerElement);\n    }\n  }, [onEndReached, data.length]);\n\n  const header = useMemo(() => {\n    return (\n      <View style={[styles.headerRow, { height: headerHeight }]}>\n        {Option.fromNullable(stickedToStartColumns)\n          .map(columns => (\n            <View\n              style={[\n                styles.cellsContainer,\n                styles.stickedToStartColumnGroup,\n                horizontalScrollPosition === \"NoScroll\" && styles.stickedToStartColumnGroupLocked,\n                { width: stickedToStartColumnsWidth, backgroundColor, height: headerHeight },\n              ]}\n            >\n              {columns.map(({ id, width, title, renderTitle }, index) => {\n                const columnId = `${viewId}_${id}`;\n                const paddingLeft = index === 0 ? stickedToStartFirstCellLeftPadding : 0;\n\n                return (\n                  <View\n                    style={[styles.headerCell, { width: width + paddingLeft, paddingLeft }]}\n                    id={columnId}\n                    key={columnId}\n                  >\n                    {renderTitle({ title, extraInfo, id })}\n                    <ResizeHandle\n                      width={width}\n                      id={id}\n                      onResize={onColumnResize}\n                      scrollViewRef={scrollViewRef}\n                    />\n                  </View>\n                );\n              })}\n            </View>\n          ))\n          .toNull()}\n\n        <View\n          style={[\n            styles.cellsContainer,\n            styles.centerColumnGroup,\n            { width: centerColumnsWidth, backgroundColor, height: headerHeight },\n          ]}\n        >\n          {columns.map(({ id, grow = false, width, title, renderTitle }, index) => {\n            const columnId = `${viewId}_${id}`;\n            const paddingLeft = index === 0 ? centerFirstCellLeftPadding : 0;\n            const paddingRight = index === columns.length - 1 ? centerLastCellLeftPadding : 0;\n\n            return (\n              <View\n                style={[\n                  styles.headerCell,\n                  grow && styles.grow,\n                  { width: width + paddingLeft + paddingRight, paddingLeft, paddingRight },\n                ]}\n                id={columnId}\n                key={columnId}\n              >\n                {renderTitle({ title, extraInfo, id })}\n                <ResizeHandle\n                  width={width}\n                  id={id}\n                  onResize={onColumnResize}\n                  scrollViewRef={scrollViewRef}\n                />\n              </View>\n            );\n          })}\n        </View>\n\n        {Option.fromNullable(stickedToEndColumns)\n          .map(columns => (\n            <View\n              style={[\n                styles.cellsContainer,\n                styles.stickedToEndColumnGroup,\n                horizontalScrollPosition === \"NoScroll\" && styles.stickedToEndColumnGroupLocked,\n                { width: stickedToEndColumnsWidth, backgroundColor, height: headerHeight },\n              ]}\n            >\n              {columns.map(({ id, width, title, renderTitle }, index) => {\n                const columnId = `${viewId}_${id}`;\n                const paddingRight =\n                  index === columns.length - 1 ? stickedToEndLastCellRightPadding : 0;\n\n                return (\n                  <View\n                    style={[styles.headerCell, { width: width + paddingRight, paddingRight }]}\n                    id={columnId}\n                    key={columnId}\n                  >\n                    {renderTitle({ title, extraInfo, id })}\n                    <ResizeHandle\n                      end={true}\n                      width={width}\n                      id={id}\n                      onResize={onColumnResize}\n                      scrollViewRef={scrollViewRef}\n                    />\n                  </View>\n                );\n              })}\n            </View>\n          ))\n          .toNull()}\n      </View>\n    );\n  }, [\n    backgroundColor,\n    stickedToStartColumnsWidth,\n    centerColumnsWidth,\n    stickedToEndColumnsWidth,\n    headerHeight,\n    extraInfo,\n    stickedToStartColumns,\n    columns,\n    stickedToEndColumns,\n    viewId,\n    horizontalScrollPosition,\n    stickedToStartFirstCellLeftPadding,\n    centerFirstCellLeftPadding,\n    centerLastCellLeftPadding,\n    stickedToEndLastCellRightPadding,\n    onColumnResize,\n  ]);\n\n  const startColumnShadow = useMemo(() => {\n    if (stickedToStartColumnsWidth === 0) {\n      return Option.None();\n    }\n    return Option.Some(\n      <View\n        style={[\n          styles.startColumnsShadow,\n          {\n            width: stickedToStartColumnsWidth,\n            opacity: Option.fromNullable(horizontalScrollPosition)\n              .map(value => (value === \"Start\" || value === \"NoScroll\" ? 0 : 1))\n              .getOr(0),\n          },\n        ]}\n      />,\n    );\n  }, [stickedToStartColumnsWidth, horizontalScrollPosition]);\n\n  const endColumnShadow = useMemo(() => {\n    if (stickedToEndColumnsWidth === 0) {\n      return Option.None();\n    }\n    return Option.Some(\n      <View\n        style={[\n          styles.endColumnsShadow,\n          {\n            width: stickedToEndColumnsWidth,\n            opacity: Option.fromNullable(horizontalScrollPosition)\n              .map(value => (value === \"End\" || value === \"NoScroll\" ? 0 : 1))\n              .getOr(0),\n          },\n        ]}\n      />,\n    );\n  }, [stickedToEndColumnsWidth, horizontalScrollPosition]);\n\n  if (\n    data.length === 0 &&\n    !Option.fromNullable(loading)\n      .map(({ isLoading }) => isLoading)\n      .getOr(false)\n  ) {\n    return (\n      <ScrollView style={styles.container} contentContainerStyle={styles.emptyListContentContainer}>\n        {renderEmptyList()}\n      </ScrollView>\n    );\n  }\n\n  return (\n    <ScrollView\n      ref={scrollViewRef}\n      both={true}\n      style={[styles.container, { marginHorizontal }]}\n      onScroll={onScroll}\n      scrollEventThrottle={32}\n      contentContainerStyle={[\n        styles.contentContainer,\n        {\n          height: containerContainerHeight,\n          width: contentContainerWidth,\n        },\n      ]}\n    >\n      {header}\n\n      {rowsToRender\n        .map(({ startIndex, endIndex, data }) => (\n          <View style={styles.rowsContainer} ref={rowsContainerRef}>\n            {data.map((item, index) => (\n              <VirtualizedRow<T, ExtraInfo>\n                key={keyExtractor(item, startIndex + index)}\n                viewId={viewId}\n                item={item}\n                rowHeight={rowHeight}\n                absoluteIndex={startIndex + index}\n                variant={variant}\n                stickedToStartColumnsWidth={stickedToStartColumnsWidth}\n                centerColumnsWidth={centerColumnsWidth}\n                stickedToEndColumnsWidth={stickedToEndColumnsWidth}\n                stickedToStartColumns={stickedToStartColumns}\n                columns={columns}\n                stickedToEndColumns={stickedToEndColumns}\n                extraInfo={extraInfo}\n                getRowLink={getRowLink}\n                horizontalScrollPosition={horizontalScrollPosition ?? \"NoScroll\"}\n                stickedToStartFirstCellLeftPadding={stickedToStartFirstCellLeftPadding}\n                centerFirstCellLeftPadding={centerFirstCellLeftPadding}\n                centerLastCellLeftPadding={centerLastCellLeftPadding}\n                stickedToEndLastCellRightPadding={stickedToEndLastCellRightPadding}\n              />\n            ))}\n\n            {Option.fromNullable(loading)\n              .flatMap(({ isLoading, count }) => (isLoading ? Option.Some(count) : Option.None()))\n              .map(count => (\n                <View\n                  aria-busy={true}\n                  style={[\n                    styles.loadingPlaceholder,\n                    {\n                      top: endIndex * rowHeight,\n                    },\n                  ]}\n                >\n                  <VirtualizedListPlaceholder\n                    count={count}\n                    headerHeight={0}\n                    rowHeight={rowHeight}\n                  />\n                </View>\n              ))\n              .toNull()}\n          </View>\n        ))\n        .toNull()}\n\n      {Option.fromNullable(clientHeight)\n        .map(clientHeight => (\n          <View style={styles.shadowsLayerContainer}>\n            <View style={[styles.shadowsLayer, { height: clientHeight - 12 }]}>\n              {startColumnShadow.toNull()}\n\n              <View style={[styles.centerColumnGroup, { width: centerColumnsWidth }]} />\n\n              {endColumnShadow.toNull()}\n            </View>\n          </View>\n        ))\n        .toNull()}\n\n      <View\n        style={[styles.scrollTracker, { height: onEndReachedThreshold }]}\n        ref={scrollTrackerRef}\n      />\n    </ScrollView>\n  );\n};\n\ntype VirtualizedRowProps<T, ExtraInfo> = {\n  viewId: string;\n  rowHeight: number;\n  absoluteIndex: number;\n  variant: \"accented\" | \"default\";\n  stickedToStartColumnsWidth: number;\n  centerColumnsWidth: number;\n  stickedToEndColumnsWidth: number;\n  stickedToStartColumns?: ColumnConfig<T, ExtraInfo>[];\n  columns: ColumnConfig<T, ExtraInfo>[];\n  stickedToEndColumns?: ColumnConfig<T, ExtraInfo>[];\n  extraInfo: ExtraInfo;\n  getRowLink?: (config: LinkConfig<T, ExtraInfo>) => ReactElement | undefined;\n  horizontalScrollPosition: \"NoScroll\" | \"Start\" | \"Middle\" | \"End\";\n  item: T;\n  stickedToStartFirstCellLeftPadding: number;\n  centerFirstCellLeftPadding: number;\n  centerLastCellLeftPadding: number;\n  stickedToEndLastCellRightPadding: number;\n};\n\nconst RawVirtualizedRow = <T, ExtraInfo>({\n  viewId,\n  rowHeight,\n  absoluteIndex,\n  variant,\n  stickedToStartColumnsWidth,\n  centerColumnsWidth,\n  stickedToEndColumnsWidth,\n  stickedToStartColumns,\n  columns,\n  stickedToEndColumns,\n  extraInfo,\n  item,\n  horizontalScrollPosition,\n  getRowLink,\n  stickedToStartFirstCellLeftPadding,\n  centerFirstCellLeftPadding,\n  centerLastCellLeftPadding,\n  stickedToEndLastCellRightPadding,\n}: VirtualizedRowProps<T, ExtraInfo>) => {\n  const [isHovered, setIsHovered] = useState(false);\n\n  const elementRef = useRef<View>(null);\n\n  useHover(elementRef, {\n    onHoverStart: () => setIsHovered(true),\n    onHoverEnd: () => setIsHovered(false),\n  });\n\n  const rootElement =\n    getRowLink != null ? (\n      (getRowLink({ item, index: absoluteIndex, extraInfo }) ?? <View />)\n    ) : (\n      <View />\n    );\n\n  return cloneElement(rootElement, {\n    ref: elementRef,\n    style: [\n      styles.row,\n      {\n        backgroundColor: backgroundColorVariants[variant],\n        top: absoluteIndex * rowHeight,\n        height: rowHeight,\n      },\n      isHovered && {\n        backgroundColor:\n          variant === \"accented\"\n            ? backgroundColorVariants.default\n            : backgroundColorVariants.accented,\n      },\n    ],\n    children: (\n      <>\n        {Option.fromNullable(stickedToStartColumns)\n          .map(columns => (\n            <View\n              style={[\n                styles.cellsContainer,\n                styles.stickedToStartColumnGroup,\n                horizontalScrollPosition === \"NoScroll\" && styles.stickedToStartColumnGroupLocked,\n                {\n                  height: rowHeight,\n                  width: stickedToStartColumnsWidth,\n                  backgroundColor: isHovered\n                    ? backgroundColorVariants[variant === \"accented\" ? \"default\" : \"accented\"]\n                    : backgroundColorVariants[variant],\n                },\n              ]}\n            >\n              {columns.map(({ id, width, renderCell }, index) => {\n                const columnId = `${viewId}_${id}`;\n                const paddingLeft = index === 0 ? stickedToStartFirstCellLeftPadding : 0;\n\n                return (\n                  <View\n                    style={[styles.cell, { width: width + paddingLeft, paddingLeft }]}\n                    key={columnId}\n                    aria-describedby={columnId}\n                  >\n                    {renderCell({\n                      columnId,\n                      item,\n                      index: absoluteIndex,\n                      extraInfo,\n                      isHovered,\n                    })}\n                  </View>\n                );\n              })}\n            </View>\n          ))\n          .toNull()}\n\n        <View\n          style={[\n            styles.cellsContainer,\n            styles.centerColumnGroup,\n            {\n              width: centerColumnsWidth,\n              height: rowHeight,\n              backgroundColor: isHovered\n                ? backgroundColorVariants[variant === \"accented\" ? \"default\" : \"accented\"]\n                : backgroundColorVariants[variant],\n            },\n          ]}\n        >\n          {columns.map(({ id, grow = false, width, renderCell }, index) => {\n            const columnId = `${viewId}_${id}`;\n            const paddingLeft = index === 0 ? centerFirstCellLeftPadding : 0;\n            const paddingRight = index === columns.length - 1 ? centerLastCellLeftPadding : 0;\n\n            return (\n              <View\n                style={[\n                  styles.cell,\n                  grow && styles.grow,\n                  { width: width + paddingLeft + paddingRight, paddingLeft, paddingRight },\n                ]}\n                key={columnId}\n                aria-describedby={columnId}\n              >\n                {renderCell({\n                  columnId,\n                  item,\n                  index: absoluteIndex,\n                  extraInfo,\n                  isHovered,\n                })}\n              </View>\n            );\n          })}\n        </View>\n\n        {Option.fromNullable(stickedToEndColumns)\n          .map(columns => (\n            <View\n              style={[\n                styles.cellsContainer,\n                styles.stickedToEndColumnGroup,\n                horizontalScrollPosition === \"NoScroll\" && styles.stickedToEndColumnGroupLocked,\n                {\n                  width: stickedToEndColumnsWidth,\n                  height: rowHeight,\n                  backgroundColor: isHovered\n                    ? backgroundColorVariants[variant === \"accented\" ? \"default\" : \"accented\"]\n                    : backgroundColorVariants[variant],\n                },\n              ]}\n            >\n              {columns.map(({ id, width, renderCell }, index) => {\n                const columnId = `${viewId}_${id}`;\n                const paddingRight =\n                  index === columns.length - 1 ? stickedToEndLastCellRightPadding : 0;\n\n                return (\n                  <View\n                    style={[styles.cell, { width: width + paddingRight, paddingRight }]}\n                    key={columnId}\n                    aria-describedby={columnId}\n                  >\n                    {renderCell({\n                      columnId,\n                      item,\n                      index: absoluteIndex,\n                      extraInfo,\n                      isHovered,\n                    })}\n                  </View>\n                );\n              })}\n            </View>\n          ))\n          .toNull()}\n      </>\n    ),\n  });\n};\n\nconst VirtualizedRow = memo(RawVirtualizedRow) as typeof RawVirtualizedRow;\n\ntype VirtualizedListPlaceholderProps = {\n  count: number;\n  rowHeight: number;\n  groupHeaderHeight?: number;\n  headerHeight?: number;\n  marginHorizontal?: string;\n};\n\nexport const VirtualizedListPlaceholder = ({\n  count,\n  rowHeight,\n  groupHeaderHeight,\n  headerHeight,\n  marginHorizontal,\n}: VirtualizedListPlaceholderProps) => {\n  return (\n    <View style={[styles.container, { marginHorizontal }]}>\n      {headerHeight != null ? <View style={{ height: headerHeight }} /> : null}\n      {groupHeaderHeight != null ? <View style={{ height: groupHeaderHeight }} /> : null}\n\n      <View>\n        {Array.from({ length: count }, (_, index) => {\n          const top = index * rowHeight;\n\n          return (\n            <View\n              key={String(index)}\n              style={[styles.placeholderRowContainer, { height: rowHeight, top }]}\n            >\n              <View style={styles.placeholderRowContents}>\n                <View style={styles.placeholderRow} />\n                <Space width={32} />\n                <View style={[styles.placeholderRow, styles.smallPlaceholderRow]} />\n                <Space width={32} />\n\n                <View style={styles.placeholderRowEnd}>\n                  <View style={[styles.placeholderRow, styles.smallPlaceholderRow]} />\n                </View>\n              </View>\n            </View>\n          );\n        })}\n      </View>\n    </View>\n  );\n};\n"],"names":["directionStyles","StyleSheet","alignItemsStyles","justifyContentStyles","fadeOnLeftMask","invariantColors","spacings","fadeOnRightMask","styles","colors","Cell","children","align","direction","fadeOn","style","contentContainerStyle","View","jsx","HeaderCell","sort","text","onPress","sortActive","isNotNullish","disabled","isNullish","Pressable","match","hovered","jsxs","LakeText","Fragment","Space","Icon","TextCell","color","tooltip","variant","LinkCell","buttonPosition","external","atEnd","button","event","HORIZONTAL_ROW_PADDING","commonStyles","ResizeHandle","id","end","width","onResize","scrollViewRef","ref","useRef","isDragging","setIsDragging","useState","widthRef","onResizeRef","useLayoutEffect","useEffect","element","startX","startWidth","onMouseMove","onMouseUp","onMouseDown","VirtualizedList","data","stickedToStartColumns","columns","stickedToEndColumns","headerHeight","rowHeight","renderThreshold","onEndReached","onEndReachedThreshold","loading","extraInfo","keyExtractor","marginHorizontal","renderEmptyList","onColumnResize","getRowLink","viewId","useId","scrollTrackerRef","fullDataHeight","loadingDataPlaceholderHeight","Option","isLoading","count","containerContainerHeight","stickedToStartFirstCellLeftPadding","centerFirstCellLeftPadding","centerLastCellLeftPadding","stickedToEndLastCellRightPadding","stickedToStartColumnsWidth","useMemo","acc","column","centerColumnsWidth","stickedToEndColumnsWidth","contentContainerWidth","backgroundColor","backgroundColorVariants","rangeToRender","setRangeToRender","clientHeight","setClientHeight","horizontalScrollPosition","setHasHorizontalScrollPosition","rowsToRender","startIndex","endIndex","clampedEndIndex","onLayoutUpdate","useCallback","previousRangeToRender","scrollView","scrollTimeoutRef","rowsContainerRef","onScroll","resizeObserver","scrollTracker","scrollTrackerElement","intersectionObserver","entries","entry","header","title","renderTitle","index","columnId","paddingLeft","grow","paddingRight","startColumnShadow","value","endColumnShadow","ScrollView","item","VirtualizedRow","VirtualizedListPlaceholder","RawVirtualizedRow","absoluteIndex","isHovered","setIsHovered","elementRef","useHover","rootElement","cloneElement","renderCell","memo","groupHeaderHeight","_","top"],"mappings":"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"}