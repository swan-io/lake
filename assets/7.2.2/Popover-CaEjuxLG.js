import{s as m,d as R,r as D,b as T,g as O,p as v,u as _,N as h,q as W,j as t,P as H,V as x,v as L}from"./Space-DL-ib-Tf.js";import{r as o}from"./index-CBqU2yxZ.js";import{u as A}from"./useResponsive-Co7zg1QK.js";import{n as N}from"./function-49NBvJDX.js";import{B as z}from"./BottomPanel-Bv-m7Hwv.js";import{F as G}from"./FocusTrap-Co_Sr8t7.js";import{T as K}from"./TransitionView-DNlPtq9W.js";import{P as y}from"./index-shfpI0Dy.js";const n=m.create({container:{...m.absoluteFillObject,pointerEvents:"none"},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popoverContainer:{position:"absolute",display:"flex"},popover:{pointerEvents:"auto",display:"flex",flexDirection:"column",backgroundColor:R.accented,borderRadius:D[8],marginVertical:T[8],overflow:"hidden",boxShadow:O.modal,flexGrow:1,alignSelf:"stretch"},popoverContents:{alignItems:"stretch"}}),M={...v.fadeAndSlideInFromBottom,leave:[v.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},U=600,J=o.memo(({children:a,id:P,label:w,role:C="dialog",describedBy:E,matchReferenceWidth:b=!1,matchReferenceMinWidth:g=!1,onDismiss:l=N,onEscapeKey:V=l,referenceRef:u,returnFocus:j=!0,autoFocus:S=!0,visible:s,underlay:d=!0,forcedMode:k})=>{const[c,f]=o.useState(null),p=o.useRef(null),{desktop:q}=A(U),{position:r}=_({referenceRef:u,visible:s,matchReferenceWidth:b,matchReferenceMinWidth:g});o.useEffect(()=>{const e=p.current;!s&&e!=null&&(e.style.pointerEvents="none")},[s]),o.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),f(e),()=>{f(null),e.remove()}},[]);const B=o.useCallback(e=>{e.preventDefault(),l()},[l]),F=o.useCallback(({target:e})=>{const i=u.current;(!(i instanceof Element)||!(e instanceof Element)||i!==e&&!i.contains(e))&&l()},[u,l]),I=o.useCallback(e=>{e.preventDefault()},[]);return c==null?null:h(k).with(W.nullish,()=>q?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?t.jsx(z,{visible:s,onPressClose:l,returnFocus:!1,children:typeof a=="function"?a({mode:"panel"}):a}):t.jsxs(H,{container:c,children:[s&&d?t.jsx(y,{ref:p,style:n.underlay,onPress:B,"aria-label":"Close"}):null,t.jsx(K,{style:n.container,...M,children:r.isSome()?t.jsx(x,{style:r.get().rootStyle,children:t.jsx(x,{style:[n.popoverContainer,r.get().style,{alignItems:h(r.get().horizontalPosition).with("left",()=>"flex-start").with("center",()=>"center").with("right",()=>"flex-end").exhaustive()}],children:t.jsx(L,{style:n.popover,contentContainerStyle:n.popoverContents,id:P,role:C,"aria-describedby":E,"aria-label":w,children:t.jsx(G,{focusLock:!0,returnFocus:j,autoFocus:S,onEscapeKey:V,onClickOutside:d?void 0:F,children:t.jsx(y,{tabIndex:-1,onPress:I,style:n.defaultCursor,children:typeof a=="function"?a({mode:"dropdown"}):a})})})})}):null})]})});J.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{role:{defaultValue:{value:'"dialog"',computed:!1},required:!1},matchReferenceWidth:{defaultValue:{value:"false",computed:!1},required:!1},matchReferenceMinWidth:{defaultValue:{value:"false",computed:!1},required:!1},onDismiss:{defaultValue:{value:"() => {}",computed:!1},required:!1},onEscapeKey:{defaultValue:{value:"onDismiss = noop",computed:!1},required:!1},returnFocus:{defaultValue:{value:"true",computed:!1},required:!1},autoFocus:{defaultValue:{value:"true",computed:!1},required:!1},underlay:{defaultValue:{value:"true",computed:!1},required:!1}}};export{J as P};
//# sourceMappingURL=Popover-CaEjuxLG.js.map
