import{_ as We}from"./extends-98964cd2.js";import{N as Te,O as le,C as De,S as Xe,_ as je,I as ze,V as qe}from"./Space-708a304c.js";import{r as E}from"./index-ebeaab24.js";var ue="DELAY",R="ERROR",ce="LONG_PRESS_DETECTED",d="NOT_RESPONDER",A="RESPONDER_ACTIVE_LONG_PRESS_START",W="RESPONDER_ACTIVE_PRESS_START",se="RESPONDER_INACTIVE_PRESS_START",Je="RESPONDER_GRANT",$="RESPONDER_RELEASE",ye="RESPONDER_TERMINATED",ve=Object.freeze({NOT_RESPONDER:{DELAY:R,RESPONDER_GRANT:se,RESPONDER_RELEASE:R,RESPONDER_TERMINATED:R,LONG_PRESS_DETECTED:R},RESPONDER_INACTIVE_PRESS_START:{DELAY:W,RESPONDER_GRANT:R,RESPONDER_RELEASE:d,RESPONDER_TERMINATED:d,LONG_PRESS_DETECTED:R},RESPONDER_ACTIVE_PRESS_START:{DELAY:R,RESPONDER_GRANT:R,RESPONDER_RELEASE:d,RESPONDER_TERMINATED:d,LONG_PRESS_DETECTED:A},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:R,RESPONDER_GRANT:R,RESPONDER_RELEASE:d,RESPONDER_TERMINATED:d,LONG_PRESS_DETECTED:A},ERROR:{DELAY:d,RESPONDER_GRANT:se,RESPONDER_RELEASE:d,RESPONDER_TERMINATED:d,LONG_PRESS_DETECTED:d}}),de=e=>e===W||e===A,Z=e=>e.getAttribute("role")==="button",Ee=e=>e===se||e===W||e===A,Qe=e=>e===ye||e===$,fe=e=>{var n=e.key,a=e.target,s=a.getAttribute("role"),t=n===" "||n==="Spacebar";return n==="Enter"||t&&s==="button"},Ze=450,et=50;class tt{constructor(n){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=d,this.configure(n)}configure(n){this._config=n}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var n=(t,r)=>{t.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=d,this._isPointerTouch=t.nativeEvent.type==="touchstart",this._receiveSignal(Je,t);var i=ee(this._config.delayPressStart,0,et);r!==!1&&i>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(ue,t)},i):this._receiveSignal(ue,t);var o=ee(this._config.delayLongPress,10,Ze);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(t)},o+i)},a=t=>{this._receiveSignal($,t)},s=t=>{var r=this._config.onPress,i=t.target;if(this._touchState!==d&&fe(t)){a(t),document.removeEventListener("keyup",s);var o=i.getAttribute("role"),l=i.tagName.toLowerCase(),v=o==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea";r!=null&&!v&&r(t)}};return{onStartShouldSetResponder:t=>{var r=this._config.disabled;return r&&Z(t.currentTarget)&&t.stopPropagation(),r==null?!0:!r},onKeyDown:t=>{var r=this._config.disabled,i=t.key,o=t.target;if(!r&&fe(t)){this._touchState===d&&(n(t,!1),document.addEventListener("keyup",s));var l=o.getAttribute("role"),v=i===" "||i==="Spacebar",y=l==="button"||l==="menuitem";v&&y&&t.preventDefault(),t.stopPropagation()}},onResponderGrant:t=>n(t),onResponderMove:t=>{this._config.onPressMove!=null&&this._config.onPressMove(t);var r=_e(t);if(this._touchActivatePosition!=null){var i=this._touchActivatePosition.pageX-r.pageX,o=this._touchActivatePosition.pageY-r.pageY;Math.hypot(i,o)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:t=>a(t),onResponderTerminate:t=>{t.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(ye,t)},onResponderTerminationRequest:t=>{var r=this._config,i=r.cancelable,o=r.disabled,l=r.onLongPress;return!o&&l!=null&&this._isPointerTouch&&t.nativeEvent.type==="contextmenu"?!1:i??!0},onClick:t=>{var r=this._config,i=r.disabled,o=r.onPress;i?Z(t.currentTarget)&&t.stopPropagation():(t.stopPropagation(),this._longPressDispatched||this._selectionTerminated?t.preventDefault():o!=null&&t.altKey===!1&&o(t))},onContextMenu:t=>{var r=this._config,i=r.disabled,o=r.onLongPress;i?Z(t.currentTarget)&&t.stopPropagation():o!=null&&this._isPointerTouch&&!t.defaultPrevented&&(t.preventDefault(),t.stopPropagation())}}}_receiveSignal(n,a){var s=this._touchState,t=null;ve[s]!=null&&(t=ve[s][n]),!(this._touchState===d&&n===$)&&(t==null||t===R?console.error("PressResponder: Invalid signal "+n+" for state "+s+" on responder"):s!==t&&(this._performTransitionSideEffects(s,t,n,a),this._touchState=t))}_performTransitionSideEffects(n,a,s,t){if(Qe(s)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),Ee(n)&&s===ce){var r=this._config.onLongPress;r!=null&&t.nativeEvent.key==null&&(r(t),this._longPressDispatched=!0)}var i=de(n),o=de(a);if(!i&&o?this._activate(t):i&&!o&&this._deactivate(t),Ee(n)&&s===$){var l=this._config,v=l.onLongPress,y=l.onPress;if(y!=null){var O=v!=null&&n===A;O||!o&&!i&&(this._activate(t),this._deactivate(t))}}this._cancelPressDelayTimeout()}_activate(n){var a=this._config,s=a.onPressChange,t=a.onPressStart,r=_e(n);this._touchActivatePosition={pageX:r.pageX,pageY:r.pageY},t!=null&&t(n),s!=null&&s(!0)}_deactivate(n){var a=this._config,s=a.onPressChange,t=a.onPressEnd;function r(){t!=null&&t(n),s!=null&&s(!1)}var i=ee(this._config.delayPressEnd);i>0?this._pressOutDelayTimeout=setTimeout(()=>{r()},i):r()}_handleLongPress(n){(this._touchState===W||this._touchState===A)&&this._receiveSignal(ce,n)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function ee(e,n,a){return n===void 0&&(n=0),a===void 0&&(a=0),Math.max(n,e??a)}function _e(e){var n=e.nativeEvent,a=n.changedTouches,s=n.touches;return s!=null&&s.length>0?s[0]:a!=null&&a.length>0?a[0]:e.nativeEvent}function nt(e,n){var a=E.useRef(null);a.current==null&&(a.current=new tt(n));var s=a.current;return E.useEffect(()=>{s.configure(n)},[n,s]),E.useEffect(()=>()=>{s.reset()},[s]),E.useDebugValue(n),s.getEventHandlers()}var ge=()=>{};function rt(){var e=!1;if(Te)try{var n={};Object.defineProperty(n,"passive",{get(){return e=!0,!1}}),window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{}return e}var st=rt();function at(e){return e==null?!1:st?e:!!e.capture}function it(){return this.cancelBubble}function ot(){return this.defaultPrevented}function lt(e){return e.nativeEvent=e,e.persist=ge,e.isDefaultPrevented=ot,e.isPropagationStopped=it,e}function c(e,n){var a=at(n);return function(s,t){if(s==null||typeof s.addEventListener!="function")throw new Error("createEventHandle: called on an invalid target.");var r=s;if(t!=null){var i=o=>t(lt(o));return r.addEventListener(e,i,a),function(){r!=null&&r.removeEventListener(e,i,a)}}else return ge}}var ut=()=>typeof window<"u"&&window.PointerEvent!=null,T="keyboard",f="keyboard",x,k,G=!1,ct=new Set,U="keyboard",I="mouse",te="touch",vt="blur",Oe="contextmenu",dt="focus",Et="keydown",me="mousedown",pe="mousemove",Le="mouseup",Ne="pointerdown",be="pointermove",Ae="scroll",Ce="selectionchange",Me="touchcancel",Ie="touchmove",we="touchstart",ft="visibilitychange",He={passive:!0},_={capture:!0,passive:!0},_t=c(vt,He),Pt=c(dt,He),ht=c(ft,_),St=c(Et,_),Rt=c(Ne,_),Tt=c(be,_),Dt=c(Oe,_),yt=c(me,_),gt=c(pe,_),Ot=c(Le,_),mt=c(Ae,_),pt=c(Ce,_),Lt=c(Me,_),Nt=c(Ie,_),bt=c(we,_);function xe(){(x!=null||k!=null)&&(x!=null&&(f=x,x=null),k!=null&&(T=k,k=null),g())}function At(){x=f,k=T,T=U,f=U,g(),G=!1}function Ct(){xe()}function Mt(e){e.metaKey||e.altKey||e.ctrlKey||f!==U&&(f=U,T=U,g())}function It(){document.visibilityState!=="hidden"&&xe()}function S(e){var n=e.type;if(ut()){if(n===Ne){T!==e.pointerType&&(f=e.pointerType,T=e.pointerType,g());return}if(n===be){f!==e.pointerType&&(f=e.pointerType,g());return}}else{if(G||(n===me&&T!==I&&(f=I,T=I,g()),n===pe&&f!==I&&(f=I,g())),n===we){G=!0,e.touches&&e.touches.length>1&&(G=!1),T!==te&&(f=te,T=te,g());return}(n===Oe||n===Le||n===Ce||n===Ae||n===Me||n===Ie)&&(G=!1)}}Te&&(_t(window,At),Pt(window,Ct),St(document,Mt),Rt(document,S),Tt(document,S),ht(document,It),Dt(document,S),yt(document,S),gt(document,S),Ot(document,S),Lt(document,S),Nt(document,S),bt(document,S),pt(document,S),mt(document,S));function g(){var e={activeModality:T,modality:f};ct.forEach(n=>{n(e)})}function wt(){return f}function w(e,n){var a=le(()=>new Map),s=le(()=>{var t=c(e,n);return(r,i)=>{var o=a.get(r);o!=null&&o(),i==null&&a.delete(r);var l=t(r,i);return a.set(r,l),l}});return De(()=>()=>{a.forEach(t=>{t()}),a.clear()},[a]),s}var Ht={},H={passive:!0},Pe="react-gui:hover:lock",he="react-gui:hover:unlock",xt=()=>typeof window<"u"&&window.PointerEvent!=null;function Se(e,n,a){var s=document.createEvent("CustomEvent"),t=a||Ht,r=t.bubbles,i=r===void 0?!0:r,o=t.cancelable,l=o===void 0?!0:o,v=t.detail;s.initCustomEvent(n,i,l,v),e.dispatchEvent(s)}function ne(e){var n=e.pointerType;return n??wt()}function kt(e,n){var a=n.contain,s=n.disabled,t=n.onHoverStart,r=n.onHoverChange,i=n.onHoverUpdate,o=n.onHoverEnd,l=xt(),v=w(l?"pointermove":"mousemove",H),y=w(l?"pointerenter":"mouseenter",H),O=w(l?"pointerleave":"mouseleave",H),p=w(Pe,H),C=w(he,H);De(()=>{var D=e.current;if(D!==null){var M=function(u){o!=null&&o(u),r!=null&&r(!1),v(D,null),O(D,null)},V=function(u){var P=e.current;P!=null&&ne(u)!=="touch"&&(a&&Se(P,he),M(u))},Y=function(u){ne(u)!=="touch"&&i!=null&&(u.x==null&&(u.x=u.clientX),u.y==null&&(u.y=u.clientY),i(u))},L=function(u){t!=null&&t(u),r!=null&&r(!0),i!=null&&v(D,s?null:Y),O(D,s?null:V)},F=function(u){var P=e.current;if(P!=null&&ne(u)!=="touch"){a&&Se(P,Pe),L(u);var K=function(b){b.target!==P&&M(u)},X=function(b){b.target!==P&&L(u)};p(P,s?null:K),C(P,s?null:X)}};y(D,s?null:F)}},[y,v,O,p,C,a,s,t,r,i,o,e])}var Gt=["children","delayLongPress","delayPressIn","delayPressOut","disabled","onBlur","onContextMenu","onFocus","onHoverIn","onHoverOut","onKeyDown","onLongPress","onPress","onPressMove","onPressIn","onPressOut","style","tabIndex","testOnly_hovered","testOnly_pressed"];function Ut(e,n){var a=e.children,s=e.delayLongPress,t=e.delayPressIn,r=e.delayPressOut,i=e.disabled,o=e.onBlur,l=e.onContextMenu,v=e.onFocus,y=e.onHoverIn,O=e.onHoverOut,p=e.onKeyDown,C=e.onLongPress,D=e.onPress,M=e.onPressMove,V=e.onPressIn,Y=e.onPressOut,L=e.style,F=e.tabIndex,N=e.testOnly_hovered,u=e.testOnly_pressed,P=je(e,Gt),K=re(N===!0),X=K[0],j=K[1],b=re(!1),Ge=b[0],B=b[1],ae=re(u===!0),Ue=ae[0],ie=ae[1],m=E.useRef(null),Ve=ze(n,m),Ye=E.useMemo(()=>({delayLongPress:s,delayPressStart:t,delayPressEnd:r,disabled:i,onLongPress:C,onPress:D,onPressChange:ie,onPressStart:V,onPressMove:M,onPressEnd:Y}),[s,t,r,i,C,D,V,M,Y,ie]),z=nt(m,Ye),q=z.onContextMenu,J=z.onKeyDown;kt(m,{contain:!0,disabled:i,onHoverChange:j,onHoverStart:y,onHoverEnd:O});var oe={hovered:X,focused:Ge,pressed:Ue},Fe=E.useCallback(h=>{h.nativeEvent.target===m.current&&(B(!1),o!=null&&o(h))},[m,B,o]),Ke=E.useCallback(h=>{h.nativeEvent.target===m.current&&(B(!0),v!=null&&v(h))},[m,B,v]),Be=E.useCallback(h=>{q!=null&&q(h),l!=null&&l(h)},[l,q]),$e=E.useCallback(h=>{J!=null&&J(h),p!=null&&p(h)},[p,J]),Q;return F!==void 0?Q=F:Q=i?-1:0,E.createElement(qe,We({},P,z,{"aria-disabled":i,onBlur:Fe,onContextMenu:Be,onFocus:Ke,onKeyDown:$e,ref:Ve,style:[i?Re.disabled:Re.active,typeof L=="function"?L(oe):L],tabIndex:Q}),typeof a=="function"?a(oe):a)}function re(e){var n=E.useState(!1),a=n[0],s=n[1];return[a||e,s]}var Re=Xe.create({active:{cursor:"pointer",touchAction:"manipulation"},disabled:{pointerEvents:"none"}}),ke=E.memo(E.forwardRef(Ut));ke.displayName="Pressable";const Kt=ke;export{Kt as P};
//# sourceMappingURL=index-b7c82715.js.map
