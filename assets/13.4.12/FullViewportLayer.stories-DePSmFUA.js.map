{"version":3,"file":"FullViewportLayer.stories-DePSmFUA.js","sources":["../../../packages/lake/src/components/FullViewportLayer.tsx","../../../packages/lake/__stories__/FullViewportLayer.stories.tsx"],"sourcesContent":["import { ReactNode, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { backgroundColor } from \"../constants/design\";\nimport { FocusTrap } from \"./FocusTrap\";\nimport { LoadingView } from \"./LoadingView\";\nimport { Portal } from \"./Portal\";\nimport { Suspendable } from \"./Suspendable\";\nimport { TransitionView } from \"./TransitionView\";\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    animationFillMode: \"forwards\",\n    overflow: \"hidden\",\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0, transform: \"translateX(200px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0, transform: \"translateX(200px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    backgroundColor: backgroundColor.default,\n  },\n  contentsEnter: {\n    animationKeyframes: {\n      \"0%\": { transform: \"translateX(50px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsLeave: {\n    animationKeyframes: {\n      \"100%\": { transform: \"translateX(50px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsContainer: {\n    ...StyleSheet.absoluteFillObject,\n    zIndex: 2,\n    maxWidth: \"100%\",\n  },\n  contents: {\n    ...StyleSheet.absoluteFillObject,\n    maxWidth: \"100%\",\n  },\n});\n\ntype Props = {\n  visible: boolean;\n  children: ReactNode;\n};\n\nconst rootNode = document.querySelector(\"#full-page-layer-root\") as Element;\n\nexport const FullViewportLayer = ({ visible, children }: Props) => {\n  const [delayedVisible, setDelayedVisible] = useState(visible);\n\n  useEffect(() => {\n    setDelayedVisible(visible);\n  }, [visible]);\n\n  return (\n    <Portal container={rootNode}>\n      <View style={[styles.root, !visible && styles.inert]}>\n        <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n          {visible ? <View style={styles.overlay} /> : null}\n        </TransitionView>\n\n        <Suspendable fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n          <TransitionView\n            style={styles.fill}\n            enter={styles.containerEnter}\n            leave={styles.containerLeave}\n          >\n            {delayedVisible ? (\n              <FocusTrap\n                focusLock={true}\n                autoFocus={true}\n                returnFocus={true}\n                style={styles.container}\n              >\n                <TransitionView\n                  style={styles.contentsContainer}\n                  enter={styles.contentsEnter}\n                  leave={styles.contentsLeave}\n                >\n                  <View style={styles.contents}>\n                    <View style={styles.contentsContainer}>{children}</View>\n                  </View>\n                </TransitionView>\n              </FocusTrap>\n            ) : null}\n          </TransitionView>\n        </Suspendable>\n      </View>\n    </Portal>\n  );\n};\n","import { Meta } from \"@storybook/react\";\nimport { useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { Box } from \"../src/components/Box\";\nimport { FullViewportLayer } from \"../src/components/FullViewportLayer\";\nimport { Grid } from \"../src/components/Grid\";\nimport { LakeButton } from \"../src/components/LakeButton\";\nimport { ScrollView } from \"../src/components/ScrollView\";\nimport { Space } from \"../src/components/Space\";\nimport { colors } from \"../src/constants/design\";\nimport { StoryBlock } from \"./_StoriesComponents\";\n\nconst styles = StyleSheet.create({\n  block: {\n    height: 200,\n    backgroundColor: colors.gray[100],\n    borderRadius: 5,\n  },\n  grid: {\n    padding: 20,\n  },\n  button: {\n    alignSelf: \"flex-start\",\n  },\n  buttonClosed: {\n    alignSelf: \"flex-end\",\n    paddingRight: 20,\n  },\n});\n\nexport default {\n  title: \"Layout/FullViewportLayer\",\n  component: FullViewportLayer,\n} as Meta<typeof FullViewportLayer>;\n\nexport const Default = () => {\n  const [visible, setVisible] = useState(false);\n  return (\n    <StoryBlock\n      title=\"FullViewportLayer\"\n      description={[\n        \"This component creates a new layer over all the page with enter and leave animation. \",\n        'You can try it by clicking on \"Open\" button.',\n      ]}\n    >\n      <LakeButton\n        color=\"shakespear\"\n        size=\"small\"\n        onPress={() => setVisible(true)}\n        style={styles.button}\n      >\n        Open\n      </LakeButton>\n\n      <FullViewportLayer visible={visible}>\n        <Box style={styles.buttonClosed}>\n          <Space height={8} />\n\n          <LakeButton color=\"shakespear\" size=\"small\" onPress={() => setVisible(false)}>\n            Close\n          </LakeButton>\n        </Box>\n\n        <Space height={8} />\n\n        <ScrollView>\n          <Grid horizontalSpace={4} verticalSpace={4} numColumns={4} style={styles.grid}>\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n            <View style={styles.block} />\n          </Grid>\n        </ScrollView>\n      </FullViewportLayer>\n    </StoryBlock>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","backgroundColor","rootNode","FullViewportLayer","visible","children","delayedVisible","setDelayedVisible","useState","useEffect","jsx","Portal","View","TransitionView","Suspendable","LoadingView","FocusTrap","create","block","height","colors","gray","borderRadius","grid","padding","button","alignSelf","buttonClosed","paddingRight","FullViewportLayer_stories","title","component","Default","setVisible","jsxs","StoryBlock","LakeButton","Box","Space","ScrollView","Grid"],"mappings":"8pBASA,MAAMA,EAAmB,qBAEnBC,EAASC,EAAW,OAAO,CAC/B,KAAM,CACJ,GAAGA,EAAW,mBACd,SAAU,OAAA,EAEZ,MAAO,CACL,cAAe,MAAA,EAEjB,KAAM,CACJ,GAAGA,EAAW,mBACd,kBAAmB,WACnB,SAAU,QAAA,EAEZ,aAAc,CACZ,mBAAoB,CAClB,KAAM,CAAE,QAAS,CAAA,CAAE,EAErB,kBAAmB,QACnB,wBAAyB,aAAA,EAE3B,aAAc,CACZ,mBAAoB,CAClB,OAAQ,CAAE,QAAS,CAAA,CAAE,EAEvB,kBAAmB,QACnB,wBAAyB,aAAA,EAE3B,eAAgB,CACd,mBAAoB,CAClB,KAAM,CAAE,QAAS,EAAG,UAAW,mBAAA,CAAoB,EAErD,kBAAmB,QACnB,wBAAyB,aAAA,EAE3B,eAAgB,CACd,mBAAoB,CAClB,OAAQ,CAAE,QAAS,EAAG,UAAW,mBAAA,CAAoB,EAEvD,kBAAmB,QACnB,wBAAyB,aAAA,EAE3B,QAAS,CACP,GAAGA,EAAW,mBACd,gBAAiBF,CAAA,EAEnB,UAAW,CACT,GAAGE,EAAW,mBACd,cAAe,MACf,WAAY,UACZ,gBAAiBC,EAAgB,OAAA,EAEnC,cAAe,CACb,mBAAoB,CAClB,KAAM,CAAE,UAAW,kBAAA,CAAmB,EAExC,kBAAmB,QACnB,wBAAyB,aAAA,EAE3B,cAAe,CACb,mBAAoB,CAClB,OAAQ,CAAE,UAAW,kBAAA,CAAmB,EAE1C,kBAAmB,QACnB,wBAAyB,aAAA,EAE3B,kBAAmB,CACjB,GAAGD,EAAW,mBACd,OAAQ,EACR,SAAU,MAAA,EAEZ,SAAU,CACR,GAAGA,EAAW,mBACd,SAAU,MAAA,CAEd,CAAC,EAOKE,EAAW,SAAS,cAAc,uBAAuB,EAElDC,EAAoB,CAAC,CAAE,QAAAC,EAAS,SAAAC,KAAsB,CACjE,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAASJ,CAAO,EAE5DK,OAAAA,EAAAA,UAAU,IAAM,CACdF,EAAkBH,CAAO,CAC3B,EAAG,CAACA,CAAO,CAAC,EAGVM,EAAAA,IAACC,EAAA,CAAO,UAAWT,EACjB,gBAACU,EAAA,CAAK,MAAO,CAACb,EAAO,KAAM,CAACK,GAAWL,EAAO,KAAK,EACjD,SAAA,CAAAW,MAACG,GAAe,MAAOd,EAAO,KAAM,MAAOA,EAAO,aAAc,MAAOA,EAAO,aAC3E,WAAUW,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAO,OAAA,CAAS,EAAK,KAC/C,EAEAW,EAAAA,IAACI,EAAA,CAAY,SAAUJ,EAAAA,IAACK,EAAA,CAAY,MAAOd,EAAgB,SAAU,MAAO,CAAA,CAAG,EAC7E,SAAAS,EAAAA,IAACG,EAAA,CACC,MAAOd,EAAO,KACd,MAAOA,EAAO,eACd,MAAOA,EAAO,eAEb,SAAAO,EACCI,EAAAA,IAACM,EAAA,CACC,UAAW,GACX,UAAW,GACX,YAAa,GACb,MAAOjB,EAAO,UAEd,SAAAW,EAAAA,IAACG,EAAA,CACC,MAAOd,EAAO,kBACd,MAAOA,EAAO,cACd,MAAOA,EAAO,cAEd,SAAAW,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAO,SAClB,SAAAW,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAO,kBAAoB,SAAAM,CAAA,CAAS,CAAA,CACnD,CAAA,CAAA,CACF,CAAA,EAEA,IAAA,CAAA,CACN,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,kNC7HA,MAAMN,EAASC,EAAWiB,OAAO,CAC/BC,MAAO,CACLC,OAAQ,IACRlB,gBAAiBmB,EAAOC,KAAK,GAAG,EAChCC,aAAc,CAAA,EAEhBC,KAAM,CACJC,QAAS,EAAA,EAEXC,OAAQ,CACNC,UAAW,YAAA,EAEbC,aAAc,CACZD,UAAW,WACXE,aAAc,EAAA,CAElB,CAAC,EAEDC,EAAe,CACbC,MAAO,2BACPC,UAAW5B,CACb,EAEa6B,EAAUA,IAAM,CAC3B,KAAM,CAAC5B,EAAS6B,CAAU,EAAIzB,EAAAA,SAAS,EAAK,EAC5C,OACE0B,EAAAA,KAACC,GACC,MAAM,oBACN,YAAa,CACX,wFACA,8CAA8C,EAGhD,SAAA,CAAAzB,EAAAA,IAAC0B,EAAA,CACC,MAAM,aACN,KAAK,QACL,QAAS,IAAMH,EAAW,EAAI,EAC9B,MAAOlC,EAAO0B,OAAM,SAAA,OAGtB,EAEAS,EAAAA,KAAC/B,GAAkB,QAAAC,EACjB,SAAA,CAAA8B,EAAAA,KAACG,EAAA,CAAI,MAAOtC,EAAO4B,aACjB,SAAA,CAAAjB,EAAAA,IAAC4B,EAAA,CAAM,OAAQ,CAAA,CAAE,EAEjB5B,EAAAA,IAAC0B,EAAA,CAAW,MAAM,aAAa,KAAK,QAAQ,QAAS,IAAMH,EAAW,EAAK,EAAE,SAAA,OAAA,CAE7E,CAAA,EACF,EAEAvB,EAAAA,IAAC4B,EAAA,CAAM,OAAQ,CAAA,CAAE,EAEjB5B,EAAAA,IAAC6B,EAAA,CACC,SAAAL,EAAAA,KAACM,EAAA,CAAK,gBAAiB,EAAG,cAAe,EAAG,WAAY,EAAG,MAAOzC,EAAOwB,KACvE,SAAA,CAAAb,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,EAC1BR,EAAAA,IAACE,EAAA,CAAK,MAAOb,EAAOmB,KAAAA,CAAM,CAAA,CAAA,CAC5B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}