{"version":3,"file":"LakeSelect-D-5tc4N6.js","sources":["../../../packages/lake/src/components/LakeSelect.tsx"],"sourcesContent":["import { KeyboardEvent, ReactElement, ReactNode, Ref, useCallback, useRef } from \"react\";\nimport {\n  NativeSyntheticEvent,\n  StyleProp,\n  StyleSheet,\n  TextStyle,\n  View,\n  ViewStyle,\n} from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport {\n  ColorVariants,\n  colors,\n  invariantColors,\n  radii,\n  shadows,\n  spacings,\n  texts,\n} from \"../constants/design\";\nimport { useDisclosure } from \"../hooks/useDisclosure\";\nimport { useMergeRefs } from \"../hooks/useMergeRefs\";\nimport { getFocusableElements } from \"../utils/a11y\";\nimport { isNotNullish, isNullishOrEmpty } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { Fill } from \"./Fill\";\nimport { FlatList, FlatListRef } from \"./FlatList\";\nimport { Icon, IconName } from \"./Icon\";\nimport { LakeText } from \"./LakeText\";\nimport { LakeTooltip } from \"./LakeTooltip\";\nimport { Popover } from \"./Popover\";\nimport { Pressable } from \"./Pressable\";\nimport { Separator } from \"./Separator\";\nimport { Space } from \"./Space\";\n\nconst styles = StyleSheet.create({\n  normal: {\n    backgroundColor: colors.gray.contrast,\n    borderColor: colors.gray[100],\n    borderRadius: radii[6],\n    borderWidth: 1,\n    justifyContent: \"center\",\n    minWidth: 100,\n    paddingHorizontal: spacings[16],\n    height: 40,\n  },\n  borderless: {\n    justifyContent: \"center\",\n    height: 40,\n    paddingHorizontal: spacings[16],\n    borderRadius: radii[6],\n    transitionProperty: \"background-color\",\n    transitionDuration: \"150ms\",\n  },\n  small: {\n    paddingVertical: 5,\n  },\n  shadowed: {\n    position: \"absolute\",\n    opacity: 0,\n    left: 0,\n    top: 0,\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: radii[6],\n    boxShadow: shadows.tile,\n    transitionDuration: \"150ms\",\n    transitionProperty: \"opacity\",\n  },\n  hovered: {\n    opacity: 1,\n  },\n  selectPlaceholder: texts.placeholder,\n  selectSmallPlaceholder: texts.smallPlaceholder,\n  selected: {\n    color: colors.gray[800],\n  },\n  inputDisabled: {\n    backgroundColor: colors.gray[50],\n    borderColor: colors.gray[50],\n    cursor: \"not-allowed\",\n  },\n  listContent: {\n    paddingVertical: 12,\n  },\n  item: {\n    display: \"flex\",\n    paddingHorizontal: spacings[24],\n    paddingVertical: spacings[8],\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  itemHighlighted: {\n    backgroundColor: colors.gray[50],\n  },\n  itemFocused: {\n    boxShadow: `inset 0 0 0 1px ${colors.gray[500]}`,\n    borderRadius: radii[4],\n    outlineStyle: \"none\",\n  },\n  itemDisabled: {\n    opacity: 0.5,\n  },\n  selectListTitle: {\n    paddingHorizontal: spacings[24],\n    paddingVertical: spacings[12],\n  },\n  inputBorderlessDisabled: {\n    backgroundColor: invariantColors.transparent,\n  },\n  itemText: {\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\",\n  },\n  errorText: {\n    paddingTop: spacings[4],\n  },\n  focusedInput: {\n    borderColor: colors.gray[500],\n    boxShadow: shadows.tile,\n    outlineStyle: \"none\",\n  },\n  focusedWithoutShadow: {\n    boxShadow: \"none\",\n  },\n  errorContainer: {\n    borderColor: colors.negative[500],\n  },\n});\n\nexport type Item<V> = {\n  name: string;\n  value: V;\n  icon?: ReactNode;\n};\n\nexport type SelectProps<V> = {\n  ref?: Ref<View>;\n  placeholder?: string;\n  items: Item<V>[];\n  matchReferenceWidth?: boolean;\n  mode?: \"normal\" | \"borderless\";\n  title?: string;\n  valueStyle?: StyleProp<TextStyle>;\n  PopoverFooter?: ReactElement;\n  size?: \"small\" | \"large\";\n  icon?: IconName;\n  color?: ColorVariants;\n  disabled?: boolean;\n  value?: V;\n  onValueChange: (value: V) => void;\n  disabledItems?: { value: V; message?: string }[];\n  hideErrors?: boolean;\n  id?: string;\n  error?: string;\n  readOnly?: boolean;\n  style?: StyleProp<ViewStyle>;\n};\n\nexport const LakeSelect = <V,>({\n  ref,\n  title,\n  items,\n  valueStyle,\n  size,\n  color = \"current\",\n  disabled = false,\n  mode = \"normal\",\n  placeholder,\n  readOnly = false,\n  id,\n  matchReferenceWidth = true,\n  value,\n  error,\n  hideErrors = false,\n  icon,\n  onValueChange,\n  disabledItems = [],\n  PopoverFooter,\n  style,\n}: SelectProps<V>) => {\n  const inputRef = useRef<View>(null);\n  const listRef = useRef<FlatListRef>(null);\n  const typingTimeoutRef = useRef<number>(undefined);\n  const currentlyTypedRef = useRef<string>(undefined);\n  const listItemRefs = useRef<HTMLElement[]>(Array(items.length) as HTMLElement[]);\n\n  const mergedRef = useMergeRefs(inputRef, ref);\n\n  const [visible, { close, open }] = useDisclosure(false);\n\n  const hasValue = isNotNullish(value);\n  const isSmall = size === \"small\";\n  const itemValue = items.find(i => i.value === value);\n\n  const onKeyDown = useCallback(\n    (event: NativeSyntheticEvent<React.KeyboardEvent>) => {\n      // this made a search not visible for user as the native select component\n      if (event.nativeEvent.key.length === 1) {\n        event.nativeEvent.stopPropagation();\n\n        const currentlyTyped = `${\n          currentlyTypedRef.current ?? \"\"\n        }${event.nativeEvent.key.toLowerCase()}`;\n\n        currentlyTypedRef.current = currentlyTyped;\n\n        const selectedIndex = items.findIndex(item =>\n          item.name.toLowerCase().startsWith(currentlyTyped),\n        );\n\n        const selected = items[selectedIndex];\n\n        if (selected != null) {\n          if (visible) {\n            if (listRef.current?.element != null) {\n              listItemRefs.current[selectedIndex]?.focus();\n            }\n          } else {\n            onValueChange(selected.value);\n          }\n        }\n      }\n\n      if (typingTimeoutRef.current != null) {\n        window.clearTimeout(typingTimeoutRef.current);\n      }\n\n      typingTimeoutRef.current = window.setTimeout(() => {\n        currentlyTypedRef.current = undefined;\n      }, 300);\n    },\n    [items, onValueChange, visible],\n  );\n\n  const name = itemValue?.name ?? (value as unknown as string);\n\n  return (\n    <View style={commonStyles.fill}>\n      <Pressable\n        id={id}\n        ref={mergedRef}\n        aria-haspopup=\"listbox\"\n        role=\"button\"\n        aria-expanded={visible}\n        disabled={readOnly || disabled}\n        style={({ focused, hovered, pressed }) => [\n          mode === \"normal\" ? styles.normal : styles.borderless,\n          size === \"small\" && styles.small,\n          (disabled || readOnly) && styles.inputDisabled,\n          (visible || focused) && styles.focusedInput,\n          mode === \"borderless\" && [\n            {\n              backgroundColor: pressed\n                ? colors.gray[200]\n                : hovered\n                  ? colors.gray[100]\n                  : invariantColors.transparent,\n            },\n            styles.focusedWithoutShadow,\n          ],\n          mode !== \"borderless\" && error != null && styles.errorContainer,\n          (disabled || readOnly) && mode === \"borderless\" && styles.inputBorderlessDisabled,\n          style,\n        ]}\n        onPress={open}\n        onKeyDown={onKeyDown}\n        aria-errormessage={error}\n      >\n        {({ hovered }) => (\n          <>\n            {mode === \"normal\" && <View style={[styles.shadowed, hovered && styles.hovered]} />}\n\n            <Box direction=\"row\" justifyContent=\"spaceBetween\" alignItems=\"center\">\n              <Box direction=\"row\" alignItems=\"center\" style={commonStyles.fill}>\n                {icon && (\n                  <>\n                    <Icon color={colors[color].primary} name={icon} size={isSmall ? 16 : 18} />\n                    <Space width={8} />\n                  </>\n                )}\n\n                {hasValue ? (\n                  <Box direction=\"row\" alignItems=\"center\" style={commonStyles.fill}>\n                    {isNotNullish(itemValue?.icon) && (\n                      <>\n                        {itemValue?.icon}\n\n                        <Space width={12} />\n                      </>\n                    )}\n\n                    <LakeText\n                      color={colors.gray[900]}\n                      variant={isSmall ? \"smallRegular\" : \"regular\"}\n                      style={[styles.itemText, valueStyle]}\n                    >\n                      {name}\n                    </LakeText>\n                  </Box>\n                ) : (\n                  <LakeText\n                    style={[\n                      styles.itemText,\n                      styles.selectPlaceholder,\n                      isSmall && styles.selectSmallPlaceholder,\n                    ]}\n                  >\n                    {placeholder ?? \" \"}\n                  </LakeText>\n                )}\n              </Box>\n\n              <Fill minWidth={8} />\n\n              {!disabled && (\n                <Icon\n                  color={colors.gray[900]}\n                  name={visible ? \"chevron-up-filled\" : \"chevron-down-filled\"}\n                  size={16}\n                />\n              )}\n            </Box>\n          </>\n        )}\n      </Pressable>\n\n      {!hideErrors && (\n        <LakeText variant=\"smallRegular\" color={colors.negative[500]} style={styles.errorText}>\n          {error ?? \" \"}\n        </LakeText>\n      )}\n\n      <Popover\n        role=\"listbox\"\n        matchReferenceMinWidth={matchReferenceWidth}\n        onDismiss={close}\n        referenceRef={inputRef}\n        returnFocus={true}\n        visible={visible}\n      >\n        {isNotNullish(title) && (\n          <>\n            <LakeText variant=\"semibold\" color={colors.gray[900]} style={styles.selectListTitle}>\n              {title}\n            </LakeText>\n\n            <Separator />\n          </>\n        )}\n\n        <FlatList\n          role=\"list\"\n          data={items}\n          ref={listRef}\n          contentContainerStyle={styles.listContent}\n          onKeyDown={(event: NativeSyntheticEvent<KeyboardEvent<HTMLDivElement>>) => {\n            const { key } = event.nativeEvent;\n\n            if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n              event.preventDefault();\n\n              if (isNotNullish(event.currentTarget)) {\n                const focusableElements = getFocusableElements(\n                  event.currentTarget as unknown as HTMLDivElement,\n                );\n\n                const current = focusableElements.indexOf(event.target as unknown as HTMLElement);\n                const nextIndex = key === \"ArrowDown\" ? current + 1 : current - 1;\n\n                focusableElements[nextIndex]?.focus();\n              }\n            }\n          }}\n          keyExtractor={(_, index) => `select-item-${index}`}\n          renderItem={({ item, index }) => {\n            const isSelected = value === item.value;\n            const disablement = disabledItems.find(({ value }) => value === item.value);\n\n            return (\n              <LakeTooltip\n                placement=\"right\"\n                content={disablement?.message}\n                disabled={isNullishOrEmpty(disablement?.message)}\n              >\n                <Pressable\n                  ref={element => {\n                    listItemRefs.current[index] = element as unknown as HTMLElement;\n                  }}\n                  onKeyDown={onKeyDown}\n                  disabled={isNotNullish(disablement)}\n                  style={({ hovered, focused }) => [\n                    styles.item,\n                    (hovered || isSelected) && styles.itemHighlighted,\n                    focused && styles.itemFocused,\n                    isNotNullish(disablement) && styles.itemDisabled,\n                  ]}\n                  role=\"option\"\n                  aria-selected={true}\n                  onPress={() => {\n                    onValueChange(item.value);\n                    close();\n                  }}\n                >\n                  {isNotNullish(item.icon) && (\n                    <>\n                      {item.icon}\n\n                      <Space width={12} />\n                    </>\n                  )}\n\n                  <LakeText\n                    color={colors.gray[900]}\n                    numberOfLines={1}\n                    style={[styles.itemText, isSelected && styles.selected]}\n                  >\n                    {item.name}\n                  </LakeText>\n\n                  <Fill minWidth={12} />\n\n                  {isSelected && (\n                    <Icon color={colors.positive[500]} name=\"checkmark-filled\" size={14} />\n                  )}\n                </Pressable>\n              </LakeTooltip>\n            );\n          }}\n        />\n\n        {PopoverFooter}\n      </Popover>\n    </View>\n  );\n};\n"],"names":["styles","StyleSheet","colors","radii","spacings","shadows","texts","invariantColors","LakeSelect","ref","title","items","valueStyle","size","color","disabled","mode","placeholder","readOnly","id","matchReferenceWidth","value","error","hideErrors","icon","onValueChange","disabledItems","PopoverFooter","style","inputRef","useRef","listRef","typingTimeoutRef","currentlyTypedRef","listItemRefs","mergedRef","useMergeRefs","visible","close","open","useDisclosure","hasValue","isNotNullish","isSmall","itemValue","i","onKeyDown","useCallback","event","currentlyTyped","selectedIndex","item","selected","_a","_b","name","jsxs","View","commonStyles","jsx","Pressable","focused","hovered","pressed","Fragment","Box","Icon","Space","LakeText","Fill","Popover","Separator","FlatList","key","focusableElements","getFocusableElements","current","nextIndex","_","index","isSelected","disablement","LakeTooltip","isNullishOrEmpty","element"],"mappings":"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"}