{"version":3,"file":"RightPanel-Cd9s33tv.js","sources":["../../../packages/lake/src/components/RightPanel.tsx"],"sourcesContent":["import { ReactNode, forwardRef, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { backgroundColor, breakpoints } from \"../constants/design\";\nimport { useBodyClassName } from \"../hooks/useBodyClassName\";\nimport { FocusTrap, FocusTrapRef } from \"./FocusTrap\";\nimport { LoadingView } from \"./LoadingView\";\nimport { Portal } from \"./Portal\";\nimport { Pressable } from \"./Pressable\";\nimport { Context, ResponsiveContainer } from \"./ResponsiveContainer\";\nimport { Suspendable } from \"./Suspendable\";\nimport { TransitionView } from \"./TransitionView\";\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0, transform: \"translateZ(0px) translateX(100px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0, transform: \"translateZ(0px) translateX(100px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n\n    transform: \"translateZ(0px)\",\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    backgroundColor: backgroundColor.default,\n  },\n  fillMax: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    width: \"100%\",\n  },\n  fillMaxLarge: { maxWidth: 700 },\n  contentsEnter: {\n    animationKeyframes: {\n      \"0%\": { transform: \"translateZ(0px) translateX(25px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsLeave: {\n    animationKeyframes: {\n      \"100%\": { transform: \"translateZ(0px) translateX(25px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsContainer: {\n    ...StyleSheet.absoluteFillObject,\n    zIndex: 2,\n    transform: \"translateZ(0px)\",\n    maxWidth: \"100%\",\n    flexGrow: 1,\n  },\n  contents: {\n    ...StyleSheet.absoluteFillObject,\n    maxWidth: \"100%\",\n    flexGrow: 1,\n  },\n});\n\ntype Props = {\n  visible: boolean;\n  children: ReactNode | ((context: Context) => ReactNode);\n  onPressClose?: () => void;\n};\n\nconst rootNode = document.querySelector(\"#full-page-layer-root\") as Element;\n\nexport const RightPanel = forwardRef<FocusTrapRef, Props>(\n  ({ visible, children, onPressClose }: Props, ref) => {\n    const [delayedVisible, setDelayedVisible] = useState(visible);\n\n    useEffect(() => {\n      setDelayedVisible(visible);\n    }, [visible]);\n\n    useBodyClassName(\"RightPanelOpen\", { enabled: visible });\n\n    return (\n      <Portal container={rootNode}>\n        <View style={[styles.root, !visible && styles.inert]}>\n          <ResponsiveContainer style={styles.root} breakpoint={breakpoints.small}>\n            {({ large }) => (\n              <>\n                <TransitionView\n                  style={styles.fill}\n                  enter={styles.overlayEnter}\n                  leave={styles.overlayLeave}\n                >\n                  {visible ? (\n                    onPressClose != null ? (\n                      <Pressable style={styles.overlay} onPress={onPressClose} />\n                    ) : (\n                      <View style={styles.overlay} />\n                    )\n                  ) : null}\n                </TransitionView>\n\n                <Suspendable fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n                  <TransitionView\n                    style={[styles.fillMax, large && styles.fillMaxLarge]}\n                    enter={styles.containerEnter}\n                    leave={styles.containerLeave}\n                  >\n                    {delayedVisible ? (\n                      <FocusTrap\n                        onEscapeKey={onPressClose}\n                        focusLock={true}\n                        autoFocus={true}\n                        returnFocus={true}\n                        ref={ref}\n                        style={styles.container}\n                      >\n                        <TransitionView\n                          style={styles.contentsContainer}\n                          enter={styles.contentsEnter}\n                          leave={styles.contentsLeave}\n                        >\n                          <View style={styles.contents}>\n                            <View style={styles.contentsContainer}>\n                              {typeof children == \"function\" ? (\n                                <ResponsiveContainer\n                                  style={styles.root}\n                                  breakpoint={breakpoints.small}\n                                >\n                                  {children}\n                                </ResponsiveContainer>\n                              ) : (\n                                children\n                              )}\n                            </View>\n                          </View>\n                        </TransitionView>\n                      </FocusTrap>\n                    ) : null}\n                  </TransitionView>\n                </Suspendable>\n              </>\n            )}\n          </ResponsiveContainer>\n        </View>\n      </Portal>\n    );\n  },\n);\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","backgroundColor","rootNode","RightPanel","forwardRef","visible","children","onPressClose","ref","delayedVisible","setDelayedVisible","useState","useEffect","useBodyClassName","jsx","Portal","View","ResponsiveContainer","breakpoints","large","jsxs","Fragment","TransitionView","Pressable","Suspendable","LoadingView","FocusTrap"],"mappings":"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"}