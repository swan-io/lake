{"version":3,"file":"placekit-I4UtjsJn.js","sources":["../../../node_modules/@placekit/client-js/dist/placekit-lite.js","../../../node_modules/@placekit/client-js/dist/placekit.js"],"sourcesContent":["/*! @placekit/client-js v2.2.0 | © placekit.io | MIT license | https://github.com/placekit/client-js#readme */\nconst extensions = new Map();\nfunction getUserAgent() {\n  const chunks = [];\n  if (typeof window !== 'undefined' && navigator.userAgent) {\n    chunks.push(navigator.userAgent);\n  }\n  chunks.push(`PlaceKit/2.2.0 (Client=JavaScript)`);\n  if (typeof process !== 'undefined' && process.version) {\n    chunks.push(`NodeJS/${process.version}`);\n  }\n  return chunks.join(' ');\n}\nfunction placekit(apiKey, options = {}) {\n  if (!['string', 'undefined'].includes(typeof apiKey)) {\n    throw Error('PlaceKit: `apiKey` argument is invalid, expected a string.');\n  } else if (!apiKey) {\n    console.warn('PlaceKit: missing or empty `apiKey` argument.');\n  }\n  let currentHost = 0;\n  const hosts = [\n    `https://api.placekit.co`,\n  ];\n  let hasGeolocation = false;\n  const globalParams = {\n    maxResults: 5,\n  };\n  if (typeof window !== 'undefined' && navigator.language) {\n    globalParams.language = navigator.language.slice(0, 2);\n  }\n  const userAgent = getUserAgent();\n  function request(method = 'POST', resource = '', opts = {}) {\n    const { timeout, forwardIP, ...params } = opts;\n    const controller = new AbortController();\n    const id = typeof timeout !== 'undefined' ? setTimeout(() => controller.abort(), timeout) : undefined;\n    const url = new URL(resource.trim().replace(/^\\/+/, ''), hosts[currentHost]);\n    if (['GET', 'HEAD'].includes(method) && typeof params !== 'undefined') {\n      Object.keys(params).forEach((k) => url.searchParams.append(k, params[k]));\n    }\n    const headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n      'User-Agent': userAgent,\n      'x-placekit-api-key': apiKey,\n    };\n    if (forwardIP) {\n      headers['x-forwarded-for'] = forwardIP;\n    }\n    return fetch(url, {\n      method,\n      headers,\n      signal: controller.signal,\n      body: !['GET', 'HEAD'].includes(method) ? JSON.stringify(params) : undefined,\n    }).then(async (res) => {\n      clearTimeout(id);\n      const body = await res.json();\n      if (!res.ok) {\n        throw ({\n          status: res.status,\n          statusText: res.statusText,\n          ...body,\n        });\n      }\n      return body;\n    }).catch((err) => {\n      if (err.name === 'AbortError' || (err.status && err.status >= 500)) {\n        currentHost++;\n        if (currentHost < hosts.length-1) {\n          return request(method, resource, opts);\n        }\n      }\n      throw err;\n    });\n  }  const client = {\n    get options() {\n      return globalParams;\n    },\n    get hasGeolocation() {\n      return hasGeolocation;\n    },\n    configure(opts = {}) {\n      if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n        throw Error('PlaceKit.configure: `opts` argument is invalid, expected an object.');\n      }\n      Object.assign(globalParams, opts);\n    },\n    requestGeolocation(opts = {}) {\n      if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n        throw Error('PlaceKit.requestGeolocation: `opts` argument is invalid, expected an object.');\n      }\n      return new Promise((resolve, reject) => {\n        if (typeof window === 'undefined' || !navigator.geolocation) {\n          reject(Error('PlaceKit.requestGeolocation: geolocation is only available in the browser.'));\n        } else {\n          navigator.geolocation.getCurrentPosition(\n            (pos) => {\n              hasGeolocation = true;\n              globalParams.coordinates = `${pos.coords.latitude},${pos.coords.longitude}`;\n              resolve(pos);\n            },\n            (err) => {\n              hasGeolocation = false;\n              delete globalParams.coordinates;\n              reject(Error(`PlaceKit.requestGeolocation: (${err.code}) ${err.message}`));\n            },\n            opts\n          );\n        }\n      });\n    },\n    clearGeolocation() {\n      hasGeolocation = false;\n      delete globalParams.coordinates;\n    },\n  };\n  for (const [resource, init] of extensions.entries()) {\n    if (resource in client) {\n      throw Error(`PlaceKit extend: \\`client.${resource}\\` already exists.`);\n    }\n    client[resource] = init(request, client);\n  }\n  client.configure(options);\n  return client;\n}\nplacekit.extend = function(resource, init) {\n  if (!init?.call) {\n    throw Error('PlaceKit extend: `init` argument is invalid, expected a function.');\n  }\n  extensions.set(resource, init);\n};\nplacekit.extend('search', (request, client) => (query, opts = {}) => {\n  if (!['string', 'undefined'].includes(typeof query)) {\n    throw Error('PlaceKit `client.search`: `query` argument is invalid, expected a string.');\n  }\n  if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n    throw Error('PlaceKit.search: `opts` argument is invalid, expected an object.');\n  }\n  return request('POST', 'search', {\n    ...client.options,\n    ...opts,\n    query,\n  });\n});\nplacekit.extend('reverse', (request, client) => (opts = {}) => {\n  if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n    throw Error('PlaceKit.reverse: `opts` argument is invalid, expected an object.');\n  }\n  return request('POST', 'reverse', {\n    ...client.options,\n    ...opts,\n  });\n});\n\nexport { placekit as default };\n","/*! @placekit/client-js v2.2.0 | © placekit.io | MIT license | https://github.com/placekit/client-js#readme */\nimport placekit from './placekit-lite.js';\n\nplacekit.extend('patch', (request) => ({\n  list(opts = {}) {\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.list: `opts` argument is invalid, expected an object.');\n    }\n    return request('POST', `patch/search`, opts);\n  },\n  create(update, opts = {}, origin) {\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.create: `opts` argument is invalid, expected an object.');\n    }\n    const method = typeof origin === 'undefined' ? 'POST' : 'PUT';\n    const data = typeof origin === 'undefined' ? { record: update } : {\n      origin,\n      update,\n    };\n    return request(method, 'patch', {\n      ...data,\n      status: opts?.status,\n      language: opts?.language,\n    });\n  },\n  get(id, language) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.get: `id` argument is invalid, expected a string.');\n    }\n    if (!['string', 'undefined'].includes(typeof language)) {\n      throw Error('PlaceKit.patch.get: `language` argument is invalid, expected a string.');\n    }\n    return request('GET', `patch/${id}`, {\n      language,\n    });\n  },\n  update(id, update, opts = {}) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.update: `id` argument is invalid, expected a string.');\n    }\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.update: `opts` argument is invalid, expected an object.');\n    }\n    return request('PATCH', `patch/${id}`, {\n      update,\n      status: opts?.status,\n      language: opts?.language,\n    });\n  },\n  delete(id) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.delete: `id` argument is invalid, expected a string.');\n    }\n    return request('DELETE', `patch/${id}`);\n  },\n  deleteLang(id, language) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.patch.deleteLang: `id` argument is invalid, expected a string.');\n    }\n    if (typeof language !== 'string' || !language) {\n      throw Error('PlaceKit.patch.deleteLang: `language` argument is invalid, expected a string.');\n    }\n    return request('DELETE', `patch/${id}/language/${language}`);\n  },\n}));\nplacekit.extend('keys', (request) => ({\n  list() {\n    return request('GET', `keys`);\n  },\n  create(role, opts = {}) {\n    if (!['public', 'private'].includes(role)) {\n      throw Error('PlaceKit.keys.create: `role` argument is invalid, expected either \"public\" or \"private\".');\n    }\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.update: `opts` argument is invalid, expected an object.');\n    }\n    return request('POST', `keys`, {\n      role,\n      domains: opts.domains,\n    });\n  },\n  get(id) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.keys.get: `id` argument is invalid, expected a string.');\n    }\n    return request('GET', `keys/${id}`);\n  },\n  update(id, opts = {}) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.keys.get: `id` argument is invalid, expected a string.');\n    }\n    if (!['object', 'undefined'].includes(typeof opts) || Array.isArray(opts) || opts === null) {\n      throw Error('PlaceKit.patch.update: `opts` argument is invalid, expected an object.');\n    }\n    return request('PATCH', `keys/${id}`, {\n      domains: opts.domains,\n    });\n  },\n  delete(id) {\n    if (typeof id !== 'string' || !id) {\n      throw Error('PlaceKit.keys.get: `id` argument is invalid, expected a string.');\n    }\n    return request('DELETE', `keys/${id}`);\n  },\n}));\n\nexport { placekit as default };\n"],"names":["extensions","getUserAgent","chunks","placekit","apiKey","options","currentHost","hosts","hasGeolocation","globalParams","userAgent","request","method","resource","opts","timeout","forwardIP","params","controller","id","url","k","headers","res","body","err","client","resolve","reject","pos","init","query","update","origin","language","role"],"mappings":"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","x_google_ignoreList":[0,1]}