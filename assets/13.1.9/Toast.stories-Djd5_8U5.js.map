{"version":3,"file":"Toast.stories-Djd5_8U5.js","sources":["../../../node_modules/react-atomic-state/dist/index.module.js","../../../packages/shared-business/src/state/toasts.ts","../../../packages/shared-business/src/components/ToastStack.tsx","../../../packages/shared-business/__stories__/Toast.stories.tsx"],"sourcesContent":["import{useSyncExternalStoreWithSelector as e}from\"use-sync-external-store/shim/with-selector\";function t(e){const t=new Set;let r=e;return{get:()=>r,set(e){r=\"function\"==typeof e?e(r):e,t.forEach(e=>e(r))},subscribe:e=>(t.add(e),()=>{t.delete(e)}),reset(){r=e,t.forEach(e=>e(r))}}}function r(e){return e}function n(t,n){return void 0===n&&(n=Object.is),e(t.subscribe,t.get,t.get,r,n)}function o(t,r,n){return void 0===n&&(n=Object.is),e(t.subscribe,t.get,t.get,r,n)}export{t as atom,n as useAtom,o as useAtomWithSelector};\n//# sourceMappingURL=index.module.js.map\n","import { atom, useAtom } from \"react-atomic-state\";\n\n// based on https://gist.github.com/ncou/3a0a1f89c8e22416d0d607f621a948a9\nconst createProgress = ({ duration, onEnd }: { duration: number; onEnd: () => void }) => {\n  const callbacks = new Set<(value: number) => void>();\n\n  let endDate = 0;\n  let timerId = 0;\n\n  const step = () => {\n    const value = (endDate - Date.now()) / duration;\n    callbacks.forEach(callback => callback(value));\n    animationRequest = window.requestAnimationFrame(step);\n  };\n\n  let animationRequest = window.requestAnimationFrame(step);\n\n  const start = () => {\n    endDate = Date.now() + duration;\n\n    timerId = window.setTimeout(() => {\n      clear();\n      onEnd();\n    }, duration);\n  };\n\n  const reset = () => {\n    window.clearTimeout(timerId);\n    start();\n  };\n\n  const subscribe = (callback: (value: number) => void) => {\n    callbacks.add(callback);\n\n    return () => {\n      callbacks.delete(callback);\n    };\n  };\n\n  const clear = () => {\n    document.removeEventListener(\"visibilitychange\", onDocumentVisible);\n    window.clearTimeout(timerId);\n    window.cancelAnimationFrame(animationRequest);\n  };\n\n  const onDocumentVisible = () => {\n    document.removeEventListener(\"visibilitychange\", onDocumentVisible);\n    reset();\n  };\n\n  if (document.hidden) {\n    document.addEventListener(\"visibilitychange\", onDocumentVisible);\n  } else {\n    reset();\n  }\n\n  return {\n    clear,\n    reset,\n    subscribe,\n  };\n};\n\nexport type ToastProgress = ReturnType<typeof createProgress>;\nexport type ToastVariant = \"success\" | \"info\" | \"warning\" | \"error\";\n\ntype ToastContent = {\n  variant: ToastVariant;\n  title: string;\n  description?: string;\n  error?: unknown;\n  autoClose?: boolean;\n};\n\ntype Toast = {\n  uid: string;\n  variant: ToastVariant;\n  title: string;\n  description?: string;\n  error?: unknown;\n  progress?: ToastProgress;\n};\n\nconst toasts = atom<Toast[]>([]);\n\nexport const useToasts = () => useAtom(toasts);\n\nexport const hideToast = (uid: string) => {\n  const toast = toasts.get().find(toast => toast.uid === uid);\n\n  if (toast != null) {\n    toast.progress?.clear();\n    toasts.set(toasts => toasts.filter(toast => toast.uid !== uid));\n  }\n};\n\nlet errorToRequestId = new WeakMap<WeakKey, string>();\n\nexport const registerErrorToRequestId = (value: WeakMap<WeakKey, string>) => {\n  errorToRequestId = value;\n};\n\nexport const getErrorToRequestId = () => {\n  return errorToRequestId;\n};\n\nexport const showToast = ({ variant, title, description, error, autoClose }: ToastContent) => {\n  const uid = `${variant} - ${title} - ${description ?? \"\"}`;\n  const toast = toasts.get().find(toast => toast.uid === uid);\n\n  if (toast != null) {\n    toast.progress?.reset();\n    return uid;\n  }\n\n  // by default, only info and success toasts are auto-closing\n  const shouldAutoClose = autoClose ?? (variant === \"info\" || variant === \"success\");\n\n  const progress = shouldAutoClose\n    ? createProgress({\n        duration: 10000,\n        onEnd: () => {\n          hideToast(uid);\n        },\n      })\n    : undefined;\n\n  toasts.set(toasts => [{ uid, variant, title, description, error, progress }, ...toasts]);\n  return uid;\n};\n","import { Array, Option } from \"@swan-io/boxed\";\nimport { Box } from \"@swan-io/lake/src/components/Box\";\nimport { Icon } from \"@swan-io/lake/src/components/Icon\";\nimport { LakeText } from \"@swan-io/lake/src/components/LakeText\";\nimport { LakeTooltip } from \"@swan-io/lake/src/components/LakeTooltip\";\nimport { Portal } from \"@swan-io/lake/src/components/Portal\";\nimport { Pressable } from \"@swan-io/lake/src/components/Pressable\";\nimport { Space } from \"@swan-io/lake/src/components/Space\";\nimport { TransitionGroupView } from \"@swan-io/lake/src/components/TransitionGroupView\";\nimport { ColorVariants, animations, colors, shadows } from \"@swan-io/lake/src/constants/design\";\nimport { setClipboardText } from \"@swan-io/lake/src/utils/clipboard\";\nimport { isNotNullishOrEmpty, isNullish } from \"@swan-io/lake/src/utils/nullish\";\nimport { memo, useEffect, useRef, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { P, match } from \"ts-pattern\";\nimport {\n  ToastProgress,\n  ToastVariant,\n  getErrorToRequestId,\n  hideToast,\n  useToasts,\n} from \"../state/toasts\";\nimport { t } from \"../utils/i18n\";\n\nconst styles = StyleSheet.create({\n  list: {\n    position: \"fixed\",\n    right: 0,\n    bottom: 0,\n    maxHeight: \"100%\",\n    maxWidth: 400,\n    paddingVertical: 8,\n    width: \"100%\",\n    zIndex: 10,\n    pointerEvents: \"none\",\n  },\n  toastWrapper: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    pointerEvents: \"auto\",\n  },\n  toast: {\n    padding: 24,\n    borderRadius: 4,\n    borderWidth: 1,\n    borderLeftWidth: 4,\n    overflow: \"hidden\",\n    boxShadow: shadows.modal,\n  },\n  contentContainer: {\n    paddingRight: 36, // 24 for close button + 12 for spacing\n  },\n  closeButton: {\n    zIndex: 1,\n    position: \"absolute\",\n    width: 24,\n    height: 24,\n    right: 24,\n    top: 0,\n    bottom: 0,\n    margin: \"auto\",\n  },\n  progressBar: {\n    height: 2,\n    transformOrigin: \"left\",\n  },\n  copyTooltip: {\n    alignSelf: \"flex-start\",\n  },\n  copyButton: {\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    flexGrow: 1,\n    flexShrink: 1,\n  },\n});\n\ntype ToastProps = {\n  variant: ToastVariant;\n  uid: string;\n  title: string;\n  description?: string;\n  error?: unknown;\n  progress?: ToastProgress;\n  onClose: (uid: string) => void;\n};\n\nconst errorsToArray = (errors: unknown): Error[] => {\n  const asArray = Array.isArray(errors) ? errors : [errors];\n  return Array.filterMap(asArray, error =>\n    error instanceof Error ? Option.Some(error) : Option.None(),\n  );\n};\n\nconst Toast = memo<ToastProps>(({ variant, uid, title, description, error, progress, onClose }) => {\n  const progressBarRef = useRef<View>(null);\n  const [visibleState, setVisibleState] = useState<\"copy\" | \"copied\">(\"copy\");\n  const hasDescription = isNotNullishOrEmpty(description);\n\n  const [requestId] = useState<Option<string>>(() => {\n    if (error == null) {\n      return Option.None();\n    }\n    return Array.findMap(errorsToArray(error), error =>\n      Option.fromNullable(getErrorToRequestId().get(error)),\n    );\n  });\n\n  const colorVariation = match(variant)\n    .returnType<ColorVariants>()\n    .with(\"success\", () => \"positive\")\n    .with(\"error\", () => \"negative\")\n    .with(\"info\", () => \"shakespear\")\n    .with(\"warning\", () => \"warning\")\n    .exhaustive();\n\n  useEffect(() => {\n    if (isNullish(progress)) {\n      return;\n    }\n\n    return progress.subscribe(value => {\n      if (progressBarRef.current instanceof HTMLElement) {\n        progressBarRef.current.style.transform = `scaleX(${value})`;\n      }\n    });\n  }, [progress]);\n\n  return (\n    <View style={styles.toastWrapper}>\n      <View\n        style={[\n          styles.toast,\n          {\n            borderColor: colors[colorVariation][200],\n            borderLeftColor: colors[colorVariation][500],\n            backgroundColor: colors[colorVariation][0],\n          },\n        ]}\n      >\n        <Box style={styles.contentContainer}>\n          <Box direction=\"row\" alignItems=\"center\">\n            {match(variant)\n              .with(\"success\", () => (\n                <Icon\n                  name=\"checkmark-circle-regular\"\n                  size={20}\n                  color={colors[colorVariation][700]}\n                />\n              ))\n              .with(\"error\", () => (\n                <Icon name=\"dismiss-circle-regular\" size={20} color={colors[colorVariation][700]} />\n              ))\n              .with(\"info\", () => (\n                <Icon name=\"info-regular\" size={20} color={colors[colorVariation][700]} />\n              ))\n              .with(\"warning\", () => (\n                <Icon name=\"warning-regular\" size={20} color={colors[colorVariation][700]} />\n              ))\n              .exhaustive()}\n\n            <Space width={12} />\n\n            <LakeText variant=\"regular\" color={colors[colorVariation][700]}>\n              {title}\n            </LakeText>\n          </Box>\n\n          {hasDescription && (\n            <>\n              <Space height={8} />\n\n              <LakeText variant=\"smallRegular\" color={colors.gray[700]}>\n                {description}\n              </LakeText>\n            </>\n          )}\n\n          {match(requestId)\n            .with(Option.P.None, () => null)\n            .with(Option.P.Some(P.select()), requestId => (\n              <>\n                <Space height={hasDescription ? 4 : 8} />\n\n                <LakeTooltip\n                  describedBy=\"copy\"\n                  onHide={() => setVisibleState(\"copy\")}\n                  togglableOnFocus={true}\n                  placement=\"center\"\n                  containerStyle={styles.copyTooltip}\n                  content={\n                    visibleState === \"copy\"\n                      ? t(\"copyButton.copyTooltip\")\n                      : t(\"copyButton.copiedTooltip\")\n                  }\n                >\n                  <Pressable\n                    style={styles.copyButton}\n                    onPress={event => {\n                      event.stopPropagation();\n                      event.preventDefault();\n                      setClipboardText(requestId ?? \"\");\n                      setVisibleState(\"copied\");\n                    }}\n                  >\n                    <Icon color={colors.gray[700]} size={14} name=\"copy-regular\" />\n                    <Space width={4} />\n\n                    <LakeText numberOfLines={1} variant=\"smallRegular\" color={colors.gray[700]}>\n                      ID: {requestId}\n                    </LakeText>\n                  </Pressable>\n                </LakeTooltip>\n              </>\n            ))\n            .exhaustive()}\n        </Box>\n\n        <Pressable onPress={() => onClose(uid)} style={styles.closeButton}>\n          <Icon name=\"lake-close\" size={24} color={colors.gray[500]} />\n        </Pressable>\n\n        {progress != null && (\n          <>\n            <Space height={24} />\n\n            <View\n              ref={progressBarRef}\n              role=\"progressbar\"\n              style={[styles.progressBar, { backgroundColor: colors[colorVariation][500] }]}\n            />\n          </>\n        )}\n      </View>\n    </View>\n  );\n});\n\nexport const ToastStack = () => {\n  const toasts = useToasts();\n\n  const [rootElement, setRootElement] = useState<Element | undefined>(() => undefined);\n\n  useEffect(() => {\n    const rootElement = document.createElement(\"div\");\n    document.body.append(rootElement);\n    setRootElement(rootElement);\n    return () => {\n      rootElement.remove();\n      setRootElement(undefined);\n    };\n  }, []);\n\n  if (rootElement == null) {\n    return null;\n  }\n\n  return (\n    <Portal container={rootElement}>\n      <TransitionGroupView\n        style={styles.list}\n        enter={animations.fadeAndSlideInFromRight.enter}\n        leave={animations.fadeAndSlideInFromRight.leave}\n      >\n        {toasts.map(toast => (\n          <Toast\n            key={toast.uid}\n            uid={toast.uid}\n            variant={toast.variant}\n            title={toast.title}\n            description={toast.description}\n            error={toast.error}\n            progress={toast.progress}\n            onClose={hideToast}\n          />\n        ))}\n      </TransitionGroupView>\n    </Portal>\n  );\n};\n","import { Meta } from \"@storybook/react\";\nimport { LakeButton } from \"@swan-io/lake/src/components/LakeButton\";\nimport { Space } from \"@swan-io/lake/src/components/Space\";\nimport { ToastStack } from \"../src/components/ToastStack\";\nimport { registerErrorToRequestId, showToast } from \"../src/state/toasts\";\nimport { StoryBlock, StoryPart } from \"./_StoriesComponents\";\n\nconst styles = {\n  button: {\n    width: 200,\n  },\n};\n\nexport default {\n  title: \"Interactivity/Toast\",\n  component: ToastStack,\n} as Meta<typeof ToastStack>;\n\nconst map = new WeakMap<WeakKey, string>();\nregisterErrorToRequestId(map);\n\nconst error = new Error();\nmap.set(error, \"req-thvfknqp\");\n\nexport const Default = () => {\n  return (\n    <>\n      <ToastStack />\n\n      <StoryBlock title=\"Toast\">\n        <StoryPart title=\"With only title\">\n          <LakeButton\n            color=\"positive\"\n            style={styles.button}\n            onPress={() =>\n              showToast({ variant: \"success\", title: \"Successfully copy to clipboard !\" })\n            }\n          >\n            Open success toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"negative\"\n            style={styles.button}\n            onPress={() => showToast({ variant: \"error\", title: \"Oops ! Something went wrong\" })}\n          >\n            Open error toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"shakespear\"\n            style={styles.button}\n            onPress={() =>\n              showToast({ variant: \"info\", title: \"Successfully copy to clipboard !\" })\n            }\n          >\n            Open success toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"warning\"\n            style={styles.button}\n            onPress={() => showToast({ variant: \"warning\", title: \"Oops ! Something went wrong\" })}\n          >\n            Open warning toast\n          </LakeButton>\n        </StoryPart>\n\n        <StoryPart title=\"With title and description\">\n          <LakeButton\n            color=\"positive\"\n            style={styles.button}\n            onPress={() =>\n              showToast({\n                variant: \"success\",\n                title: \"Successfully copy to clipboard !\",\n                description: \"You can now paste it anywhere\",\n              })\n            }\n          >\n            Open success toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"negative\"\n            style={styles.button}\n            onPress={() =>\n              showToast({\n                variant: \"error\",\n                title: \"Oops ! Something went wrong\",\n                error,\n                description: \"Please retry or contact us\",\n              })\n            }\n          >\n            Open error toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"shakespear\"\n            style={styles.button}\n            onPress={() =>\n              showToast({\n                variant: \"info\",\n                title: \"Successfully copy to clipboard !\",\n                description: \"You can now paste it anywhere\",\n              })\n            }\n          >\n            Open success toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"warning\"\n            style={styles.button}\n            onPress={() =>\n              showToast({\n                variant: \"warning\",\n                title: \"Oops ! Something went wrong\",\n                description: \"Talk to an expert\",\n              })\n            }\n          >\n            Open warning toast\n          </LakeButton>\n        </StoryPart>\n\n        <StoryPart title=\"With long title and description\">\n          <LakeButton\n            color=\"positive\"\n            style={styles.button}\n            onPress={() =>\n              showToast({\n                variant: \"success\",\n                title:\n                  \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut\",\n              })\n            }\n          >\n            Open success toast\n          </LakeButton>\n\n          <Space height={16} />\n\n          <LakeButton\n            color=\"positive\"\n            style={styles.button}\n            onPress={() =>\n              showToast({\n                variant: \"success\",\n                title:\n                  \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut\",\n                description:\n                  \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl ut\",\n              })\n            }\n          >\n            Open success toast\n          </LakeButton>\n        </StoryPart>\n      </StoryBlock>\n    </>\n  );\n};\n"],"names":["t","r","e","n","createProgress","duration","onEnd","callbacks","endDate","timerId","step","value","callback","animationRequest","start","clear","reset","subscribe","onDocumentVisible","toasts","atom","useToasts","useAtom","hideToast","uid","toast","errorToRequestId","registerErrorToRequestId","getErrorToRequestId","showToast","variant","title","description","error","autoClose","progress","styles","StyleSheet","shadows","errorsToArray","errors","asArray","Array","Option","Toast","memo","onClose","progressBarRef","useRef","visibleState","setVisibleState","useState","hasDescription","isNotNullishOrEmpty","requestId","colorVariation","match","useEffect","isNullish","jsx","View","jsxs","colors","Box","Icon","Space","LakeText","Fragment","P","LakeTooltip","Pressable","event","setClipboardText","ToastStack","rootElement","setRootElement","Portal","TransitionGroupView","animations","button","width","Toast_stories","component","map","WeakMap","Error","set","Default","StoryBlock","StoryPart","LakeButton"],"mappings":"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","x_google_ignoreList":[0]}