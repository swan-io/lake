import{S as Se,s as j,m as oe,r as se,c as w,j as g,F as H,a as n,V as k,b as M,o as Ee,L as J,p as _e,i as Ve}from"./Space-5c29d500.js";import{r as y}from"./index-f1f749bf.js";import{h as m}from"./Boxed-aef12ad0.js";import{d as Ne}from"./dayjs.min-33e2be6b.js";import{R as K}from"./rifm.esm-58cee9fb.js";import{B as _,K as Ye,S as B}from"./index.module-bef243ca.js";import{n as Fe}from"./function-1bad6ac0.js";import{g as Re}from"./rifm-2b7a6d3b.js";import{F as ie}from"./Fill-d7d86da4.js";import{I as We}from"./Icon-27bbe041.js";import{L as q}from"./LakeButton-d869e10e.js";import{L as le}from"./LakeSelect-ad937f1f.js";import{L as $}from"./LakeTextInput-3b6d4260.js";import{P as qe}from"./Pressable-d518d699.js";import{c as Ae,S as ke,a as V}from"./_StoriesComponents-bbcd7ec3.js";import{W as be}from"./WithPartnerAccentColor-d6e3f98e.js";import"./extends-98964cd2.js";import"./_commonjsHelpers-042e6b4d.js";import"./Svg-ff455c54.js";import"./index-4bbcd6fb.js";import"./commonStyles-d52fedae.js";import"./Popover-50e70ffd.js";import"./useResponsive-f4d095a5.js";import"./BottomPanel-a1918361.js";import"./useBodyClassName-bd00433d.js";import"./math-d8257b44.js";import"./FocusTrap-1588cf22.js";import"./array-b3630b94.js";import"./LoadingView-abfecfc9.js";import"./colors-298625c7.js";import"./Portal-ddaa83ce.js";import"./index-96c5f47c.js";import"./WithCurrentColor-dc917e83.js";import"./TransitionView-c4b12149.js";import"./index-c86de1d8.js";import"./index-37abc2ac.js";import"./index-37690212.js";import"./useMergeRefs-b62e07d5.js";import"./polished.esm-77d64d09.js";const u=Se.create({popoverContainer:{width:430,padding:j[24],backgroundColor:oe.white,borderRadius:se[8]},rangePopoverContainer:{alignSelf:"flex-start",padding:j[24],backgroundColor:oe.white,borderRadius:se[8]},rangePopoverPart:{width:330},button:{flex:1},monthSelect:{width:130},yearSelect:{width:100},weekRow:{paddingVertical:j[4]},dayName:{flex:1,height:32,alignItems:"center",justifyContent:"center"},dayContainer:{flex:1,alignItems:"center"},dayRangeIndicator:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:w.current[100]},dayStartRangeIndicator:{left:"50%"},dayEndRangeIndicator:{right:"50%"},dayNumber:{width:32,height:32,alignItems:"center",justifyContent:"center",borderRadius:16},dayNumberFocused:{},dayNumberHover:{backgroundColor:w.current[100]},dayNumberPressed:{},dayNumberSelected:{backgroundColor:w.current[500]},todayIndicator:{position:"absolute",left:0,right:0,bottom:0,width:4,height:4,marginHorizontal:"auto",borderRadius:2,backgroundColor:w.current[500]}}),G=7,we={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},Q=Re({accept:"numeric",charMap:{2:"/",4:"/"},maxLength:8}),O=(t,e)=>{const r=Ne.utc(t,e);return r.isValid()?m.Some({day:r.date(),month:r.month(),year:r.year()}):m.None()},Me=(t,e)=>({start:O(t.start,e),end:O(t.end,e)}),U=(t,e)=>Ne.utc().year(t.year).month(t.month).date(t.day).format(e),Te=(t,e)=>{const r=Me(t,e);return r.start.isNone()||r.end.isNone()?!0:!v(r.start.value,r.end.value)},Le=(t,e)=>{const r=[];for(let a=t;a<=e;a++)r.push(a);return r},xe=(t,e)=>{const r=[],a=Math.ceil(t.length/e);for(let o=0;o<a;o++)r.push(t.slice(o*e,(o+1)*e));return r},Be=(t,e,r)=>{const a=new Array(e-t.length).fill(r);return[...t,...a]},X=t=>{const e=new Date;e.setDate(e.getDate()-1);const r={day:e.getDate(),month:e.getMonth(),year:e.getFullYear()};return v(t,r)},Oe=(t,e)=>r=>{const a={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},o={day:e.getDate(),month:e.getMonth(),year:e.getFullYear()};return v(r,a)&&ae(r,o)},ze=t=>{const e=new Date;return t.day===e.getDate()&&t.month===e.getMonth()&&t.year===e.getFullYear()},je=(t,e)=>{const r=(a,o)=>{const s=o.getDate(),h=o.getMonth(),i=o.getFullYear();return o.getMonth()!==t?a:r([...a,{day:s,month:h,year:i}],new Date(e,t,s+1))};return r([],new Date(e,t,1))},Ge=(t,e,r)=>{const a=we[r],o=new Date(e,t,1).getDay(),s=je(t,e).map(l=>m.Some(l)),h=o>=a?o-a:G-a+o;for(let l=0;l<h;l++)s.unshift(m.None());const i=xe(s,G),f=i[i.length-1];return f&&(i[i.length-1]=Be(f,G,m.None())),i},He=(t,e="sunday")=>{const r=we[e],a=t.slice(r),o=t.slice(0,r);return[...a,...o]},E=(t,e)=>t.day===e.day&&t.month===e.month&&t.year===e.year,ae=(t,e)=>t.year<e.year||t.year===e.year&&t.month<e.month||t.year===e.year&&t.month===e.month&&t.day<e.day,v=(t,e)=>t.year>e.year||t.year===e.year&&t.month>e.month||t.year===e.year&&t.month===e.month&&t.day>e.day,Pe=t=>Ye(t).with({start:B._,end:B._},()=>!0).otherwise(()=>!1),Je=(t,e)=>Ye(e).with(m.pattern.Some(B.select()),r=>E(r,t)).with(m.pattern.None,()=>!1).with(B.when(Pe),({start:r,end:a})=>r.isSome()&&a.isSome()&&v(r.value,a.value)?!1:r.match({Some:o=>E(o,t),None:()=>!1})||a.match({Some:o=>E(o,t),None:()=>!1})).exhaustive(),Ke=(t,e)=>{if(!Pe(e))return"none";const{start:r,end:a}=e;if(r.isNone()||a.isNone())return"none";const o=r.value,s=a.value;return v(o,s)||E(o,s)?"none":E(t,o)?"start":E(t,s)?"end":v(t,o)&&ae(t,s)?"between":"none"},ce=(t,e)=>{const r=new Date(t.year,t.month,t.day),a=new Date(e.year,e.month,e.day),o=Math.abs(a.getTime()-r.getTime());return Math.round(o/(1e3*3600*24))},$e=(t,e)=>{const{start:r,end:a}=t;if(r.isNone())return{start:m.Some(e),end:m.None()};if(a.isNone())return v(e,r.value)?{start:r,end:m.Some(e)}:{start:m.Some(e),end:t.start};if(ae(e,r.value))return{start:m.Some(e),end:t.end};if(v(e,a.value))return{start:t.start,end:m.Some(e)};const o=ce(r.value,e),s=ce(a.value,e);return o<s?{start:m.Some(e),end:t.end}:{start:t.start,end:m.Some(e)}},ve=()=>({month:new Date().getMonth(),year:new Date().getFullYear()}),C=(t,e)=>_e(t)?m.None():O(t,e),Ie=(t,e)=>t.year<e.year||t.year===e.year&&t.month<e.month,de=(t,e)=>t.year===e.year&&t.month===e.month,ue=(t,e)=>Ie(t,e)?t:e,me=(t,e)=>Ie(t,e)?e:t,I=({month:t,year:e})=>t===11?{month:0,year:e+1}:{month:t+1,year:e},F=({month:t,year:e})=>t===0?{month:11,year:e-1}:{month:t-1,year:e},Z=({monthNames:t,value:e,minValue:r,maxValue:a,arrowsPosition:o="right",onChange:s})=>{const h=y.useMemo(()=>t.map((Y,c)=>({name:Y,value:c})),[t]),i=y.useMemo(()=>Le(e.year-5,e.year+5).map(Y=>({name:Y.toString(),value:Y})),[e.year]),f=Y=>{s({year:e.year,month:Y})},l=Y=>{s({year:Y,month:e.month})},p=()=>{s(F(e))},S=()=>{s(I(e))},N=r?e.year<=r.year&&e.month<=r.month:!1,b=a?e.year>=a.year&&e.month>=a.month:!1;return g(_,{direction:"row",alignItems:"center",children:[o==="around"&&g(H,{children:[n(q,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:N,onPress:p}),n(ie,{minWidth:12})]}),n(le,{items:h,value:e.month,onValueChange:f,mode:"borderless",size:"small",hideErrors:!0,style:u.monthSelect}),n(le,{items:i,value:e.year,onValueChange:l,mode:"borderless",size:"small",hideErrors:!0,style:u.yearSelect}),n(ie,{minWidth:12}),o==="right"&&g(H,{children:[n(q,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:N,onPress:p}),n(M,{width:12})]}),n(q,{size:"small",mode:"tertiary",icon:"arrow-right-filled",disabled:b,onPress:S})]})},ee=({month:t,year:e,value:r,firstWeekDay:a,weekDayNames:o,isSelectable:s,onChange:h})=>{const i=y.useMemo(()=>He(o,a),[o,a]),f=y.useMemo(()=>Ge(t,e,a),[t,e,a]);return g(k,{children:[n(_,{direction:"row",alignItems:"center",style:u.weekRow,children:i.map(l=>n(k,{style:u.dayName,children:n(J,{variant:"medium",color:w.gray[600],children:l.substring(0,1)})},l))}),f.map((l,p)=>n(_,{direction:"row",alignItems:"center",style:u.weekRow,children:l.map((S,N)=>{const b=S.match({Some:D=>Ve(s)&&!s(D),None:()=>!0}),Y=S.match({Some:D=>Je(D,r),None:()=>!1}),c=S.match({Some:D=>ze(D),None:()=>!1}),d=S.match({Some:D=>Ke(D,r),None:()=>"none"});return g(k,{style:u.dayContainer,children:[d!=="none"&&n(k,{style:[u.dayRangeIndicator,d==="start"&&u.dayStartRangeIndicator,d==="end"&&u.dayEndRangeIndicator]}),g(qe,{disabled:b,onPress:()=>S.match({Some:h,None:Fe}),style:({focused:D,hovered:P,pressed:Ce})=>[u.dayNumber,D&&u.dayNumberFocused,P&&u.dayNumberHover,Ce&&u.dayNumberPressed,Y&&u.dayNumberSelected],children:[n(J,{variant:"smallRegular",color:Y?w.current.contrast:b?w.gray[300]:c?w.current[500]:w.gray[900],children:S.match({Some:({day:D})=>D.toString(),None:()=>" "})}),c&&n(k,{style:u.todayIndicator})]})]},N)})},p))]})},Qe=({value:t,format:e,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:s,onChange:h})=>{const[i,f]=y.useState(()=>C(t,e).getWithDefault(ve()));y.useEffect(()=>{const p=C(t,e);p.isSome()&&f(p.value)},[t,e]);const l=y.useCallback(p=>{const S=U(p,e);h(S)},[e,h]);return g(k,{style:u.popoverContainer,children:[n(Z,{monthNames:a,value:i,onChange:f}),n(M,{height:24}),n(ee,{month:i.month,year:i.year,value:Ee(t)?O(t,e):m.None(),firstWeekDay:r,weekDayNames:o,isSelectable:s,onChange:l})]})},z=({value:t,error:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i})=>g(H,{children:[n(K,{value:t??"",onChange:i,...Q,children:({value:f,onChange:l})=>n($,{placeholder:r,value:f,error:e,onChange:l})}),n(Qe,{value:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i})]}),Ue=({value:t,format:e,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:s,onChange:h,cancelLabel:i,confirmLabel:f})=>{const[l,p]=y.useState(()=>{const c=C(t.start,e).getWithDefault(ve()),d=C(t.end,e).getWithDefault(I(c));return{start:c,end:d}});y.useEffect(()=>{const c=C(t.start,e);c.isSome()&&p(d=>{if(de(c.value,d.end))return{start:F(d.end),end:d.end};const P=me(d.end,I(c.value));return{start:c.value,end:P}})},[t.start,e]),y.useEffect(()=>{const c=C(t.end,e);c.isSome()&&p(d=>de(d.start,c.value)?{start:d.start,end:I(d.start)}:{start:ue(d.start,F(c.value)),end:c.value})},[t.end,e]);const S=y.useCallback(c=>{p(d=>({start:c,end:me(d.end,I(c))}))},[]),N=y.useCallback(c=>{p(d=>({start:ue(d.start,F(c)),end:c}))},[]),b=y.useMemo(()=>Me(t,e),[t,e]),Y=c=>{const d=$e(b,c),D={start:d.start.match({Some:P=>U(P,e),None:()=>t.start}),end:d.end.match({Some:P=>U(P,e),None:()=>t.end})};h(D)};return g(k,{style:u.rangePopoverContainer,children:[g(_,{direction:"row",alignItems:"start",children:[g(k,{style:u.rangePopoverPart,children:[n(Z,{monthNames:a,value:l.start,maxValue:F(l.end),arrowsPosition:"around",onChange:S}),n(M,{height:24}),n(ee,{month:l.start.month,year:l.start.year,value:b,firstWeekDay:r,weekDayNames:o,isSelectable:s,onChange:Y})]}),n(Ae,{space:24,horizontal:!0}),g(k,{style:u.rangePopoverPart,children:[n(Z,{monthNames:a,value:l.end,minValue:I(l.start),arrowsPosition:"around",onChange:N}),n(M,{height:24}),n(ee,{month:l.end.month,year:l.end.year,value:b,firstWeekDay:r,weekDayNames:o,isSelectable:s,onChange:Y})]})]}),n(M,{height:24}),g(_,{direction:"row",alignItems:"start",children:[n(q,{size:"small",mode:"secondary",style:u.button,children:i}),n(M,{width:48}),n(q,{size:"small",mode:"primary",color:"current",style:u.button,children:f})]})]})},te=({value:t,error:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i,cancelLabel:f,confirmLabel:l})=>{const p=y.useCallback(N=>{i({start:N,end:t.end})},[t,i]),S=y.useCallback(N=>{i({start:t.start,end:N})},[t,i]);return g(k,{children:[g(_,{direction:"row",alignItems:"center",children:[n(K,{value:t.start,onChange:p,...Q,children:({value:N,onChange:b})=>n($,{placeholder:r,value:N,onChange:b,error:e,hideErrors:!0})}),n(M,{width:12}),n(We,{name:"arrow-right-filled",size:20}),n(M,{width:12}),n(K,{value:t.end,onChange:S,...Q,children:({value:N,onChange:b})=>n($,{placeholder:r,value:N,onChange:b,error:e,hideErrors:!0})})]}),n(M,{height:4}),n(J,{variant:"smallRegular",color:w.negative[500],children:e??" "}),n(Ue,{value:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i,cancelLabel:f,confirmLabel:l})]})};try{X.displayName="isTodayOrFutureDate",X.__docgenInfo={description:"",displayName:"isTodayOrFutureDate",props:{day:{defaultValue:null,description:"",name:"day",required:!0,type:{name:"number"}},month:{defaultValue:null,description:"",name:"month",required:!0,type:{name:"number"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"number"}}}}}catch{}try{z.displayName="DatePicker",z.__docgenInfo={description:"",displayName:"DatePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: string) => void"}}}}}catch{}try{te.displayName="DateRangePicker",te.__docgenInfo={description:"",displayName:"DateRangePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"{ start: string; end: string; }"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: { start: string; end: string; }) => void"}},cancelLabel:{defaultValue:null,description:"",name:"cancelLabel",required:!0,type:{name:"string"}},confirmLabel:{defaultValue:null,description:"",name:"confirmLabel",required:!0,type:{name:"string"}}}}}catch{}const A=Se.create({container:{width:430}}),re=new Date;re.setDate(re.getDate()-15);const ne=new Date;ne.setDate(ne.getDate()+15);const Tt={title:"Forms/DatePicker",component:z},T=({...t})=>{const[e,r]=y.useState();return n(z,{...t,value:e,onChange:r})},Xe=({...t})=>{const[e,r]=y.useState({start:"",end:""}),a=Te(e,t.format);return n(te,{...t,value:e,error:a?void 0:"End date can't be before start date",onChange:r})},R=["January","February","March","April","May","June","July","August","September","October","November","December"],W=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=()=>n(be,{color:"#0F6FDE",children:g(ke,{title:"DatePicker",children:[n(V,{title:"Default",children:n(k,{style:A.container,children:n(T,{firstWeekDay:"monday",monthNames:R,weekDayNames:W,format:"DD/MM/YYYY"})})}),n(V,{title:"Week starting sunday",children:n(k,{style:A.container,children:n(T,{firstWeekDay:"sunday",monthNames:R,weekDayNames:W,format:"DD/MM/YYYY"})})}),n(V,{title:"Selectable only in the future",children:n(k,{style:A.container,children:n(T,{firstWeekDay:"sunday",monthNames:R,weekDayNames:W,format:"DD/MM/YYYY",isSelectable:X})})}),n(V,{title:"Selectable only in a range (15 days before or after today)",children:n(k,{style:A.container,children:n(T,{firstWeekDay:"sunday",monthNames:R,weekDayNames:W,format:"DD/MM/YYYY",isSelectable:Oe(re,ne)})})})]})}),x=()=>n(be,{color:"#0F6FDE",children:n(ke,{title:"DateRangePicker",children:n(V,{title:"Default",children:n(Xe,{firstWeekDay:"monday",monthNames:R,weekDayNames:W,format:"DD/MM/YYYY",cancelLabel:"Cancel",confirmLabel:"Select"})})})});var ye,he,pe;L.parameters={...L.parameters,docs:{...(ye=L.parameters)==null?void 0:ye.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DatePicker">
        <StoryPart title="Default">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Week starting sunday">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Selectable only in the future">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" isSelectable={isTodayOrFutureDate} />
          </View>
        </StoryPart>

        <StoryPart title="Selectable only in a range (15 days before or after today)">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" isSelectable={isDateInRange(FIFTEEN_DAYS_AGO, FIFTEEN_DAYS_LATER)} />
          </View>
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(pe=(he=L.parameters)==null?void 0:he.docs)==null?void 0:pe.source}}};var ge,fe,De;x.parameters={...x.parameters,docs:{...(ge=x.parameters)==null?void 0:ge.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DateRangePicker">
        <StoryPart title="Default">
          <InteractiveDateRangePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" cancelLabel="Cancel" confirmLabel="Select" />
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(De=(fe=x.parameters)==null?void 0:fe.docs)==null?void 0:De.source}}};const Lt=["Default","Range"];export{L as Default,x as Range,Lt as __namedExportsOrder,Tt as default};
//# sourceMappingURL=DatePicker.stories-be545c86.js.map
