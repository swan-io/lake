{"version":3,"file":"Modal.stories-bd470439.js","sources":["../../../packages/lake/src/components/LakeModal.tsx"],"sourcesContent":["import { ReactNode, Suspense, useEffect, useState } from \"react\";\nimport { ScrollView, StyleSheet, View } from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport {\n  ColorVariants,\n  backgroundColor,\n  breakpoints,\n  colors,\n  negativeSpacings,\n  shadows,\n  spacings,\n} from \"../constants/design\";\nimport { useBodyClassName } from \"../hooks/useBodyClassName\";\nimport { FocusTrap } from \"./FocusTrap\";\nimport { Icon, IconName } from \"./Icon\";\nimport { LakeButton } from \"./LakeButton\";\nimport { LakeHeading } from \"./LakeHeading\";\nimport { LoadingView } from \"./LoadingView\";\nimport { Portal } from \"./Portal\";\nimport { Pressable } from \"./Pressable\";\nimport { Context, ResponsiveContainer } from \"./ResponsiveContainer\";\nimport { Space } from \"./Space\";\nimport { TransitionView } from \"./TransitionView\";\n\nexport type LakeModalProps = {\n  visible: boolean;\n  title?: string;\n  icon?: IconName;\n  color?: ColorVariants;\n  children: ReactNode | ((context: Context) => ReactNode);\n  maxWidth?: number;\n  onPressClose?: () => void;\n};\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    animationFillMode: \"forwards\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalEnter: {\n    animationKeyframes: {\n      \"0%\": {\n        opacity: 0,\n        transform: \"translateY(-20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalLeave: {\n    animationKeyframes: {\n      \"100%\": {\n        opacity: 0,\n        transform: \"translateY(-20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalContainer: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  modalContentContainer: {\n    padding: spacings[24],\n    justifyContent: \"center\",\n    flexGrow: 1,\n  },\n  modalContentContainerSmall: {\n    padding: spacings[8],\n    flexGrow: 1,\n    justifyContent: \"center\",\n  },\n  modal: {\n    backgroundColor: backgroundColor.default,\n    borderRadius: 24,\n    padding: spacings[48],\n    boxShadow: shadows.modal,\n    alignSelf: \"stretch\",\n    width: \"100%\",\n    marginHorizontal: \"auto\",\n  },\n  modalSmall: {\n    borderRadius: 16,\n    backgroundColor: backgroundColor.default,\n    width: \"100%\",\n    padding: spacings[24],\n    alignSelf: \"stretch\",\n    marginHorizontal: \"auto\",\n  },\n  modalHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  modalIconTitle: {\n    ...commonStyles.fill,\n  },\n  trap: {\n    ...commonStyles.fill,\n  },\n  pressableOverlay: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  closeButton: {\n    top: negativeSpacings[16],\n    right: negativeSpacings[16],\n  },\n});\n\nexport const LakeModal = ({\n  visible,\n  icon,\n  title,\n  color = \"current\",\n  children,\n  maxWidth = 570,\n\n  onPressClose,\n}: LakeModalProps) => {\n  const [rootElement, setRootElement] = useState<Element | undefined>(() => undefined);\n\n  useEffect(() => {\n    const rootElement = document.createElement(\"div\");\n    document.body.append(rootElement);\n    setRootElement(rootElement);\n    return () => {\n      rootElement.remove();\n      setRootElement(undefined);\n    };\n  }, []);\n\n  useBodyClassName(\"ModalOpen\", { enabled: visible });\n\n  if (rootElement == null) {\n    return null;\n  }\n\n  return (\n    <Portal container={rootElement}>\n      <View aria-modal={true} style={[styles.container, !visible && styles.inert]}>\n        <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n          {visible ? <View style={styles.overlay} /> : null}\n        </TransitionView>\n\n        <Suspense fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n          <TransitionView style={styles.fill} enter={styles.modalEnter} leave={styles.modalLeave}>\n            {visible ? (\n              <ResponsiveContainer style={styles.root} breakpoint={breakpoints.tiny}>\n                {({ large, small }) => (\n                  <FocusTrap\n                    autoFocus={true}\n                    focusLock={true}\n                    returnFocus={true}\n                    onEscapeKey={onPressClose}\n                    style={styles.trap}\n                  >\n                    <ScrollView\n                      style={styles.modalContainer}\n                      contentContainerStyle={\n                        large ? styles.modalContentContainer : styles.modalContentContainerSmall\n                      }\n                    >\n                      {onPressClose != null ? (\n                        <Pressable onPress={onPressClose} style={styles.pressableOverlay} />\n                      ) : null}\n\n                      <View style={[large ? styles.modal : styles.modalSmall, { maxWidth }]}>\n                        <View style={styles.modalHeader}>\n                          <View style={styles.modalIconTitle}>\n                            {icon != null ? (\n                              <Icon name={icon} size={large ? 40 : 32} color={colors[color][500]} />\n                            ) : null}\n\n                            {icon != null && title != null ? <Space height={12} /> : null}\n\n                            {title != null ? (\n                              <>\n                                <LakeHeading level={2} variant=\"h3\">\n                                  {title}\n                                </LakeHeading>\n\n                                <Space height={12} />\n                              </>\n                            ) : null}\n                          </View>\n\n                          {onPressClose != null ? (\n                            <LakeButton\n                              style={styles.closeButton}\n                              mode=\"tertiary\"\n                              onPress={onPressClose}\n                              icon=\"lake-close\"\n                            />\n                          ) : null}\n                        </View>\n\n                        {typeof children == \"function\" ? children({ large, small }) : children}\n                      </View>\n                    </ScrollView>\n                  </FocusTrap>\n                )}\n              </ResponsiveContainer>\n            ) : null}\n          </TransitionView>\n        </Suspense>\n      </View>\n    </Portal>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","spacings","backgroundColor","shadows","commonStyles","negativeSpacings","LakeModal","visible","icon","title","color","children","maxWidth","onPressClose","rootElement","setRootElement","useState","useEffect","rootElement2","useBodyClassName","jsx","Portal","jsxs","View","TransitionView","Suspense","LoadingView","ResponsiveContainer","breakpoints","large","small","FocusTrap","ScrollView","Pressable","Icon","colors","Space","Fragment","LakeHeading","LakeButton"],"mappings":"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"}