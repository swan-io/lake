import{S as fe,s as O,m as re,r as ne,c as Y,j as f,F as J,a as n,V as b,b as M,o as Ce,L as K,p as Ie,i as Ve}from"./Space-5c29d500.js";import{r as y}from"./index-f1f749bf.js";import{h as m}from"./Boxed-aef12ad0.js";import{d as ge}from"./dayjs.min-33e2be6b.js";import{R as G}from"./rifm.esm-58cee9fb.js";import{B as V,K as De,S as T}from"./index.module-bef243ca.js";import{n as We}from"./function-1bad6ac0.js";import{g as _e}from"./rifm-2b7a6d3b.js";import{F as ae}from"./Fill-d7d86da4.js";import{I as Re}from"./Icon-27bbe041.js";import{L as R}from"./LakeButton-d869e10e.js";import{L as oe}from"./LakeSelect-ad937f1f.js";import{L as $}from"./LakeTextInput-3b6d4260.js";import{P as Ee}from"./Pressable-d518d699.js";import{c as Fe,S as Se,a as q}from"./_StoriesComponents-bbcd7ec3.js";import{W as Ne}from"./WithPartnerAccentColor-d6e3f98e.js";import"./extends-98964cd2.js";import"./_commonjsHelpers-042e6b4d.js";import"./Svg-ff455c54.js";import"./index-4bbcd6fb.js";import"./commonStyles-d52fedae.js";import"./Popover-50e70ffd.js";import"./useResponsive-f4d095a5.js";import"./BottomPanel-a1918361.js";import"./useBodyClassName-bd00433d.js";import"./math-d8257b44.js";import"./FocusTrap-1588cf22.js";import"./array-b3630b94.js";import"./LoadingView-abfecfc9.js";import"./colors-298625c7.js";import"./Portal-ddaa83ce.js";import"./index-96c5f47c.js";import"./WithCurrentColor-dc917e83.js";import"./TransitionView-c4b12149.js";import"./index-c86de1d8.js";import"./index-37abc2ac.js";import"./index-37690212.js";import"./useMergeRefs-b62e07d5.js";import"./polished.esm-77d64d09.js";const u=fe.create({popoverContainer:{width:430,padding:O[24],backgroundColor:re.white,borderRadius:ne[8]},rangePopoverContainer:{alignSelf:"flex-start",padding:O[24],backgroundColor:re.white,borderRadius:ne[8]},rangePopoverPart:{width:330},button:{flex:1},monthSelect:{width:130},yearSelect:{width:100},weekRow:{paddingVertical:O[4]},dayName:{flex:1,height:32,alignItems:"center",justifyContent:"center"},dayContainer:{flex:1,alignItems:"center"},dayRangeIndicator:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:Y.current[100]},dayStartRangeIndicator:{left:"50%"},dayEndRangeIndicator:{right:"50%"},dayNumber:{width:32,height:32,alignItems:"center",justifyContent:"center",borderRadius:16},dayNumberFocused:{},dayNumberHover:{backgroundColor:Y.current[100]},dayNumberPressed:{},dayNumberSelected:{backgroundColor:Y.current[500]},todayIndicator:{position:"absolute",left:0,right:0,bottom:0,width:4,height:4,marginHorizontal:"auto",borderRadius:2,backgroundColor:Y.current[500]}}),z=7,ke={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},Q=_e({accept:"numeric",charMap:{2:"/",4:"/"},maxLength:8}),A=(e,t)=>{const r=ge.utc(e,t);return r.isValid()?m.Some({day:r.date(),month:r.month(),year:r.year()}):m.None()},be=(e,t)=>({start:A(e.start,t),end:A(e.end,t)}),U=(e,t)=>ge.utc().year(e.year).month(e.month).date(e.day).format(t),qe=(e,t)=>{const r=be(e,t);return r.start.isNone()||r.end.isNone()?!0:!W(r.start.value,r.end.value)},xe=(e,t)=>{const r=[];for(let a=e;a<=t;a++)r.push(a);return r},Le=(e,t)=>{const r=[],a=Math.ceil(e.length/t);for(let o=0;o<a;o++)r.push(e.slice(o*t,(o+1)*t));return r},Te=(e,t,r)=>{const a=new Array(t-e.length).fill(r);return[...e,...a]},X=e=>{const t=new Date;return e.year>=t.getFullYear()&&e.month>=t.getMonth()&&e.day>=t.getDate()},Ae=e=>{const t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()},Be=(e,t)=>{const r=(a,o)=>{const s=o.getDate(),h=o.getMonth(),i=o.getFullYear();return o.getMonth()!==e?a:r([...a,{day:s,month:h,year:i}],new Date(t,e,s+1))};return r([],new Date(t,e,1))},Oe=(e,t,r)=>{const a=ke[r],o=new Date(t,e,1).getDay(),s=Be(e,t).map(l=>m.Some(l)),h=o>=a?o-a:z-a+o;for(let l=0;l<h;l++)s.unshift(m.None());const i=Le(s,z),g=i[i.length-1];return g&&(i[i.length-1]=Te(g,z,m.None())),i},ze=(e,t="sunday")=>{const r=ke[t],a=e.slice(r),o=e.slice(0,r);return[...a,...o]},I=(e,t)=>e.day===t.day&&e.month===t.month&&e.year===t.year,we=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month||e.year===t.year&&e.month===t.month&&e.day<t.day,W=(e,t)=>e.year>t.year||e.year===t.year&&e.month>t.month||e.year===t.year&&e.month===t.month&&e.day>t.day,Ye=e=>De(e).with({start:T._,end:T._},()=>!0).otherwise(()=>!1),je=(e,t)=>De(t).with(m.pattern.Some(T.select()),r=>I(r,e)).with(m.pattern.None,()=>!1).with(T.when(Ye),({start:r,end:a})=>r.isSome()&&a.isSome()&&W(r.value,a.value)?!1:r.match({Some:o=>I(o,e),None:()=>!1})||a.match({Some:o=>I(o,e),None:()=>!1})).exhaustive(),He=(e,t)=>{if(!Ye(t))return"none";const{start:r,end:a}=t;if(r.isNone()||a.isNone())return"none";const o=r.value,s=a.value;return W(o,s)||I(o,s)?"none":I(e,o)?"start":I(e,s)?"end":W(e,o)&&we(e,s)?"between":"none"},se=(e,t)=>{const r=new Date(e.year,e.month,e.day),a=new Date(t.year,t.month,t.day),o=Math.abs(a.getTime()-r.getTime());return Math.round(o/(1e3*3600*24))},Je=(e,t)=>{const{start:r,end:a}=e;if(r.isNone())return{start:m.Some(t),end:m.None()};if(a.isNone())return W(t,r.value)?{start:r,end:m.Some(t)}:{start:m.Some(t),end:e.start};if(we(t,r.value))return{start:m.Some(t),end:e.end};if(W(t,a.value))return{start:e.start,end:m.Some(t)};const o=se(r.value,t),s=se(a.value,t);return o<s?{start:m.Some(t),end:e.end}:{start:e.start,end:m.Some(t)}},Me=()=>({month:new Date().getMonth(),year:new Date().getFullYear()}),C=(e,t)=>Ie(e)?m.None():A(e,t),Pe=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month,ie=(e,t)=>e.year===t.year&&e.month===t.month,le=(e,t)=>Pe(e,t)?e:t,ce=(e,t)=>Pe(e,t)?t:e,v=({month:e,year:t})=>e===11?{month:0,year:t+1}:{month:e+1,year:t},_=({month:e,year:t})=>e===0?{month:11,year:t-1}:{month:e-1,year:t},Z=({monthNames:e,value:t,minValue:r,maxValue:a,arrowsPosition:o="right",onChange:s})=>{const h=y.useMemo(()=>e.map((k,c)=>({name:k,value:c})),[e]),i=y.useMemo(()=>xe(t.year-5,t.year+5).map(k=>({name:k.toString(),value:k})),[t.year]),g=k=>{s({year:t.year,month:k})},l=k=>{s({year:k,month:t.month})},p=()=>{s(_(t))},S=()=>{s(v(t))},N=r?t.year<=r.year&&t.month<=r.month:!1,w=a?t.year>=a.year&&t.month>=a.month:!1;return f(V,{direction:"row",alignItems:"center",children:[o==="around"&&f(J,{children:[n(R,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:N,onPress:p}),n(ae,{minWidth:12})]}),n(oe,{items:h,value:t.month,onValueChange:g,mode:"borderless",size:"small",hideErrors:!0,style:u.monthSelect}),n(oe,{items:i,value:t.year,onValueChange:l,mode:"borderless",size:"small",hideErrors:!0,style:u.yearSelect}),n(ae,{minWidth:12}),o==="right"&&f(J,{children:[n(R,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:N,onPress:p}),n(M,{width:12})]}),n(R,{size:"small",mode:"tertiary",icon:"arrow-right-filled",disabled:w,onPress:S})]})},ee=({month:e,year:t,value:r,firstWeekDay:a,weekDayNames:o,isSelectable:s,onChange:h})=>{const i=y.useMemo(()=>ze(o,a),[o,a]),g=y.useMemo(()=>Oe(e,t,a),[e,t,a]);return f(b,{children:[n(V,{direction:"row",alignItems:"center",style:u.weekRow,children:i.map(l=>n(b,{style:u.dayName,children:n(K,{variant:"medium",color:Y.gray[600],children:l.substring(0,1)})},l))}),g.map((l,p)=>n(V,{direction:"row",alignItems:"center",style:u.weekRow,children:l.map((S,N)=>{const w=S.match({Some:D=>Ve(s)&&!s(D),None:()=>!0}),k=S.match({Some:D=>je(D,r),None:()=>!1}),c=S.match({Some:D=>Ae(D),None:()=>!1}),d=S.match({Some:D=>He(D,r),None:()=>"none"});return f(b,{style:u.dayContainer,children:[d!=="none"&&n(b,{style:[u.dayRangeIndicator,d==="start"&&u.dayStartRangeIndicator,d==="end"&&u.dayEndRangeIndicator]}),f(Ee,{disabled:w,onPress:()=>S.match({Some:h,None:We}),style:({focused:D,hovered:P,pressed:ve})=>[u.dayNumber,D&&u.dayNumberFocused,P&&u.dayNumberHover,ve&&u.dayNumberPressed,k&&u.dayNumberSelected],children:[n(K,{variant:"smallRegular",color:k?Y.current.contrast:w?Y.gray[300]:c?Y.current[500]:Y.gray[900],children:S.match({Some:({day:D})=>D.toString(),None:()=>" "})}),c&&n(b,{style:u.todayIndicator})]})]},N)})},p))]})},Ke=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:s,onChange:h})=>{const[i,g]=y.useState(()=>C(e,t).getWithDefault(Me()));y.useEffect(()=>{const p=C(e,t);p.isSome()&&g(p.value)},[e,t]);const l=y.useCallback(p=>{const S=U(p,t);h(S)},[t,h]);return f(b,{style:u.popoverContainer,children:[n(Z,{monthNames:a,value:i,onChange:g}),n(M,{height:24}),n(ee,{month:i.month,year:i.year,value:Ce(e)?A(e,t):m.None(),firstWeekDay:r,weekDayNames:o,isSelectable:s,onChange:l})]})},B=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i})=>f(J,{children:[n(G,{value:e??"",onChange:i,...Q,children:({value:g,onChange:l})=>n($,{placeholder:r,value:g,error:t,onChange:l})}),n(Ke,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i})]}),Ge=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:s,onChange:h,cancelLabel:i,confirmLabel:g})=>{const[l,p]=y.useState(()=>{const c=C(e.start,t).getWithDefault(Me()),d=C(e.end,t).getWithDefault(v(c));return{start:c,end:d}});y.useEffect(()=>{const c=C(e.start,t);c.isSome()&&p(d=>{if(ie(c.value,d.end))return{start:_(d.end),end:d.end};const P=ce(d.end,v(c.value));return{start:c.value,end:P}})},[e.start,t]),y.useEffect(()=>{const c=C(e.end,t);c.isSome()&&p(d=>ie(d.start,c.value)?{start:d.start,end:v(d.start)}:{start:le(d.start,_(c.value)),end:c.value})},[e.end,t]);const S=y.useCallback(c=>{p(d=>({start:c,end:ce(d.end,v(c))}))},[]),N=y.useCallback(c=>{p(d=>({start:le(d.start,_(c)),end:c}))},[]),w=y.useMemo(()=>be(e,t),[e,t]),k=c=>{const d=Je(w,c),D={start:d.start.match({Some:P=>U(P,t),None:()=>e.start}),end:d.end.match({Some:P=>U(P,t),None:()=>e.end})};h(D)};return f(b,{style:u.rangePopoverContainer,children:[f(V,{direction:"row",alignItems:"start",children:[f(b,{style:u.rangePopoverPart,children:[n(Z,{monthNames:a,value:l.start,maxValue:_(l.end),arrowsPosition:"around",onChange:S}),n(M,{height:24}),n(ee,{month:l.start.month,year:l.start.year,value:w,firstWeekDay:r,weekDayNames:o,isSelectable:s,onChange:k})]}),n(Fe,{space:24,horizontal:!0}),f(b,{style:u.rangePopoverPart,children:[n(Z,{monthNames:a,value:l.end,minValue:v(l.start),arrowsPosition:"around",onChange:N}),n(M,{height:24}),n(ee,{month:l.end.month,year:l.end.year,value:w,firstWeekDay:r,weekDayNames:o,isSelectable:s,onChange:k})]})]}),n(M,{height:24}),f(V,{direction:"row",alignItems:"start",children:[n(R,{size:"small",mode:"secondary",style:u.button,children:i}),n(M,{width:48}),n(R,{size:"small",mode:"primary",color:"current",style:u.button,children:g})]})]})},te=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i,cancelLabel:g,confirmLabel:l})=>{const p=y.useCallback(N=>{i({start:N,end:e.end})},[e,i]),S=y.useCallback(N=>{i({start:e.start,end:N})},[e,i]);return f(b,{children:[f(V,{direction:"row",alignItems:"center",children:[n(G,{value:e.start,onChange:p,...Q,children:({value:N,onChange:w})=>n($,{placeholder:r,value:N,onChange:w,error:t,hideErrors:!0})}),n(M,{width:12}),n(Re,{name:"arrow-right-filled",size:20}),n(M,{width:12}),n(G,{value:e.end,onChange:S,...Q,children:({value:N,onChange:w})=>n($,{placeholder:r,value:N,onChange:w,error:t,hideErrors:!0})})]}),n(M,{height:4}),n(K,{variant:"smallRegular",color:Y.negative[500],children:t??" "}),n(Ge,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:s,isSelectable:h,onChange:i,cancelLabel:g,confirmLabel:l})]})};try{X.displayName="isTodayOrFutureDate",X.__docgenInfo={description:"",displayName:"isTodayOrFutureDate",props:{day:{defaultValue:null,description:"",name:"day",required:!0,type:{name:"number"}},month:{defaultValue:null,description:"",name:"month",required:!0,type:{name:"number"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"number"}}}}}catch{}try{B.displayName="DatePicker",B.__docgenInfo={description:"",displayName:"DatePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: string) => void"}}}}}catch{}try{te.displayName="DateRangePicker",te.__docgenInfo={description:"",displayName:"DateRangePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"{ start: string; end: string; }"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: { start: string; end: string; }) => void"}},cancelLabel:{defaultValue:null,description:"",name:"cancelLabel",required:!0,type:{name:"string"}},confirmLabel:{defaultValue:null,description:"",name:"confirmLabel",required:!0,type:{name:"string"}}}}}catch{}const j=fe.create({container:{width:430}}),Ft={title:"Forms/DatePicker",component:B},H=({...e})=>{const[t,r]=y.useState();return n(B,{...e,value:t,onChange:r})},$e=({...e})=>{const[t,r]=y.useState({start:"",end:""}),a=qe(t,e.format);return n(te,{...e,value:t,error:a?void 0:"End date can't be before start date",onChange:r})},x=["January","February","March","April","May","June","July","August","September","October","November","December"],L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],E=()=>n(Ne,{color:"#0F6FDE",children:f(Se,{title:"DatePicker",children:[n(q,{title:"Default",children:n(b,{style:j.container,children:n(H,{firstWeekDay:"monday",monthNames:x,weekDayNames:L,format:"DD/MM/YYYY"})})}),n(q,{title:"Week starting sunday",children:n(b,{style:j.container,children:n(H,{firstWeekDay:"sunday",monthNames:x,weekDayNames:L,format:"DD/MM/YYYY"})})}),n(q,{title:"Selectable only in the future",children:n(b,{style:j.container,children:n(H,{firstWeekDay:"sunday",monthNames:x,weekDayNames:L,format:"DD/MM/YYYY",isSelectable:X})})})]})}),F=()=>n(Ne,{color:"#0F6FDE",children:n(Se,{title:"DateRangePicker",children:n(q,{title:"Default",children:n($e,{firstWeekDay:"monday",monthNames:x,weekDayNames:L,format:"DD/MM/YYYY",cancelLabel:"Cancel",confirmLabel:"Select"})})})});var de,ue,me;E.parameters={...E.parameters,docs:{...(de=E.parameters)==null?void 0:de.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DatePicker">
        <StoryPart title="Default">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Week starting sunday">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Selectable only in the future">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" isSelectable={isTodayOrFutureDate} />
          </View>
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(me=(ue=E.parameters)==null?void 0:ue.docs)==null?void 0:me.source}}};var ye,he,pe;F.parameters={...F.parameters,docs:{...(ye=F.parameters)==null?void 0:ye.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DateRangePicker">
        <StoryPart title="Default">
          <InteractiveDateRangePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" cancelLabel="Cancel" confirmLabel="Select" />
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(pe=(he=F.parameters)==null?void 0:he.docs)==null?void 0:pe.source}}};const qt=["Default","Range"];export{E as Default,F as Range,qt as __namedExportsOrder,Ft as default};
//# sourceMappingURL=DatePicker.stories-9872a529.js.map
