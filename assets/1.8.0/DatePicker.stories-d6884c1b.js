import{S as fe,s as z,m as re,r as ne,c as w,j as g,F as L,a as n,V as k,b as P,o as ve,L as J,p as Ce,i as Ie}from"./Space-4880dc8d.js";import{r as h}from"./index-f1f749bf.js";import{h as y}from"./Boxed-aef12ad0.js";import{d as ge}from"./dayjs.min-33e2be6b.js";import{R as K}from"./rifm.esm-58cee9fb.js";import{B as V,K as De,S as T}from"./index.module-7da41443.js";import{n as Ve}from"./function-1bad6ac0.js";import{g as We}from"./rifm-8bcbaecc.js";import{F as ae}from"./Fill-0a6558f7.js";import{I as _e}from"./Icon-c3465053.js";import{L as _}from"./LakeButton-eaecb75d.js";import{L as oe}from"./LakeSelect-f0d376b8.js";import{L as G}from"./LakeTextInput-45ccf750.js";import{P as Ee}from"./Pressable-f8f36fef.js";import{c as Re,S as Se,a as F}from"./_StoriesComponents-30824e31.js";import{W as Ne}from"./WithPartnerAccentColor-bda669f0.js";import"./extends-98964cd2.js";import"./_commonjsHelpers-042e6b4d.js";import"./Svg-d55ab030.js";import"./index-32b05dfd.js";import"./commonStyles-d52fedae.js";import"./Popover-0f429213.js";import"./useResponsive-8dd6c694.js";import"./BottomPanel-0eb6df61.js";import"./useBodyClassName-bd00433d.js";import"./math-88b2d18c.js";import"./FocusTrap-126f19b4.js";import"./array-b3630b94.js";import"./LoadingView-37d9caaf.js";import"./colors-298625c7.js";import"./Portal-318292b0.js";import"./index-96c5f47c.js";import"./WithCurrentColor-ba8cb886.js";import"./TransitionView-7c95a9d2.js";import"./index-02e9a2ef.js";import"./index-73be3fc6.js";import"./index-696b93fc.js";import"./useMergeRefs-ab5dc31b.js";import"./polished.esm-77d64d09.js";const m=fe.create({popoverContainer:{width:430,padding:z[24],backgroundColor:re.white,borderRadius:ne[8]},rangePopoverContainer:{alignSelf:"flex-start",padding:z[24],backgroundColor:re.white,borderRadius:ne[8]},rangePopoverPart:{width:330},button:{flex:1},monthSelect:{width:130},yearSelect:{width:100},weekRow:{paddingVertical:z[4]},dayName:{flex:1,height:32,alignItems:"center",justifyContent:"center"},dayContainer:{flex:1,alignItems:"center"},dayRangeIndicator:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:w.current[100]},dayStartRangeIndicator:{left:"50%"},dayEndRangeIndicator:{right:"50%"},dayNumber:{width:32,height:32,alignItems:"center",justifyContent:"center",borderRadius:16},dayNumberFocused:{},dayNumberHover:{backgroundColor:w.current[100]},dayNumberPressed:{},dayNumberSelected:{backgroundColor:w.current[500]},todayIndicator:{position:"absolute",left:0,right:0,bottom:0,width:4,height:4,marginHorizontal:"auto",borderRadius:2,backgroundColor:w.current[500]}}),O=7,ke={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},$=We({accept:"numeric",charMap:{2:"/",4:"/"},maxLength:8}),A=(e,t)=>{const r=ge.utc(e,t);return r.isValid()?y.Some({day:r.date(),month:r.month(),year:r.year()}):y.None()},Fe=(e,t)=>({start:A(e.start,t),end:A(e.end,t)}),Q=(e,t)=>ge.utc().year(e.year).month(e.month).date(e.day).format(t),qe=(e,t)=>{const r=[];for(let a=e;a<=t;a++)r.push(a);return r},xe=(e,t)=>{const r=[],a=Math.ceil(e.length/t);for(let o=0;o<a;o++)r.push(e.slice(o*t,(o+1)*t));return r},Le=(e,t,r)=>{const a=new Array(t-e.length).fill(r);return[...e,...a]},U=e=>{const t=new Date;return e.year>=t.getFullYear()&&e.month>=t.getMonth()&&e.day>=t.getDate()},Te=e=>{const t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()},Ae=(e,t)=>{const r=(a,o)=>{const l=o.getDate(),p=o.getMonth(),c=o.getFullYear();return o.getMonth()!==e?a:r([...a,{day:l,month:p,year:c}],new Date(t,e,l+1))};return r([],new Date(t,e,1))},Be=(e,t,r)=>{const a=ke[r],o=new Date(t,e,1).getDay(),l=Ae(e,t).map(s=>y.Some(s)),p=o>=a?o-a:O-a+o;for(let s=0;s<p;s++)l.unshift(y.None());const c=xe(l,O),D=c[c.length-1];return D&&(c[c.length-1]=Le(D,O,y.None())),c},ze=(e,t="sunday")=>{const r=ke[t],a=e.slice(r),o=e.slice(0,r);return[...a,...o]},I=(e,t)=>e.day===t.day&&e.month===t.month&&e.year===t.year,be=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month||e.year===t.year&&e.month===t.month&&e.day<t.day,X=(e,t)=>e.year>t.year||e.year===t.year&&e.month>t.month||e.year===t.year&&e.month===t.month&&e.day>t.day,we=e=>De(e).with({start:T._,end:T._},()=>!0).otherwise(()=>!1),Oe=(e,t)=>De(t).with(y.pattern.Some(T.select()),r=>I(r,e)).with(y.pattern.None,()=>!1).with(T.when(we),({start:r,end:a})=>r.match({Some:o=>I(o,e),None:()=>!1})||a.match({Some:o=>I(o,e),None:()=>!1})).exhaustive(),je=(e,t)=>{if(!we(t))return"none";const{start:r,end:a}=t;if(r.isNone()||a.isNone())return"none";const o=r.value,l=a.value;return I(o,l)?"none":I(e,o)?"start":I(e,l)?"end":X(e,o)&&be(e,l)?"between":"none"},se=(e,t)=>{const r=new Date(e.year,e.month,e.day),a=new Date(t.year,t.month,t.day),o=Math.abs(a.getTime()-r.getTime());return Math.round(o/(1e3*3600*24))},He=(e,t)=>{const{start:r,end:a}=e;if(r.isNone())return{start:y.Some(t),end:y.None()};if(a.isNone())return X(t,r.value)?{start:r,end:y.Some(t)}:{start:y.Some(t),end:e.start};if(be(t,r.value))return{start:y.Some(t),end:e.end};if(X(t,a.value))return{start:e.start,end:y.Some(t)};const o=se(r.value,t),l=se(a.value,t);return o<l?{start:y.Some(t),end:e.end}:{start:e.start,end:y.Some(t)}},Ye=()=>({month:new Date().getMonth(),year:new Date().getFullYear()}),C=(e,t)=>Ce(e)?y.None():A(e,t),Me=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month,ie=(e,t)=>e.year===t.year&&e.month===t.month,le=(e,t)=>Me(e,t)?e:t,ce=(e,t)=>Me(e,t)?t:e,v=({month:e,year:t})=>e===11?{month:0,year:t+1}:{month:e+1,year:t},W=({month:e,year:t})=>e===0?{month:11,year:t-1}:{month:e-1,year:t},Z=({monthNames:e,value:t,minValue:r,maxValue:a,arrowsPosition:o="right",onChange:l})=>{const p=h.useMemo(()=>e.map((d,i)=>({name:d,value:i})),[e]),c=h.useMemo(()=>qe(t.year-5,t.year+5).map(d=>({name:d.toString(),value:d})),[t.year]),D=d=>{l({year:t.year,month:d})},s=d=>{l({year:d,month:t.month})},f=()=>{l(W(t))},N=()=>{l(v(t))},Y=r?t.year<=r.year&&t.month<=r.month:!1,b=a?t.year>=a.year&&t.month>=a.month:!1;return g(V,{direction:"row",alignItems:"center",children:[o==="around"&&g(L,{children:[n(_,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:Y,onPress:f}),n(ae,{minWidth:12})]}),n(oe,{items:p,value:t.month,onValueChange:D,mode:"borderless",size:"small",hideErrors:!0,style:m.monthSelect}),n(oe,{items:c,value:t.year,onValueChange:s,mode:"borderless",size:"small",hideErrors:!0,style:m.yearSelect}),n(ae,{minWidth:12}),o==="right"&&g(L,{children:[n(_,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:Y,onPress:f}),n(P,{width:12})]}),n(_,{size:"small",mode:"tertiary",icon:"arrow-right-filled",disabled:b,onPress:N})]})},ee=({month:e,year:t,value:r,firstWeekDay:a,weekDayNames:o,isSelectable:l,onChange:p})=>{const c=h.useMemo(()=>ze(o,a),[o,a]),D=h.useMemo(()=>Be(e,t,a),[e,t,a]);return g(k,{children:[n(V,{direction:"row",alignItems:"center",style:m.weekRow,children:c.map(s=>n(k,{style:m.dayName,children:n(J,{variant:"medium",color:w.gray[600],children:s.substring(0,1)})},s))}),D.map((s,f)=>n(V,{direction:"row",alignItems:"center",style:m.weekRow,children:s.map((N,Y)=>{const b=N.match({Some:S=>Ie(l)&&!l(S),None:()=>!0}),d=N.match({Some:S=>Oe(S,r),None:()=>!1}),i=N.match({Some:S=>Te(S),None:()=>!1}),u=N.match({Some:S=>je(S,r),None:()=>"none"});return g(k,{style:m.dayContainer,children:[u!=="none"&&n(k,{style:[m.dayRangeIndicator,u==="start"&&m.dayStartRangeIndicator,u==="end"&&m.dayEndRangeIndicator]}),g(Ee,{disabled:b,onPress:()=>N.match({Some:p,None:Ve}),style:({focused:S,hovered:M,pressed:Pe})=>[m.dayNumber,S&&m.dayNumberFocused,M&&m.dayNumberHover,Pe&&m.dayNumberPressed,d&&m.dayNumberSelected],children:[n(J,{variant:"smallRegular",color:d?w.current.contrast:b?w.gray[300]:i?w.current[500]:w.gray[900],children:N.match({Some:({day:S})=>S.toString(),None:()=>" "})}),i&&n(k,{style:m.todayIndicator})]})]},Y)})},f))]})},Je=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:l,onChange:p})=>{const[c,D]=h.useState(()=>C(e,t).getWithDefault(Ye()));h.useEffect(()=>{const f=C(e,t);f.isSome()&&D(f.value)},[e,t]);const s=h.useCallback(f=>{const N=Q(f,t);p(N)},[t,p]);return g(k,{style:m.popoverContainer,children:[n(Z,{monthNames:a,value:c,onChange:D}),n(P,{height:24}),n(ee,{month:c.month,year:c.year,value:ve(e)?A(e,t):y.None(),firstWeekDay:r,weekDayNames:o,isSelectable:l,onChange:s})]})},B=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:l,isSelectable:p,onChange:c})=>g(L,{children:[n(K,{value:e??"",onChange:c,...$,children:({value:D,onChange:s})=>n(G,{placeholder:r,value:D,error:t,onChange:s})}),n(Je,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:l,isSelectable:p,onChange:c})]}),Ke=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:l,onChange:p,cancelLabel:c,confirmLabel:D})=>{const[s,f]=h.useState(()=>{const i=C(e.start,t).getWithDefault(Ye()),u=C(e.end,t).getWithDefault(v(i));return{start:i,end:u}});h.useEffect(()=>{const i=C(e.start,t);i.isSome()&&f(u=>{if(ie(i.value,u.end))return{start:W(u.end),end:u.end};const M=ce(u.end,v(i.value));return{start:i.value,end:M}})},[e.start,t]),h.useEffect(()=>{const i=C(e.end,t);i.isSome()&&f(u=>ie(u.start,i.value)?{start:u.start,end:v(u.start)}:{start:le(u.start,W(i.value)),end:i.value})},[e.end,t]);const N=h.useCallback(i=>{f(u=>({start:i,end:ce(u.end,v(i))}))},[]),Y=h.useCallback(i=>{f(u=>({start:le(u.start,W(i)),end:i}))},[]),b=h.useMemo(()=>Fe(e,t),[e,t]),d=i=>{const u=He(b,i),S={start:u.start.match({Some:M=>Q(M,t),None:()=>e.start}),end:u.end.match({Some:M=>Q(M,t),None:()=>e.end})};p(S)};return g(k,{style:m.rangePopoverContainer,children:[g(V,{direction:"row",alignItems:"start",children:[g(k,{style:m.rangePopoverPart,children:[n(Z,{monthNames:a,value:s.start,maxValue:W(s.end),arrowsPosition:"around",onChange:N}),n(P,{height:24}),n(ee,{month:s.start.month,year:s.start.year,value:b,firstWeekDay:r,weekDayNames:o,isSelectable:l,onChange:d})]}),n(Re,{space:24,horizontal:!0}),g(k,{style:m.rangePopoverPart,children:[n(Z,{monthNames:a,value:s.end,minValue:v(s.start),arrowsPosition:"around",onChange:Y}),n(P,{height:24}),n(ee,{month:s.end.month,year:s.end.year,value:b,firstWeekDay:r,weekDayNames:o,isSelectable:l,onChange:d})]})]}),n(P,{height:24}),g(V,{direction:"row",alignItems:"start",children:[n(_,{size:"small",mode:"secondary",style:m.button,children:c}),n(P,{width:48}),n(_,{size:"small",mode:"primary",color:"current",style:m.button,children:D})]})]})},te=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:l,isSelectable:p,minDurationinDays:c,maxDurationinDays:D,onChange:s,cancelLabel:f,confirmLabel:N})=>{const Y=h.useCallback(d=>{s({start:d,end:e.end})},[e,s]),b=h.useCallback(d=>{s({start:e.start,end:d})},[e,s]);return g(L,{children:[g(V,{direction:"row",alignItems:"center",children:[n(K,{value:e.start,onChange:Y,...$,children:({value:d,onChange:i})=>n(G,{placeholder:r,value:d,onChange:i,hideErrors:!0})}),n(P,{width:12}),n(_e,{name:"arrow-right-filled",size:20}),n(P,{width:12}),n(K,{value:e.end,onChange:b,...$,children:({value:d,onChange:i})=>n(G,{placeholder:r,value:d,onChange:i,hideErrors:!0})})]}),n(J,{variant:"smallRegular",color:w.negative[500],children:t??" "}),n(Ke,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:l,isSelectable:p,minDurationinDays:c,maxDurationinDays:D,onChange:s,cancelLabel:f,confirmLabel:N})]})};try{U.displayName="isTodayOrFutureDate",U.__docgenInfo={description:"",displayName:"isTodayOrFutureDate",props:{day:{defaultValue:null,description:"",name:"day",required:!0,type:{name:"number"}},month:{defaultValue:null,description:"",name:"month",required:!0,type:{name:"number"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"number"}}}}}catch{}try{B.displayName="DatePicker",B.__docgenInfo={description:"",displayName:"DatePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: string) => void"}}}}}catch{}try{te.displayName="DateRangePicker",te.__docgenInfo={description:"",displayName:"DateRangePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"{ start: string; end: string; }"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},minDurationinDays:{defaultValue:null,description:"",name:"minDurationinDays",required:!1,type:{name:"number"}},maxDurationinDays:{defaultValue:null,description:"",name:"maxDurationinDays",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: { start: string; end: string; }) => void"}},cancelLabel:{defaultValue:null,description:"",name:"cancelLabel",required:!0,type:{name:"string"}},confirmLabel:{defaultValue:null,description:"",name:"confirmLabel",required:!0,type:{name:"string"}}}}}catch{}const j=fe.create({container:{width:430}}),Rt={title:"Forms/DatePicker",component:B},H=({...e})=>{const[t,r]=h.useState();return n(B,{...e,value:t,onChange:r})},Ge=({...e})=>{const[t,r]=h.useState({start:"",end:""});return n(te,{...e,value:t,onChange:r})},q=["January","February","March","April","May","June","July","August","September","October","November","December"],x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],E=()=>n(Ne,{color:"#0F6FDE",children:g(Se,{title:"DatePicker",children:[n(F,{title:"Default",children:n(k,{style:j.container,children:n(H,{firstWeekDay:"monday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY"})})}),n(F,{title:"Week starting sunday",children:n(k,{style:j.container,children:n(H,{firstWeekDay:"sunday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY"})})}),n(F,{title:"Selectable only in the future",children:n(k,{style:j.container,children:n(H,{firstWeekDay:"sunday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY",isSelectable:U})})})]})}),R=()=>n(Ne,{color:"#0F6FDE",children:n(Se,{title:"DateRangePicker",children:n(F,{title:"Default",children:n(Ge,{firstWeekDay:"monday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY",cancelLabel:"Cancel",confirmLabel:"Select"})})})});var de,ue,me;E.parameters={...E.parameters,docs:{...(de=E.parameters)==null?void 0:de.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DatePicker">
        <StoryPart title="Default">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Week starting sunday">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Selectable only in the future">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" isSelectable={isTodayOrFutureDate} />
          </View>
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(me=(ue=E.parameters)==null?void 0:ue.docs)==null?void 0:me.source}}};var ye,he,pe;R.parameters={...R.parameters,docs:{...(ye=R.parameters)==null?void 0:ye.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DateRangePicker">
        <StoryPart title="Default">
          <InteractiveDateRangePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" cancelLabel="Cancel" confirmLabel="Select" />
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(pe=(he=R.parameters)==null?void 0:he.docs)==null?void 0:pe.source}}};const Ft=["Default","Range"];export{E as Default,R as Range,Ft as __namedExportsOrder,Rt as default};
//# sourceMappingURL=DatePicker.stories-d6884c1b.js.map
