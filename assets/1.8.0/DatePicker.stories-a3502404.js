import{S as pe,s as z,m as re,r as ne,c as w,j as D,F as L,a as n,V as k,b as M,o as Pe,L as J,p as ve,i as Ce}from"./Space-111b54e3.js";import{r as h}from"./index-f1f749bf.js";import{h as y}from"./Boxed-aef12ad0.js";import{d as ge}from"./dayjs.min-33e2be6b.js";import{R as K}from"./rifm.esm-58cee9fb.js";import{B as V,K as fe,S as T}from"./index.module-527d12e5.js";import{n as Ie}from"./function-1bad6ac0.js";import{g as Ve}from"./rifm-0becb07d.js";import{F as ae}from"./Fill-a6733115.js";import{I as We}from"./Icon-7fbfcf46.js";import{L as W}from"./LakeButton-58a6fecd.js";import{L as oe}from"./LakeSelect-29d6ac8e.js";import{L as G}from"./LakeTextInput-64435d27.js";import{P as _e}from"./Pressable-99e9839b.js";import{c as Re,S as De,a as E}from"./_StoriesComponents-5ee96107.js";import{W as Ne}from"./WithPartnerAccentColor-ade136a9.js";import"./extends-98964cd2.js";import"./_commonjsHelpers-042e6b4d.js";import"./Svg-c7a509c5.js";import"./index-89ec994e.js";import"./commonStyles-d52fedae.js";import"./Popover-8bf24474.js";import"./useResponsive-2d3d2aeb.js";import"./BottomPanel-95bef718.js";import"./useBodyClassName-bd00433d.js";import"./math-5b8bd895.js";import"./FocusTrap-1dc42be7.js";import"./array-b3630b94.js";import"./LoadingView-2b013638.js";import"./colors-298625c7.js";import"./Portal-283179dd.js";import"./index-96c5f47c.js";import"./WithCurrentColor-c5fb8277.js";import"./TransitionView-42b30aac.js";import"./index-386c6b93.js";import"./index-e0ca888d.js";import"./index-e8767029.js";import"./useMergeRefs-9b9769b7.js";import"./polished.esm-77d64d09.js";const d=pe.create({popoverContainer:{width:430,padding:z[24],backgroundColor:re.white,borderRadius:ne[8]},rangePopoverContainer:{alignSelf:"flex-start",padding:z[24],backgroundColor:re.white,borderRadius:ne[8]},rangePopoverPart:{width:330},button:{flex:1},monthSelect:{width:130},yearSelect:{width:100},weekRow:{paddingVertical:z[4]},dayName:{flex:1,height:32,alignItems:"center",justifyContent:"center"},dayContainer:{flex:1,alignItems:"center"},dayRangeIndicator:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:w.current[100]},dayStartRangeIndicator:{left:"50%"},dayEndRangeIndicator:{right:"50%"},dayNumber:{width:32,height:32,alignItems:"center",justifyContent:"center",borderRadius:16},dayNumberFocused:{},dayNumberHover:{backgroundColor:w.current[100]},dayNumberPressed:{},dayNumberSelected:{backgroundColor:w.current[500]},todayIndicator:{position:"absolute",left:0,right:0,bottom:0,width:4,height:4,marginHorizontal:"auto",borderRadius:2,backgroundColor:w.current[500]}}),O=7,Se={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},$=Ve({accept:"numeric",charMap:{2:"/",4:"/"},maxLength:8}),A=(e,t)=>{const r=ge.utc(e,t);return r.isValid()?y.Some({day:r.date(),month:r.month(),year:r.year()}):y.None()},Ee=(e,t)=>({start:A(e.start,t),end:A(e.end,t)}),Q=(e,t)=>ge.utc().year(e.year).month(e.month).date(e.day).format(t),Fe=(e,t)=>{const r=[];for(let a=e;a<=t;a++)r.push(a);return r},qe=(e,t)=>{const r=[],a=Math.ceil(e.length/t);for(let o=0;o<a;o++)r.push(e.slice(o*t,(o+1)*t));return r},xe=(e,t,r)=>{const a=new Array(t-e.length).fill(r);return[...e,...a]},U=e=>{const t=new Date;return e.year>=t.getFullYear()&&e.month>=t.getMonth()&&e.day>=t.getDate()},Le=e=>{const t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()},Te=(e,t)=>{const r=(a,o)=>{const i=o.getDate(),p=o.getMonth(),c=o.getFullYear();return o.getMonth()!==e?a:r([...a,{day:i,month:p,year:c}],new Date(t,e,i+1))};return r([],new Date(t,e,1))},Ae=(e,t,r)=>{const a=Se[r],o=new Date(t,e,1).getDay(),i=Te(e,t).map(s=>y.Some(s)),p=o>=a?o-a:O-a+o;for(let s=0;s<p;s++)i.unshift(y.None());const c=qe(i,O),N=c[c.length-1];return N&&(c[c.length-1]=xe(N,O,y.None())),c},Be=(e,t="sunday")=>{const r=Se[t],a=e.slice(r),o=e.slice(0,r);return[...a,...o]},I=(e,t)=>e.day===t.day&&e.month===t.month&&e.year===t.year,ke=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month||e.year===t.year&&e.month===t.month&&e.day<t.day,X=(e,t)=>e.year>t.year||e.year===t.year&&e.month>t.month||e.year===t.year&&e.month===t.month&&e.day>t.day,be=e=>fe(e).with({start:T._,end:T._},()=>!0).otherwise(()=>!1),ze=(e,t)=>fe(t).with(y.pattern.Some(T.select()),r=>I(r,e)).with(y.pattern.None,()=>!1).with(T.when(be),({start:r,end:a})=>r.match({Some:o=>I(o,e),None:()=>!1})||a.match({Some:o=>I(o,e),None:()=>!1})).exhaustive(),Oe=(e,t)=>{if(!be(t))return"none";const{start:r,end:a}=t;if(r.isNone()||a.isNone())return"none";const o=r.value,i=a.value;return I(o,i)?"none":I(e,o)?"start":I(e,i)?"end":X(e,o)&&ke(e,i)?"between":"none"},se=(e,t)=>{const r=new Date(e.year,e.month,e.day),a=new Date(t.year,t.month,t.day),o=Math.abs(a.getTime()-r.getTime());return Math.round(o/(1e3*3600*24))},je=(e,t)=>{const{start:r,end:a}=e;if(r.isNone())return{start:y.Some(t),end:y.None()};if(a.isNone())return X(t,r.value)?{start:r,end:y.Some(t)}:{start:y.Some(t),end:e.start};if(ke(t,r.value))return{start:y.Some(t),end:e.end};if(X(t,a.value))return{start:e.start,end:y.Some(t)};const o=se(r.value,t),i=se(a.value,t);return o<i?{start:y.Some(t),end:e.end}:{start:e.start,end:y.Some(t)}},we=()=>({month:new Date().getMonth(),year:new Date().getFullYear()}),C=(e,t)=>ve(e)?y.None():A(e,t),Ye=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month,He=(e,t)=>e.year===t.year&&e.month===t.month,ie=(e,t)=>Ye(e,t)?e:t,le=(e,t)=>Ye(e,t)?t:e,v=({month:e,year:t})=>e===11?{month:0,year:t+1}:{month:e+1,year:t},F=({month:e,year:t})=>e===0?{month:11,year:t-1}:{month:e-1,year:t},Z=({monthNames:e,value:t,minValue:r,maxValue:a,arrowsPosition:o="right",onChange:i})=>{const p=h.useMemo(()=>e.map((u,l)=>({name:u,value:l})),[e]),c=h.useMemo(()=>Fe(t.year-5,t.year+5).map(u=>({name:u.toString(),value:u})),[t.year]),N=u=>{i({year:t.year,month:u})},s=u=>{i({year:u,month:t.month})},g=()=>{i(F(t))},S=()=>{i(v(t))},Y=r?t.year<=r.year&&t.month<=r.month:!1,b=a?t.year>=a.year&&t.month>=a.month:!1;return D(V,{direction:"row",alignItems:"center",children:[o==="around"&&D(L,{children:[n(W,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:Y,onPress:g}),n(ae,{minWidth:12})]}),n(oe,{items:p,value:t.month,onValueChange:N,mode:"borderless",size:"small",hideErrors:!0,style:d.monthSelect}),n(oe,{items:c,value:t.year,onValueChange:s,mode:"borderless",size:"small",hideErrors:!0,style:d.yearSelect}),n(ae,{minWidth:12}),o==="right"&&D(L,{children:[n(W,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:Y,onPress:g}),n(M,{width:12})]}),n(W,{size:"small",mode:"tertiary",icon:"arrow-right-filled",disabled:b,onPress:S})]})},ee=({month:e,year:t,value:r,firstWeekDay:a,weekDayNames:o,isSelectable:i,onChange:p})=>{const c=h.useMemo(()=>Be(o,a),[o,a]),N=h.useMemo(()=>Ae(e,t,a),[e,t,a]);return D(k,{children:[n(V,{direction:"row",alignItems:"center",style:d.weekRow,children:c.map(s=>n(k,{style:d.dayName,children:n(J,{variant:"medium",color:w.gray[600],children:s.substring(0,1)})},s))}),N.map((s,g)=>n(V,{direction:"row",alignItems:"center",style:d.weekRow,children:s.map((S,Y)=>{const b=S.match({Some:f=>Ce(i)&&!i(f),None:()=>!0}),u=S.match({Some:f=>ze(f,r),None:()=>!1}),l=S.match({Some:f=>Le(f),None:()=>!1}),m=S.match({Some:f=>Oe(f,r),None:()=>"none"});return D(k,{style:d.dayContainer,children:[m!=="none"&&n(k,{style:[d.dayRangeIndicator,m==="start"&&d.dayStartRangeIndicator,m==="end"&&d.dayEndRangeIndicator]}),D(_e,{disabled:b,onPress:()=>S.match({Some:p,None:Ie}),style:({focused:f,hovered:P,pressed:Me})=>[d.dayNumber,f&&d.dayNumberFocused,P&&d.dayNumberHover,Me&&d.dayNumberPressed,u&&d.dayNumberSelected],children:[n(J,{variant:"smallRegular",color:u?w.current.contrast:b?w.gray[300]:l?w.current[500]:w.gray[900],children:S.match({Some:({day:f})=>f.toString(),None:()=>" "})}),l&&n(k,{style:d.todayIndicator})]})]},Y)})},g))]})},Je=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:i,onChange:p})=>{const[c,N]=h.useState(()=>C(e,t).getWithDefault(we()));h.useEffect(()=>{const g=C(e,t);g.isSome()&&N(g.value)},[e,t]);const s=h.useCallback(g=>{const S=Q(g,t);p(S)},[t,p]);return D(k,{style:d.popoverContainer,children:[n(Z,{monthNames:a,value:c,onChange:N}),n(M,{height:24}),n(ee,{month:c.month,year:c.year,value:Pe(e)?A(e,t):y.None(),firstWeekDay:r,weekDayNames:o,isSelectable:i,onChange:s})]})},B=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:p,onChange:c})=>D(L,{children:[n(K,{value:e??"",onChange:c,...$,children:({value:N,onChange:s})=>n(G,{placeholder:r,value:N,error:t,onChange:s})}),n(Je,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:p,onChange:c})]}),Ke=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:i,onChange:p,cancelLabel:c,confirmLabel:N})=>{const[s,g]=h.useState(()=>{const l=C(e.start,t).getWithDefault(we()),m=C(e.end,t).getWithDefault(v(l));return{start:l,end:m}});h.useEffect(()=>{const l=C(e.start,t);l.isSome()&&g(m=>{const f=le(m.end,v(l.value));return{start:l.value,end:f}})},[e.start,t]),h.useEffect(()=>{const l=C(e.end,t);l.isSome()&&g(m=>He(m.start,l.value)?{start:m.start,end:v(m.start)}:{start:ie(m.start,F(l.value)),end:l.value})},[e.end,t]);const S=h.useCallback(l=>{g(m=>({start:l,end:le(m.end,v(l))}))},[]),Y=h.useCallback(l=>{g(m=>({start:ie(m.start,F(l)),end:l}))},[]),b=h.useMemo(()=>Ee(e,t),[e,t]),u=l=>{const m=je(b,l),f={start:m.start.match({Some:P=>Q(P,t),None:()=>e.start}),end:m.end.match({Some:P=>Q(P,t),None:()=>e.end})};p(f)};return D(k,{style:d.rangePopoverContainer,children:[D(V,{direction:"row",alignItems:"start",children:[D(k,{style:d.rangePopoverPart,children:[n(Z,{monthNames:a,value:s.start,maxValue:F(s.end),arrowsPosition:"around",onChange:S}),n(M,{height:24}),n(ee,{month:s.start.month,year:s.start.year,value:b,firstWeekDay:r,weekDayNames:o,isSelectable:i,onChange:u})]}),n(Re,{space:24,horizontal:!0}),D(k,{style:d.rangePopoverPart,children:[n(Z,{monthNames:a,value:s.end,minValue:v(s.start),arrowsPosition:"around",onChange:Y}),n(M,{height:24}),n(ee,{month:s.end.month,year:s.end.year,value:b,firstWeekDay:r,weekDayNames:o,isSelectable:i,onChange:u})]})]}),n(M,{height:24}),D(V,{direction:"row",alignItems:"start",children:[n(W,{size:"small",mode:"secondary",style:d.button,children:c}),n(M,{width:48}),n(W,{size:"small",mode:"primary",color:"current",style:d.button,children:N})]})]})},te=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:p,minDurationinDays:c,maxDurationinDays:N,onChange:s,cancelLabel:g,confirmLabel:S})=>{const Y=h.useCallback(u=>{s({start:u,end:e.end})},[e,s]),b=h.useCallback(u=>{s({start:e.start,end:u})},[e,s]);return D(L,{children:[D(V,{direction:"row",alignItems:"center",children:[n(K,{value:e.start,onChange:Y,...$,children:({value:u,onChange:l})=>n(G,{placeholder:r,value:u,onChange:l,hideErrors:!0})}),n(M,{width:12}),n(We,{name:"arrow-right-filled",size:20}),n(M,{width:12}),n(K,{value:e.end,onChange:b,...$,children:({value:u,onChange:l})=>n(G,{placeholder:r,value:u,onChange:l,hideErrors:!0})})]}),n(J,{variant:"smallRegular",color:w.negative[500],children:t??" "}),n(Ke,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:p,minDurationinDays:c,maxDurationinDays:N,onChange:s,cancelLabel:g,confirmLabel:S})]})};try{U.displayName="isTodayOrFutureDate",U.__docgenInfo={description:"",displayName:"isTodayOrFutureDate",props:{day:{defaultValue:null,description:"",name:"day",required:!0,type:{name:"number"}},month:{defaultValue:null,description:"",name:"month",required:!0,type:{name:"number"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"number"}}}}}catch{}try{B.displayName="DatePicker",B.__docgenInfo={description:"",displayName:"DatePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: string) => void"}}}}}catch{}try{te.displayName="DateRangePicker",te.__docgenInfo={description:"",displayName:"DateRangePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"{ start: string; end: string; }"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},minDurationinDays:{defaultValue:null,description:"",name:"minDurationinDays",required:!1,type:{name:"number"}},maxDurationinDays:{defaultValue:null,description:"",name:"maxDurationinDays",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: { start: string; end: string; }) => void"}},cancelLabel:{defaultValue:null,description:"",name:"cancelLabel",required:!0,type:{name:"string"}},confirmLabel:{defaultValue:null,description:"",name:"confirmLabel",required:!0,type:{name:"string"}}}}}catch{}const j=pe.create({container:{width:430}}),Et={title:"Forms/DatePicker",component:B},H=({...e})=>{const[t,r]=h.useState();return n(B,{...e,value:t,onChange:r})},Ge=({...e})=>{const[t,r]=h.useState({start:"",end:""});return n(te,{...e,value:t,onChange:r})},q=["January","February","March","April","May","June","July","August","September","October","November","December"],x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_=()=>n(Ne,{color:"#0F6FDE",children:D(De,{title:"DatePicker",children:[n(E,{title:"Default",children:n(k,{style:j.container,children:n(H,{firstWeekDay:"monday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY"})})}),n(E,{title:"Week starting sunday",children:n(k,{style:j.container,children:n(H,{firstWeekDay:"sunday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY"})})}),n(E,{title:"Selectable only in the future",children:n(k,{style:j.container,children:n(H,{firstWeekDay:"sunday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY",isSelectable:U})})})]})}),R=()=>n(Ne,{color:"#0F6FDE",children:n(De,{title:"DateRangePicker",children:n(E,{title:"Default",children:n(Ge,{firstWeekDay:"monday",monthNames:q,weekDayNames:x,format:"DD/MM/YYYY",cancelLabel:"Cancel",confirmLabel:"Select"})})})});var ce,ue,de;_.parameters={..._.parameters,docs:{...(ce=_.parameters)==null?void 0:ce.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DatePicker">
        <StoryPart title="Default">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Week starting sunday">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Selectable only in the future">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" isSelectable={isTodayOrFutureDate} />
          </View>
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(de=(ue=_.parameters)==null?void 0:ue.docs)==null?void 0:de.source}}};var me,ye,he;R.parameters={...R.parameters,docs:{...(me=R.parameters)==null?void 0:me.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DateRangePicker">
        <StoryPart title="Default">
          <InteractiveDateRangePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" cancelLabel="Cancel" confirmLabel="Select" />
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(he=(ye=R.parameters)==null?void 0:ye.docs)==null?void 0:he.source}}};const Ft=["Default","Range"];export{_ as Default,R as Range,Ft as __namedExportsOrder,Et as default};
//# sourceMappingURL=DatePicker.stories-a3502404.js.map
