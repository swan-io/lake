import{r as a}from"./index-f1f749bf.js";import{S as v,d as K,r as U,e as X,f as B,a as n,j as z,V as G,k as J}from"./Space-5ecb433c.js";import{K as Q,S as Y}from"./index.module-0f5c31dd.js";import{u as Z}from"./useResponsive-63581e72.js";import{B as $}from"./BottomPanel-822432ff.js";import{F as ee}from"./FocusTrap-5373fccf.js";import{P as te}from"./Portal-b43c629f.js";import{T as ae}from"./TransitionView-e843ce75.js";import{P as C}from"./index-ced7c89f.js";const ye=o=>{const[c,s]=a.useState(o);return[c,a.useMemo(()=>({open:()=>s(!0),close:()=>s(!1),toggle:()=>s(p=>!p)}),[])]},i=v.create({container:{...v.absoluteFillObject,pointerEvents:"none"},contents:{...v.absoluteFillObject},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popover:{pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",backgroundColor:K.accented,borderRadius:U[8],marginVertical:4,overflow:"hidden",boxShadow:X.modal},popoverContents:{alignItems:"stretch"}}),oe={availableSpaceAbove:0,availableSpaceBelow:0,availableSpaceBefore:0,availableSpaceAfter:0,top:0,bottom:0,left:0,right:0,availableHeight:0,width:0},ne="flex-end",le="flex-start",re={...B.fadeAndSlideInFromBottom,leave:[B.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},ie=600,F=a.memo(({children:o,id:c,label:s,role:p="dialog",describedBy:R,matchReferenceWidth:q=!1,matchReferenceMinWidth:_=!1,onDismiss:l,referenceRef:d,returnFocus:A=!0,autoFocus:k=!0,visible:r,underlay:h=!0,safetyMargin:u=8,forcedMode:I})=>{const[y,w]=a.useState(null),S=a.useRef(null),{desktop:T}=Z(ie),[{availableSpaceAbove:m,availableSpaceBelow:f,availableSpaceBefore:g,availableSpaceAfter:V,top:D,bottom:H,left:O,right:W,availableHeight:E,width:P},M]=a.useState(oe);a.useEffect(()=>{const e=d.current;if(e!=null&&r){const t=e.getBoundingClientRect(),b=t.top,x=window.innerHeight-t.bottom;M({availableSpaceAbove:b,availableSpaceBelow:x,availableSpaceBefore:t.left,availableSpaceAfter:window.innerWidth-t.right,top:Math.max(t.bottom,u),bottom:Math.max(window.innerHeight-t.top,u),left:Math.max(t.left,u),right:Math.max(window.innerWidth-t.right,u),availableHeight:b<=x?window.innerHeight-t.top-(t.bottom-t.top)-20:b-20,width:t.right-t.left})}},[u,d,r]),a.useEffect(()=>{const e=S.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),a.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),w(e),()=>{w(null),e.remove()}},[]);const j=a.useCallback(e=>{e.preventDefault(),l()},[l]),L=a.useCallback(({target:e})=>{const t=d.current;(!(t instanceof Element)||!(e instanceof Element)||t!==e&&!t.contains(e))&&l()},[d,l]),N=a.useCallback(e=>{e.preventDefault()},[]);return y==null?null:Q(I).with(Y.nullish,()=>T?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?n($,{visible:r,onPressClose:l,returnFocus:!1,children:typeof o=="function"?o({mode:"panel"}):o}):n(te,{container:y,children:n(ae,{style:i.container,...re,children:r?z(G,{style:i.contents,children:[h?n(C,{ref:S,style:i.underlay,onPress:j,role:"button","aria-label":"Close"}):null,E>0?n(J,{style:[i.popover,m<=f&&{top:D},m>f&&{bottom:H},g<=V&&{left:O},g>V&&{right:W},_&&{minWidth:P},q&&{width:P},{maxHeight:E}],contentContainerStyle:[i.popoverContents,{justifyContent:m>f?ne:le}],id:c,role:p,"aria-describedby":R,"aria-label":s,children:n(ee,{focusLock:!0,returnFocus:A,autoFocus:k,onEscapeKey:l,onClickOutside:h?void 0:L,children:n(C,{tabIndex:-1,onPress:N,style:i.defaultCursor,children:typeof o=="function"?o({mode:"dropdown"}):o})})}):null]}):null})})});try{F.displayName="Popover",F.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<unknown>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}}}}}catch{}export{F as P,ye as u};
//# sourceMappingURL=Popover-20279aaa.js.map
