import{S as de,s as T,m as te,r as re,c as w,j as N,F as E,a as n,V as b,b as M,o as be,L as H,p as Ye,i as Me}from"./Space-5c29d500.js";import{r as y}from"./index-f1f749bf.js";import{h as D}from"./Boxed-aef12ad0.js";import{d as ye}from"./dayjs.min-33e2be6b.js";import{R as J}from"./rifm.esm-58cee9fb.js";import{B as C,K as he,S as x}from"./index.module-bef243ca.js";import{n as Pe}from"./function-1bad6ac0.js";import{g as ve}from"./rifm-2b7a6d3b.js";import{F as ne}from"./Fill-d7d86da4.js";import{I as Ce}from"./Icon-27bbe041.js";import{L as I}from"./LakeButton-d869e10e.js";import{L as ae}from"./LakeSelect-ad937f1f.js";import{L as K}from"./LakeTextInput-3b6d4260.js";import{P as Ve}from"./Pressable-d518d699.js";import{c as Ie,S as pe,a as R}from"./_StoriesComponents-bbcd7ec3.js";import{W as fe}from"./WithPartnerAccentColor-d6e3f98e.js";import"./extends-98964cd2.js";import"./_commonjsHelpers-042e6b4d.js";import"./Svg-ff455c54.js";import"./index-4bbcd6fb.js";import"./commonStyles-d52fedae.js";import"./Popover-50e70ffd.js";import"./useResponsive-f4d095a5.js";import"./BottomPanel-a1918361.js";import"./useBodyClassName-bd00433d.js";import"./math-d8257b44.js";import"./FocusTrap-1588cf22.js";import"./array-b3630b94.js";import"./LoadingView-abfecfc9.js";import"./colors-298625c7.js";import"./Portal-ddaa83ce.js";import"./index-96c5f47c.js";import"./WithCurrentColor-dc917e83.js";import"./TransitionView-c4b12149.js";import"./index-c86de1d8.js";import"./index-37abc2ac.js";import"./index-37690212.js";import"./useMergeRefs-b62e07d5.js";import"./polished.esm-77d64d09.js";const d=de.create({popoverContainer:{width:430,padding:T[24],backgroundColor:te.white,borderRadius:re[8]},rangePopoverContainer:{alignSelf:"flex-start",padding:T[24],backgroundColor:te.white,borderRadius:re[8]},rangePopoverPart:{width:330},button:{flex:1},monthSelect:{width:130},yearSelect:{width:100},weekRow:{paddingVertical:T[4]},dayName:{width:32,height:32,alignItems:"center",justifyContent:"center"},dayNumber:{width:32,height:32,alignItems:"center",justifyContent:"center",borderRadius:16},dayNumberFocused:{},dayNumberHover:{backgroundColor:w.current[100]},dayNumberPressed:{},dayNumberSelected:{backgroundColor:w.current[500]},dayNumberInRange:{backgroundColor:w.current[100]},todayIndicator:{position:"absolute",left:0,right:0,bottom:0,width:4,height:4,marginHorizontal:"auto",borderRadius:2,backgroundColor:w.current[500]}}),B=7,ge={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},G=ve({accept:"numeric",charMap:{2:"/",4:"/"},maxLength:8}),L=(e,t)=>{const r=ye.utc(e,t);return r.isValid()?D.Some({day:r.date(),month:r.month(),year:r.year()}):D.None()},We=(e,t)=>({start:L(e.start,t),end:L(e.end,t)}),$=(e,t)=>ye.utc().date(e.day).month(e.month).year(e.year).format(t),_e=(e,t)=>{const r=[];for(let a=e;a<=t;a++)r.push(a);return r},Re=(e,t)=>{const r=[],a=Math.ceil(e.length/t);for(let o=0;o<a;o++)r.push(e.slice(o*t,(o+1)*t));return r},Fe=(e,t,r)=>{const a=new Array(t-e.length).fill(r);return[...e,...a]},Q=e=>{const t=new Date;return e.year>=t.getFullYear()&&e.month>=t.getMonth()&&e.day>=t.getDate()},qe=e=>{const t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()},Ee=(e,t)=>{const r=(a,o)=>{const i=o.getDate(),h=o.getMonth(),c=o.getFullYear();return o.getMonth()!==e?a:r([...a,{day:i,month:h,year:c}],new Date(t,e,i+1))};return r([],new Date(t,e,1))},xe=(e,t,r)=>{const a=ge[r],o=new Date(t,e,1).getDay(),i=Ee(e,t).map(s=>D.Some(s)),h=o>=a?o-a:B-a+o;for(let s=0;s<h;s++)i.unshift(D.None());const c=Re(i,B),g=c[c.length-1];return g&&(c[c.length-1]=Fe(g,B,D.None())),c},Le=(e,t="sunday")=>{const r=ge[t],a=e.slice(r),o=e.slice(0,r);return[...a,...o]},j=(e,t)=>e.day===t.day&&e.month===t.month&&e.year===t.year,Ae=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month||e.year===t.year&&e.month===t.month&&e.day<t.day,De=(e,t)=>e.year>t.year||e.year===t.year&&e.month>t.month||e.year===t.year&&e.month===t.month&&e.day>t.day,Ne=e=>he(e).with({start:x._,end:x._},()=>!0).otherwise(()=>!1),Te=(e,t)=>he(t).with(D.pattern.Some(x.select()),r=>j(r,e)).with(D.pattern.None,()=>!1).with(x.when(Ne),({start:r,end:a})=>r.match({Some:o=>j(o,e),None:()=>!1})||a.match({Some:o=>j(o,e),None:()=>!1})).exhaustive(),Be=(e,t)=>{if(!Ne(t))return!1;const{start:r,end:a}=t;if(r.isNone()||a.isNone())return!1;const o=r.value,i=a.value;return De(e,o)&&Ae(e,i)},oe=(e,t)=>{const r=new Date(e.year,e.month,e.day),a=new Date(t.year,t.month,t.day),o=Math.abs(a.getTime()-r.getTime());return Math.round(o/(1e3*3600*24))},je=(e,t)=>{const{start:r,end:a}=e;if(r.isNone())return{start:D.Some(t),end:D.None()};if(a.isNone())return De(t,r.value)?{start:r,end:D.Some(t)}:{start:D.Some(t),end:e.start};const o=oe(r.value,t),i=oe(a.value,t);return o<i?{start:D.Some(t),end:e.end}:{start:e.start,end:D.Some(t)}},ke=()=>({month:new Date().getMonth(),year:new Date().getFullYear()}),v=(e,t)=>Ye(e)?D.None():L(e,t),Se=(e,t)=>e.year<t.year||e.year===t.year&&e.month<t.month,ze=(e,t)=>e.year===t.year&&e.month===t.month,Oe=(e,t)=>Se(e,t)?e:t,He=(e,t)=>Se(e,t)?t:e,V=({month:e,year:t})=>e===11?{month:0,year:t+1}:{month:e+1,year:t},U=({month:e,year:t})=>e===0?{month:11,year:t-1}:{month:e-1,year:t},X=({monthNames:e,value:t,minValue:r,maxValue:a,arrowsPosition:o="right",onChange:i})=>{const h=y.useMemo(()=>e.map((u,l)=>({name:u,value:l})),[e]),c=y.useMemo(()=>_e(t.year-5,t.year+5).map(u=>({name:u.toString(),value:u})),[t.year]),g=u=>{i({year:t.year,month:u})},s=u=>{i({year:u,month:t.month})},p=()=>{i(U(t))},k=()=>{i(V(t))},Y=r?t.year<=r.year&&t.month<=r.month:!1,S=a?t.year>=a.year&&t.month>=a.month:!1;return N(C,{direction:"row",alignItems:"center",children:[o==="around"&&N(E,{children:[n(I,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:Y,onPress:p}),n(ne,{minWidth:12})]}),n(ae,{items:h,value:t.month,onValueChange:g,mode:"borderless",size:"small",hideErrors:!0,style:d.monthSelect}),n(ae,{items:c,value:t.year,onValueChange:s,mode:"borderless",size:"small",hideErrors:!0,style:d.yearSelect}),n(ne,{minWidth:12}),o==="right"&&N(E,{children:[n(I,{size:"small",mode:"tertiary",icon:"arrow-left-filled",disabled:Y,onPress:p}),n(M,{width:12})]}),n(I,{size:"small",mode:"tertiary",icon:"arrow-right-filled",disabled:S,onPress:k})]})},Z=({month:e,year:t,value:r,firstWeekDay:a,weekDayNames:o,isSelectable:i,onChange:h})=>{const c=y.useMemo(()=>Le(o,a),[o,a]),g=y.useMemo(()=>xe(e,t,a),[e,t,a]);return N(b,{children:[n(C,{direction:"row",alignItems:"center",justifyContent:"spaceAround",style:d.weekRow,children:c.map(s=>n(b,{style:d.dayName,children:n(H,{variant:"medium",color:w.gray[600],children:s.substring(0,1)})},s))}),g.map((s,p)=>n(C,{direction:"row",alignItems:"center",justifyContent:"spaceAround",style:d.weekRow,children:s.map((k,Y)=>{const S=k.match({Some:f=>Me(i)&&!i(f),None:()=>!0}),u=k.match({Some:f=>Te(f,r),None:()=>!1}),l=k.match({Some:f=>Be(f,r),None:()=>!1}),m=k.match({Some:f=>qe(f),None:()=>!1});return N(Ve,{disabled:S,onPress:()=>k.match({Some:h,None:Pe}),style:({focused:f,hovered:P,pressed:we})=>[d.dayNumber,f&&d.dayNumberFocused,P&&d.dayNumberHover,we&&d.dayNumberPressed,u&&d.dayNumberSelected,l&&d.dayNumberInRange],children:[n(H,{variant:"smallRegular",color:u?w.current.contrast:S?w.gray[300]:m?w.current[500]:w.gray[900],children:k.match({Some:({day:f})=>f.toString(),None:()=>" "})}),m&&n(b,{style:d.todayIndicator})]},Y)})},p))]})},Je=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:i,onChange:h})=>{const[c,g]=y.useState(()=>v(e,t).getWithDefault(ke()));y.useEffect(()=>{const p=v(e,t);p.isSome()&&g(p.value)},[e,t]);const s=y.useCallback(p=>{const k=$(p,t);h(k)},[t,h]);return N(b,{style:d.popoverContainer,children:[n(X,{monthNames:a,value:c,onChange:g}),n(M,{height:24}),n(Z,{month:c.month,year:c.year,value:be(e)?L(e,t):D.None(),firstWeekDay:r,weekDayNames:o,isSelectable:i,onChange:s})]})},A=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:h,onChange:c})=>N(E,{children:[n(J,{value:e??"",onChange:c,...G,children:({value:g,onChange:s})=>n(K,{placeholder:r,value:g,error:t,onChange:s})}),n(Je,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:h,onChange:c})]}),Ke=({value:e,format:t,firstWeekDay:r,monthNames:a,weekDayNames:o,isSelectable:i,onChange:h,cancelLabel:c,confirmLabel:g})=>{const[s,p]=y.useState(()=>{const l=v(e.start,t).getWithDefault(ke()),m=v(e.end,t).getWithDefault(V(l));return{start:l,end:m}});y.useEffect(()=>{const l=v(e.start,t);l.isSome()&&p(m=>{const f=He(m.end,V(l.value));return{start:l.value,end:f}})},[e.start,t]),y.useEffect(()=>{const l=v(e.end,t);l.isSome()&&p(m=>ze(m.start,l.value)?{start:m.start,end:V(m.start)}:{start:Oe(m.start,U(l.value)),end:l.value})},[e.end,t]);const k=y.useCallback(l=>{p(m=>({...m,start:l}))},[]),Y=y.useCallback(l=>{p(m=>({...m,end:l}))},[]),S=y.useMemo(()=>We(e,t),[e,t]),u=l=>{const m=je(S,l),f={start:m.start.match({Some:P=>$(P,t),None:()=>e.start}),end:m.end.match({Some:P=>$(P,t),None:()=>e.end})};h(f)};return N(b,{style:d.rangePopoverContainer,children:[N(C,{direction:"row",alignItems:"start",children:[N(b,{style:d.rangePopoverPart,children:[n(X,{monthNames:a,value:s.start,maxValue:U(s.end),arrowsPosition:"around",onChange:k}),n(M,{height:24}),n(Z,{month:s.start.month,year:s.start.year,value:S,firstWeekDay:r,weekDayNames:o,isSelectable:i,onChange:u})]}),n(Ie,{space:24,horizontal:!0}),N(b,{style:d.rangePopoverPart,children:[n(X,{monthNames:a,value:s.end,minValue:V(s.start),arrowsPosition:"around",onChange:Y}),n(M,{height:24}),n(Z,{month:s.end.month,year:s.end.year,value:S,firstWeekDay:r,weekDayNames:o,isSelectable:i,onChange:u})]})]}),n(M,{height:24}),N(C,{direction:"row",alignItems:"start",children:[n(I,{size:"small",mode:"secondary",style:d.button,children:c}),n(M,{width:48}),n(I,{size:"small",mode:"primary",color:"current",style:d.button,children:g})]})]})},ee=({value:e,error:t,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:h,minDurationinDays:c,maxDurationinDays:g,onChange:s,cancelLabel:p,confirmLabel:k})=>{const Y=y.useCallback(u=>{s({start:u,end:e.end})},[e,s]),S=y.useCallback(u=>{s({start:e.start,end:u})},[e,s]);return N(E,{children:[N(C,{direction:"row",alignItems:"center",children:[n(J,{value:e.start,onChange:Y,...G,children:({value:u,onChange:l})=>n(K,{placeholder:r,value:u,onChange:l,hideErrors:!0})}),n(M,{width:12}),n(Ce,{name:"arrow-right-filled",size:20}),n(M,{width:12}),n(J,{value:e.end,onChange:S,...G,children:({value:u,onChange:l})=>n(K,{placeholder:r,value:u,onChange:l,hideErrors:!0})})]}),n(H,{variant:"smallRegular",color:w.negative[500],children:t??" "}),n(Ke,{value:e,format:r,firstWeekDay:a,monthNames:o,weekDayNames:i,isSelectable:h,minDurationinDays:c,maxDurationinDays:g,onChange:s,cancelLabel:p,confirmLabel:k})]})};try{Q.displayName="isTodayOrFutureDate",Q.__docgenInfo={description:"",displayName:"isTodayOrFutureDate",props:{day:{defaultValue:null,description:"",name:"day",required:!0,type:{name:"number"}},month:{defaultValue:null,description:"",name:"month",required:!0,type:{name:"number"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"number"}}}}}catch{}try{A.displayName="DatePicker",A.__docgenInfo={description:"",displayName:"DatePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: string) => void"}}}}}catch{}try{ee.displayName="DateRangePicker",ee.__docgenInfo={description:"",displayName:"DateRangePicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"{ start: string; end: string; }"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"DD/MM/YYYY"'},{value:'"MM/DD/YYYY"'}]}},firstWeekDay:{defaultValue:null,description:"",name:"firstWeekDay",required:!0,type:{name:"enum",value:[{value:'"sunday"'},{value:'"monday"'},{value:'"tuesday"'},{value:'"wednesday"'},{value:'"thursday"'},{value:'"friday"'},{value:'"saturday"'}]}},monthNames:{defaultValue:null,description:"",name:"monthNames",required:!0,type:{name:"MonthNames"}},weekDayNames:{defaultValue:null,description:"",name:"weekDayNames",required:!0,type:{name:"WeekDayNames"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"((date: DatePickerDate) => boolean)"}},minDurationinDays:{defaultValue:null,description:"",name:"minDurationinDays",required:!1,type:{name:"number"}},maxDurationinDays:{defaultValue:null,description:"",name:"maxDurationinDays",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(date: { start: string; end: string; }) => void"}},cancelLabel:{defaultValue:null,description:"",name:"cancelLabel",required:!0,type:{name:"string"}},confirmLabel:{defaultValue:null,description:"",name:"confirmLabel",required:!0,type:{name:"string"}}}}}catch{}const z=de.create({container:{width:430}}),Ft={title:"Forms/DatePicker",component:A},O=({...e})=>{const[t,r]=y.useState();return n(A,{...e,value:t,onChange:r})},Ge=({...e})=>{const[t,r]=y.useState({start:"",end:""});return n(ee,{...e,value:t,onChange:r})},F=["January","February","March","April","May","June","July","August","September","October","November","December"],q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],W=()=>n(fe,{color:"#0F6FDE",children:N(pe,{title:"DatePicker",children:[n(R,{title:"Default",children:n(b,{style:z.container,children:n(O,{firstWeekDay:"monday",monthNames:F,weekDayNames:q,format:"DD/MM/YYYY"})})}),n(R,{title:"Week starting sunday",children:n(b,{style:z.container,children:n(O,{firstWeekDay:"sunday",monthNames:F,weekDayNames:q,format:"DD/MM/YYYY"})})}),n(R,{title:"Selectable only in the future",children:n(b,{style:z.container,children:n(O,{firstWeekDay:"sunday",monthNames:F,weekDayNames:q,format:"DD/MM/YYYY",isSelectable:Q})})})]})}),_=()=>n(fe,{color:"#0F6FDE",children:n(pe,{title:"DateRangePicker",children:n(R,{title:"Default",children:n(Ge,{firstWeekDay:"monday",monthNames:F,weekDayNames:q,format:"DD/MM/YYYY",cancelLabel:"Cancel",confirmLabel:"Select"})})})});var se,ie,le;W.parameters={...W.parameters,docs:{...(se=W.parameters)==null?void 0:se.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DatePicker">
        <StoryPart title="Default">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Week starting sunday">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" />
          </View>
        </StoryPart>

        <StoryPart title="Selectable only in the future">
          <View style={styles.container}>
            <InteractiveDatePicker firstWeekDay="sunday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" isSelectable={isTodayOrFutureDate} />
          </View>
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(le=(ie=W.parameters)==null?void 0:ie.docs)==null?void 0:le.source}}};var ce,ue,me;_.parameters={..._.parameters,docs:{...(ce=_.parameters)==null?void 0:ce.docs,source:{originalSource:`() => {
  return <WithPartnerAccentColor color="#0F6FDE">
      <StoryBlock title="DateRangePicker">
        <StoryPart title="Default">
          <InteractiveDateRangePicker firstWeekDay="monday" monthNames={monthNames} weekDayNames={dayNames} format="DD/MM/YYYY" cancelLabel="Cancel" confirmLabel="Select" />
        </StoryPart>
      </StoryBlock>
    </WithPartnerAccentColor>;
}`,...(me=(ue=_.parameters)==null?void 0:ue.docs)==null?void 0:me.source}}};const qt=["Default","Range"];export{W as Default,_ as Range,qt as __namedExportsOrder,Ft as default};
//# sourceMappingURL=DatePicker.stories-87c5dc6b.js.map
