import{s as I,e as T,h as N,d as x,O,c as F,j as k,B as U,a as e,F as V,L as E,S as h,V as R,N as S,v as z,l as P,i as B}from"./Space-BWccxxFI.js";import{r as n}from"./index-CBqU2yxZ.js";import{g as D,F as j}from"./FileInput-DMR7pIVI.js";import{L as b}from"./LakeAlert-uoGkzggp.js";import{L as C}from"./LakeButton-zoGe0MHZ.js";import{T as A}from"./Tag-B5b6QtKz.js";import{c as G}from"./commonStyles-t4XfA7cz.js";import{t as m}from"./i18n-CfW-KGDk.js";const M=l=>{const[p,r]=n.useState(l.initialFiles),d=n.useCallback((o,s)=>l.generateUpload(o).tapError(t=>{l.onError!=null&&l.onError(t)}).flatMapOk(({upload:t,id:v})=>{r(u=>[...u.filter(a=>a.id!==v),{id:v,statusInfo:{status:"Uploading",progress:0},name:s.name}]);const f=u=>{r(a=>a.map(c=>c.id!==v?c:{...c,statusInfo:{status:"Uploading",progress:u.loaded/u.total}}))};return l.uploadFile({id:v,upload:t,file:s,onLoadStart:f,onProgress:f}).tapOk(()=>{r(u=>u.map(a=>a.id!==v?a:{...a,statusInfo:{status:"Uploaded"}}))}).tapError(u=>{l.onError!=null&&l.onError(u),r(a=>a.filter(c=>c.id!==v))})}),[l]),g=n.useCallback(o=>{r(s=>s.filter(t=>t.id!==o))},[]);return{files:p,upload:d,remove:g}},y=I.create({base:{backgroundColor:T.accented,borderRadius:8,boxShadow:N.tile,overflow:"hidden"},content:{height:56,paddingLeft:x[20],paddingRight:x[8]},progressBar:{flex:1,height:4,borderRadius:2,backgroundColor:O},progress:{height:4,transitionProperty:"width",transitionDuration:"300ms",transitionTimingFunction:"ease-in-out",borderRadius:2,backgroundColor:F.current[500]}}),q=({file:{statusInfo:l,name:p,url:r},onRemove:d})=>{const[g,o]=n.useState(!1),s=n.useCallback(()=>{d!=null&&(o(!0),d().tap(()=>o(!1)))},[d]);return k(U,{style:y.base,children:[e(U,{alignItems:"center",direction:"row",style:y.content,children:l.status==="Uploading"?k(V,{children:[e(E,{numberOfLines:1,color:F.gray[700],children:m("fileTile.uploading")}),e(h,{width:20}),e(R,{role:"progressbar",style:y.progressBar,children:e(R,{style:[y.progress,{width:`${l.progress*100}%`}]})})]}):k(V,{children:[e(A,{icon:D(p),iconSize:20,color:S(l).with({status:z.union("Uploaded","Pending")},()=>"shakespear").with({status:"Validated"},()=>"positive").with({status:"Refused"},()=>"negative").exhaustive()}),e(h,{width:16}),e(E,{numberOfLines:1,color:F.gray[700],style:G.fill,children:p}),e(h,{width:12}),P(r)&&e(C,{mode:"tertiary",size:"small",icon:"open-filled",onPress:()=>{window.open(r,"_blank")},ariaLabel:m("common.open")}),B(d)&&e(C,{mode:"tertiary",size:"small",icon:"delete-regular",color:"negative",onPress:s,loading:g,ariaLabel:m("common.remove")})]})}),S(l).with({status:"Pending"},()=>e(b,{anchored:!0,title:m("fileTile.status.Pending"),variant:"info"})).with({status:"Validated"},()=>e(b,{anchored:!0,title:m("fileTile.status.Validated"),variant:"success"})).with({status:"Refused"},({reason:t})=>e(b,{anchored:!0,title:m("fileTile.status.Refused"),variant:"error",children:t})).otherwise(()=>null)]})};try{q.displayName="FileTile",q.__docgenInfo={description:"",displayName:"FileTile",props:{file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"SwanFile"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"(() => Future<unknown>)"}}}}}catch{}const L=({maxSize:l,accept:p,icon:r,getUploadConfig:d,onRemoveFile:g,onChange:o,formatAndSizeDescription:s,canUpload:t=!0,...v})=>{const{files:f,upload:u,remove:a}=M(v),c=n.useRef(o);c.current=o;const _=n.useRef(!0);return n.useEffect(()=>{if(_.current){_.current=!1;return}const i=c.current;i!=null&&i(f)},[f]),k(U,{children:[t?k(V,{children:[e(j,{layout:"horizontal",onFiles:i=>{i.forEach(w=>{u(d(w),w)})},accept:p,icon:r,description:s,maxSize:l}),e(h,{height:12})]}):null,f.map((i,w)=>k(n.Fragment,{children:[w>0?e(h,{height:12}):null,e(q,{file:i,onRemove:g!=null&&i.statusInfo.status==="Uploaded"?()=>g(i).tapOk(()=>{a(i.id)}):void 0})]},i.id))]})};try{L.displayName="FilesUploader",L.__docgenInfo={description:"",displayName:"FilesUploader",props:{initialFiles:{defaultValue:null,description:"",name:"initialFiles",required:!0,type:{name:"SwanFile[]"}},generateUpload:{defaultValue:null,description:"",name:"generateUpload",required:!0,type:{name:"(config: UploadInput) => Future<Result<UploadOutputWithId<UploadOutput>, GenerateUploadError>>"}},uploadFile:{defaultValue:null,description:"",name:"uploadFile",required:!0,type:{name:"(config: UploadFileInput<UploadOutput>) => Future<Result<unknown, UploadFileError>>"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((error: GenerateUploadError | UploadFileError) => void)"}},getUploadConfig:{defaultValue:null,description:"",name:"getUploadConfig",required:!0,type:{name:"(file: File) => UploadInput"}},accept:{defaultValue:null,description:"",name:"accept",required:!0,type:{name:"string[]"}},maxSize:{defaultValue:null,description:"",name:"maxSize",required:!0,type:{name:"number"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"enum",value:[{value:'"lake-building-bank"'},{value:'"lake-calendar-arrow-swap"'},{value:'"lake-call"'},{value:'"lake-card"'},{value:'"lake-card-add"'},{value:'"lake-card-filled"'},{value:'"lake-card-one-off"'},{value:'"lake-card-physical"'},{value:'"lake-card-recurring"'},{value:'"lake-card-single-use"'},{value:'"lake-card-virtual"'},{value:'"lake-check"'},{value:'"lake-chevron-double"'},{value:'"lake-clipboard-bullet"'},{value:'"lake-clock"'},{value:'"lake-clock-arrow-swap"'},{value:'"lake-close"'},{value:'"lake-compass"'},{value:'"lake-currencies"'},{value:'"lake-delivery-grouped"'},{value:'"lake-delivery-individual"'},{value:'"lake-denied"'},{value:'"lake-document-csv"'},{value:'"lake-document-jpg"'},{value:'"lake-document-pdf"'},{value:'"lake-document-png"'},{value:'"lake-document-xls"'},{value:'"lake-email"'},{value:'"lake-eraser"'},{value:'"lake-error"'},{value:'"lake-face-id"'},{value:'"lake-fingerprint"'},{value:'"lake-id-card"'},{value:'"lake-inbox-empty"'},{value:'"lake-key"'},{value:'"lake-lock-closed"'},{value:'"lake-menu"'},{value:'"lake-people"'},{value:'"lake-person-arrow-swap"'},{value:'"lake-person-support"'},{value:'"lake-phone"'},{value:'"lake-receipt"'},{value:'"lake-settings"'},{value:'"lake-shield"'},{value:'"lake-signature"'},{value:'"lake-transfer"'},{value:'"lake-warning"'},{value:'"lake-world-map"'},{value:'"add-circle-filled"'},{value:'"add-circle-regular"'},{value:'"add-filled"'},{value:'"approvals-app-filled"'},{value:'"apps-list-filled"'},{value:'"apps-list-regular"'},{value:'"arrow-counterclockwise-filled"'},{value:'"arrow-clockwise-filled"'},{value:'"arrow-down-filled"'},{value:'"arrow-down-regular"'},{value:'"arrow-download-filled"'},{value:'"arrow-left-filled"'},{value:'"arrow-left-regular"'},{value:'"arrow-right-filled"'},{value:'"arrow-right-regular"'},{value:'"arrow-swap-filled"'},{value:'"arrow-swap-regular"'},{value:'"arrow-up-filled"'},{value:'"arrow-up-regular"'},{value:'"arrow-upload-filled"'},{value:'"arrow-upload-regular"'},{value:'"beaker-filled"'},{value:'"beaker-regular"'},{value:'"board-filled"'},{value:'"board-regular"'},{value:'"box-regular"'},{value:'"building-bank-filled"'},{value:'"building-bank-regular"'},{value:'"building-filled"'},{value:'"building-multiple-regular"'},{value:'"building-regular"'},{value:'"building-shop-regular"'},{value:'"calendar-ltr-regular"'},{value:'"cart-regular"'},{value:'"chat-help-filled"'},{value:'"chat-help-regular"'},{value:'"check-filled"'},{value:'"check-regular"'},{value:'"checkmark-circle-regular"'},{value:'"checkmark-filled"'},{value:'"checkmark-starburst-regular"'},{value:'"checkmark-starburst-filled"'},{value:'"chevron-down-filled"'},{value:'"chevron-left-filled"'},{value:'"chevron-right-filled"'},{value:'"chevron-up-down-regular"'},{value:'"chevron-up-filled"'},{value:'"clipboard-search-regular"'},{value:'"clock-filled"'},{value:'"clock-regular"'},{value:'"cloud-sync-filled"'},{value:'"cloud-sync-regular"'},{value:'"code-filled"'},{value:'"code-regular"'},{value:'"color-regular"'},{value:'"comment-note-regular"'},{value:'"copy-filled"'},{value:'"copy-regular"'},{value:'"cursor-click-regular"'},{value:'"database-filled"'},{value:'"database-regular"'},{value:'"delete-filled"'},{value:'"delete-regular"'},{value:'"desktop-regular"'},{value:'"device-meeting-room-regular"'},{value:'"dismiss-circle-regular"'},{value:'"dismiss-filled"'},{value:'"dismiss-regular"'},{value:'"document-regular"'},{value:'"earth-regular"'},{value:'"edit-filled"'},{value:'"edit-regular"'},{value:'"error-circle-filled"'},{value:'"error-circle-regular"'},{value:'"eye-filled"'},{value:'"eye-off-filled"'},{value:'"eye-regular"'},{value:'"eye-off-regular"'},{value:'"filter-filled"'},{value:'"flag-filled"'},{value:'"flag-regular"'},{value:'"flash-filled"'},{value:'"flash-regular"'},{value:'"form-new-filled"'},{value:'"form-new-regular"'},{value:'"hand-right-regular"'},{value:'"image-add-filled"'},{value:'"image-add-regular"'},{value:'"image-filled"'},{value:'"image-regular"'},{value:'"info-filled"'},{value:'"info-regular"'},{value:'"key-regular"'},{value:'"link-filled"'},{value:'"live-filled"'},{value:'"live-regular"'},{value:'"lock-closed-filled"'},{value:'"lock-closed-regular"'},{value:'"lock-open-filled"'},{value:'"lock-open-regular"'},{value:'"mail-filled"'},{value:'"mail-regular"'},{value:'"money-calculator-regular"'},{value:'"money-calculator-filled"'},{value:'"money-regular"'},{value:'"money-filled"'},{value:'"more-horizontal-filled"'},{value:'"more-vertical-filled"'},{value:'"open-filled"'},{value:'"open-regular"'},{value:'"options-regular"'},{value:'"paint-brush-filled"'},{value:'"paint-brush-regular"'},{value:'"panel-left-filled"'},{value:'"panel-left-regular"'},{value:'"panel-left-contract-filled"'},{value:'"panel-left-contract-regular"'},{value:'"panel-left-expand-filled"'},{value:'"panel-left-expand-regular"'},{value:'"pause-regular"'},{value:'"payment-filled"'},{value:'"payment-regular"'},{value:'"people-add-regular"'},{value:'"people-community-filled"'},{value:'"people-community-regular"'},{value:'"people-filled"'},{value:'"people-regular"'},{value:'"people-team-regular"'},{value:'"person-accounts-filled"'},{value:'"person-accounts-regular"'},{value:'"person-add-regular"'},{value:'"person-call-filled"'},{value:'"person-call-regular"'},{value:'"person-filled"'},{value:'"person-lock-regular"'},{value:'"person-regular"'},{value:'"phone-filled"'},{value:'"phone-regular"'},{value:'"pin-regular"'},{value:'"play-filled"'},{value:'"play-regular"'},{value:'"preview-link-filled"'},{value:'"qr-code-regular"'},{value:'"question-circle-regular"'},{value:'"receipt-money-filled"'},{value:'"receipt-money-regular"'},{value:'"rocket-regular"'},{value:'"search-filled"'},{value:'"send-filled"'},{value:'"send-regular"'},{value:'"settings-filled"'},{value:'"settings-regular"'},{value:'"shield-checkmark-filled"'},{value:'"shield-checkmark-regular"'},{value:'"shield-error-regular"'},{value:'"shield-regular"'},{value:'"sign-out-regular"'},{value:'"signature-filled"'},{value:'"signature-regular"'},{value:'"subtract-circle-filled"'},{value:'"subtract-circle-regular"'},{value:'"target-arrow-regular"'},{value:'"task-list-square-ltr-filled"'},{value:'"task-list-square-ltr-regular"'},{value:'"warning-filled"'},{value:'"warning-regular"'},{value:'"window-dev-tools-filled"'},{value:'"window-dev-tools-regular"'}]}},formatAndSizeDescription:{defaultValue:null,description:"",name:"formatAndSizeDescription",required:!1,type:{name:"string"}},onRemoveFile:{defaultValue:null,description:"",name:"onRemoveFile",required:!1,type:{name:"((file: SwanFile) => Future<Result<unknown, unknown>>)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((files: SwanFile[]) => void)"}},canUpload:{defaultValue:{value:"true"},description:"",name:"canUpload",required:!1,type:{name:"boolean"}}}}}catch{}export{L as F};
//# sourceMappingURL=FilesUploader-BWW6vtB2.js.map
