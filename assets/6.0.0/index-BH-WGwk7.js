import{r as u}from"./index-CBqU2yxZ.js";import"./with-selector-D-Y2eL2T.js";const w=e=>e[e.length-1],d=()=>{},C=e=>e!=="",I=e=>e[0]==="/"?e:"/"+e,U=(e,t)=>e.length===t.length&&e.every((n,o)=>n===t[o]),O=e=>{const t=e.split("&").filter(C),n={};for(const o of t){const[s="",i=""]=o.split("="),r=decodeURIComponent(s),a=decodeURIComponent(i),c=n[r];n[r]=c!=null?typeof c=="string"?[c,a]:c.concat(a):a}return n},y=(e,t,n)=>{const o=e+(e!==""?"&":"")+encodeURIComponent(t);return n!==""?o+"="+encodeURIComponent(n):o},K=e=>{const t=Object.keys(e);if(t.length===0)return"";let n="";t.sort();for(const o of t){const s=e[o];if(s!=null)if(typeof s=="string")n=y(n,o,s);else for(const i of s)n=y(n,o,i)}return n===""?"":"?"+n};let S=!1;const v=e=>{const t=e.indexOf("#"),n=I(t<0?e:e.substring(0,t)),o=n.indexOf("?");return o<0?{path:n,search:""}:{path:n.substring(0,o),search:n.substring(o+1)}},f=e=>{const t=v(e),n=t.path.substring(1),o=n!==""?S?n.split("/").map(decodeURIComponent):n.split("/").filter(C).map(decodeURIComponent):[],s=t.search!==""?O(t.search):{},i="/"+o.map(encodeURIComponent).join("/"),r=K(s),a=i+r;return{path:o,search:s,raw:{path:i,search:r},toString:()=>a}},b=e=>{e.preventDefault(),e.returnValue=""},g=typeof window<"u"?(()=>{const e=new Set;let t=[];const n=window.history,o=window.location;let s=f(o.pathname+o.search);const i=r=>{if(r.toString()===s.toString())return;S=!0;const a=r.raw.search!==s.raw.search,c=a?{}:s.search;if(a){for(const l in r.search)if(Object.prototype.hasOwnProperty.call(r.search,l)){const p=r.search[l];if(p==null)continue;const h=s.search[l];c[l]=h!=null&&typeof h!="string"&&typeof p!="string"&&U(p,h)?h:p}}s={path:r.raw.path!==s.raw.path?r.path:s.path,search:c,raw:r.raw,toString:r.toString},e.forEach(l=>l(s))};return window.addEventListener("popstate",()=>{i(f(o.pathname+o.search))}),{get location(){return s},subscribe:r=>(e.add(r),()=>{e.delete(r)}),push:r=>{const a=w(t);if(a==null||window.confirm(a.message)){const c=f(r),l=c.toString();try{n.pushState(null,"",l)}catch{o.assign(l)}i(c)}},replace:r=>{const a=w(t);if(a==null||window.confirm(a.message)){const c=f(r),l=c.toString();n.replaceState(null,"",l),i(c)}},block:r=>(t.push(r),t.length===1&&window.addEventListener("beforeunload",b,{capture:!0}),()=>{t=t.filter(a=>{let{id:c}=a;return c!==r.id}),t.length===0&&window.removeEventListener("beforeunload",b,{capture:!0})})}})():{location:f("/"),subscribe:()=>d,push:d,replace:d,block:()=>d},L=()=>g.location,k=g.subscribe,N=g.push,j=g.replace,x=u.createContext(L);x.Provider;const E=()=>u.useContext(x),A=()=>{const e=E();return u.useSyncExternalStore(k,e,e)},P=e=>{let{href:t,replace:n=!1,target:o}=e;const s=u.useMemo(()=>v(t).path,[t]),i=E(),r=()=>s===i().raw.path,a=u.useSyncExternalStore(k,r,r),c=n||a,l=o==null||o==="_self";return{active:a,onClick:u.useCallback(p=>{p.defaultPrevented||!l||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey||(p.preventDefault(),c?j(t):N(t))},[c,l,t])}},D=u.forwardRef((e,t)=>{let{onClick:n,className:o,replace:s,style:i,target:r,to:a,activeClassName:c,activeStyle:l,...p}=e;const{active:h,onClick:R}=P({href:a,replace:s,target:r});return u.createElement("a",{...p,ref:t,href:a,onClick:m=>{n==null||n(m),R(m)},target:r,className:h&&c!=null?o==null?c:o+" "+c:o,style:h&&l!=null?i==null?l:{...i,...l}:i})});D.displayName="Link";export{A as V,P as X,D as _};
//# sourceMappingURL=index-BH-WGwk7.js.map
