import{s as f,e as z,r as G,h as J,p as B,N as Q,q as Z,a as l,j as $,P as ee,V as te,u as ae}from"./Space-Db_WXtKS.js";import{r as a}from"./index-CBqU2yxZ.js";import{u as oe}from"./useResponsive-CRFLcxUv.js";import{n as ne}from"./function-X36_Y1MP.js";import{B as le}from"./BottomPanel-BLdcpqsv.js";import{F as re}from"./FocusTrap-BJZWiLU_.js";import{T as ie}from"./TransitionView-CC2jfOWv.js";import{P as q}from"./index-CNRCXti3.js";const s=f.create({container:{...f.absoluteFillObject,pointerEvents:"none"},contents:{...f.absoluteFillObject},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popover:{pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",backgroundColor:z.accented,borderRadius:G[8],marginVertical:4,overflow:"hidden",boxShadow:J.modal},popoverContents:{alignItems:"stretch"}}),se={availableSpaceAbove:0,availableSpaceBelow:0,availableSpaceBefore:0,availableSpaceAfter:0,top:0,bottom:0,left:0,right:0,availableHeight:0,width:0},ue="flex-end",de="flex-start",ce={...B.fadeAndSlideInFromBottom,leave:[B.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},pe=600,C=a.memo(({children:o,id:F,label:R,role:_="dialog",describedBy:A,matchReferenceWidth:O=!1,matchReferenceMinWidth:T=!1,onDismiss:r=ne,onEscapeKey:I=r,referenceRef:d,returnFocus:k=!0,autoFocus:H=!0,visible:n,underlay:b=!0,safetyMargin:u=8,forcedMode:W,field:i=!1})=>{const[v,h]=a.useState(null),y=a.useRef(null),{desktop:D}=oe(pe),[{availableSpaceAbove:c,availableSpaceBelow:p,availableSpaceBefore:w,availableSpaceAfter:V,top:j,bottom:M,left:L,right:N,availableHeight:g,width:S},X]=a.useState(se);a.useEffect(()=>{const e=d.current;if(e!=null&&n){const t=e.getBoundingClientRect(),m=t.top,E=window.innerHeight-t.bottom,P=window.scrollY??0,x=window.scrollX??0;X({availableSpaceAbove:m,availableSpaceBelow:E,availableSpaceBefore:t.left,availableSpaceAfter:window.innerWidth-t.right,top:P+Math.max(t.bottom,u),bottom:Math.max(window.innerHeight-t.top,u)-P,left:x+Math.max(t.left,u),right:Math.max(window.innerWidth-t.right,u)-x,availableHeight:i||m<=E?window.innerHeight-t.top-(t.bottom-t.top)-20:m-20,width:t.right-t.left})}},[u,d,n,i]),a.useEffect(()=>{const e=y.current;!n&&e!=null&&(e.style.pointerEvents="none")},[n]),a.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),h(e),()=>{h(null),e.remove()}},[]);const K=a.useCallback(e=>{e.preventDefault(),r()},[r]),U=a.useCallback(({target:e})=>{const t=d.current;(!(t instanceof Element)||!(e instanceof Element)||t!==e&&!t.contains(e))&&r()},[d,r]),Y=a.useCallback(e=>{e.preventDefault()},[]);return v==null?null:Q(W).with(Z.nullish,()=>D?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?l(le,{visible:n,onPressClose:r,returnFocus:!1,children:typeof o=="function"?o({mode:"panel"}):o}):$(ee,{container:v,children:[n&&b?l(q,{ref:y,style:s.underlay,onPress:K,"aria-label":"Close"}):null,l(ie,{style:s.container,...ce,children:n?l(te,{style:s.contents,children:g>0?l(ae,{style:[s.popover,(i||c<=p)&&{top:j},!i&&c>p&&{bottom:M},w<=V&&{left:L},w>V&&{right:N},T&&{minWidth:S},O&&{width:S},{maxHeight:i?void 0:g}],contentContainerStyle:[s.popoverContents,{justifyContent:!i&&c>p?ue:de}],id:F,role:_,"aria-describedby":A,"aria-label":R,children:l(re,{focusLock:!0,returnFocus:k,autoFocus:H,onEscapeKey:I,onClickOutside:b?void 0:U,children:l(q,{tabIndex:-1,onPress:Y,style:s.defaultCursor,children:typeof o=="function"?o({mode:"dropdown"}):o})})}):null}):null})]})});try{C.displayName="Popover",C.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"(() => void)"}},onEscapeKey:{defaultValue:null,description:"",name:"onEscapeKey",required:!1,type:{name:"(() => void)"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<unknown>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}},field:{defaultValue:null,description:"",name:"field",required:!1,type:{name:"boolean"}}}}}catch{}export{C as P};
//# sourceMappingURL=Popover-CgHPK2jB.js.map
