import{af as q,j as e,V as c,s as h,B as se,I as A,c as l,S as oe,T as ae,L as ie,b as le,a as b}from"./ScrollView-CRbjO-MB.js";import{r as t}from"./iframe-bZfzcTAc.js";import{u as ue}from"./Pressable-Dy_Wm9zX.js";import{g as D}from"./FocusTrap-dUDSSfIn.js";import{P as de,F as ce}from"./Popover-BMeua0ZS.js";import{L as me}from"./LakeTextInput-vFUEt4Qh.js";import{L as F}from"./Suspendable-C5tHvl6a.js";import{S as pe}from"./Separator-DxlFYsKV.js";import{M as fe}from"./index-D0U-1aSJ.js";const ye=64,ge=3.5,r=h.create({list:{marginVertical:b[8]},flatList:{scrollBehavior:"smooth"},item:{flexShrink:1,flexGrow:1,justifyContent:"center",paddingHorizontal:b[24],paddingVertical:0,transitionProperty:"background-color",transitionDuration:"200ms",outlineStyle:"none",justifyContents:"center"},hoveredItem:{backgroundColor:l.gray[0]},focusedItem:{backgroundColor:l.gray[0]},pressedItem:{backgroundColor:l.gray[100]},itemText:{userSelect:"none"},loader:{padding:b[24]},listContainer:{flexGrow:1,flexShrink:1},loaderAdditional:{...h.absoluteFillObject,alignItems:"center",justifyContent:"center"},loaderAdditionalUnderlay:{...h.absoluteFillObject,backgroundColor:le.accented,opacity:.8},emptyList:{height:136},emptyListText:{color:l.gray.primary},input:{width:1,flexGrow:1}}),xe=({ref:P,inputRef:S,value:p,items:T,itemHeight:k=ye,nbItemsDisplayed:N=ge,ListFooterComponent:V,onChange:_,onValueChange:I,onSelectItem:B,renderItem:O,keyExtractor:G,icon:H,placeholder:K,disabled:U=!1,emptyResultText:M,readOnly:z,id:W,error:Y,hideErrors:J})=>{const f=t.useRef(null),Q=ue(f,S),y=t.useRef(null),u=t.useRef(void 0),[X,v]=t.useState(!1),[g,i]=t.useState("closed"),Z=t.useCallback(()=>i("opened"),[]),$=t.useCallback(()=>i("closed"),[]),C=t.useCallback(()=>i("dismissed"),[]);t.useImperativeHandle(P,()=>({open:Z,close:$}));const j=t.useId(),ee=t.useCallback(n=>{var s;if(n.nativeEvent.key==="ArrowDown"){const o=y.current;o!=null&&((s=D(o,!1)[0])==null||s.focus(),n.preventDefault())}},[]),ne=t.useCallback(n=>{var s,o;if(n.nativeEvent.key==="ArrowDown"||n.nativeEvent.key==="ArrowUp"){const a=y.current;if(a!=null){const m=a,x=n.currentTarget,d=D(m,!1),R=d.indexOf(x),re=n.nativeEvent.key==="ArrowDown"?1:-1;if(R===-1)return;const w=R+re;n.preventDefault(),w===-1?(s=f.current)==null||s.focus():(o=d[w===d.length?0:w])==null||o.focus()}}},[]),te=t.useCallback(n=>{I(n),i(q(n)?"opened":"closed")},[I]),E=t.useCallback(()=>{q(p)&&(window.clearTimeout(u.current),u.current=window.setTimeout(()=>{i(n=>n==="closed"?"opened":n)},100))},[p]),L=t.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>{i("dismissed")},100)},[]);return e.jsxs(c,{children:[e.jsx(me,{containerRef:Q,style:r.input,ariaExpanded:g==="opened",ariaControls:g==="opened"?j:"",enterKeyHint:"search",icon:H,role:"combobox",placeholder:K,value:p,disabled:U,error:Y,hideErrors:J,onChangeText:te,onChange:_,onFocus:E,onBlur:L,onKeyPress:ee,id:W,readOnly:z}),e.jsx(de,{id:j,role:"listbox",matchReferenceWidth:!0,onEscapeKey:C,referenceRef:f,autoFocus:!1,returnFocus:!0,visible:g==="opened"&&!T.isNotAsked(),underlay:!1,forcedMode:"Dropdown",children:e.jsx(c,{style:[r.list,{maxHeight:k*N}],children:T.match({NotAsked:()=>null,Loading:()=>e.jsx(F,{style:r.loader}),Done:n=>n.match({Error:s=>e.jsx(A,{name:"error-circle-regular",size:22,color:l.negative[500]}),Ok:s=>e.jsxs(c,{ref:y,style:r.listContainer,children:[s.length===0?e.jsxs(se,{justifyContent:"center",alignItems:"center",style:r.emptyList,children:[e.jsx(A,{name:"clipboard-search-regular",size:24,color:l.gray.primary}),e.jsx(oe,{height:8}),e.jsx(ae,{style:r.emptyListText,children:M})]}):e.jsx(ce,{keyExtractor:G,role:"list",data:s,style:r.flatList,ItemSeparatorComponent:e.jsx(pe,{}),renderItem:({item:o})=>{const a=O(o);return e.jsx(fe,{onFocus:E,onBlur:L,role:"listitem",onKeyDown:ne,style:({hovered:m,pressed:x,focused:d})=>[r.item,m&&r.hoveredItem,d&&r.focusedItem,x&&r.pressedItem,{height:k}],onPress:()=>{window.clearTimeout(u.current),v(!0),Promise.resolve(B(o)).finally(()=>{v(!1),C()})},children:typeof a=="string"||typeof a=="number"?e.jsx(ie,{numberOfLines:1,style:r.itemText,children:a}):a})}}),V,X?e.jsxs(c,{style:r.loaderAdditional,children:[e.jsx(c,{style:r.loaderAdditionalUnderlay}),e.jsx(F,{})]}):null]})})})})})]})};xe.__docgenInfo={description:"",methods:[],displayName:"LakeCombobox",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:`{
  close: () => void;
  open: () => void;
}`,signature:{properties:[{key:"close",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}},{key:"open",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}}],raw:"Ref<LakeComboboxRef>"},description:""},inputRef:{required:!1,tsType:{name:"Ref",elements:[{name:"unknown"}],raw:"Ref<unknown>"},description:""},value:{required:!0,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"AsyncData",elements:[{name:"Result",elements:[{name:"Array",elements:[{name:"I"}],raw:"I[]"},{name:"unknown"}],raw:"Result<I[], unknown>"}],raw:"AsyncData<Result<I[], unknown>>"},description:""},itemHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"64",computed:!1}},nbItemsDisplayed:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3.5",computed:!1}},ListFooterComponent:{required:!1,tsType:{name:"ReactNode"},description:""},onChange:{required:!1,tsType:{name:'intersection["onChange"]',raw:'LakeTextInputProps["onChange"]'},description:""},onValueChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSelectItem:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: I) => void | Promise<unknown>",signature:{arguments:[{type:{name:"I"},name:"value"}],return:{name:"union",raw:"void | Promise<unknown>",elements:[{name:"void"},{name:"Promise",elements:[{name:"unknown"}],raw:"Promise<unknown>"}]}}},description:""},renderItem:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: I) => ReactNode | null",signature:{arguments:[{type:{name:"I"},name:"item"}],return:{name:"union",raw:"ReactNode | null",elements:[{name:"ReactNode"},{name:"null"}]}}},description:""},keyExtractor:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: I) => string",signature:{arguments:[{type:{name:"I"},name:"item"}],return:{name:"string"}}},description:""},icon:{required:!1,tsType:{name:"unknown"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},emptyResultText:{required:!0,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"string"},description:""},hideErrors:{required:!1,tsType:{name:"boolean"},description:""},id:{required:!1,tsType:{name:"string"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};export{xe as L};
//# sourceMappingURL=LakeCombobox-DXqHckKB.js.map
