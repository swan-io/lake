{"version":3,"file":"LakeLabel-oTq-FyMw.js","sources":["../../../packages/lake/src/components/LakeLabel.tsx"],"sourcesContent":["import { ReactNode, useCallback, useRef, useState } from \"react\";\nimport {\n  StyleProp,\n  StyleSheet,\n  TextProps,\n  View,\n  ViewStyle,\n  unstable_createElement,\n} from \"react-native\";\nimport { match } from \"ts-pattern\";\nimport { v4 as uuid } from \"uuid\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { ColorVariants, colors, fonts, spacings, texts } from \"../constants/design\";\nimport { isNotNullish } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { LakeText } from \"./LakeText\";\nimport { Space, SpacingValue } from \"./Space\";\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: spacings[4],\n  },\n  label: {\n    ...texts.medium,\n    fontFamily: fonts.primary,\n    color: colors.gray[700],\n    display: \"flex\",\n  },\n  optionalLabel: {\n    fontStyle: \"italic\",\n  },\n});\n\ntype LabelType = \"form\" | \"formSmall\" | \"view\" | \"viewSmall\" | \"radioGroup\";\n\ntype Props = {\n  label: string;\n  optionalLabel?: string;\n  readOnlyColor?: string;\n  color?: ColorVariants;\n  type?: LabelType;\n  extra?: () => ReactNode;\n  help?: ReactNode;\n  render: (id: string) => ReactNode;\n  actions?: ReactNode;\n  readOnly?: boolean;\n  style?: StyleProp<ViewStyle>;\n  description?: string;\n};\n\nconst Label = (\n  props: TextProps & { htmlFor: string; onClick: (event: React.MouseEvent) => void },\n) => {\n  return unstable_createElement(\"label\", props);\n};\n\nconst defaultLabelType: LabelType = \"formSmall\";\n\nexport const LakeLabel = ({\n  label,\n  optionalLabel,\n  description,\n  extra,\n  readOnly = false,\n  color = \"current\",\n  readOnlyColor = colors[color].primary,\n  type = defaultLabelType,\n  help,\n  render,\n  actions,\n  style,\n}: Props) => {\n  const [id] = useState(() => uuid());\n  const containerRef = useRef<View>(null);\n\n  const onClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault();\n      if (containerRef.current != null) {\n        const container = containerRef.current as unknown as HTMLElement;\n        const target = container.querySelector(`[id=\"${id}\"]`) as HTMLElement;\n        target?.focus();\n      }\n    },\n    [id],\n  );\n\n  return (\n    <Box\n      style={[styles.container, style]}\n      direction=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"spaceBetween\"\n    >\n      <View style={commonStyles.fill} ref={containerRef}>\n        <Box direction=\"row\" justifyContent=\"spaceBetween\" alignItems=\"center\">\n          <Box direction=\"row\" alignItems=\"center\" shrink={1}>\n            {type === \"form\" || type === \"formSmall\" || type === \"radioGroup\" ? (\n              <Box shrink={1}>\n                <Label\n                  onClick={onClick}\n                  htmlFor={id}\n                  style={[styles.label, readOnly && { color: readOnlyColor }]}\n                >\n                  {label}\n\n                  {optionalLabel != null && (\n                    <LakeText color={colors.gray[400]} style={styles.optionalLabel}>\n                      {` - ${optionalLabel}`}\n                    </LakeText>\n                  )}\n                </Label>\n\n                {description != null && (\n                  <>\n                    <LakeText variant=\"smallRegular\">{description}</LakeText>\n                    <Space height={8} />\n                  </>\n                )}\n              </Box>\n            ) : (\n              <LakeText variant=\"medium\" color={readOnlyColor} id={id}>\n                {label}\n\n                {optionalLabel != null && (\n                  <LakeText color={colors.gray[400]} style={styles.optionalLabel}>\n                    {` - ${optionalLabel}`}\n                  </LakeText>\n                )}\n              </LakeText>\n            )}\n\n            {isNotNullish(extra) && extra()}\n          </Box>\n\n          {isNotNullish(help) && (\n            <>\n              <Space width={16} />\n\n              {help}\n            </>\n          )}\n        </Box>\n\n        <Space\n          height={match(type)\n            .returnType<SpacingValue>()\n            .with(\"formSmall\", \"viewSmall\", () => 4)\n            .with(\"form\", \"view\", () => 8)\n            .with(\"radioGroup\", () => 12)\n            .exhaustive()}\n        />\n\n        <View aria-labelledby={type === \"view\" || type === \"viewSmall\" ? id : undefined}>\n          {render(id)}\n        </View>\n      </View>\n\n      {isNotNullish(actions) && (\n        <>\n          <Space width={16} />\n\n          {actions}\n        </>\n      )}\n    </Box>\n  );\n};\n"],"names":["styles","StyleSheet","spacings","texts","fonts","colors","Label","props","unstable_createElement","defaultLabelType","LakeLabel","label","optionalLabel","description","extra","readOnly","color","readOnlyColor","type","help","render","actions","style","id","useState","uuid","containerRef","useRef","onClick","useCallback","event","target","jsxs","Box","View","commonStyles","jsx","LakeText","Fragment","Space","isNotNullish","match"],"mappings":"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"}