import{i as b,f as w,z as R,j as q,V as S}from"./ScrollView-BqTydURq.js";import{r as e}from"./iframe-9aSoULCZ.js";import{f as g,l as C}from"./array-BfAlyugE.js";const M=(t,s)=>{const u=e.useRef(t);e.useEffect(()=>{u.current=t},[t]),e.useEffect(()=>{const a=window.setInterval(()=>u.current(a),s);return()=>window.clearInterval(a)},[s])},k=({containerRef:t,onClickOutside:s,onFocusOutside:u})=>{const a=e.useRef(!1),i=e.useCallback(n=>{const r=n.target;return b(t.current)&&t.current instanceof HTMLElement&&t.current.contains(r)},[t]);e.useEffect(()=>{if(w(s))return;const n=c=>{i(c)||(a.current=!0)},r=c=>{!i(c)&&a.current&&s?.(c),a.current=!1};return document.addEventListener("mousedown",n,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",r,!0),()=>{document.removeEventListener("mousedown",n,!0),document.removeEventListener("mouseup",r,!0),document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",r,!0)}},[i,s]),e.useEffect(()=>{if(w(u))return;const n=r=>{i(r)||u?.(r)};return document.addEventListener("focusin",n,!0),()=>{document.removeEventListener("focusin",n,!0)}},[i,u])},x=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'].join(", "),L=(t=document.documentElement,s=!0)=>(s&&t.matches(x)?[t]:[]).concat(Array.from(t.querySelectorAll(x)));let f=0;const j=({ref:t,children:s,focusLock:u,onClickOutside:a,onEscapeKey:i,returnFocus:n,style:r,autoFocus:c})=>{const d=e.useRef(null),p=e.useRef(null),y=e.useRef(!1);e.useImperativeHandle(t,()=>({setInitiallyFocusedElement:o=>{p.current=o}}));const[v]=e.useState(f);e.useEffect(()=>(++f,()=>{--f}));const F=e.useCallback(({nativeEvent:o})=>{R(o.key).with("Escape",()=>{f===v+1&&i?.()}).with("Tab",()=>{if(!u)return;const l=d.current;if(b(l)){const m=o.target,E=L(l),h=g(E),T=C(E);m===h&&o.shiftKey&&(o.preventDefault(),T?.focus()),m===T&&!o.shiftKey&&(o.preventDefault(),h?.focus())}}).otherwise(()=>{})},[u,i,v]);e.useEffect(()=>{if(n)return p.current=document.activeElement,()=>{y.current||p.current?.focus()}},[n]),M(o=>{if(c){const l=d.current;if(b(l)){if(l.offsetWidth===0)return;const m=L(l);g(m)?.focus(),window.clearInterval(o)}}},16);const I=e.useCallback(()=>{y.current=!0},[]);return k({containerRef:d,onClickOutside:a,onFocusOutside:I}),q.jsx(S,{ref:d,onKeyDownCapture:F,style:r,children:s})};j.__docgenInfo={description:"",methods:[{name:"setInitiallyFocusedElement",docblock:null,modifiers:[],params:[{name:"element",optional:!1,type:null}],returns:null}],displayName:"FocusTrap",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:`{
  setInitiallyFocusedElement: (element: HTMLElement) => void;
}`,signature:{properties:[{key:"setInitiallyFocusedElement",value:{name:"signature",type:"function",raw:"(element: HTMLElement) => void",signature:{arguments:[{type:{name:"HTMLElement"},name:"element"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<FocusTrapRef>"},description:""},autoFocus:{required:!0,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},focusLock:{required:!0,tsType:{name:"boolean"},description:""},onClickOutside:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: TouchEvent | MouseEvent) => void",signature:{arguments:[{type:{name:"union",raw:"TouchEvent | MouseEvent",elements:[{name:"TouchEvent"},{name:"MouseEvent"}]},name:"event"}],return:{name:"void"}}},description:""},onEscapeKey:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},returnFocus:{required:!0,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""}}};export{j as F,L as g};
//# sourceMappingURL=FocusTrap-CwFCF3wQ.js.map
