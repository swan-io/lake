{"version":3,"file":"LakeSelect-ikT6lkBy.js","sources":["../../../packages/lake/src/components/LakeSelect.tsx"],"sourcesContent":["import { KeyboardEvent, ReactElement, ReactNode, Ref, useCallback, useRef } from \"react\";\nimport {\n  NativeSyntheticEvent,\n  StyleProp,\n  StyleSheet,\n  TextStyle,\n  View,\n  ViewStyle,\n} from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport {\n  ColorVariants,\n  colors,\n  invariantColors,\n  radii,\n  shadows,\n  spacings,\n  texts,\n} from \"../constants/design\";\nimport { useDisclosure } from \"../hooks/useDisclosure\";\nimport { useMergeRefs } from \"../hooks/useMergeRefs\";\nimport { getFocusableElements } from \"../utils/a11y\";\nimport { isNotNullish, isNullishOrEmpty } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { Fill } from \"./Fill\";\nimport { FlatList, FlatListRef } from \"./FlatList\";\nimport { Icon, IconName } from \"./Icon\";\nimport { LakeText } from \"./LakeText\";\nimport { LakeTooltip } from \"./LakeTooltip\";\nimport { Popover } from \"./Popover\";\nimport { Pressable } from \"./Pressable\";\nimport { Separator } from \"./Separator\";\nimport { Space } from \"./Space\";\n\nconst styles = StyleSheet.create({\n  normal: {\n    backgroundColor: colors.gray.contrast,\n    borderColor: colors.gray[100],\n    borderRadius: radii[6],\n    borderWidth: 1,\n    justifyContent: \"center\",\n    minWidth: 100,\n    paddingHorizontal: spacings[16],\n    height: 40,\n  },\n  borderless: {\n    justifyContent: \"center\",\n    height: 40,\n    paddingHorizontal: spacings[16],\n    borderRadius: radii[6],\n    transitionProperty: \"background-color\",\n    transitionDuration: \"150ms\",\n  },\n  small: {\n    paddingVertical: 5,\n  },\n  shadowed: {\n    position: \"absolute\",\n    opacity: 0,\n    left: 0,\n    top: 0,\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: radii[6],\n    boxShadow: shadows.tile,\n    transitionDuration: \"150ms\",\n    transitionProperty: \"opacity\",\n  },\n  hovered: {\n    opacity: 1,\n  },\n  selectPlaceholder: texts.placeholder,\n  selectSmallPlaceholder: texts.smallPlaceholder,\n  selected: {\n    color: colors.gray[800],\n  },\n  inputDisabled: {\n    backgroundColor: colors.gray[50],\n    borderColor: colors.gray[50],\n    cursor: \"not-allowed\",\n  },\n  listContent: {\n    paddingVertical: 12,\n  },\n  item: {\n    display: \"flex\",\n    paddingHorizontal: spacings[24],\n    paddingVertical: spacings[8],\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  itemHighlighted: {\n    backgroundColor: colors.gray[50],\n  },\n  itemFocused: {\n    boxShadow: `inset 0 0 0 1px ${colors.gray[500]}`,\n    borderRadius: radii[4],\n    outlineStyle: \"none\",\n  },\n  itemDisabled: {\n    opacity: 0.5,\n  },\n  selectListTitle: {\n    paddingHorizontal: spacings[24],\n    paddingVertical: spacings[12],\n  },\n  inputBorderlessDisabled: {\n    backgroundColor: invariantColors.transparent,\n  },\n  itemText: {\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\",\n  },\n  errorText: {\n    paddingTop: spacings[4],\n  },\n  focusedInput: {\n    borderColor: colors.gray[500],\n    boxShadow: shadows.tile,\n    outlineStyle: \"none\",\n  },\n  focusedWithoutShadow: {\n    boxShadow: \"none\",\n  },\n  errorContainer: {\n    borderColor: colors.negative[500],\n  },\n});\n\nexport type Item<V> = {\n  name: string;\n  value: V;\n  icon?: ReactNode;\n};\n\nexport type SelectProps<V, T extends Item<V> = Item<V>> = {\n  ref?: Ref<View>;\n  placeholder?: string;\n  items: T[];\n  matchReferenceWidth?: boolean;\n  mode?: \"normal\" | \"borderless\";\n  title?: string;\n  valueStyle?: StyleProp<TextStyle>;\n  PopoverFooter?: ReactElement | ((helpers: { close: () => void }) => ReactElement);\n  size?: \"small\" | \"large\";\n  icon?: IconName;\n  color?: ColorVariants;\n  disabled?: boolean;\n  value?: V;\n  onValueChange: (value: V) => void;\n  disabledItems?: { value: V; message?: string }[];\n  renderItem?: (item: T, isSelected: boolean) => ReactElement;\n  hideErrors?: boolean;\n  id?: string;\n  error?: string;\n  readOnly?: boolean;\n  style?: StyleProp<ViewStyle>;\n};\n\nexport const LakeSelect = <V, T extends Item<V> = Item<V>>({\n  ref,\n  title,\n  items,\n  valueStyle,\n  size,\n  color = \"current\",\n  disabled = false,\n  mode = \"normal\",\n  placeholder,\n  readOnly = false,\n  id,\n  matchReferenceWidth = true,\n  value,\n  error,\n  hideErrors = false,\n  icon,\n  onValueChange,\n  disabledItems = [],\n  renderItem,\n  PopoverFooter,\n  style,\n}: SelectProps<V, T>) => {\n  const inputRef = useRef<View>(null);\n  const listRef = useRef<FlatListRef>(null);\n  const typingTimeoutRef = useRef<number>(undefined);\n  const currentlyTypedRef = useRef<string>(undefined);\n  const listItemRefs = useRef<HTMLElement[]>(Array(items.length) as HTMLElement[]);\n\n  const mergedRef = useMergeRefs(inputRef, ref);\n\n  const [visible, { close, open }] = useDisclosure(false);\n\n  const hasValue = isNotNullish(value);\n  const isSmall = size === \"small\";\n  const itemValue = items.find(i => i.value === value);\n\n  const onKeyDown = useCallback(\n    (event: NativeSyntheticEvent<React.KeyboardEvent>) => {\n      // this made a search not visible for user as the native select component\n      if (event.nativeEvent.key.length === 1) {\n        event.nativeEvent.stopPropagation();\n\n        const currentlyTyped = `${\n          currentlyTypedRef.current ?? \"\"\n        }${event.nativeEvent.key.toLowerCase()}`;\n\n        currentlyTypedRef.current = currentlyTyped;\n\n        const selectedIndex = items.findIndex(item =>\n          item.name.toLowerCase().startsWith(currentlyTyped),\n        );\n\n        const selected = items[selectedIndex];\n\n        if (selected != null) {\n          if (visible) {\n            if (listRef.current?.element != null) {\n              listItemRefs.current[selectedIndex]?.focus();\n            }\n          } else {\n            onValueChange(selected.value);\n          }\n        }\n      }\n\n      if (typingTimeoutRef.current != null) {\n        window.clearTimeout(typingTimeoutRef.current);\n      }\n\n      typingTimeoutRef.current = window.setTimeout(() => {\n        currentlyTypedRef.current = undefined;\n      }, 300);\n    },\n    [items, onValueChange, visible],\n  );\n\n  const name = itemValue?.name ?? (value as unknown as string);\n\n  return (\n    <View style={commonStyles.fill}>\n      <Pressable\n        id={id}\n        ref={mergedRef}\n        aria-haspopup=\"listbox\"\n        role=\"button\"\n        aria-expanded={visible}\n        disabled={readOnly || disabled}\n        style={({ focused, hovered, pressed }) => [\n          mode === \"normal\" ? styles.normal : styles.borderless,\n          size === \"small\" && styles.small,\n          (disabled || readOnly) && styles.inputDisabled,\n          (visible || focused) && styles.focusedInput,\n          mode === \"borderless\" && [\n            {\n              backgroundColor: pressed\n                ? colors.gray[200]\n                : hovered\n                  ? colors.gray[100]\n                  : invariantColors.transparent,\n            },\n            styles.focusedWithoutShadow,\n          ],\n          mode !== \"borderless\" && error != null && styles.errorContainer,\n          (disabled || readOnly) && mode === \"borderless\" && styles.inputBorderlessDisabled,\n          style,\n        ]}\n        onPress={open}\n        onKeyDown={onKeyDown}\n        aria-errormessage={error}\n      >\n        {({ hovered }) => (\n          <>\n            {mode === \"normal\" && <View style={[styles.shadowed, hovered && styles.hovered]} />}\n\n            <Box direction=\"row\" justifyContent=\"spaceBetween\" alignItems=\"center\">\n              <Box direction=\"row\" alignItems=\"center\" style={commonStyles.fill}>\n                {icon && (\n                  <>\n                    <Icon color={colors[color].primary} name={icon} size={isSmall ? 16 : 18} />\n                    <Space width={8} />\n                  </>\n                )}\n\n                {hasValue ? (\n                  <Box direction=\"row\" alignItems=\"center\" style={commonStyles.fill}>\n                    {isNotNullish(itemValue?.icon) && (\n                      <>\n                        {itemValue?.icon}\n\n                        <Space width={12} />\n                      </>\n                    )}\n\n                    <LakeText\n                      color={colors.gray[900]}\n                      variant={isSmall ? \"smallRegular\" : \"regular\"}\n                      style={[styles.itemText, valueStyle]}\n                    >\n                      {name}\n                    </LakeText>\n                  </Box>\n                ) : (\n                  <LakeText\n                    style={[\n                      styles.itemText,\n                      styles.selectPlaceholder,\n                      isSmall && styles.selectSmallPlaceholder,\n                    ]}\n                  >\n                    {placeholder ?? \" \"}\n                  </LakeText>\n                )}\n              </Box>\n\n              <Fill minWidth={8} />\n\n              {!disabled && (\n                <Icon\n                  color={colors.gray[900]}\n                  name={visible ? \"chevron-up-filled\" : \"chevron-down-filled\"}\n                  size={16}\n                />\n              )}\n            </Box>\n          </>\n        )}\n      </Pressable>\n\n      {!hideErrors && (\n        <LakeText variant=\"smallRegular\" color={colors.negative[500]} style={styles.errorText}>\n          {error ?? \" \"}\n        </LakeText>\n      )}\n\n      <Popover\n        role=\"listbox\"\n        matchReferenceMinWidth={matchReferenceWidth}\n        onDismiss={close}\n        referenceRef={inputRef}\n        returnFocus={true}\n        visible={visible}\n      >\n        {isNotNullish(title) && (\n          <>\n            <LakeText variant=\"semibold\" color={colors.gray[900]} style={styles.selectListTitle}>\n              {title}\n            </LakeText>\n\n            <Separator />\n          </>\n        )}\n\n        <FlatList\n          role=\"list\"\n          data={items}\n          ref={listRef}\n          contentContainerStyle={styles.listContent}\n          onKeyDown={(event: NativeSyntheticEvent<KeyboardEvent<HTMLDivElement>>) => {\n            const { key } = event.nativeEvent;\n\n            if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n              event.preventDefault();\n\n              if (isNotNullish(event.currentTarget)) {\n                const focusableElements = getFocusableElements(\n                  event.currentTarget as unknown as HTMLDivElement,\n                );\n\n                const current = focusableElements.indexOf(event.target as unknown as HTMLElement);\n                const nextIndex = key === \"ArrowDown\" ? current + 1 : current - 1;\n\n                focusableElements[nextIndex]?.focus();\n              }\n            }\n          }}\n          keyExtractor={(_, index) => `select-item-${index}`}\n          renderItem={({ item, index }) => {\n            const isSelected = value === item.value;\n            const disablement = disabledItems.find(({ value }) => value === item.value);\n            const content =\n              renderItem != null ? (\n                renderItem(item, isSelected)\n              ) : (\n                <>\n                  {isNotNullish(item.icon) && (\n                    <>\n                      {item.icon}\n\n                      <Space width={12} />\n                    </>\n                  )}\n\n                  <LakeText\n                    color={colors.gray[900]}\n                    numberOfLines={1}\n                    style={[styles.itemText, isSelected && styles.selected]}\n                  >\n                    {item.name}\n                  </LakeText>\n                </>\n              );\n\n            return (\n              <LakeTooltip\n                placement=\"right\"\n                content={disablement?.message}\n                disabled={isNullishOrEmpty(disablement?.message)}\n              >\n                <Pressable\n                  ref={element => {\n                    listItemRefs.current[index] = element as unknown as HTMLElement;\n                  }}\n                  onKeyDown={onKeyDown}\n                  disabled={isNotNullish(disablement)}\n                  style={({ hovered, focused }) => [\n                    styles.item,\n                    (hovered || isSelected) && styles.itemHighlighted,\n                    focused && styles.itemFocused,\n                    isNotNullish(disablement) && styles.itemDisabled,\n                  ]}\n                  role=\"option\"\n                  aria-selected={true}\n                  onPress={() => {\n                    onValueChange(item.value);\n                    close();\n                  }}\n                >\n                  {content}\n\n                  <Fill minWidth={12} />\n\n                  {isSelected && (\n                    <Icon color={colors.positive[500]} name=\"checkmark-filled\" size={14} />\n                  )}\n                </Pressable>\n              </LakeTooltip>\n            );\n          }}\n        />\n\n        {typeof PopoverFooter === \"function\" ? PopoverFooter({ close }) : PopoverFooter}\n      </Popover>\n    </View>\n  );\n};\n"],"names":["styles","StyleSheet","colors","radii","spacings","shadows","texts","invariantColors","LakeSelect","ref","title","items","valueStyle","size","color","disabled","mode","placeholder","readOnly","id","matchReferenceWidth","value","error","hideErrors","icon","onValueChange","disabledItems","renderItem","PopoverFooter","style","inputRef","useRef","listRef","typingTimeoutRef","currentlyTypedRef","listItemRefs","mergedRef","useMergeRefs","visible","close","open","useDisclosure","hasValue","isNotNullish","isSmall","itemValue","i","onKeyDown","useCallback","event","currentlyTyped","selectedIndex","item","selected","name","jsxs","View","commonStyles","jsx","Pressable","focused","hovered","pressed","Fragment","Box","Icon","Space","LakeText","Fill","Popover","Separator","FlatList","key","focusableElements","getFocusableElements","current","nextIndex","_","index","isSelected","disablement","content","LakeTooltip","isNullishOrEmpty","element"],"mappings":"2gBAkCA,MAAMA,EAASC,GAAW,OAAO,CAC/B,OAAQ,CACN,gBAAiBC,EAAO,KAAK,SAC7B,YAAaA,EAAO,KAAK,GAAG,EAC5B,aAAcC,EAAM,CAAC,EACrB,YAAa,EACb,eAAgB,SAChB,SAAU,IACV,kBAAmBC,EAAS,EAAE,EAC9B,OAAQ,EAAA,EAEV,WAAY,CACV,eAAgB,SAChB,OAAQ,GACR,kBAAmBA,EAAS,EAAE,EAC9B,aAAcD,EAAM,CAAC,EACrB,mBAAoB,mBACpB,mBAAoB,OAAA,EAEtB,MAAO,CACL,gBAAiB,CAAA,EAEnB,SAAU,CACR,SAAU,WACV,QAAS,EACT,KAAM,EACN,IAAK,EACL,MAAO,OACP,OAAQ,OACR,aAAcA,EAAM,CAAC,EACrB,UAAWE,EAAQ,KACnB,mBAAoB,QACpB,mBAAoB,SAAA,EAEtB,QAAS,CACP,QAAS,CAAA,EAEX,kBAAmBC,EAAM,YACzB,uBAAwBA,EAAM,iBAC9B,SAAU,CACR,MAAOJ,EAAO,KAAK,GAAG,CAAA,EAExB,cAAe,CACb,gBAAiBA,EAAO,KAAK,EAAE,EAC/B,YAAaA,EAAO,KAAK,EAAE,EAC3B,OAAQ,aAAA,EAEV,YAAa,CACX,gBAAiB,EAAA,EAEnB,KAAM,CACJ,QAAS,OACT,kBAAmBE,EAAS,EAAE,EAC9B,gBAAiBA,EAAS,CAAC,EAC3B,cAAe,MACf,WAAY,QAAA,EAEd,gBAAiB,CACf,gBAAiBF,EAAO,KAAK,EAAE,CAAA,EAEjC,YAAa,CACX,UAAW,mBAAmBA,EAAO,KAAK,GAAG,CAAC,GAC9C,aAAcC,EAAM,CAAC,EACrB,aAAc,MAAA,EAEhB,aAAc,CACZ,QAAS,EAAA,EAEX,gBAAiB,CACf,kBAAmBC,EAAS,EAAE,EAC9B,gBAAiBA,EAAS,EAAE,CAAA,EAE9B,wBAAyB,CACvB,gBAAiBG,EAAgB,WAAA,EAEnC,SAAU,CACR,SAAU,SACV,WAAY,SACZ,aAAc,UAAA,EAEhB,UAAW,CACT,WAAYH,EAAS,CAAC,CAAA,EAExB,aAAc,CACZ,YAAaF,EAAO,KAAK,GAAG,EAC5B,UAAWG,EAAQ,KACnB,aAAc,MAAA,EAEhB,qBAAsB,CACpB,UAAW,MAAA,EAEb,eAAgB,CACd,YAAaH,EAAO,SAAS,GAAG,CAAA,CAEpC,CAAC,EAgCYM,GAAa,CAAiC,CACzD,IAAAC,EACA,MAAAC,EACA,MAAAC,EACA,WAAAC,EACA,KAAAC,EACA,MAAAC,EAAQ,UACR,SAAAC,EAAW,GACX,KAAAC,EAAO,SACP,YAAAC,EACA,SAAAC,EAAW,GACX,GAAAC,EACA,oBAAAC,EAAsB,GACtB,MAAAC,EACA,MAAAC,EACA,WAAAC,EAAa,GACb,KAAAC,EACA,cAAAC,EACA,cAAAC,EAAgB,CAAA,EAChB,WAAAC,EACA,cAAAC,EACA,MAAAC,EACF,IAAyB,CACvB,MAAMC,EAAWC,EAAAA,OAAa,IAAI,EAC5BC,EAAUD,EAAAA,OAAoB,IAAI,EAClCE,EAAmBF,EAAAA,OAAe,MAAS,EAC3CG,EAAoBH,EAAAA,OAAe,MAAS,EAC5CI,EAAeJ,EAAAA,OAAsB,MAAMpB,EAAM,MAAM,CAAkB,EAEzEyB,GAAYC,GAAaP,EAAUrB,CAAG,EAEtC,CAAC6B,EAAS,CAAE,MAAAC,EAAO,KAAAC,GAAM,EAAIC,GAAc,EAAK,EAEhDC,GAAWC,EAAatB,CAAK,EAC7BuB,EAAU/B,IAAS,QACnBgC,EAAYlC,EAAM,KAAKmC,GAAKA,EAAE,QAAUzB,CAAK,EAE7C0B,EAAYC,EAAAA,YACfC,GAAqD,CAEpD,GAAIA,EAAM,YAAY,IAAI,SAAW,EAAG,CACtCA,EAAM,YAAY,gBAAA,EAElB,MAAMC,EAAiB,GACrBhB,EAAkB,SAAW,EAC/B,GAAGe,EAAM,YAAY,IAAI,YAAA,CAAa,GAEtCf,EAAkB,QAAUgB,EAE5B,MAAMC,EAAgBxC,EAAM,aAC1ByC,EAAK,KAAK,YAAA,EAAc,WAAWF,CAAc,CAAA,EAG7CG,EAAW1C,EAAMwC,CAAa,EAEhCE,GAAY,OACVf,EACEN,EAAQ,SAAS,SAAW,MAC9BG,EAAa,QAAQgB,CAAa,GAAG,MAAA,EAGvC1B,EAAc4B,EAAS,KAAK,EAGlC,CAEIpB,EAAiB,SAAW,MAC9B,OAAO,aAAaA,EAAiB,OAAO,EAG9CA,EAAiB,QAAU,OAAO,WAAW,IAAM,CACjDC,EAAkB,QAAU,MAC9B,EAAG,GAAG,CACR,EACA,CAACvB,EAAOc,EAAea,CAAO,CAAA,EAG1BgB,GAAOT,GAAW,MAASxB,EAEjC,OACEkC,EAAAA,KAACC,EAAA,CAAK,MAAOC,EAAa,KACxB,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACC,GAAAxC,EACA,IAAKiB,GACL,gBAAc,UACd,KAAK,SACL,gBAAeE,EACf,SAAUpB,GAAYH,EACtB,MAAO,CAAC,CAAE,QAAA6C,EAAS,QAAAC,EAAS,QAAAC,KAAc,CACxC9C,IAAS,SAAWhB,EAAO,OAASA,EAAO,WAC3Ca,IAAS,SAAWb,EAAO,OAC1Be,GAAYG,IAAalB,EAAO,eAChCsC,GAAWsB,IAAY5D,EAAO,aAC/BgB,IAAS,cAAgB,CACvB,CACE,gBAAiB8C,EACb5D,EAAO,KAAK,GAAG,EACf2D,EACE3D,EAAO,KAAK,GAAG,EACfK,EAAgB,WAAA,EAExBP,EAAO,oBAAA,EAETgB,IAAS,cAAgBM,GAAS,MAAQtB,EAAO,gBAChDe,GAAYG,IAAaF,IAAS,cAAgBhB,EAAO,wBAC1D6B,EAAA,EAEF,QAASW,GACT,UAAAO,EACA,oBAAmBzB,EAElB,SAAA,CAAC,CAAE,QAAAuC,CAAA,IACFN,EAAAA,KAAAQ,EAAAA,SAAA,CACG,SAAA,CAAA/C,IAAS,UAAY0C,MAACF,EAAA,CAAK,MAAO,CAACxD,EAAO,SAAU6D,GAAW7D,EAAO,OAAO,CAAA,CAAG,SAEhFgE,EAAA,CAAI,UAAU,MAAM,eAAe,eAAe,WAAW,SAC5D,SAAA,CAAAT,EAAAA,KAACS,GAAI,UAAU,MAAM,WAAW,SAAS,MAAOP,EAAa,KAC1D,SAAA,CAAAjC,GACC+B,EAAAA,KAAAQ,WAAA,CACE,SAAA,CAAAL,EAAAA,IAACO,EAAA,CAAK,MAAO/D,EAAOY,CAAK,EAAE,QAAS,KAAMU,EAAM,KAAMoB,EAAU,GAAK,EAAA,CAAI,EACzEc,EAAAA,IAACQ,EAAA,CAAM,MAAO,CAAA,CAAG,CAAA,EACnB,EAGDxB,UACEsB,EAAA,CAAI,UAAU,MAAM,WAAW,SAAS,MAAOP,EAAa,KAC1D,SAAA,CAAAd,EAAaE,GAAW,IAAI,GAC3BU,EAAAA,KAAAQ,EAAAA,SAAA,CACG,SAAA,CAAAlB,GAAW,KAEZa,EAAAA,IAACQ,EAAA,CAAM,MAAO,EAAA,CAAI,CAAA,EACpB,EAGFR,EAAAA,IAACS,EAAA,CACC,MAAOjE,EAAO,KAAK,GAAG,EACtB,QAAS0C,EAAU,eAAiB,UACpC,MAAO,CAAC5C,EAAO,SAAUY,CAAU,EAElC,SAAA0C,EAAA,CAAA,CACH,CAAA,CACF,EAEAI,EAAAA,IAACS,EAAA,CACC,MAAO,CACLnE,EAAO,SACPA,EAAO,kBACP4C,GAAW5C,EAAO,sBAAA,EAGnB,SAAAiB,GAAe,GAAA,CAAA,CAClB,EAEJ,EAEAyC,EAAAA,IAACU,EAAA,CAAK,SAAU,CAAA,CAAG,EAElB,CAACrD,GACA2C,EAAAA,IAACO,EAAA,CACC,MAAO/D,EAAO,KAAK,GAAG,EACtB,KAAMoC,EAAU,oBAAsB,sBACtC,KAAM,EAAA,CAAA,CACR,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,EAIH,CAACf,GACAmC,EAAAA,IAACS,EAAA,CAAS,QAAQ,eAAe,MAAOjE,EAAO,SAAS,GAAG,EAAG,MAAOF,EAAO,UACzE,YAAS,IACZ,EAGFuD,EAAAA,KAACc,GAAA,CACC,KAAK,UACL,uBAAwBjD,EACxB,UAAWmB,EACX,aAAcT,EACd,YAAa,GACb,QAAAQ,EAEC,SAAA,CAAAK,EAAajC,CAAK,GACjB6C,EAAAA,KAAAQ,EAAAA,SAAA,CACE,SAAA,CAAAL,EAAAA,IAACS,EAAA,CAAS,QAAQ,WAAW,MAAOjE,EAAO,KAAK,GAAG,EAAG,MAAOF,EAAO,gBACjE,SAAAU,CAAA,CACH,QAEC4D,GAAA,CAAA,CAAU,CAAA,EACb,EAGFZ,EAAAA,IAACa,GAAA,CACC,KAAK,OACL,KAAM5D,EACN,IAAKqB,EACL,sBAAuBhC,EAAO,YAC9B,UAAYiD,GAA+D,CACzE,KAAM,CAAE,IAAAuB,GAAQvB,EAAM,YAEtB,IAAIuB,IAAQ,aAAeA,IAAQ,aACjCvB,EAAM,eAAA,EAEFN,EAAaM,EAAM,aAAa,GAAG,CACrC,MAAMwB,EAAoBC,GACxBzB,EAAM,aAAA,EAGF0B,EAAUF,EAAkB,QAAQxB,EAAM,MAAgC,EAC1E2B,EAAYJ,IAAQ,YAAcG,EAAU,EAAIA,EAAU,EAEhEF,EAAkBG,CAAS,GAAG,MAAA,CAChC,CAEJ,EACA,aAAc,CAACC,EAAGC,IAAU,eAAeA,CAAK,GAChD,WAAY,CAAC,CAAE,KAAA1B,EAAM,MAAA0B,KAAY,CAC/B,MAAMC,EAAa1D,IAAU+B,EAAK,MAC5B4B,EAActD,EAAc,KAAK,CAAC,CAAE,MAAAL,KAAYA,IAAU+B,EAAK,KAAK,EACpE6B,EACJtD,GAAc,KACZA,EAAWyB,EAAM2B,CAAU,EAE3BxB,EAAAA,KAAAQ,WAAA,CACG,SAAA,CAAApB,EAAaS,EAAK,IAAI,GACrBG,EAAAA,KAAAQ,EAAAA,SAAA,CACG,SAAA,CAAAX,EAAK,KAENM,EAAAA,IAACQ,EAAA,CAAM,MAAO,EAAA,CAAI,CAAA,EACpB,EAGFR,EAAAA,IAACS,EAAA,CACC,MAAOjE,EAAO,KAAK,GAAG,EACtB,cAAe,EACf,MAAO,CAACF,EAAO,SAAU+E,GAAc/E,EAAO,QAAQ,EAErD,SAAAoD,EAAK,IAAA,CAAA,CACR,EACF,EAGJ,OACEM,EAAAA,IAACwB,GAAA,CACC,UAAU,QACV,QAASF,GAAa,QACtB,SAAUG,GAAiBH,GAAa,OAAO,EAE/C,SAAAzB,EAAAA,KAACI,EAAA,CACC,IAAKyB,GAAW,CACdjD,EAAa,QAAQ2C,CAAK,EAAIM,CAChC,EACA,UAAArC,EACA,SAAUJ,EAAaqC,CAAW,EAClC,MAAO,CAAC,CAAE,QAAAnB,EAAS,QAAAD,MAAc,CAC/B5D,EAAO,MACN6D,GAAWkB,IAAe/E,EAAO,gBAClC4D,IAAW5D,EAAO,YAClB2C,EAAaqC,CAAW,GAAKhF,EAAO,YAAA,EAEtC,KAAK,SACL,gBAAe,GACf,QAAS,IAAM,CACbyB,EAAc2B,EAAK,KAAK,EACxBb,EAAA,CACF,EAEC,SAAA,CAAA0C,EAEDvB,EAAAA,IAACU,EAAA,CAAK,SAAU,EAAA,CAAI,EAEnBW,GACCrB,EAAAA,IAACO,EAAA,CAAK,MAAO/D,EAAO,SAAS,GAAG,EAAG,KAAK,mBAAmB,KAAM,EAAA,CAAI,CAAA,CAAA,CAAA,CAEzE,CAAA,CAGN,CAAA,CAAA,EAGD,OAAO0B,GAAkB,WAAaA,EAAc,CAAE,MAAAW,CAAA,CAAO,EAAIX,CAAA,CAAA,CAAA,CACpE,EACF,CAEJ"}