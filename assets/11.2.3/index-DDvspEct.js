import{r as u}from"./index-DXKZGL6g.js";import"./with-selector-qnrv-mjv.js";var v=e=>e[e.length-1],f=()=>{},E=e=>e!=="",P=e=>e[0]==="/"?e:"/"+e,U=(e,n)=>e.length===n.length&&e.every((r,a)=>r===n[a]),x=e=>{const n=new URLSearchParams(e),r={};for(const[a,o]of n){const s=r[a];s!=null?r[a]=typeof s=="string"?[s,o]:s.concat(o):r[a]=o}return r},R=/=&/g,C=/=$/g,I=e=>{const n=Object.keys(e);if(n.length===0)return"";const r=new URLSearchParams;n.sort();for(const o of n){const s=e[o];if(s!=null)if(typeof s=="string")r.append(o,s);else for(const t of s)r.append(o,t)}const a=r.toString().replace(R,"&").replace(C,"");return a===""?"":"?"+a},L=!1,b=e=>{const n=e.indexOf("#"),r=P(n<0?e:e.substring(0,n)),a=r.indexOf("?");return a<0?{path:r,search:""}:{path:r.substring(0,a),search:r.substring(a)}},g=e=>{const n=b(e),r=n.path.substring(1),a=r!==""?L?r.split("/").map(decodeURIComponent):r.split("/").filter(E).map(decodeURIComponent):[],o=n.search!==""?x(n.search):{},s="/"+a.map(encodeURIComponent).join("/"),t=I(o),c=s+t;return{path:a,search:o,raw:{path:s,search:t},toString(){return c}}},m=e=>{e.preventDefault(),e.returnValue=""},_=()=>{const e=new Set;let n=[];const r=window.history,a=window.location;let o=g(a.pathname+a.search);const s=()=>{const t=g(a.pathname+a.search);if(t.toString()===o.toString())return;L=!0;const c=t.raw.search!==o.raw.search,l=c?{}:o.search;if(c){for(const i in t.search)if(Object.prototype.hasOwnProperty.call(t.search,i)){const p=t.search[i];if(p==null)continue;const h=o.search[i];h==null||typeof h=="string"||typeof p=="string"||!U(p,h)?l[i]=p:l[i]=h}}o={path:t.raw.path!==o.raw.path?t.path:o.path,search:l,raw:t.raw,toString:t.toString},e.forEach(i=>i(o))};return window.addEventListener("popstate",()=>{s()}),{get location(){return o},subscribe:t=>(e.add(t),()=>{e.delete(t)}),push:t=>{const c=v(n);if(c==null||window.confirm(c.message)){try{r.pushState(null,"",t)}catch{a.assign(t)}s()}},replace:t=>{const c=v(n);(c==null||window.confirm(c.message))&&(r.replaceState(null,"",t),s())},block:t=>(n.push(t),n.length===1&&window.addEventListener("beforeunload",m,{capture:!0}),()=>{n=n.filter(({id:c})=>c!==t.id),n.length===0&&window.removeEventListener("beforeunload",m,{capture:!0})})}},d=typeof window<"u"?_():{location:g("/"),subscribe:()=>f,push:f,replace:f,block:()=>f},H=()=>d.location,y=d.subscribe,O=d.push,A=d.replace,S=u.createContext(H);S.Provider;var k=()=>u.useContext(S),$=()=>{const e=k();return u.useSyncExternalStore(y,e,e)},G=({href:e,replace:n=!1,target:r})=>{const a=u.useMemo(()=>b(e).path,[e]),o=k(),s=()=>a===o().raw.path,t=u.useSyncExternalStore(y,s,s),c=n||t,l=r==null||r==="_self";return{active:t,onClick:u.useCallback(i=>{!i.defaultPrevented&&l&&i.button===0&&!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&(i.preventDefault(),c?A(e):O(e))},[c,l,e])}},K=u.forwardRef(({onClick:e,className:n,replace:r,style:a,target:o,to:s,activeClassName:t,activeStyle:c,...l},i)=>{const{active:p,onClick:h}=G({href:s,replace:r,target:o});return u.createElement("a",{...l,ref:i,href:s,onClick:w=>{e==null||e(w),h(w)},target:o,className:!p||t==null?n:n==null?t:`${n} ${t}`,style:!p||c==null?a:a==null?c:{...a,...c}})});K.displayName="Link";export{K as L,$ as a,G as u};
//# sourceMappingURL=index-DDvspEct.js.map
