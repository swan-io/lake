import{i as l,z as G,j as e,B as se,s as ie,V as K,I as M,S as k,T as H,L as le,N as C,b as ee,c as x,ac as ce,a as z,t as J,d as ae,r as ne,f as ue,u as te,e as de}from"./ScrollView-DeeiMF59.js";import{a as he}from"./index-Afi2_9JE.js";import{r as i}from"./iframe-3MLf18yX.js";import{a as re,u as pe}from"./Pressable-nKiXRhtJ.js";import{n as fe}from"./function-Dr8kDDoe.js";import{F as me}from"./FocusTrap-QXwcm9sF.js";import{L as we}from"./Link-D4HuNFld.js";import{T as ge}from"./TransitionView-DNBNvXf4.js";const xe=40,r=ie.create({container:{borderBottomWidth:1,borderBottomColor:x.gray[100],zIndex:10},link:{...J.medium,position:"relative",color:x.gray[700],height:xe,whiteSpace:"nowrap",display:"flex",flexDirection:"row",alignItems:"center"},activeLink:{color:x.current[500],boxShadow:`inset 0 -2px ${x.gray[700]}`},hoveredLink:{boxShadow:`inset 0 -2px ${x.gray[700]}`},underline:{position:"absolute",bottom:0,height:2,width:1,backgroundColor:x.current[500]},animatedUnderline:{transformOrigin:"0 0",transition:"200ms ease-in-out transform"},placeholder:{position:"absolute",top:0,left:0,right:0,visibility:"hidden",flexDirection:"row",alignItems:"flex-end",overflow:"hidden",pointerEvents:"none"},count:{...J.smallRegular,color:x.current[500],backgroundColor:x.current[50],borderColor:x.current[100],borderWidth:1,borderRadius:ne[4],paddingHorizontal:z[4],minWidth:z[24],display:"inline-block",textAlign:"center"},dropdownHandleContainer:{alignItems:"center",justifyContent:"center",alignSelf:"stretch"},dropdownPlacement:{position:"absolute",right:0,top:"100%"},dropdown:{position:"absolute",right:0,top:"100%",backgroundColor:ee.accented,borderRadius:ne[8],boxShadow:ae.modal,paddingVertical:z[8]},dropdownLink:{...J.regular,paddingHorizontal:z[16],paddingVertical:z[8],whiteSpace:"nowrap"},dropdownLinkTextHovered:{backgroundColor:x.gray[50]},dropdownLinkTextActive:{boxShadow:`inset 3px 0 ${x.current.primary}`,color:x.current.primary},separator:{position:"absolute",top:0,left:ce[16],bottom:0,width:1,backgroundColor:x.gray[100]},sticky:{backgroundColor:ee.default,position:"sticky",top:-1}}),Q=({ref:d,children:a,style:T,tab:y,onChange:w,activeTabId:p,onBlur:F,onFocus:u,onPress:n})=>G(y).with({url:C.string},({url:h})=>e.jsx(we,{ref:d,to:h,style:T,onFocus:u,onBlur:F,onPress:n,children:a})).with({id:C.string},({id:h})=>{const f=h===p;return e.jsx(re,{ref:d,style:j=>T({...j,active:f}),onPress:()=>{w==null||w(h),n==null||n()},onFocus:u,onBlur:F,children:a})}).exhaustive(),ye=({tabs:d,onHoverStart:a,onHoverEnd:T,onLinkFocus:y,onLinkBlur:w,onLinkPress:p,activeTabId:F,onChange:u})=>{const n=i.useRef(null);return te(n,{onHoverStart:a,onHoverEnd:T}),e.jsx(K,{role:"menu",style:r.dropdown,ref:n,children:d.map(h=>{const f=D(h);return e.jsx(Q,{onChange:u,activeTabId:F,tab:h,onFocus:y,onBlur:w,onPress:p,role:"menuitem",ariaCurrentValue:"location",style:({active:j,hovered:q})=>[r.dropdownLink,j&&r.dropdownLinkTextActive,q&&r.dropdownLinkTextHovered],children:h.label},f)})})},Fe=new Set(["ForcedOpen","OpenFromFocus"]),je=new Set(["Open","ForcedOpen","OpenFromFocus"]),ke=new Set(["ForcedOpen"]),be=({ref:d,tabs:a,otherLabel:T,currentUrl:y,activeTabId:w,onChange:p})=>{const[F,u]=i.useReducer((t,c)=>G([c,t]).returnType().with(["ForceToggle","Closed"],["ForceToggle","Open"],["ForceToggle","ForcedClosed"],()=>"ForcedOpen").with(["ForceToggle","OpenFromFocus"],["ForceToggle","ForcedOpen"],()=>"ForcedClosed").with(["ForceClose",C.any],()=>"ForcedClosed").with(["FocusHandle","ForcedClosed"],()=>"Closed").with(["Open","ForcedOpen"],["FocusHandle","ForcedOpen"],["Close","ForcedOpen"],()=>"ForcedOpen").with(["Open",C.any],()=>"Open").with(["FocusHandle",C.any],()=>"OpenFromFocus").with(["Close",C.any],()=>"Closed").exhaustive(),"Closed"),n=i.useRef(void 0),h=i.useRef(null),f=i.useRef(null),j=i.useRef(null),{onHandleFocus:q,onLinkFocus:A,onAnyBlur:V,onHoverStart:P,onHoverEnd:_,onPress:W,onPressOutside:E,onEscapeKey:N}=i.useMemo(()=>({onHandleFocus:t=>{if(ue(f.current))return;j.current=Date.now();const c=f.current,o=t;c.contains(o.relatedTarget)||(l(n.current)&&clearTimeout(n.current),u("FocusHandle"))},onLinkFocus:()=>{l(n.current)&&clearTimeout(n.current),u("Open")},onAnyBlur:()=>{l(n.current)&&clearTimeout(n.current),n.current=window.setTimeout(()=>{u("Close")},300)},onHoverStart:()=>{l(n.current)&&clearTimeout(n.current),u("Open")},onHoverEnd:()=>{l(n.current)&&clearTimeout(n.current),n.current=window.setTimeout(()=>{u("Close")},300)},onPress:()=>{j.current!=null&&Date.now()-j.current<32||(l(n.current)&&clearTimeout(n.current),u("ForceToggle"))},onPressOutside:t=>{l(h.current)&&h.current.contains(t.target)||(l(n.current)&&clearTimeout(n.current),u("ForceClose"),n.current=window.setTimeout(()=>{u("Close")},300))},onEscapeKey:()=>{l(n.current)&&clearTimeout(n.current),u("ForceClose"),n.current=window.setTimeout(()=>{u("Close")},300)}}),[]);i.useEffect(()=>()=>{l(n.current)&&clearTimeout(n.current)},[]);const U=je.has(F),$=Fe.has(F),S=ke.has(F);te(h,{onHoverStart:P,onHoverEnd:_});const I=pe(f,d),X=i.useMemo(()=>a.find(t=>Y({activeTabId:w,currentLocationURL:y,tab:t})),[w,y,a]);return e.jsxs(K,{style:r.dropdownHandleContainer,ref:I,children:[e.jsxs(re,{ref:h,role:"button","aria-expanded":U,"aria-haspopup":"true",onFocus:q,onBlur:V,onPress:W,style:({hovered:t})=>[r.link,l(X)?r.activeLink:t?r.hoveredLink:null],children:[e.jsx(H,{children:T}),e.jsx(k,{width:8}),e.jsx(H,{style:r.count,children:a.length}),e.jsx(k,{width:4}),e.jsx(M,{name:"chevron-down-filled",size:12})]}),e.jsx(ge,{...de.fadeAndSlideInFromBottom,style:r.dropdownPlacement,children:U?e.jsx(me,{autoFocus:$,focusLock:S,returnFocus:S,onClickOutside:E,onEscapeKey:S?N:void 0,children:e.jsx(ye,{onChange:p,activeTabId:w,tabs:a,onHoverStart:P,onHoverEnd:_,onLinkFocus:A,onLinkBlur:V,onLinkPress:N})}):null})]})},Y=({tab:d,activeTabId:a,currentLocationURL:T})=>G(d).with({url:C.string},({url:y})=>T.startsWith(y)).with({id:C.string},({id:y})=>l(a)&&y===a).exhaustive(),D=d=>G(d).with({url:C.string},({url:a})=>a).with({id:C.string},({id:a})=>a).exhaustive(),Le=({tabs:d,otherLabel:a,hideIfSingleItem:T=!0,sticky:y=!1,padding:w,activeTabId:p,onChange:F})=>{const u=i.useRef(null),n=i.useRef(null),h=i.useRef(null),f=i.useRef({}),j=i.useRef({}),[{left:q,width:A},V]=i.useState({left:0,width:0}),[P,_]=i.useState(!1),[[W,E],N]=i.useState([[],[]]),U=he(),{path:$}=U,S=U.toString();i.useEffect(()=>{if(l(f.current)){const t=Object.entries(f.current),c=u.current;for(const[o,m]of t)if((o===p||"/"+$.join("/")===o)&&l(m)&&l(c)){m.measureLayout(c,(b,R,L)=>{V({left:b-(w??0),width:L})},fe);return}}V({left:0,width:0})},[$,W,E,w,p]),i.useEffect(()=>{_(A>0)},[A]);const I=i.useCallback(({width:t})=>{const c=d.map(s=>{if(j.current){const O=D(s),v=j.current[O];if(l(v)){const B=v.getBoundingClientRect().width;return{tab:s,width:B+32}}else return{tab:s,width:0}}else return{tab:s,width:0}}),o=[],m=[];let b=0;c.forEach(s=>{if(b+=s.width,b<t)o.push({...s.tab,width:s.width});else if(Y({activeTabId:p,currentLocationURL:S,tab:s.tab})){for(;o.length!==0&&o.reduce((O,v)=>O+v.width,0)+(s.width+16)>=t;){const O=o.pop();l(O)&&(m.unshift(O),b-=O.width)}o.push({...s.tab,width:s.width})}else m.push({...s.tab,width:s.width})});const R=h.current;let L=100;l(R)&&(L=R.getBoundingClientRect().width);const g=o.findIndex(s=>Y({activeTabId:p,currentLocationURL:S,tab:s}));if(g!==-1){const s=o[g],O=(s==null?void 0:s.width)??0,v=[...o.slice(0,g),...o.slice(g+1)];for(;v.length!==0&&v.reduce((B,oe)=>B+oe.width,0)+O+(m.length>=1?L:0)>=t;){const B=v.pop();l(B)&&m.unshift(B)}const Z=[...v.slice(0,g),...s!=null?[s]:[],...v.slice(g)];N([Z,m])}else N([o,m])},[d,p,S]),X=i.useCallback(({target:t,nativeEvent:{layout:{width:c}}})=>{I({container:t,width:c})},[I]);return i.useLayoutEffect(()=>{const t=n.current;if(t){const c=t,o=c.getBoundingClientRect().width;I({container:c,width:o})}},[I]),d.length<=1&&T?null:e.jsxs(se,{alignItems:"center",direction:"row",role:"tablist",ref:u,style:[r.container,y&&r.sticky,{paddingHorizontal:w}],children:[e.jsxs(K,{style:r.placeholder,"aria-hidden":!0,ref:n,onLayout:X,children:[d.map(t=>{const{label:c,icon:o,count:m,endElement:b}=t,R=D(t);return e.jsxs(i.Fragment,{children:[e.jsxs(Q,{ref:L=>{j.current&&(j.current[R]=L)},activeTabId:p,tab:t,onChange:F,style:({active:L,hovered:g})=>[r.link,L?r.activeLink:g?r.hoveredLink:null],children:[l(o)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{name:o,size:16,color:"currentColor"}),e.jsx(k,{width:8})]}),e.jsx(H,{children:c}),l(b)&&e.jsxs(e.Fragment,{children:[e.jsx(k,{width:8}),b]}),m!=null?e.jsxs(e.Fragment,{children:[e.jsx(k,{width:8}),e.jsx(H,{style:r.count,children:m})]}):null]}),e.jsx(k,{width:32})]},R)}),e.jsxs(le,{ref:h,style:r.link,children:[e.jsx(H,{children:a}),e.jsx(k,{width:8}),e.jsx(H,{style:r.count,children:d.length}),e.jsx(k,{width:4}),e.jsx(M,{name:"chevron-down-filled",size:12})]})]}),W.map(t=>{const{label:c,icon:o,withSeparator:m,count:b,endElement:R}=t,L=D(t);return e.jsxs(i.Fragment,{children:[e.jsxs(Q,{ref:g=>{f.current&&(f.current[L]=g)},onChange:F,activeTabId:p,tab:t,role:"tab",style:({active:g,hovered:s})=>[r.link,g?r.activeLink:s?r.hoveredLink:null],children:[m===!0&&e.jsx(K,{style:r.separator,role:"none"}),l(o)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{name:o,size:16,color:"currentColor"}),e.jsx(k,{width:8})]}),e.jsx(H,{children:c}),l(R)&&e.jsxs(e.Fragment,{children:[e.jsx(k,{width:8}),R]}),b!=null?e.jsxs(e.Fragment,{children:[e.jsx(k,{width:8}),e.jsx(H,{style:r.count,children:b})]}):null]}),e.jsx(k,{width:32})]},L)}),E.length>0?e.jsx(be,{ref:t=>{E.forEach(c=>{if(f.current){const o=D(c);f.current[o]=t}})},onChange:F,tabs:E,currentUrl:S,otherLabel:a,activeTabId:p}):null,P&&e.jsx(K,{style:[r.underline,r.animatedUnderline,{transform:`translateX(${q}px)`,width:A}]})]})};Le.__docgenInfo={description:"",methods:[],displayName:"TabView",props:{activeTabId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},tabs:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`({ id: string } | { url: string }) & {
  count?: number;
  icon?: IconName;
  endElement?: ReactNode;
  label: string;
  withSeparator?: boolean;
}`,elements:[{name:"unknown"},{name:"signature",type:"object",raw:`{
  count?: number;
  icon?: IconName;
  endElement?: ReactNode;
  label: string;
  withSeparator?: boolean;
}`,signature:{properties:[{key:"count",value:{name:"number",required:!1}},{key:"icon",value:{name:"unknown",required:!1}},{key:"endElement",value:{name:"ReactNode",required:!1}},{key:"label",value:{name:"string",required:!0}},{key:"withSeparator",value:{name:"boolean",required:!1}}]}}]}],raw:"Tab[]"},description:""},otherLabel:{required:!0,tsType:{name:"string"},description:""},hideIfSingleItem:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},padding:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof spacingValues)[number]"},description:""},sticky:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{Le as T};
//# sourceMappingURL=TabView-CJebWaA2.js.map
