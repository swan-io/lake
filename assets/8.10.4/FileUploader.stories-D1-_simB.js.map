{"version":3,"file":"FileUploader.stories-D1-_simB.js","sources":["../../../packages/lake/__stories__/FileUploader.stories.tsx"],"sourcesContent":["import { Meta } from \"@storybook/react\";\nimport { Future, Result } from \"@swan-io/boxed\";\nimport { FilesUploader } from \"@swan-io/shared-business/src/components/FilesUploader\";\nimport { SwanFile } from \"@swan-io/shared-business/src/utils/SwanFile\";\nimport { StyleSheet } from \"react-native\";\nimport { StoryBlock, StoryPart } from \"./_StoriesComponents\";\n\nconst styles = StyleSheet.create({\n  storyPart: {\n    maxWidth: 600,\n  },\n});\n\nconst ACCEPTED_FORMATS = [\"application/pdf\", \"image/png\", \"image/jpeg\", \"image/svg+xml\"];\n\nexport default {\n  title: \"Forms/FilesUploader\",\n  component: FilesUploader,\n} as Meta<typeof FilesUploader>;\n\nconst documents: SwanFile[] = [\n  {\n    id: crypto.randomUUID(),\n    name: \"first-document.pdf\",\n    url: \"https://swan.io\",\n    statusInfo: { status: \"Validated\" },\n  },\n  {\n    id: crypto.randomUUID(),\n    name: \"second-document.png\",\n    statusInfo: { status: \"Pending\" },\n  },\n  {\n    id: crypto.randomUUID(),\n    name: \"third-document.jpg\",\n    statusInfo: { status: \"Refused\", reason: \"Quality of the document was too low\" },\n  },\n  {\n    id: crypto.randomUUID(),\n    name: \"fourth-document.xls\",\n    statusInfo: { status: \"Uploaded\" },\n  },\n  {\n    id: crypto.randomUUID(),\n    name: \"last-document.png\",\n    statusInfo: { status: \"Uploaded\" },\n  },\n];\n\nexport const WithSeveralDocuments = () => {\n  return (\n    <StoryBlock title=\"UploadArea with several documents\">\n      <StoryPart title=\"\" style={styles.storyPart}>\n        <FilesUploader\n          maxSize={20_000_000}\n          icon=\"document-regular\"\n          accept={ACCEPTED_FORMATS}\n          initialFiles={documents}\n          getUploadConfig={() => {}}\n          generateUpload={() => Future.value(Result.Ok({ id: crypto.randomUUID(), upload: {} }))}\n          onRemoveFile={() =>\n            Future.make<Result<unknown, unknown>>(resolve => {\n              setTimeout(() => resolve(Result.Ok(undefined)), 1_000);\n            })\n          }\n          uploadFile={({ onLoadStart, onProgress }) => {\n            return Future.make<Result<unknown, unknown>>(resolve => {\n              onLoadStart({\n                loaded: 0,\n                total: 1000,\n              } as ProgressEvent<XMLHttpRequestEventTarget>);\n              setTimeout(\n                () =>\n                  onProgress({\n                    loaded: 100,\n                    total: 1000,\n                  } as ProgressEvent<XMLHttpRequestEventTarget>),\n                100,\n              );\n              setTimeout(\n                () =>\n                  onProgress({\n                    loaded: 600,\n                    total: 1000,\n                  } as ProgressEvent<XMLHttpRequestEventTarget>),\n                500,\n              );\n              setTimeout(() => {\n                resolve(Result.Ok(undefined));\n              }, 1_000);\n            });\n          }}\n          formatAndSizeDescription={\"20MB max\"}\n        />\n      </StoryPart>\n    </StoryBlock>\n  );\n};\n"],"names":["styles","StyleSheet","create","storyPart","maxWidth","ACCEPTED_FORMATS","FileUploader_stories","title","component","FilesUploader","documents","id","crypto","randomUUID","name","url","statusInfo","status","reason","WithSeveralDocuments","jsx","StoryBlock","StoryPart","Future","value","Result","Ok","upload","make","resolve","setTimeout","undefined","onLoadStart","onProgress","loaded","total"],"mappings":"gzBAOA,MAAMA,EAASC,EAAWC,OAAO,CAC/BC,UAAW,CACTC,SAAU,GACZ,CACF,CAAC,EAEKC,EAAmB,CAAC,kBAAmB,YAAa,aAAc,eAAe,EAExEC,EAAA,CACbC,MAAO,sBACPC,UAAWC,CACb,EAEMC,EAAwB,CAC5B,CACEC,GAAIC,OAAOC,WAAW,EACtBC,KAAM,qBACNC,IAAK,kBACLC,WAAY,CAAEC,OAAQ,WAAY,CACpC,EACA,CACEN,GAAIC,OAAOC,WAAW,EACtBC,KAAM,sBACNE,WAAY,CAAEC,OAAQ,SAAU,CAClC,EACA,CACEN,GAAIC,OAAOC,WAAW,EACtBC,KAAM,qBACNE,WAAY,CAAEC,OAAQ,UAAWC,OAAQ,qCAAsC,CACjF,EACA,CACEP,GAAIC,OAAOC,WAAW,EACtBC,KAAM,sBACNE,WAAY,CAAEC,OAAQ,UAAW,CACnC,EACA,CACEN,GAAIC,OAAOC,WAAW,EACtBC,KAAM,oBACNE,WAAY,CAAEC,OAAQ,UAAW,CACnC,CAAC,EAGUE,EAAuBA,IAEhCC,EAAA,IAACC,GAAW,MAAM,oCAChB,eAACC,EAAU,CAAA,MAAM,GAAG,MAAOtB,EAAOG,UAChC,eAACM,EACC,CAAA,QAAS,IACT,KAAK,mBACL,OAAQJ,EACR,aAAcK,EACd,gBAAiB,IAAM,GACvB,eAAgB,IAAMa,EAAOC,MAAMC,EAAOC,GAAG,CAAEf,GAAIC,OAAOC,WAAW,EAAGc,OAAQ,CAAC,CAAA,CAAG,CAAC,EACrF,aAAc,IACZJ,EAAOK,KAA0CC,GAAA,CAC/CC,WAAW,IAAMD,EAAQJ,EAAOC,GAAGK,MAAS,CAAC,EAAG,GAAK,CAAA,CACtD,EAEH,WAAY,CAAC,CAAEC,YAAAA,EAAaC,WAAAA,CAAAA,IACnBV,EAAOK,KAA0CC,GAAA,CAC1CG,EAAA,CACVE,OAAQ,EACRC,MAAO,GAAA,CACqC,EAC9CL,WACE,IACEG,EAAW,CACTC,OAAQ,IACRC,MAAO,GAAA,CACqC,EAChD,GACF,EACAL,WACE,IACEG,EAAW,CACTC,OAAQ,IACRC,MAAO,GAAA,CACqC,EAChD,GACF,EACAL,WAAW,IAAM,CACPL,EAAAA,EAAOC,GAAGK,MAAS,CAAC,GAC3B,GAAK,CAAA,CACT,EAEH,yBAA0B,UAAW,CAAA,CAEzC,CAAA,CACF,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}