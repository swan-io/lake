{"version":3,"file":"WithPartnerAccentColor-ZqMwwedt.js","sources":["../../../packages/lake/src/components/WithPartnerAccentColor.tsx"],"sourcesContent":["import { darken, meetsContrastGuidelines, setLightness, shade } from \"polished\";\nimport { ReactNode, useLayoutEffect, useRef } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { ColorScale } from \"../constants/design\";\nimport { isNotNullish } from \"../utils/nullish\";\n\ntype Props = {\n  color: string;\n  children: ReactNode;\n  scoped?: boolean;\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexGrow: 1,\n    flexBasis: \"0%\",\n  },\n});\n\nconst getContrastColor = (color: string) => {\n  if (meetsContrastGuidelines(\"#FFF\", color).AALarge) {\n    return \"#fff\";\n  }\n\n  let text = color;\n  while (!meetsContrastGuidelines(text, color).AALarge) {\n    text = darken(0.25, text);\n  }\n  return text;\n};\n\nexport const WithPartnerAccentColor = ({ color, scoped = false, children }: Props) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    try {\n      if (isNotNullish(containerRef.current)) {\n        const element = containerRef.current as unknown as HTMLElement;\n        let scalePower = 1;\n        while (\n          !meetsContrastGuidelines(setLightness(Math.pow(0.5, scalePower), color), \"#fff\").AALarge\n        ) {\n          scalePower += 0.1;\n        }\n\n        const colorScale: ColorScale = {\n          0: setLightness(Math.pow(1.0, scalePower), color),\n          50: setLightness(Math.pow(0.97, scalePower), color),\n          100: setLightness(Math.pow(0.9, scalePower), color),\n          200: setLightness(Math.pow(0.8, scalePower), color),\n          300: setLightness(Math.pow(0.7, scalePower), color),\n          400: setLightness(Math.pow(0.6, scalePower), color),\n          500: setLightness(Math.pow(0.5, scalePower), color),\n          600: setLightness(Math.pow(0.4, scalePower), color),\n          700: setLightness(Math.pow(0.3, scalePower), color),\n          800: setLightness(Math.pow(0.2, scalePower), color),\n          900: setLightness(Math.pow(0.1, scalePower), color),\n          primary: color,\n          contrast: getContrastColor(color),\n          secondary: shade(0.2, color),\n        };\n\n        const rootElement = scoped ? element : element.ownerDocument.documentElement;\n\n        rootElement.style.setProperty(\"--color-partner-900\", colorScale[900], \"\");\n        rootElement.style.setProperty(\"--color-partner-800\", colorScale[800], \"\");\n        rootElement.style.setProperty(\"--color-partner-700\", colorScale[700], \"\");\n        rootElement.style.setProperty(\"--color-partner-600\", colorScale[600], \"\");\n        rootElement.style.setProperty(\"--color-partner-500\", colorScale[500], \"\");\n        rootElement.style.setProperty(\"--color-partner-400\", colorScale[400], \"\");\n        rootElement.style.setProperty(\"--color-partner-300\", colorScale[300], \"\");\n        rootElement.style.setProperty(\"--color-partner-200\", colorScale[200], \"\");\n        rootElement.style.setProperty(\"--color-partner-100\", colorScale[100], \"\");\n        rootElement.style.setProperty(\"--color-partner-50\", colorScale[50], \"\");\n        rootElement.style.setProperty(\"--color-partner-primary\", colorScale.primary, \"\");\n        rootElement.style.setProperty(\"--color-partner-secondary\", colorScale.secondary, \"\");\n        rootElement.style.setProperty(\"--color-partner-contrast\", colorScale.contrast, \"\");\n      }\n    } catch {\n      // will default to white label color\n    }\n  }, [color, scoped]);\n\n  return (\n    <View ref={containerRef} style={styles.container}>\n      {children}\n    </View>\n  );\n};\n"],"names":["styles","StyleSheet","getContrastColor","color","meetsContrastGuidelines","text","darken","WithPartnerAccentColor","scoped","children","containerRef","useRef","useLayoutEffect","isNotNullish","element","scalePower","setLightness","colorScale","shade","rootElement","View"],"mappings":"qNAYA,MAAMA,EAASC,EAAW,OAAO,CAC/B,UAAW,CACT,SAAU,EACV,UAAW,IACb,CACF,CAAC,EAEKC,EAAoBC,GAAkB,CAC1C,GAAIC,EAAwB,OAAQD,CAAK,EAAE,QAClC,MAAA,OAGT,IAAIE,EAAOF,EACX,KAAO,CAACC,EAAwBC,EAAMF,CAAK,EAAE,SACpCE,EAAAC,EAAO,IAAMD,CAAI,EAEnB,OAAAA,CACT,EAEaE,EAAyB,CAAC,CAAE,MAAAJ,EAAO,OAAAK,EAAS,GAAO,SAAAC,KAAsB,CAC9E,MAAAC,EAAeC,SAAO,IAAI,EAEhCC,OAAAA,EAAAA,gBAAgB,IAAM,CAChB,GAAA,CACE,GAAAC,EAAaH,EAAa,OAAO,EAAG,CACtC,MAAMI,EAAUJ,EAAa,QAC7B,IAAIK,EAAa,EACjB,KACE,CAACX,EAAwBY,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAAG,MAAM,EAAE,SAEnEY,GAAA,GAGhB,MAAME,EAAyB,CAC7B,EAAGD,EAAa,KAAK,IAAI,EAAKD,CAAU,EAAGZ,CAAK,EAChD,GAAIa,EAAa,KAAK,IAAI,IAAMD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,IAAKa,EAAa,KAAK,IAAI,GAAKD,CAAU,EAAGZ,CAAK,EAClD,QAASA,EACT,SAAUD,EAAiBC,CAAK,EAChC,UAAWe,EAAM,GAAKf,CAAK,CAAA,EAGvBgB,EAAcX,EAASM,EAAUA,EAAQ,cAAc,gBAE7DK,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,sBAAuBF,EAAW,GAAG,EAAG,EAAE,EACxEE,EAAY,MAAM,YAAY,qBAAsBF,EAAW,EAAE,EAAG,EAAE,EACtEE,EAAY,MAAM,YAAY,0BAA2BF,EAAW,QAAS,EAAE,EAC/EE,EAAY,MAAM,YAAY,4BAA6BF,EAAW,UAAW,EAAE,EACnFE,EAAY,MAAM,YAAY,2BAA4BF,EAAW,SAAU,EAAE,CACnF,CAAA,MACM,CAER,CAAA,EACC,CAACd,EAAOK,CAAM,CAAC,QAGfY,EAAK,CAAA,IAAKV,EAAc,MAAOV,EAAO,UACpC,SAAAS,CACH,CAAA,CAEJ"}