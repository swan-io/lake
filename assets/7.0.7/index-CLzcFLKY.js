import{r as u}from"./index-CBqU2yxZ.js";import"./with-selector-D-Y2eL2T.js";const w=e=>e[e.length-1],f=()=>{},C=e=>e!=="",R=e=>e[0]==="/"?e:"/"+e,U=(e,t)=>e.length===t.length&&e.every((n,o)=>n===t[o]),O=e=>{const t=e.split("&").filter(C),n={};for(const o of t){const[s="",c=""]=o.split("="),r=decodeURIComponent(s),a=decodeURIComponent(c),l=n[r];n[r]=l!=null?typeof l=="string"?[l,a]:l.concat(a):a}return n},y=(e,t,n)=>{const o=e+(e!==""?"&":"")+encodeURIComponent(t);return n!==""?o+"="+encodeURIComponent(n):o},K=e=>{const t=Object.keys(e);if(t.length===0)return"";let n="";t.sort();for(const o of t){const s=e[o];if(s!=null)if(typeof s=="string")n=y(n,o,s);else for(const c of s)n=y(n,o,c)}return n===""?"":"?"+n};let S=!1;const v=e=>{const t=e.indexOf("#"),n=R(t<0?e:e.substring(0,t)),o=n.indexOf("?");return o<0?{path:n,search:""}:{path:n.substring(0,o),search:n.substring(o+1)}},g=e=>{const t=v(e),n=t.path.substring(1),o=n!==""?S?n.split("/").map(decodeURIComponent):n.split("/").filter(C).map(decodeURIComponent):[],s=t.search!==""?O(t.search):{},c="/"+o.map(encodeURIComponent).join("/"),r=K(s),a=c+r;return{path:o,search:s,raw:{path:c,search:r},toString:()=>a}},b=e=>{e.preventDefault(),e.returnValue=""},d=typeof window<"u"?(()=>{const e=new Set;let t=[];const n=window.history,o=window.location;let s=g(o.pathname+o.search);const c=()=>{const r=g(o.pathname+o.search);if(r.toString()===s.toString())return;S=!0;const a=r.raw.search!==s.raw.search,l=a?{}:s.search;if(a){for(const p in r.search)if(Object.prototype.hasOwnProperty.call(r.search,p)){const i=r.search[p];if(i==null)continue;const h=s.search[p];l[p]=h!=null&&typeof h!="string"&&typeof i!="string"&&U(i,h)?h:i}}s={path:r.raw.path!==s.raw.path?r.path:s.path,search:l,raw:r.raw,toString:r.toString},e.forEach(p=>p(s))};return window.addEventListener("popstate",()=>{c()}),{get location(){return s},subscribe:r=>(e.add(r),()=>{e.delete(r)}),push:r=>{const a=w(t);if(a==null||window.confirm(a.message)){try{n.pushState(null,"",r)}catch{o.assign(r)}c()}},replace:r=>{const a=w(t);(a==null||window.confirm(a.message))&&(n.replaceState(null,"",r),c())},block:r=>(t.push(r),t.length===1&&window.addEventListener("beforeunload",b,{capture:!0}),()=>{t=t.filter(a=>{let{id:l}=a;return l!==r.id}),t.length===0&&window.removeEventListener("beforeunload",b,{capture:!0})})}})():{location:g("/"),subscribe:()=>f,push:f,replace:f,block:()=>f},L=()=>d.location,k=d.subscribe,N=d.push,j=d.replace,x=u.createContext(L);x.Provider;const E=()=>u.useContext(x),A=()=>{const e=E();return u.useSyncExternalStore(k,e,e)},P=e=>{let{href:t,replace:n=!1,target:o}=e;const s=u.useMemo(()=>v(t).path,[t]),c=E(),r=()=>s===c().raw.path,a=u.useSyncExternalStore(k,r,r),l=n||a,p=o==null||o==="_self";return{active:a,onClick:u.useCallback(i=>{i.defaultPrevented||!p||i.button!==0||i.metaKey||i.altKey||i.ctrlKey||i.shiftKey||(i.preventDefault(),l?j(t):N(t))},[l,p,t])}},D=u.forwardRef((e,t)=>{let{onClick:n,className:o,replace:s,style:c,target:r,to:a,activeClassName:l,activeStyle:p,...i}=e;const{active:h,onClick:I}=P({href:a,replace:s,target:r});return u.createElement("a",{...i,ref:t,href:a,onClick:m=>{n==null||n(m),I(m)},target:r,className:h&&l!=null?o==null?l:o+" "+l:o,style:h&&p!=null?c==null?p:{...c,...p}:c})});D.displayName="Link";export{A as V,P as X,D as _};
//# sourceMappingURL=index-CLzcFLKY.js.map
