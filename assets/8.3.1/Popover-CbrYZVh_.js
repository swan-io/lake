import{_ as W}from"./extends-CCbyfPlC.js";import{_ as ve,V as T,X as g,Y as R,s as $,F as ee,d as ge,r as ye,b as Ce,g as be,D as re,ak as Se,$ as se,z as Le,j as P,w as Ie}from"./Space-Bx5QDxXb.js";import{R as we,r as m}from"./index-BwDkhjyp.js";import{I as Re,B as Me}from"./BottomPanel-C6LweyEn.js";import{g as pe}from"./_commonjsHelpers-BosuxZz1.js";import{u as Te}from"./useResponsive-Dg25MDxx.js";import{n as Ee}from"./function-C7LgQW2P.js";import{F as xe}from"./FocusTrap-aGNEhBTL.js";import{T as ke}from"./TransitionView-oHMWxRhX.js";import{M as ie}from"./index-COed5YRa.js";var Fe={OS:"web",select:i=>"web"in i?i.web:i.default,get isTesting(){return!1}},Pe=function i(e,t,s){if(s===void 0&&(s=-1),s===0)return!0;if(e===t||typeof e=="function"&&typeof t=="function")return!1;if(typeof e!="object"||e===null)return e!==t;if(typeof t!="object"||t===null||e.constructor!==t.constructor)return!0;if(Array.isArray(e)){var a=e.length;if(t.length!==a)return!0;for(var n=0;n<a;n++)if(i(e[n],t[n],s-1))return!0}else{for(var h in e)if(i(e[h],t[h],s-1))return!0;for(var r in t)if(e[r]===void 0&&t[r]!==void 0)return!0}return!1};function ae(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=i[t];return s}function Oe(i,e){if(i){if(typeof i=="string")return ae(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ae(i,e)}}function B(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=Oe(i))||e){t&&(i=t);var s=0;return function(){return s>=i.length?{done:!0}:{done:!1,value:i[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ve=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function ze(i){i.colors,i.enabled,i.onRefresh,i.progressBackgroundColor,i.progressViewOffset,i.refreshing,i.size,i.tintColor,i.title,i.titleColor;var e=ve(i,Ve);return we.createElement(T,e)}class Ae{constructor(e,t){this._delay=t,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=Re.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function Ke(i,e,t){return e<i?i:e>t?t:e}var De=Ke;const le=pe(De);function Be(){return console.log(...arguments)}class He{constructor(e){g(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(g(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var t=this._findRegion(e.first),s=t[0],a=t[1],n=this._findRegion(e.last),h=n[0],r=n[1];if(!(a===r&&!s.isSpacer)){var l=[],o=[],u=R(R({},e),{},{isSpacer:!1});s.first<u.first&&(s.isSpacer?l.push({first:s.first,last:u.first-1,isSpacer:!0}):u.first=s.first),h.last>u.last&&(h.isSpacer?o.push({first:u.last+1,last:h.last,isSpacer:!0}):u.last=h.last);var c=[...l,u,...o],d=r-a+1;this._regions.splice(a,d,...c)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((t,s)=>t.first===e._regions[s].first&&t.last===e._regions[s].last&&t.isSpacer===e._regions[s].isSpacer)}_findRegion(e){for(var t=0,s=this._regions.length-1;t<=s;){var a=Math.floor((t+s)/2),n=this._regions[a];if(e>=n.first&&e<=n.last)return[n,a];e<n.first?s=a-1:e>n.last&&(t=a+1)}g(!1,"A region was not found containing cellIdx "+e)}}class Ne{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,t){var s;g(!this._childrenToCellKey.has(e),"Trying to add already present child list");var a=(s=this._cellKeyToChildren.get(t))!==null&&s!==void 0?s:new Set;a.add(e),this._cellKeyToChildren.set(t,a),this._childrenToCellKey.set(e,t)}remove(e){var t=this._childrenToCellKey.get(e);g(t!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var s=this._cellKeyToChildren.get(t);g(s,"_cellKeyToChildren should contain cellKey"),s.delete(e),s.size===0&&this._cellKeyToChildren.delete(t)}forEach(e){for(var t=B(this._cellKeyToChildren.values()),s;!(s=t()).done;)for(var a=s.value,n=B(a),h;!(h=n()).done;){var r=h.value;e(r)}}forEachInCell(e,t){for(var s,a=(s=this._cellKeyToChildren.get(e))!==null&&s!==void 0?s:[],n=B(a),h;!(h=n()).done;){var r=h.value;t(r)}}anyInCell(e,t){for(var s,a=(s=this._cellKeyToChildren.get(e))!==null&&s!==void 0?s:[],n=B(a),h;!(h=n()).done;){var r=h.value;if(t(r))return!0}return!1}size(){return this._childrenToCellKey.size}}class ne{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var U=[],oe=10,Y=null;class We{static addListener(e){return Y===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),U.push(e),{remove:()=>{U=U.filter(t=>e!==t)}}}static setSampleRate(e){Y=e}static setMinSampleCount(e){oe=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new ne,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(Y||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<oe){this._resetData();return}var t=global.performance.now()-e,s=R(R({},this._info),{},{total_time_spent:t});U.forEach(a=>a(s)),this._resetData()}}}computeBlankness(e,t,s){if(!this._enabled||e.getItemCount(e.data)===0||t.last<t.first||this._samplesStartTime==null)return 0;var a=s.dOffset,n=s.offset,h=s.velocity,r=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(r),this._info.pixels_scrolled+=Math.round(Math.abs(a));var l=Math.round(Math.abs(h)*1e3),o=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=o-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=o-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var u=0,c=t.first,d=this._getFrameMetrics(c,e);c<=t.last&&(!d||!d.inLayout);)d=this._getFrameMetrics(c,e),c++;d&&c>0&&(u=Math.min(r,Math.max(0,d.offset-n)));for(var f=0,v=t.last,p=this._getFrameMetrics(v,e);v>=t.first&&(!p||!p.inLayout);)p=this._getFrameMetrics(v,e),v--;if(p&&v<e.getItemCount(e.data)-1){var y=p.offset+p.length;f=Math.min(r,Math.max(0,n+r-y))}var C=Math.round(u+f),b=C/r;return b>0?(this._anyBlankStartTime=o,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=C,b>.5&&(this._mostlyBlankStartTime=o,this._info.mostly_blank_count++)):(l<.01||Math.abs(a)<1)&&this.deactivateAndFlush(),b}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new ne,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class $e extends m.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,t){typeof e=="function"?super.setState((s,a)=>{this._inAsyncStateUpdate=!0;var n;try{n=e(s,a)}catch(h){throw h}finally{this._inAsyncStateUpdate=!1}return n},t):super.setState(e,t)}_installSetStateHooks(){var e=this,t=this.props,s=this.state;Object.defineProperty(this,"props",{get(){return g(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),t},set(a){t=a}}),Object.defineProperty(this,"state",{get(){return g(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),s},set(a){s=a}})}}class he{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,s,a,n){var h=e.getItemCount(e.data),r=this._config,l=r.itemVisiblePercentThreshold,o=r.viewAreaCoveragePercentThreshold,u=o!=null,c=u?o:l;g(c!=null&&l!=null!=(o!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var d=[];if(h===0)return d;var f=-1,v=n||{first:0,last:h-1},p=v.first,y=v.last;if(y>=h)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:n,itemCount:h})),[];for(var C=p;C<=y;C++){var b=a(C,e);if(b){var L=b.offset-t,I=L+b.length;if(L<s&&I>0)f=C,Ue(u,c,L,I,s,b.length)&&d.push(C);else if(f>=0)break}}return d}onUpdate(e,t,s,a,n,h,r){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!a(0,e))){var o=[];if(l&&(o=this.computeViewableItems(e,t,s,a,r)),!(this._viewableIndices.length===o.length&&this._viewableIndices.every((c,d)=>c===o[d])))if(this._viewableIndices=o,this._config.minimumViewTime){var u=setTimeout(()=>{this._timers.delete(u),this._onUpdateSync(e,o,h,n)},this._config.minimumViewTime);this._timers.add(u)}else this._onUpdateSync(e,o,h,n)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,t,s,a){t=t.filter(b=>this._viewableIndices.includes(b));for(var n=this._viewableItems,h=new Map(t.map(b=>{var L=a(b,!0,e);return[L.key,L]})),r=[],l=B(h),o;!(o=l()).done;){var u=o.value,c=u[0],d=u[1];n.has(c)||r.push(d)}for(var f=B(n),v;!(v=f()).done;){var p=v.value,y=p[0],C=p[1];h.has(y)||r.push(R(R({},C),{},{isViewable:!1}))}r.length>0&&(this._viewableItems=h,s({viewableItems:Array.from(h.values()),changed:r,viewabilityConfig:this._config}))}}function Ue(i,e,t,s,a,n){if(qe(t,s,a))return!0;var h=je(t,s,a),r=100*(i?h/a:h/n);return r>=e}function je(i,e,t){var s=Math.min(e,t)-Math.max(i,0);return Math.max(0,s)}function qe(i,e,t){return i>=0&&e<=t&&e>i}var q=m.createContext(null);function Xe(i){var e=i.children,t=i.value,s=m.useMemo(()=>({cellKey:null,getScrollMetrics:t.getScrollMetrics,horizontal:t.horizontal,getOutermostParentListRef:t.getOutermostParentListRef,registerAsNestedChild:t.registerAsNestedChild,unregisterAsNestedChild:t.unregisterAsNestedChild}),[t.getScrollMetrics,t.horizontal,t.getOutermostParentListRef,t.registerAsNestedChild,t.unregisterAsNestedChild]);return m.createElement(q.Provider,{value:s},e)}function j(i){var e=i.cellKey,t=i.children,s=m.useContext(q),a=m.useMemo(()=>s==null?null:R(R({},s),{},{cellKey:e}),[s,e]);return m.createElement(q.Provider,{value:a},t)}class Ye extends m.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,t=e.cellKey,s=e.prevCellKey;this.props.onUpdateSeparators([t,s],{highlighted:!0})},unhighlight:()=>{var e=this.props,t=e.cellKey,s=e.prevCellKey;this.props.onUpdateSeparators([t,s],{highlighted:!1})},updateProps:(e,t)=>{var s=this.props,a=s.cellKey,n=s.prevCellKey;this.props.onUpdateSeparators([e==="leading"?n:a],t)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,t){return{separatorProps:R(R({},t.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(t=>({separatorProps:R(R({},t.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,t,s,a){if(e&&t&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),t)return m.createElement(t,{item:s,index:a,separators:this._separators});if(e)return e({item:s,index:a,separators:this._separators});g(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,t=e.CellRendererComponent,s=e.ItemSeparatorComponent,a=e.ListItemComponent,n=e.cellKey,h=e.horizontal,r=e.item,l=e.index,o=e.inversionStyle,u=e.onCellFocusCapture,c=e.onCellLayout,d=e.renderItem,f=this._renderElement(d,a,r,l),v=m.isValidElement(s)?s:s&&m.createElement(s,this.state.separatorProps),p=o?h?[G.rowReverse,o]:[G.columnReverse,o]:h?[G.row,o]:o,y=t?m.createElement(t,W({cellKey:n,index:l,item:r,style:p,onFocusCapture:u},c&&{onLayout:this._onLayout}),f,v):m.createElement(T,W({style:p,onFocusCapture:u},c&&{onLayout:this._onLayout}),f,v);return m.createElement(j,{cellKey:this.props.cellKey},y)}}var G=$.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function Ge(i,e,t,s){s===void 0&&(s=1);for(var a=e.getItemCount(e.data),n=[],h=0;h<i.length;h++)for(var r=i[h],l=0,o=a-1;l<=o;){var u=l+(o-l>>>1),c=t(u,e),d=c.offset*s,f=(c.offset+c.length)*s;if(u===0&&r<d||u!==0&&r<=d)o=u-1;else if(r>f)l=u+1;else{n[h]=u;break}}return n}function Je(i,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,i.last)-Math.max(e.first,i.first))}function Qe(i,e,t,s,a,n){var h=i.getItemCount(i.data);if(h===0)return{first:0,last:-1};var r=n.offset,l=n.velocity,o=n.visibleLength,u=n.zoomScale,c=u===void 0?1:u,d=Math.max(0,r),f=d+o,v=(t-1)*o,p=.5,y=l>1?"after":l<-1?"before":"none",C=Math.max(0,d-(1-p)*v),b=Math.max(0,f+p*v),L=a(h-1,i).offset*c;if(L<C)return{first:Math.max(0,h-1-e),last:h-1};var I=Ge([C,d,f,b],i,a,c),M=I[0],S=I[1],w=I[2],_=I[3];M=M??0,S=S??Math.max(0,M),_=_??h-1,w=w??Math.min(_,S+e-1);for(var E={first:S,last:w},O=Je(s,E);!(S<=M&&w>=_);){var x=O>=e,A=S<=s.first||S>s.last,V=S>M&&(!x||!A),H=w>=s.last||w<s.first,z=w<_&&(!x||!H);if(x&&!V&&!z)break;V&&!(y==="after"&&z&&H)&&(A&&O++,S--),z&&!(y==="before"&&V&&A)&&(H&&O++,w++)}if(!(w>=S&&S>=0&&w<h&&S>=M&&w<=_&&S<=E.first&&w>=E.last))throw new Error("Bad window calculation "+JSON.stringify({first:S,last:w,itemCount:h,overscanFirst:M,overscanLast:_,visible:E}));return{first:S,last:w}}function te(i,e){return typeof i=="object"&&(i==null?void 0:i.key)!=null?i.key:typeof i=="object"&&(i==null?void 0:i.id)!=null?i.id:String(e)}var X={exports:{}};function _e(i,e){if(i!=null)return i;var t=new Error(e!==void 0?e:"Got unexpected "+i);throw t.framesToPop=1,t}X.exports=_e;X.exports.default=_e;Object.defineProperty(X.exports,"__esModule",{value:!0});var Ze=X.exports;const et=pe(Ze);var ue=.001,J=!1,Q="";function K(i){return i??!1}function tt(i){return i??10}function Z(i){return i??10}function rt(i){return i??2}function ce(i){return i??2}function de(i,e){return i*e/2}function st(i){return i??50}function fe(i){return i??21}function it(i,e){for(var t=i.length-1;t>=0;t--)if(e(i[t]))return i[t];return null}class k extends $e{scrollToEnd(e){var t=e?e.animated:!0,s=this.props.getItemCount(this.props.data)-1;if(!(s<0)){var a=this.__getFrameMetricsApprox(s,this.props),n=Math.max(0,a.offset+a.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(K(this.props.horizontal)?{x:n,animated:t}:{y:n,animated:t})}}}scrollToIndex(e){var t=this.props,s=t.data,a=t.horizontal,n=t.getItemCount,h=t.getItemLayout,r=t.onScrollToIndexFailed,l=e.animated,o=e.index,u=e.viewOffset,c=e.viewPosition;if(g(o>=0,"scrollToIndex out of range: requested index "+o+" but minimum is 0"),g(n(s)>=1,"scrollToIndex out of range: item length "+n(s)+" but minimum is 1"),g(o<n(s),"scrollToIndex out of range: requested index "+o+" is out of 0 to "+(n(s)-1)),!h&&o>this._highestMeasuredFrameIndex){g(!!r,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),r({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:o});return}var d=this.__getFrameMetricsApprox(Math.floor(o),this.props),f=Math.max(0,this._getOffsetApprox(o,this.props)-(c||0)*(this._scrollMetrics.visibleLength-d.length))-(u||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(a?{x:f,animated:l}:{y:f,animated:l})}}scrollToItem(e){for(var t=e.item,s=this.props,a=s.data,n=s.getItem,h=s.getItemCount,r=h(a),l=0;l<r;l++)if(n(a,l)===t){this.scrollToIndex(R(R({},e),{},{index:l}));break}}scrollToOffset(e){var t=e.animated,s=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(K(this.props.horizontal)?{x:s,animated:t}:{y:s,animated:t})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var t;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=r=>{this._nestedChildLists.add(r.ref,r.cellKey),this._hasInteracted&&r.ref.recordInteraction()},this._unregisterAsNestedChild=r=>{this._nestedChildLists.remove(r.ref)},this._onUpdateSeparators=(r,l)=>{r.forEach(o=>{var u=o!=null&&this._cellRefs[o];u&&u.updateSeparatorProps(l)})},this._getSpacerKey=r=>r?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new Ne,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=r=>{this._scrollRef=r},this._defaultRenderScrollComponent=r=>{var l=r.onRefresh;if(this._isNestedWithSameOrientation())return m.createElement(T,r);if(l){var o;return g(typeof r.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((o=r.refreshing)!==null&&o!==void 0?o:"undefined")+"`"),m.createElement(ee,W({},r,{refreshControl:r.refreshControl==null?m.createElement(ze,{refreshing:r.refreshing,onRefresh:l,progressViewOffset:r.progressViewOffset}):r.refreshControl}))}else return m.createElement(ee,r)},this._onCellLayout=(r,l,o)=>{var u=r.nativeEvent.layout,c={offset:this._selectOffset(u),length:this._selectLength(u),index:o,inLayout:!0},d=this._frames[l];!d||c.offset!==d.offset||c.length!==d.length||o!==d.index?(this._totalCellLength+=c.length-(d?d.length:0),this._totalCellsMeasured+=d?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=c,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,o),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=r=>{delete this._cellRefs[r];var l=this._frames[r];l&&(this._frames[r]=R(R({},l),{},{inLayout:!1}))},this._onLayout=r=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(r.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(r),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=r=>{this.props.onLayout&&this.props.onLayout(r)},this._onLayoutFooter=r=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(r.nativeEvent.layout)},this._onLayoutHeader=r=>{this._headerLength=this._selectLength(r.nativeEvent.layout)},this._onContentSizeChange=(r,l)=>{r>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:et(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(r,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:r}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=r=>{var l=r.offset-this._offsetFromParentVirtualizedList,o=r.visibleLength,u=l-this._scrollMetrics.offset,c=this._scrollMetrics.contentLength;return{visibleLength:o,contentLength:c,offset:l,dOffset:u}},this._onScroll=r=>{this._nestedChildLists.forEach(C=>{C._onScroll(r)}),this.props.onScroll&&this.props.onScroll(r);var l=r.timeStamp,o=this._selectLength(r.nativeEvent.layoutMeasurement),u=this._selectLength(r.nativeEvent.contentSize),c=this._selectOffset(r.nativeEvent.contentOffset),d=c-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var f=this._convertParentScrollMetrics({visibleLength:o,offset:c});o=f.visibleLength,u=f.contentLength,c=f.offset,d=f.dOffset}var v=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,p=d/v;v>500&&this._scrollMetrics.dt>500&&u>5*o&&!this._hasWarned.perf&&(Be("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:v,prevDt:this._scrollMetrics.dt,contentLength:u}),this._hasWarned.perf=!0);var y=r.nativeEvent.zoomScale<0?1:r.nativeEvent.zoomScale;this._scrollMetrics={contentLength:u,dt:v,dOffset:d,offset:c,timestamp:l,velocity:p,visibleLength:o,zoomScale:y},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),p!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=r=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(r)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(r)},this._onScrollEndDrag=r=>{this._nestedChildLists.forEach(o=>{o._onScrollEndDrag(r)});var l=r.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(r)},this._onMomentumScrollBegin=r=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(r)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(r)},this._onMomentumScrollEnd=r=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(r)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(r)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((r,l)=>{var o=this._adjustCellsAroundViewport(l,r.cellsAroundViewport),u=k._createRenderMask(l,o,this._getNonViewportRenderRegions(l));return o.first===r.cellsAroundViewport.first&&o.last===r.cellsAroundViewport.last&&u.equals(r.renderMask)?null:{cellsAroundViewport:o,renderMask:u}})},this._createViewToken=(r,l,o)=>{var u=o.data,c=o.getItem,d=c(u,r);return{index:r,item:d,key:this._keyExtractor(d,r,o),isViewable:l}},this._getOffsetApprox=(r,l)=>{if(Number.isInteger(r))return this.__getFrameMetricsApprox(r,l).offset;var o=this.__getFrameMetricsApprox(Math.floor(r),l),u=r-Math.floor(r);return o.offset+u*o.length},this.__getFrameMetricsApprox=(r,l)=>{var o=this._getFrameMetrics(r,l);if(o&&o.index===r)return o;var u=l.data,c=l.getItemCount,d=l.getItemLayout;return g(r>=0&&r<c(u),"Tried to get frame for out of range index "+r),g(!d,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*r}},this._getFrameMetrics=(r,l)=>{var o=l.data,u=l.getItem,c=l.getItemCount,d=l.getItemLayout;g(r>=0&&r<c(o),"Tried to get frame for out of range index "+r);var f=u(o,r),v=this._frames[this._keyExtractor(f,r,l)];return(!v||v.index!==r)&&d?d(o,r):v},this._getNonViewportRenderRegions=r=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],o=l.props.index,u=r.getItemCount(r.data);if(o>=u||this._keyExtractor(r.getItem(r.data,o),o,r)!==this._lastFocusedCellKey)return[];for(var c=o,d=0,f=c-1;f>=0&&d<this._scrollMetrics.visibleLength;f--)c--,d+=this.__getFrameMetricsApprox(f,r).length;for(var v=o,p=0,y=v+1;y<u&&p<this._scrollMetrics.visibleLength;y++)v++,p+=this.__getFrameMetricsApprox(y,r).length;return[{first:c,last:v}]},this._checkProps(e),this._fillRateHelper=new We(this._getFrameMetrics),this._updateCellsToRenderBatcher=new Ae(this._updateCellsToRender,(t=this.props.updateCellsBatchingPeriod)!==null&&t!==void 0?t:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(r=>({viewabilityHelper:new he(r.viewabilityConfig),onViewableItemsChanged:r.onViewableItemsChanged}));else{var s=this.props,a=s.onViewableItemsChanged,n=s.viewabilityConfig;a&&this._viewabilityTuples.push({viewabilityHelper:new he(n),onViewableItemsChanged:a})}var h=k._initialRenderRegion(e);this.state={cellsAroundViewport:h,renderMask:k._createRenderMask(e,h)},this.invertedWheelEventHandler=r=>{var l=this.props.horizontal?r.target.scrollLeft:r.target.scrollTop,o=this.props.horizontal?r.target.scrollWidth:r.target.scrollHeight,u=this.props.horizontal?r.target.clientWidth:r.target.clientHeight,c=o>u,d=this.props.horizontal?r.deltaX||r.wheelDeltaX:r.deltaY||r.wheelDeltaY,f=d;c&&(f=d<0?Math.min(d+l,0):Math.max(d-(o-u-l),0));var v=d-f;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var p=this._scrollRef.getScrollableNode();if(this.props.horizontal){r.target.scrollLeft+=v;var y=p.scrollLeft-f;p.scrollLeft=this.props.getItemLayout?y:Math.min(y,this._totalCellLength)}else{r.target.scrollTop+=v;var C=p.scrollTop-f;p.scrollTop=this.props.getItemLayout?C:Math.min(C,this._totalCellLength)}r.preventDefault()}}}_checkProps(e){var t=e.onScroll,s=e.windowSize,a=e.getItemCount,n=e.data,h=e.initialScrollIndex;g(!t||!t.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),g(fe(s)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),g(a,'VirtualizedList: The "getItemCount" prop must be provided');var r=a(n);h!=null&&!this._hasTriggeredInitialScrollToIndex&&(h<0||r>0&&h>=r)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+h+'" is not valid (list has '+r+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,t,s){var a=e.getItemCount(e.data);g(t.first>=0&&t.last>=t.first-1&&t.last<a,'Invalid cells around viewport "['+t.first+", "+t.last+']" was passed to VirtualizedList._createRenderMask');var n=new He(a);if(a>0){for(var h=[t,...s??[]],r=0,l=h;r<l.length;r++){var o=l[r];n.addCells(o)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var u=k._initialRenderRegion(e);n.addCells(u)}var c=new Set(e.stickyHeaderIndices);k._ensureClosestStickyHeader(e,c,n,t.first)}return n}static _initialRenderRegion(e){var t,s=e.getItemCount(e.data),a=Math.max(0,Math.min(s-1,Math.floor((t=e.initialScrollIndex)!==null&&t!==void 0?t:0))),n=Math.min(s,a+tt(e.initialNumToRender))-1;return{first:a,last:n}}static _ensureClosestStickyHeader(e,t,s,a){for(var n=e.ListHeaderComponent?1:0,h=a-1;h>=0;h--)if(t.has(h+n)){s.addCells({first:h,last:h});break}}_adjustCellsAroundViewport(e,t){var s=e.data,a=e.getItemCount,n=ce(e.onEndReachedThreshold),h=this._scrollMetrics,r=h.contentLength,l=h.offset,o=h.visibleLength,u=r-o-l;if(o<=0||r<=0)return t.last>=a(s)?k._constrainToItemCount(t,e):t;var c;if(e.disableVirtualization){var d=u<n*o?Z(e.maxToRenderPerBatch):0;c={first:0,last:Math.min(t.last+d,a(s)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(u)>=Number.EPSILON)return t.last>=a(s)?k._constrainToItemCount(t,e):t;c=Qe(e,Z(e.maxToRenderPerBatch),fe(e.windowSize),t,this.__getFrameMetricsApprox,this._scrollMetrics),g(c.last<a(s),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var f=this._findFirstChildWithMore(c.first,c.last);c.last=f??c.last}return c}_findFirstChildWithMore(e,t){for(var s=e;s<=t;s++){var a=this._indicesToKeys.get(s);if(a!=null&&this._nestedChildLists.anyInCell(a,n=>n.hasMore()))return s}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler,{passive:!0});else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,t){var s=e.getItemCount(e.data);if(s===t.renderMask.numCells())return t;var a=k._constrainToItemCount(t.cellsAroundViewport,e);return{cellsAroundViewport:a,renderMask:k._createRenderMask(e,a)}}_pushCells(e,t,s,a,n,h){var r=this,l=this.props,o=l.CellRendererComponent,u=l.ItemSeparatorComponent,c=l.ListHeaderComponent,d=l.ListItemComponent,f=l.data,v=l.debug,p=l.getItem,y=l.getItemCount,C=l.getItemLayout,b=l.horizontal,L=l.renderItem,I=c?1:0,M=y(f)-1,S;n=Math.min(M,n);for(var w=function(){var O=p(f,_),x=r._keyExtractor(O,_,r.props);r._indicesToKeys.set(_,x),s.has(_+I)&&t.push(e.length);var A=C==null||v||r._fillRateHelper.enabled();e.push(m.createElement(Ye,W({CellRendererComponent:o,ItemSeparatorComponent:_<M?u:void 0,ListItemComponent:d,cellKey:x,horizontal:b,index:_,inversionStyle:h,item:O,key:x,prevCellKey:S,onUpdateSeparators:r._onUpdateSeparators,onCellFocusCapture:V=>r._onCellFocusCapture(x),onUnmount:r._onCellUnmount,ref:V=>{r._cellRefs[x]=V},renderItem:L},A&&{onCellLayout:r._onCellLayout}))),S=x},_=a;_<=n;_++)w()}static _constrainToItemCount(e,t){var s=t.getItemCount(t.data),a=Math.min(s-1,e.last),n=Z(t.maxToRenderPerBatch);return{first:le(0,s-1-n,e.first),last:a}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===K(this.props.horizontal))}_keyExtractor(e,t,s){if(s.keyExtractor!=null)return s.keyExtractor(e,t);var a=te(e,t);return a===String(t)&&(J=!0,e.type&&e.type.displayName&&(Q=e.type.displayName)),a}render(){this._checkProps(this.props);var e=this.props,t=e.ListEmptyComponent,s=e.ListFooterComponent,a=e.ListHeaderComponent,n=this.props,h=n.data,r=n.horizontal,l=this.props.inverted?K(this.props.horizontal)?F.horizontallyInverted:F.verticallyInverted:null,o=[],u=new Set(this.props.stickyHeaderIndices),c=[];if(a){u.has(0)&&c.push(0);var d=m.isValidElement(a)?a:m.createElement(a,null);o.push(m.createElement(j,{cellKey:this._getCellKey()+"-header",key:"$header"},m.createElement(T,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},d)))}var f=this.props.getItemCount(h);if(f===0&&t){var v=m.isValidElement(t)?t:m.createElement(t,null);o.push(m.createElement(j,{cellKey:this._getCellKey()+"-empty",key:"$empty"},m.cloneElement(v,{onLayout:z=>{this._onLayoutEmpty(z),v.props.onLayout&&v.props.onLayout(z)},style:[l,v.props.style]})))}if(f>0){J=!1,Q="";for(var p=this._getSpacerKey(!r),y=this.state.renderMask.enumerateRegions(),C=it(y,z=>z.isSpacer),b=B(y),L;!(L=b()).done;){var I=L.value;if(I.isSpacer){if(this.props.disableVirtualization)continue;var M=I===C,S=M&&!this.props.getItemLayout,w=S?le(I.first-1,I.last,this._highestMeasuredFrameIndex):I.last,_=this.__getFrameMetricsApprox(I.first,this.props),E=this.__getFrameMetricsApprox(w,this.props),O=E.offset+E.length-_.offset;o.push(m.createElement(T,{key:"$spacer-"+I.first,style:{[p]:O}}))}else this._pushCells(o,c,u,I.first,I.last,l)}!this._hasWarned.keys&&J&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",Q),this._hasWarned.keys=!0)}if(s){var x=m.isValidElement(s)?s:m.createElement(s,null);o.push(m.createElement(j,{cellKey:this._getFooterCellKey(),key:"$footer"},m.createElement(T,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},x)))}var A=R(R({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:st(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:c,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<f-1;var V=m.createElement(Xe,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:K(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},m.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(A),{ref:this._captureScrollRef},o)),H=V;return this.props.debug?m.createElement(T,{style:F.debug},H,this._renderDebugOverlay()):H}componentDidUpdate(e){var t=this.props,s=t.data,a=t.extraData;(s!==e.data||a!==e.extraData)&&this._viewabilityTuples.forEach(h=>{h.viewabilityHelper.resetViewableIndices()});var n=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),n&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,t=>{t.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,t,s,a)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:t}),this._scrollMetrics.contentLength=this._selectLength({width:s,height:a});var n=this._convertParentScrollMetrics(this.context.getScrollMetrics()),h=this._scrollMetrics.visibleLength!==n.visibleLength||this._scrollMetrics.offset!==n.offset;h&&(this._scrollMetrics.visibleLength=n.visibleLength,this._scrollMetrics.offset=n.offset,this._nestedChildLists.forEach(r=>{r.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),t=[],s=this.props.getItemCount(this.props.data),a=0;a<s;a++){var n=this.__getFrameMetricsApprox(a,this.props);n.inLayout&&t.push(n)}var h=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,r=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=r.offset+r.length-h,o=this._scrollMetrics.offset,u=this._scrollMetrics.visibleLength;return m.createElement(T,{style:[F.debugOverlayBase,F.debugOverlay]},t.map((c,d)=>m.createElement(T,{key:"f"+d,style:[F.debugOverlayBase,F.debugOverlayFrame,{top:c.offset*e,height:c.length*e}]})),m.createElement(T,{style:[F.debugOverlayBase,F.debugOverlayFrameLast,{top:h*e,height:l*e}]}),m.createElement(T,{style:[F.debugOverlayBase,F.debugOverlayFrameVis,{top:o*e,height:u*e}]}))}_selectLength(e){return K(this.props.horizontal)?e.width:e.height}_selectOffset(e){return K(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,t=e.data,s=e.getItemCount,a=e.onStartReached,n=e.onStartReachedThreshold,h=e.onEndReached,r=e.onEndReachedThreshold,l=e.initialScrollIndex,o=this._scrollMetrics,u=o.contentLength,c=o.visibleLength,d=o.offset,f=d,v=u-c-d;f<ue&&(f=0),v<ue&&(v=0);var p=2,y=n!=null?n*c:p,C=r!=null?r*c:p,b=f<=y,L=v<=C;h&&this.state.cellsAroundViewport.last===s(t)-1&&L&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,h({distanceFromEnd:v})):a!=null&&this.state.cellsAroundViewport.first===0&&b&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,a({distanceFromStart:f})):(this._sentStartForContentLength=b?this._sentStartForContentLength:0,this._sentEndForContentLength=L?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,t=e.first,s=e.last,a=this._scrollMetrics,n=a.offset,h=a.visibleLength,r=a.velocity,l=this.props.getItemCount(this.props.data),o=!1,u=rt(this.props.onStartReachedThreshold),c=ce(this.props.onEndReachedThreshold);if(t>0){var d=n-this.__getFrameMetricsApprox(t,this.props).offset;o=d<0||r<-2&&d<de(u,h)}if(!o&&s>=0&&s<l-1){var f=this.__getFrameMetricsApprox(s,this.props).offset-(n+h);o=f<0||r>2&&f<de(c,h)}if(o&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,t){this._viewabilityTuples.forEach(s=>{s.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,s.onViewableItemsChanged,t)})}}k.contextType=q;var F=$.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),me=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function at(i,e){return!!(i===e||me(i)&&me(e))}function lt(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!at(i[t],e[t]))return!1;return!0}function nt(i,e){e===void 0&&(e=lt);var t=null;function s(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(t&&t.lastThis===this&&e(a,t.lastArgs))return t.lastResult;var h=i.apply(this,a);return t={lastResult:h,lastArgs:a,lastThis:this},h}return s.clear=function(){t=null},s}var ot=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function ht(i){return i??Fe.OS==="android"}function D(i){return i??1}function ut(i){return typeof Object(i).length=="number"}class wt extends m.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=t=>{this._listRef=t},this._getItem=(t,s)=>{var a=D(this.props.numColumns);if(a>1){for(var n=[],h=0;h<a;h++){var r=s*a+h;if(r<t.length){var l=t[r];n.push(l)}}return n}else return t[s]},this._getItemCount=t=>{if(t!=null&&ut(t)){var s=D(this.props.numColumns);return s>1?Math.ceil(t.length/s):t.length}else return 0},this._keyExtractor=(t,s)=>{var a,n=D(this.props.numColumns),h=(a=this.props.keyExtractor)!==null&&a!==void 0?a:te;return n>1?(g(Array.isArray(t),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",n),t.map((r,l)=>h(r,s*n+l)).join(":")):h(t,s)},this._renderer=(t,s,a,n,h)=>{var r=D(n),l=u=>t?m.createElement(t,u):s?s(u):null,o=u=>{if(r>1){var c=u.item,d=u.index;return g(Array.isArray(c),"Expected array of items with numColumns > 1"),m.createElement(T,{style:[ct.row,a]},c.map((f,v)=>{var p=l({item:f,index:d*r+v,separators:u.separators});return p!=null?m.createElement(m.Fragment,{key:v},p):null}))}else return l(u)};return t?{ListItemComponent:o}:{renderItem:o}},this._memoizedRenderer=nt(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(t=>({viewabilityConfig:t.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(t.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){g(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),g(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),g(!Pe(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),g(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var t=e.getItem,s=e.getItemCount,a=e.horizontal,n=e.columnWrapperStyle,h=e.onViewableItemsChanged,r=e.viewabilityConfigCallbackPairs,l=D(this.props.numColumns);g(!t&&!s,"FlatList does not support custom data formats."),l>1?g(!a,"numColumns does not support horizontal."):g(!n,"columnWrapperStyle not supported for single column lists"),g(!(h&&r),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,t){var s,a=D(this.props.numColumns),n=(s=this.props.keyExtractor)!==null&&s!==void 0?s:te;t.item.forEach((h,r)=>{g(t.index!=null,"Missing index!");var l=t.index*a+r;e.push(R(R({},t),{},{item:h,key:n(h,l),index:l}))})}_createOnViewableItemsChanged(e){return t=>{var s=D(this.props.numColumns);if(e)if(s>1){var a=[],n=[];t.viewableItems.forEach(h=>this._pushMultiColumnViewable(n,h)),t.changed.forEach(h=>this._pushMultiColumnViewable(a,h)),e({viewableItems:n,changed:a})}else e(t)}}render(){var e=this.props,t=e.numColumns,s=e.columnWrapperStyle,a=e.removeClippedSubviews,n=e.strictMode,h=n===void 0?!1:n,r=ve(e,ot),l=h?this._memoizedRenderer:this._renderer;return m.createElement(k,W({},r,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:ht(a)},l(this.props.ListItemComponent,this.props.renderItem,s,t,this.props.extraData)))}}var ct=$.create({row:{flexDirection:"row"}});const N=$.create({container:{...$.absoluteFillObject,pointerEvents:"none"},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popoverContainer:{position:"absolute",display:"flex"},popover:{pointerEvents:"auto",display:"flex",flexDirection:"column",backgroundColor:ge.accented,borderRadius:ye[8],marginVertical:Ce[8],overflow:"hidden",boxShadow:be.modal,flexGrow:1,alignSelf:"stretch"},popoverContents:{alignItems:"stretch"}}),dt={...re.fadeAndSlideInFromBottom,leave:[re.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},ft=600,mt=m.memo(({children:i,id:e,label:t,role:s="dialog",describedBy:a,matchReferenceWidth:n=!1,matchReferenceMinWidth:h=!1,onDismiss:r=Ee,onEscapeKey:l=r,referenceRef:o,returnFocus:u=!0,autoFocus:c=!0,visible:d,underlay:f=!0,forcedMode:v})=>{const[p,y]=m.useState(null),C=m.useRef(null),{desktop:b}=Te(ft),{position:L}=Se({referenceRef:o,visible:d,matchReferenceWidth:n,matchReferenceMinWidth:h});m.useEffect(()=>{const _=C.current;!d&&_!=null&&(_.style.pointerEvents="none")},[d]),m.useEffect(()=>{const _=document.createElement("div");return document.body.append(_),y(_),()=>{y(null),_.remove()}},[]);const I=m.useCallback(_=>{_.preventDefault(),r()},[r]),M=m.useCallback(({target:_})=>{const E=o.current;(!(E instanceof Element)||!(_ instanceof Element)||E!==_&&!E.contains(_))&&r()},[o,r]),S=m.useCallback(_=>{_.preventDefault()},[]);return p==null?null:se(v).with(Le.nullish,()=>b?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?P.jsx(Me,{visible:d,onPressClose:r,returnFocus:!1,children:typeof i=="function"?i({mode:"panel"}):i}):P.jsxs(Ie,{container:p,children:[d&&f?P.jsx(ie,{ref:C,style:N.underlay,onPress:I,"aria-label":"Close"}):null,P.jsx(ke,{style:N.container,...dt,children:L.isSome()?P.jsx(T,{style:L.get().rootStyle,children:P.jsx(T,{style:[N.popoverContainer,L.get().style,{alignItems:se(L.get().horizontalPosition).with("left",()=>"flex-start").with("center",()=>"center").with("right",()=>"flex-end").exhaustive()}],children:P.jsx(ee,{style:N.popover,contentContainerStyle:N.popoverContents,id:e,role:s,"aria-describedby":a,"aria-label":t,children:P.jsx(xe,{focusLock:!0,returnFocus:u,autoFocus:c,onEscapeKey:l,onClickOutside:f?void 0:M,children:P.jsx(ie,{tabIndex:-1,onPress:S,style:N.defaultCursor,children:typeof i=="function"?i({mode:"dropdown"}):i})})})})}):null})]})});mt.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{role:{defaultValue:{value:'"dialog"',computed:!1},required:!1},matchReferenceWidth:{defaultValue:{value:"false",computed:!1},required:!1},matchReferenceMinWidth:{defaultValue:{value:"false",computed:!1},required:!1},onDismiss:{defaultValue:{value:"() => {}",computed:!1},required:!1},onEscapeKey:{defaultValue:{value:"onDismiss = noop",computed:!1},required:!1},returnFocus:{defaultValue:{value:"true",computed:!1},required:!1},autoFocus:{defaultValue:{value:"true",computed:!1},required:!1},underlay:{defaultValue:{value:"true",computed:!1},required:!1}}};export{wt as F,mt as P,k as V,B as _,Fe as a,te as k};
//# sourceMappingURL=Popover-CbrYZVh_.js.map
