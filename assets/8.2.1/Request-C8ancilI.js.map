{"version":3,"file":"Request-C8ancilI.js","sources":["../../../node_modules/@swan-io/request/dist/Request.mjs"],"sourcesContent":["import{Result as t,Future as e,Dict as r,Option as n}from\"@swan-io/boxed\";function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){var e=\"function\"==typeof Map?new Map:void 0;return a=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(o())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var u=new(t.bind.apply(t,n));return r&&s(u,r.prototype),u}(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},a(t)}function c(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}var l=/*#__PURE__*/function(t){function e(r){var n;return(n=t.call(this,\"Request to \"+r+\" failed\")||this).url=void 0,Object.setPrototypeOf(c(n),e.prototype),n.name=\"NetworkError\",n.url=r,n}return u(e,t),e}(/*#__PURE__*/a(Error)),p=/*#__PURE__*/function(t){function e(r,n){var o;return null==n?((o=t.call(this,\"Request to \"+r+\" timed out\")||this).url=void 0,o.timeout=void 0):((o=t.call(this,\"Request to \"+r+\" timed out (> \"+n+\"ms)\")||this).url=void 0,o.timeout=void 0),Object.setPrototypeOf(c(o),e.prototype),o.name=\"TimeoutError\",o.url=r,o.timeout=n,c(o)}return u(e,t),e}(/*#__PURE__*/a(Error)),f=/*#__PURE__*/function(t){function e(r,n,o){var u;return(u=t.call(this,\"Request to \"+r+\" gave status \"+n)||this).url=void 0,u.status=void 0,u.response=void 0,Object.setPrototypeOf(c(u),e.prototype),u.name=\"BadStatusError\",u.url=r,u.status=n,u.response=o,u}return u(e,t),e}(/*#__PURE__*/a(Error)),d=function(e){return e.ok?t.Ok(e):t.Error(new f(e.url,e.status,e.response.toUndefined()))},v=/*#__PURE__*/function(t){function e(r){var n;return(n=t.call(this,\"Request to \"+r+\" gave an empty response\")||this).url=void 0,Object.setPrototypeOf(c(n),e.prototype),n.name=\"EmptyResponseError\",n.url=r,n}return u(e,t),e}(/*#__PURE__*/a(Error)),y=function(t){return t.response.toResult(new v(t.url))},m={make:function(o){var u=o.url,i=o.method,s=void 0===i?\"GET\":i,a=o.responseType,c=o.body,f=o.headers,d=o.withCredentials,v=void 0!==d&&d,y=o.onLoadStart,m=o.onProgress,h=o.timeout;return e.make(function(e){var o=new XMLHttpRequest;o.withCredentials=v,o.open(s,u,!0),null!=a&&(o.responseType=a),null!=h&&(o.timeout=h),null!=f&&r.entries(f).forEach(function(t){return o.setRequestHeader(t[0],t[1])});var i=function(){b(),e(t.Error(new l(u)))},d=function(){b(),e(t.Error(new p(u,h)))},E=function(){b();var r=o.status,i=n.fromNullable(o.response);e(t.Ok({url:u,status:r,ok:r>=200&&r<300,response:i,xhr:o}))},b=function(){o.removeEventListener(\"error\",i),o.removeEventListener(\"load\",E),o.removeEventListener(\"timeout\",d),null!=y&&o.removeEventListener(\"loadstart\",y),null!=m&&o.removeEventListener(\"progress\",m)};return o.addEventListener(\"error\",i),o.addEventListener(\"load\",E),o.addEventListener(\"timeout\",d),null!=y&&o.addEventListener(\"loadstart\",y),null!=m&&o.addEventListener(\"progress\",m),o.send(c),function(){b(),o.abort()}})}};export{f as BadStatusError,v as EmptyResponseError,l as NetworkError,m as Request,p as TimeoutError,d as badStatusToError,y as emptyToError};\n//# sourceMappingURL=Request.mjs.map\n"],"names":["o","t","u","e","s","i","a","r","n","c","l","p","f","d","v","y","m","h","b","E"],"mappings":"6DAA0E,SAASA,GAAG,CAAC,GAAG,CAAC,IAAIC,EAAE,CAAC,QAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,QAAQ,CAAA,EAAG,UAAU,EAAE,CAAC,CAAC,MAAS,CAAA,CAAE,OAAOD,EAAE,UAAU,CAAC,MAAM,CAAC,CAACC,CAAC,GAAI,CAAA,CAAC,SAASC,EAAED,EAAEE,EAAE,CAACF,EAAE,UAAU,OAAO,OAAOE,EAAE,SAAS,EAAEF,EAAE,UAAU,YAAYA,EAAEG,EAAEH,EAAEE,CAAC,CAAC,CAAC,SAASE,EAAEJ,EAAE,CAAC,OAAOI,EAAE,OAAO,eAAe,OAAO,eAAe,OAAO,SAAS,EAAE,CAAC,OAAO,EAAE,WAAW,OAAO,eAAe,CAAC,CAAC,EAAEA,EAAEJ,CAAC,CAAC,CAAC,SAASG,EAAEH,EAAEE,EAAE,CAAC,OAAOC,EAAE,OAAO,eAAe,OAAO,eAAe,KAAI,EAAG,SAASH,EAAEE,EAAE,CAAC,OAAOF,EAAE,UAAUE,EAAEF,CAAC,EAAEG,EAAEH,EAAEE,CAAC,CAAC,CAAC,SAASG,EAAEL,EAAE,CAAC,IAAIE,EAAc,OAAO,KAAnB,WAAuB,IAAI,IAAI,OAAO,OAAOG,EAAE,SAASL,EAAE,CAAC,GAAUA,IAAP,MAAU,CAAC,SAASA,EAAE,CAAC,GAAG,CAAC,OAAW,SAAS,SAAS,KAAKA,CAAC,EAAE,QAAQ,eAAe,IAAtD,EAAuD,MAAS,CAAC,OAAkB,OAAOA,GAAnB,UAAoB,CAAC,EAAEA,CAAC,EAAE,OAAOA,EAAE,GAAe,OAAOA,GAAnB,WAAqB,MAAM,IAAI,UAAU,oDAAoD,EAAE,GAAYE,IAAT,OAAW,CAAC,GAAGA,EAAE,IAAIF,CAAC,EAAE,OAAOE,EAAE,IAAIF,CAAC,EAAEE,EAAE,IAAIF,EAAEM,CAAC,CAAC,CAAC,SAASA,GAAG,CAAC,OAAO,SAASN,EAAEE,EAAEI,EAAE,CAAC,GAAGP,EAAC,EAAG,OAAO,QAAQ,UAAU,MAAM,KAAK,SAAS,EAAE,IAAIQ,EAAE,CAAC,IAAI,EAAEA,EAAE,KAAK,MAAMA,EAAEL,CAAC,EAAE,IAAID,EAAE,IAAID,EAAE,KAAK,MAAMA,EAAEO,CAAC,GAAG,OAAOD,GAAGH,EAAEF,EAAEK,EAAE,SAAS,EAAEL,CAAC,EAAED,EAAE,UAAUI,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC,OAAOE,EAAE,UAAU,OAAO,OAAON,EAAE,UAAU,CAAC,YAAY,CAAC,MAAMM,EAAE,WAAW,GAAG,SAAS,GAAG,aAAa,EAAE,CAAC,CAAC,EAAEH,EAAEG,EAAEN,CAAC,CAAC,EAAEK,EAAEL,CAAC,CAAC,CAAC,SAASQ,EAAER,EAAE,CAAC,GAAYA,IAAT,OAAW,MAAM,IAAI,eAAe,2DAA2D,EAAE,OAAOA,CAAC,CAAI,IAACS,EAAe,SAAST,EAAE,CAAC,SAASE,EAAE,EAAE,CAAC,IAAI,EAAE,OAAO,EAAEF,EAAE,KAAK,KAAK,cAAc,EAAE,SAAS,GAAG,MAAM,IAAI,OAAO,OAAO,eAAeQ,EAAE,CAAC,EAAEN,EAAE,SAAS,EAAE,EAAE,KAAK,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,OAAOD,EAAEC,EAAEF,CAAC,EAAEE,CAAC,EAAeG,EAAE,KAAK,CAAC,EAAEK,EAAe,SAASV,EAAE,CAAC,SAASE,EAAE,EAAE,EAAE,CAAC,IAAI,EAAE,OAAa,GAAN,OAAU,EAAEF,EAAE,KAAK,KAAK,cAAc,EAAE,YAAY,GAAG,MAAM,IAAI,OAAO,EAAE,QAAQ,UAAU,EAAEA,EAAE,KAAK,KAAK,cAAc,EAAE,iBAAiB,EAAE,KAAK,GAAG,MAAM,IAAI,OAAO,EAAE,QAAQ,QAAQ,OAAO,eAAeQ,EAAE,CAAC,EAAEN,EAAE,SAAS,EAAE,EAAE,KAAK,eAAe,EAAE,IAAI,EAAE,EAAE,QAAQ,EAAEM,EAAE,CAAC,CAAC,CAAC,OAAOP,EAAEC,EAAEF,CAAC,EAAEE,CAAC,EAAeG,EAAE,KAAK,CAAC,EAAEM,EAAe,SAASX,EAAE,CAAC,SAASE,EAAE,EAAE,EAAE,EAAE,CAAC,IAAID,EAAE,OAAOA,EAAED,EAAE,KAAK,KAAK,cAAc,EAAE,gBAAgB,CAAC,GAAG,MAAM,IAAI,OAAOC,EAAE,OAAO,OAAOA,EAAE,SAAS,OAAO,OAAO,eAAeO,EAAEP,CAAC,EAAEC,EAAE,SAAS,EAAED,EAAE,KAAK,iBAAiBA,EAAE,IAAI,EAAEA,EAAE,OAAO,EAAEA,EAAE,SAAS,EAAEA,CAAC,CAAC,OAAOA,EAAEC,EAAEF,CAAC,EAAEE,CAAC,EAAeG,EAAE,KAAK,CAAC,EAAEO,EAAE,SAAS,EAAE,CAAC,OAAO,EAAE,GAAGZ,EAAE,GAAG,CAAC,EAAEA,EAAE,MAAM,IAAIW,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,YAAa,CAAA,CAAC,CAAC,EAAEE,EAAe,SAASb,EAAE,CAAC,SAASE,EAAE,EAAE,CAAC,IAAI,EAAE,OAAO,EAAEF,EAAE,KAAK,KAAK,cAAc,EAAE,yBAAyB,GAAG,MAAM,IAAI,OAAO,OAAO,eAAeQ,EAAE,CAAC,EAAEN,EAAE,SAAS,EAAE,EAAE,KAAK,qBAAqB,EAAE,IAAI,EAAE,CAAC,CAAC,OAAOD,EAAEC,EAAEF,CAAC,EAAEE,CAAC,EAAeG,EAAE,KAAK,CAAC,EAAES,EAAE,SAASd,EAAE,CAAC,OAAOA,EAAE,SAAS,SAAS,IAAIa,EAAEb,EAAE,GAAG,CAAC,CAAC,EAAEe,EAAE,CAAC,KAAK,SAAShB,EAAE,CAAC,IAAIE,EAAEF,EAAE,IAAIK,EAAEL,EAAE,OAAOI,EAAWC,IAAT,OAAW,MAAMA,EAAEC,EAAEN,EAAE,aAAaS,EAAET,EAAE,KAAKY,EAAEZ,EAAE,QAAQa,EAAEb,EAAE,gBAAgB,EAAWa,IAAT,QAAYA,EAAE,EAAEb,EAAE,YAAY,EAAEA,EAAE,WAAWiB,EAAEjB,EAAE,QAAQ,OAAOG,EAAE,KAAK,SAASA,EAAE,CAAC,IAAIH,EAAE,IAAI,eAAeA,EAAE,gBAAgB,EAAEA,EAAE,KAAKI,EAAEF,EAAE,EAAE,EAAQI,GAAN,OAAUN,EAAE,aAAaM,GAASW,GAAN,OAAUjB,EAAE,QAAQiB,GAASL,GAAN,MAASL,EAAE,QAAQK,CAAC,EAAE,QAAQ,SAASX,EAAE,CAAC,OAAOD,EAAE,iBAAiBC,EAAE,CAAC,EAAEA,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAII,EAAE,UAAU,CAACa,EAAC,EAAGf,EAAEF,EAAE,MAAM,IAAIS,EAAER,CAAC,CAAC,CAAC,CAAC,EAAEW,EAAE,UAAU,CAACK,EAAG,EAACf,EAAEF,EAAE,MAAM,IAAIU,EAAET,EAAEe,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAE,UAAU,CAACD,EAAG,EAAC,IAAIX,EAAEP,EAAE,OAAOK,EAAEG,EAAE,aAAaR,EAAE,QAAQ,EAAEG,EAAEF,EAAE,GAAG,CAAC,IAAIC,EAAE,OAAOK,EAAE,GAAGA,GAAG,KAAKA,EAAE,IAAI,SAASF,EAAE,IAAIL,CAAC,CAAC,CAAC,CAAC,EAAEkB,EAAE,UAAU,CAAClB,EAAE,oBAAoB,QAAQK,CAAC,EAAEL,EAAE,oBAAoB,OAAOmB,CAAC,EAAEnB,EAAE,oBAAoB,UAAUa,CAAC,EAAQ,GAAN,MAASb,EAAE,oBAAoB,YAAY,CAAC,EAAQ,GAAN,MAASA,EAAE,oBAAoB,WAAW,CAAC,CAAC,EAAE,OAAOA,EAAE,iBAAiB,QAAQK,CAAC,EAAEL,EAAE,iBAAiB,OAAOmB,CAAC,EAAEnB,EAAE,iBAAiB,UAAUa,CAAC,EAAQ,GAAN,MAASb,EAAE,iBAAiB,YAAY,CAAC,EAAQ,GAAN,MAASA,EAAE,iBAAiB,WAAW,CAAC,EAAEA,EAAE,KAAKS,CAAC,EAAE,UAAU,CAACS,EAAG,EAAClB,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC","x_google_ignoreList":[0]}