{"version":3,"file":"FullViewportLayer.stories-BfOFqdxo.js","sources":["../../../packages/lake/src/components/FullViewportLayer.tsx"],"sourcesContent":["import { ReactNode, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { backgroundColor } from \"../constants/design\";\nimport { FocusTrap } from \"./FocusTrap\";\nimport { LoadingView } from \"./LoadingView\";\nimport { Portal } from \"./Portal\";\nimport { Suspendable } from \"./Suspendable\";\nimport { TransitionView } from \"./TransitionView\";\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    animationFillMode: \"forwards\",\n    overflow: \"hidden\",\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0, transform: \"translateX(200px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0, transform: \"translateX(200px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    backgroundColor: backgroundColor.default,\n  },\n  contentsEnter: {\n    animationKeyframes: {\n      \"0%\": { transform: \"translateX(50px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsLeave: {\n    animationKeyframes: {\n      \"100%\": { transform: \"translateX(50px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsContainer: {\n    ...StyleSheet.absoluteFillObject,\n    zIndex: 2,\n    maxWidth: \"100%\",\n  },\n  contents: {\n    ...StyleSheet.absoluteFillObject,\n    maxWidth: \"100%\",\n  },\n});\n\ntype Props = {\n  visible: boolean;\n  children: ReactNode;\n};\n\nconst rootNode = document.querySelector(\"#full-page-layer-root\") as Element;\n\nexport const FullViewportLayer = ({ visible, children }: Props) => {\n  const [delayedVisible, setDelayedVisible] = useState(visible);\n\n  useEffect(() => {\n    setDelayedVisible(visible);\n  }, [visible]);\n\n  return (\n    <Portal container={rootNode}>\n      <View style={[styles.root, !visible && styles.inert]}>\n        <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n          {visible ? <View style={styles.overlay} /> : null}\n        </TransitionView>\n\n        <Suspendable fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n          <TransitionView\n            style={styles.fill}\n            enter={styles.containerEnter}\n            leave={styles.containerLeave}\n          >\n            {delayedVisible ? (\n              <FocusTrap\n                focusLock={true}\n                autoFocus={true}\n                returnFocus={true}\n                style={styles.container}\n              >\n                <TransitionView\n                  style={styles.contentsContainer}\n                  enter={styles.contentsEnter}\n                  leave={styles.contentsLeave}\n                >\n                  <View style={styles.contents}>\n                    <View style={styles.contentsContainer}>{children}</View>\n                  </View>\n                </TransitionView>\n              </FocusTrap>\n            ) : null}\n          </TransitionView>\n        </Suspendable>\n      </View>\n    </Portal>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","backgroundColor","rootNode","FullViewportLayer","visible","children","delayedVisible","setDelayedVisible","useState","useEffect","jsx","Portal","View","TransitionView","Suspendable","LoadingView","FocusTrap"],"mappings":"gpBASA,MAAAA,EAAA,qBAEAC,EAAAC,EAAA,OAAA,CACA,KAAA,CACA,GAAAA,EAAA,mBACA,SAAA,OACA,EACA,MAAA,CACA,cAAA,MACA,EACA,KAAA,CACA,GAAAA,EAAA,mBACA,kBAAA,WACA,SAAA,QACA,EACA,aAAA,CACA,mBAAA,CACA,KAAA,CAAA,QAAA,CAAA,CACA,EACA,kBAAA,QACA,wBAAA,aACA,EACA,aAAA,CACA,mBAAA,CACA,OAAA,CAAA,QAAA,CAAA,CACA,EACA,kBAAA,QACA,wBAAA,aACA,EACA,eAAA,CACA,mBAAA,CACA,KAAA,CAAA,QAAA,EAAA,UAAA,mBAAA,CACA,EACA,kBAAA,QACA,wBAAA,aACA,EACA,eAAA,CACA,mBAAA,CACA,OAAA,CAAA,QAAA,EAAA,UAAA,mBAAA,CACA,EACA,kBAAA,QACA,wBAAA,aACA,EACA,QAAA,CACA,GAAAA,EAAA,mBACA,gBAAAF,CACA,EACA,UAAA,CACA,GAAAE,EAAA,mBACA,cAAA,MACA,WAAA,UACA,gBAAAC,EAAA,OACA,EACA,cAAA,CACA,mBAAA,CACA,KAAA,CAAA,UAAA,kBAAA,CACA,EACA,kBAAA,QACA,wBAAA,aACA,EACA,cAAA,CACA,mBAAA,CACA,OAAA,CAAA,UAAA,kBAAA,CACA,EACA,kBAAA,QACA,wBAAA,aACA,EACA,kBAAA,CACA,GAAAD,EAAA,mBACA,OAAA,EACA,SAAA,MACA,EACA,SAAA,CACA,GAAAA,EAAA,mBACA,SAAA,MACA,CACA,CAAA,EAOAE,EAAA,SAAA,cAAA,uBAAA,EAEAC,EAAA,CAAA,CAAA,QAAAC,EAAA,SAAAC,KAAA,CACA,KAAA,CAAAC,EAAAC,CAAA,EAAAC,WAAAJ,CAAA,EAEAK,OAAAA,EAAAA,UAAA,IAAA,CACAF,EAAAH,CAAA,CAAA,EACA,CAAAA,CAAA,CAAA,EAGAM,EAAAA,IAAAC,EAAA,CAAA,UAAAT,EACA,gBAAAU,EAAA,CAAA,MAAA,CAAAb,EAAA,KAAA,CAAAK,GAAAL,EAAA,KAAA,EACA,SAAA,CAAAW,MAAAG,GAAA,MAAAd,EAAA,KAAA,MAAAA,EAAA,aAAA,MAAAA,EAAA,aACA,WAAAW,EAAA,IAAAE,EAAA,CAAA,MAAAb,EAAA,OAAA,CAAA,EAAA,KACA,EAEAW,EAAAA,IAAAI,EAAA,CAAA,SAAAJ,EAAA,IAAAK,EAAA,CAAA,MAAAd,EAAA,SAAA,MAAA,CAAA,CAAA,EACA,SAAAS,EAAA,IAAAG,EAAA,CACA,MAAAd,EAAA,KACA,MAAAA,EAAA,eACA,MAAAA,EAAA,eAEA,SACAO,EAAAI,EAAA,IAAAM,EAAA,CACA,UAAA,GACA,UAAA,GACA,YAAA,GACA,MAAAjB,EAAA,UAEA,SAAAW,EAAA,IAAAG,EAAA,CACA,MAAAd,EAAA,kBACA,MAAAA,EAAA,cACA,MAAAA,EAAA,cAEA,SAAAW,EAAA,IAAAE,EAAA,CAAA,MAAAb,EAAA,SACA,SAAAW,EAAA,IAAAE,EAAA,CAAA,MAAAb,EAAA,kBAAA,SAAAM,CAAA,CAAA,EACA,CAAA,CACA,CAAA,CAAA,EAEA,IAAA,CAAA,EAEA,CAAA,CACA,CAAA,CACA,CAAA,CAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}