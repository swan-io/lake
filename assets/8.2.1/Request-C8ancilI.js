import{v as p,N as _,G as k,H as q}from"./Space-D2q7n8S5.js";function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j=function(){return!!e})()}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},f(e,t)}function c(e){var t=typeof Map=="function"?new Map:void 0;return c=function(r){if(r===null||!function(o){try{return Function.toString.call(o).indexOf("[native code]")!==-1}catch{return typeof o=="function"}}(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return function(o,i,l){if(j())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,i);var v=new(o.bind.apply(o,s));return l&&f(v,l.prototype),v}(r,arguments,w(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,r)},c(e)}function d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=function(e){function t(r){var n;return(n=e.call(this,"Request to "+r+" failed")||this).url=void 0,Object.setPrototypeOf(d(n),t.prototype),n.name="NetworkError",n.url=r,n}return E(t,e),t}(c(Error)),x=function(e){function t(r,n){var o;return n==null?((o=e.call(this,"Request to "+r+" timed out")||this).url=void 0,o.timeout=void 0):((o=e.call(this,"Request to "+r+" timed out (> "+n+"ms)")||this).url=void 0,o.timeout=void 0),Object.setPrototypeOf(d(o),t.prototype),o.name="TimeoutError",o.url=r,o.timeout=n,d(o)}return E(t,e),t}(c(Error)),S=function(e){function t(r,n,o){var i;return(i=e.call(this,"Request to "+r+" gave status "+n)||this).url=void 0,i.status=void 0,i.response=void 0,Object.setPrototypeOf(d(i),t.prototype),i.name="BadStatusError",i.url=r,i.status=n,i.response=o,i}return E(t,e),t}(c(Error)),M=function(e){return e.ok?p.Ok(e):p.Error(new S(e.url,e.status,e.response.toUndefined()))},B=function(e){function t(r){var n;return(n=e.call(this,"Request to "+r+" gave an empty response")||this).url=void 0,Object.setPrototypeOf(d(n),t.prototype),n.name="EmptyResponseError",n.url=r,n}return E(t,e),t}(c(Error)),N=function(e){return e.response.toResult(new B(e.url))},C={make:function(e){var t=e.url,r=e.method,n=r===void 0?"GET":r,o=e.responseType,i=e.body,l=e.headers,s=e.withCredentials,v=s!==void 0&&s,y=e.onLoadStart,m=e.onProgress,b=e.timeout;return _.make(function(O){var u=new XMLHttpRequest;u.withCredentials=v,u.open(n,t,!0),o!=null&&(u.responseType=o),b!=null&&(u.timeout=b),l!=null&&k.entries(l).forEach(function(a){return u.setRequestHeader(a[0],a[1])});var g=function(){h(),O(p.Error(new T(t)))},L=function(){h(),O(p.Error(new x(t,b)))},R=function(){h();var a=u.status,P=q.fromNullable(u.response);O(p.Ok({url:t,status:a,ok:a>=200&&a<300,response:P,xhr:u}))},h=function(){u.removeEventListener("error",g),u.removeEventListener("load",R),u.removeEventListener("timeout",L),y!=null&&u.removeEventListener("loadstart",y),m!=null&&u.removeEventListener("progress",m)};return u.addEventListener("error",g),u.addEventListener("load",R),u.addEventListener("timeout",L),y!=null&&u.addEventListener("loadstart",y),m!=null&&u.addEventListener("progress",m),u.send(i),function(){h(),u.abort()}})}};export{M as d,C as m,N as y};
//# sourceMappingURL=Request-C8ancilI.js.map
