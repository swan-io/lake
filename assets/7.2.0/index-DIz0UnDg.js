import{_ as D}from"./extends-CCbyfPlC.js";import{_ as ue,V as E,Q as p,R as L,s as Q,v as Z}from"./Space-DL-ib-Tf.js";import{R as de,r as v}from"./index-CBqU2yxZ.js";import{I as me}from"./index-BpndFZoR.js";import{g as ce}from"./_commonjsHelpers-BosuxZz1.js";var ve={OS:"web",select:i=>"web"in i?i.web:i.default,get isTesting(){return!1}},_e=function i(e,t,s){if(s===void 0&&(s=-1),s===0)return!0;if(e===t||typeof e=="function"&&typeof t=="function")return!1;if(typeof e!="object"||e===null)return e!==t;if(typeof t!="object"||t===null||e.constructor!==t.constructor)return!0;if(Array.isArray(e)){var l=e.length;if(t.length!==l)return!0;for(var n=0;n<l;n++)if(i(e[n],t[n],s-1))return!0}else{for(var h in e)if(i(e[h],t[h],s-1))return!0;for(var r in t)if(e[r]===void 0&&t[r]!==void 0)return!0}return!1};function ee(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=i[t];return s}function pe(i,e){if(i){if(typeof i=="string")return ee(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ee(i,e)}}function N(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=pe(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var s=0;return function(){return s>=i.length?{done:!0}:{done:!1,value:i[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ge=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function ye(i){i.colors,i.enabled,i.onRefresh,i.progressBackgroundColor,i.progressViewOffset,i.refreshing,i.size,i.tintColor,i.title,i.titleColor;var e=ue(i,ge);return de.createElement(E,e)}class Ce{constructor(e,t){this._delay=t,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=me.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function be(i,e,t){return e<i?i:e>t?t:e}var Le=be;const te=ce(Le);function Se(){return console.log(...arguments)}class Ie{constructor(e){p(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(p(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var t=this._findRegion(e.first),s=t[0],l=t[1],n=this._findRegion(e.last),h=n[0],r=n[1];if(!(l===r&&!s.isSpacer)){var a=[],o=[],u=L(L({},e),{},{isSpacer:!1});s.first<u.first&&(s.isSpacer?a.push({first:s.first,last:u.first-1,isSpacer:!0}):u.first=s.first),h.last>u.last&&(h.isSpacer?o.push({first:u.last+1,last:h.last,isSpacer:!0}):u.last=h.last);var c=[...a,u,...o],f=r-l+1;this._regions.splice(l,f,...c)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((t,s)=>t.first===e._regions[s].first&&t.last===e._regions[s].last&&t.isSpacer===e._regions[s].isSpacer)}_findRegion(e){for(var t=0,s=this._regions.length-1;t<=s;){var l=Math.floor((t+s)/2),n=this._regions[l];if(e>=n.first&&e<=n.last)return[n,l];e<n.first?s=l-1:e>n.last&&(t=l+1)}p(!1,"A region was not found containing cellIdx "+e)}}class we{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,t){var s;p(!this._childrenToCellKey.has(e),"Trying to add already present child list");var l=(s=this._cellKeyToChildren.get(t))!==null&&s!==void 0?s:new Set;l.add(e),this._cellKeyToChildren.set(t,l),this._childrenToCellKey.set(e,t)}remove(e){var t=this._childrenToCellKey.get(e);p(t!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var s=this._cellKeyToChildren.get(t);p(s,"_cellKeyToChildren should contain cellKey"),s.delete(e),s.size===0&&this._cellKeyToChildren.delete(t)}forEach(e){for(var t=N(this._cellKeyToChildren.values()),s;!(s=t()).done;)for(var l=s.value,n=N(l),h;!(h=n()).done;){var r=h.value;e(r)}}forEachInCell(e,t){for(var s,l=(s=this._cellKeyToChildren.get(e))!==null&&s!==void 0?s:[],n=N(l),h;!(h=n()).done;){var r=h.value;t(r)}}anyInCell(e,t){for(var s,l=(s=this._cellKeyToChildren.get(e))!==null&&s!==void 0?s:[],n=N(l),h;!(h=n()).done;){var r=h.value;if(t(r))return!0}return!1}size(){return this._childrenToCellKey.size}}class re{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var B=[],se=10,j=null;class Re{static addListener(e){return j===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),B.push(e),{remove:()=>{B=B.filter(t=>e!==t)}}}static setSampleRate(e){j=e}static setMinSampleCount(e){se=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new re,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(j||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<se){this._resetData();return}var t=global.performance.now()-e,s=L(L({},this._info),{},{total_time_spent:t});B.forEach(l=>l(s)),this._resetData()}}}computeBlankness(e,t,s){if(!this._enabled||e.getItemCount(e.data)===0||t.last<t.first||this._samplesStartTime==null)return 0;var l=s.dOffset,n=s.offset,h=s.velocity,r=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(r),this._info.pixels_scrolled+=Math.round(Math.abs(l));var a=Math.round(Math.abs(h)*1e3),o=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=o-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=o-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var u=0,c=t.first,f=this._getFrameMetrics(c,e);c<=t.last&&(!f||!f.inLayout);)f=this._getFrameMetrics(c,e),c++;f&&c>0&&(u=Math.min(r,Math.max(0,f.offset-n)));for(var d=0,m=t.last,_=this._getFrameMetrics(m,e);m>=t.first&&(!_||!_.inLayout);)_=this._getFrameMetrics(m,e),m--;if(_&&m<e.getItemCount(e.data)-1){var g=_.offset+_.length;d=Math.min(r,Math.max(0,n+r-g))}var y=Math.round(u+d),C=y/r;return C>0?(this._anyBlankStartTime=o,this._info.any_blank_speed_sum+=a,this._info.any_blank_count++,this._info.pixels_blank+=y,C>.5&&(this._mostlyBlankStartTime=o,this._info.mostly_blank_count++)):(a<.01||Math.abs(l)<1)&&this.deactivateAndFlush(),C}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new re,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class Me extends v.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,t){typeof e=="function"?super.setState((s,l)=>{this._inAsyncStateUpdate=!0;var n;try{n=e(s,l)}catch(h){throw h}finally{this._inAsyncStateUpdate=!1}return n},t):super.setState(e,t)}_installSetStateHooks(){var e=this,t=this.props,s=this.state;Object.defineProperty(this,"props",{get(){return p(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),t},set(l){t=l}}),Object.defineProperty(this,"state",{get(){return p(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),s},set(l){s=l}})}}class ie{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,s,l,n){var h=e.getItemCount(e.data),r=this._config,a=r.itemVisiblePercentThreshold,o=r.viewAreaCoveragePercentThreshold,u=o!=null,c=u?o:a;p(c!=null&&a!=null!=(o!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var f=[];if(h===0)return f;var d=-1,m=n||{first:0,last:h-1},_=m.first,g=m.last;if(g>=h)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:n,itemCount:h})),[];for(var y=_;y<=g;y++){var C=l(y,e);if(C){var R=C.offset-t,S=R+C.length;if(R<s&&S>0)d=y,Te(u,c,R,S,s,C.length)&&f.push(y);else if(d>=0)break}}return f}onUpdate(e,t,s,l,n,h,r){var a=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||a===0||!l(0,e))){var o=[];if(a&&(o=this.computeViewableItems(e,t,s,l,r)),!(this._viewableIndices.length===o.length&&this._viewableIndices.every((c,f)=>c===o[f])))if(this._viewableIndices=o,this._config.minimumViewTime){var u=setTimeout(()=>{this._timers.delete(u),this._onUpdateSync(e,o,h,n)},this._config.minimumViewTime);this._timers.add(u)}else this._onUpdateSync(e,o,h,n)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,t,s,l){t=t.filter(C=>this._viewableIndices.includes(C));for(var n=this._viewableItems,h=new Map(t.map(C=>{var R=l(C,!0,e);return[R.key,R]})),r=[],a=N(h),o;!(o=a()).done;){var u=o.value,c=u[0],f=u[1];n.has(c)||r.push(f)}for(var d=N(n),m;!(m=d()).done;){var _=m.value,g=_[0],y=_[1];h.has(g)||r.push(L(L({},y),{},{isViewable:!1}))}r.length>0&&(this._viewableItems=h,s({viewableItems:Array.from(h.values()),changed:r,viewabilityConfig:this._config}))}}function Te(i,e,t,s,l,n){if(ke(t,s,l))return!0;var h=Ee(t,s,l),r=100*(i?h/l:h/n);return r>=e}function Ee(i,e,t){var s=Math.min(e,t)-Math.max(i,0);return Math.max(0,s)}function ke(i,e,t){return i>=0&&e<=t&&e>i}var $=v.createContext(null);function xe(i){var e=i.children,t=i.value,s=v.useMemo(()=>({cellKey:null,getScrollMetrics:t.getScrollMetrics,horizontal:t.horizontal,getOutermostParentListRef:t.getOutermostParentListRef,registerAsNestedChild:t.registerAsNestedChild,unregisterAsNestedChild:t.unregisterAsNestedChild}),[t.getScrollMetrics,t.horizontal,t.getOutermostParentListRef,t.registerAsNestedChild,t.unregisterAsNestedChild]);return v.createElement($.Provider,{value:s},e)}function W(i){var e=i.cellKey,t=i.children,s=v.useContext($),l=v.useMemo(()=>s==null?null:L(L({},s),{},{cellKey:e}),[s,e]);return v.createElement($.Provider,{value:l},t)}class Fe extends v.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,t=e.cellKey,s=e.prevCellKey;this.props.onUpdateSeparators([t,s],{highlighted:!0})},unhighlight:()=>{var e=this.props,t=e.cellKey,s=e.prevCellKey;this.props.onUpdateSeparators([t,s],{highlighted:!1})},updateProps:(e,t)=>{var s=this.props,l=s.cellKey,n=s.prevCellKey;this.props.onUpdateSeparators([e==="leading"?n:l],t)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,t){return{separatorProps:L(L({},t.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(t=>({separatorProps:L(L({},t.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,t,s,l){if(e&&t&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),t)return v.createElement(t,{item:s,index:l,separators:this._separators});if(e)return e({item:s,index:l,separators:this._separators});p(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,t=e.CellRendererComponent,s=e.ItemSeparatorComponent,l=e.ListItemComponent,n=e.cellKey,h=e.horizontal,r=e.item,a=e.index,o=e.inversionStyle,u=e.onCellFocusCapture,c=e.onCellLayout,f=e.renderItem,d=this._renderElement(f,l,r,a),m=v.isValidElement(s)?s:s&&v.createElement(s,this.state.separatorProps),_=o?h?[q.rowReverse,o]:[q.columnReverse,o]:h?[q.row,o]:o,g=t?v.createElement(t,D({cellKey:n,index:a,item:r,style:_,onFocusCapture:u},c&&{onLayout:this._onLayout}),d,m):v.createElement(E,D({style:_,onFocusCapture:u},c&&{onLayout:this._onLayout}),d,m);return v.createElement(W,{cellKey:this.props.cellKey},g)}}var q=Q.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function Oe(i,e,t,s){s===void 0&&(s=1);for(var l=e.getItemCount(e.data),n=[],h=0;h<i.length;h++)for(var r=i[h],a=0,o=l-1;a<=o;){var u=a+(o-a>>>1),c=t(u,e),f=c.offset*s,d=(c.offset+c.length)*s;if(u===0&&r<f||u!==0&&r<=f)o=u-1;else if(r>d)a=u+1;else{n[h]=u;break}}return n}function Pe(i,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,i.last)-Math.max(e.first,i.first))}function ze(i,e,t,s,l,n){var h=i.getItemCount(i.data);if(h===0)return{first:0,last:-1};var r=n.offset,a=n.velocity,o=n.visibleLength,u=n.zoomScale,c=u===void 0?1:u,f=Math.max(0,r),d=f+o,m=(t-1)*o,_=.5,g=a>1?"after":a<-1?"before":"none",y=Math.max(0,f-(1-_)*m),C=Math.max(0,d+_*m),R=l(h-1,i).offset*c;if(R<y)return{first:Math.max(0,h-1-e),last:h-1};var S=Oe([y,f,d,C],i,l,c),M=S[0],b=S[1],I=S[2],w=S[3];M=M??0,b=b??Math.max(0,M),w=w??h-1,I=I??Math.min(w,b+e-1);for(var F={first:b,last:I},O=Pe(s,F);!(b<=M&&I>=w);){var T=O>=e,V=b<=s.first||b>s.last,P=b>M&&(!T||!V),H=I>=s.last||I<s.first,z=I<w&&(!T||!H);if(T&&!P&&!z)break;P&&!(g==="after"&&z&&H)&&(V&&O++,b--),z&&!(g==="before"&&P&&V)&&(H&&O++,I++)}if(!(I>=b&&b>=0&&I<h&&b>=M&&I<=w&&b<=F.first&&I>=F.last))throw new Error("Bad window calculation "+JSON.stringify({first:b,last:I,itemCount:h,overscanFirst:M,overscanLast:w,visible:F}));return{first:b,last:I}}function G(i,e){return typeof i=="object"&&(i==null?void 0:i.key)!=null?i.key:typeof i=="object"&&(i==null?void 0:i.id)!=null?i.id:String(e)}var U={exports:{}};function fe(i,e){if(i!=null)return i;var t=new Error(e!==void 0?e:"Got unexpected "+i);throw t.framesToPop=1,t}U.exports=fe;U.exports.default=fe;Object.defineProperty(U.exports,"__esModule",{value:!0});var Ve=U.exports;const Ae=ce(Ve);var le=.001,X=!1,Y="";function A(i){return i??!1}function Ke(i){return i??10}function J(i){return i??10}function Ne(i){return i??2}function ae(i){return i??2}function ne(i,e){return i*e/2}function He(i){return i??50}function oe(i){return i??21}function De(i,e){for(var t=i.length-1;t>=0;t--)if(e(i[t]))return i[t];return null}class k extends Me{scrollToEnd(e){var t=e?e.animated:!0,s=this.props.getItemCount(this.props.data)-1;if(!(s<0)){var l=this.__getFrameMetricsApprox(s,this.props),n=Math.max(0,l.offset+l.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(A(this.props.horizontal)?{x:n,animated:t}:{y:n,animated:t})}}}scrollToIndex(e){var t=this.props,s=t.data,l=t.horizontal,n=t.getItemCount,h=t.getItemLayout,r=t.onScrollToIndexFailed,a=e.animated,o=e.index,u=e.viewOffset,c=e.viewPosition;if(p(o>=0,"scrollToIndex out of range: requested index "+o+" but minimum is 0"),p(n(s)>=1,"scrollToIndex out of range: item length "+n(s)+" but minimum is 1"),p(o<n(s),"scrollToIndex out of range: requested index "+o+" is out of 0 to "+(n(s)-1)),!h&&o>this._highestMeasuredFrameIndex){p(!!r,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),r({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:o});return}var f=this.__getFrameMetricsApprox(Math.floor(o),this.props),d=Math.max(0,this._getOffsetApprox(o,this.props)-(c||0)*(this._scrollMetrics.visibleLength-f.length))-(u||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(l?{x:d,animated:a}:{y:d,animated:a})}}scrollToItem(e){for(var t=e.item,s=this.props,l=s.data,n=s.getItem,h=s.getItemCount,r=h(l),a=0;a<r;a++)if(n(l,a)===t){this.scrollToIndex(L(L({},e),{},{index:a}));break}}scrollToOffset(e){var t=e.animated,s=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(A(this.props.horizontal)?{x:s,animated:t}:{y:s,animated:t})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var t;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=r=>{this._nestedChildLists.add(r.ref,r.cellKey),this._hasInteracted&&r.ref.recordInteraction()},this._unregisterAsNestedChild=r=>{this._nestedChildLists.remove(r.ref)},this._onUpdateSeparators=(r,a)=>{r.forEach(o=>{var u=o!=null&&this._cellRefs[o];u&&u.updateSeparatorProps(a)})},this._getSpacerKey=r=>r?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new we,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=r=>{this._scrollRef=r},this._defaultRenderScrollComponent=r=>{var a=r.onRefresh;if(this._isNestedWithSameOrientation())return v.createElement(E,r);if(a){var o;return p(typeof r.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((o=r.refreshing)!==null&&o!==void 0?o:"undefined")+"`"),v.createElement(Z,D({},r,{refreshControl:r.refreshControl==null?v.createElement(ye,{refreshing:r.refreshing,onRefresh:a,progressViewOffset:r.progressViewOffset}):r.refreshControl}))}else return v.createElement(Z,r)},this._onCellLayout=(r,a,o)=>{var u=r.nativeEvent.layout,c={offset:this._selectOffset(u),length:this._selectLength(u),index:o,inLayout:!0},f=this._frames[a];!f||c.offset!==f.offset||c.length!==f.length||o!==f.index?(this._totalCellLength+=c.length-(f?f.length:0),this._totalCellsMeasured+=f?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[a]=c,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,o),this._scheduleCellsToRenderUpdate()):this._frames[a].inLayout=!0,this._triggerRemeasureForChildListsInCell(a),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=r=>{delete this._cellRefs[r];var a=this._frames[r];a&&(this._frames[r]=L(L({},a),{},{inLayout:!1}))},this._onLayout=r=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(r.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(r),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=r=>{this.props.onLayout&&this.props.onLayout(r)},this._onLayoutFooter=r=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(r.nativeEvent.layout)},this._onLayoutHeader=r=>{this._headerLength=this._selectLength(r.nativeEvent.layout)},this._onContentSizeChange=(r,a)=>{r>0&&a>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:Ae(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(r,a),this._scrollMetrics.contentLength=this._selectLength({height:a,width:r}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=r=>{var a=r.offset-this._offsetFromParentVirtualizedList,o=r.visibleLength,u=a-this._scrollMetrics.offset,c=this._scrollMetrics.contentLength;return{visibleLength:o,contentLength:c,offset:a,dOffset:u}},this._onScroll=r=>{this._nestedChildLists.forEach(y=>{y._onScroll(r)}),this.props.onScroll&&this.props.onScroll(r);var a=r.timeStamp,o=this._selectLength(r.nativeEvent.layoutMeasurement),u=this._selectLength(r.nativeEvent.contentSize),c=this._selectOffset(r.nativeEvent.contentOffset),f=c-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var d=this._convertParentScrollMetrics({visibleLength:o,offset:c});o=d.visibleLength,u=d.contentLength,c=d.offset,f=d.dOffset}var m=this._scrollMetrics.timestamp?Math.max(1,a-this._scrollMetrics.timestamp):1,_=f/m;m>500&&this._scrollMetrics.dt>500&&u>5*o&&!this._hasWarned.perf&&(Se("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:m,prevDt:this._scrollMetrics.dt,contentLength:u}),this._hasWarned.perf=!0);var g=r.nativeEvent.zoomScale<0?1:r.nativeEvent.zoomScale;this._scrollMetrics={contentLength:u,dt:m,dOffset:f,offset:c,timestamp:a,velocity:_,visibleLength:o,zoomScale:g},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),_!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=r=>{this._nestedChildLists.forEach(a=>{a._onScrollBeginDrag(r)}),this._viewabilityTuples.forEach(a=>{a.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(r)},this._onScrollEndDrag=r=>{this._nestedChildLists.forEach(o=>{o._onScrollEndDrag(r)});var a=r.nativeEvent.velocity;a&&(this._scrollMetrics.velocity=this._selectOffset(a)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(r)},this._onMomentumScrollBegin=r=>{this._nestedChildLists.forEach(a=>{a._onMomentumScrollBegin(r)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(r)},this._onMomentumScrollEnd=r=>{this._nestedChildLists.forEach(a=>{a._onMomentumScrollEnd(r)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(r)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((r,a)=>{var o=this._adjustCellsAroundViewport(a,r.cellsAroundViewport),u=k._createRenderMask(a,o,this._getNonViewportRenderRegions(a));return o.first===r.cellsAroundViewport.first&&o.last===r.cellsAroundViewport.last&&u.equals(r.renderMask)?null:{cellsAroundViewport:o,renderMask:u}})},this._createViewToken=(r,a,o)=>{var u=o.data,c=o.getItem,f=c(u,r);return{index:r,item:f,key:this._keyExtractor(f,r,o),isViewable:a}},this._getOffsetApprox=(r,a)=>{if(Number.isInteger(r))return this.__getFrameMetricsApprox(r,a).offset;var o=this.__getFrameMetricsApprox(Math.floor(r),a),u=r-Math.floor(r);return o.offset+u*o.length},this.__getFrameMetricsApprox=(r,a)=>{var o=this._getFrameMetrics(r,a);if(o&&o.index===r)return o;var u=a.data,c=a.getItemCount,f=a.getItemLayout;return p(r>=0&&r<c(u),"Tried to get frame for out of range index "+r),p(!f,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*r}},this._getFrameMetrics=(r,a)=>{var o=a.data,u=a.getItem,c=a.getItemCount,f=a.getItemLayout;p(r>=0&&r<c(o),"Tried to get frame for out of range index "+r);var d=u(o,r),m=this._frames[this._keyExtractor(d,r,a)];return(!m||m.index!==r)&&f?f(o,r):m},this._getNonViewportRenderRegions=r=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var a=this._cellRefs[this._lastFocusedCellKey],o=a.props.index,u=r.getItemCount(r.data);if(o>=u||this._keyExtractor(r.getItem(r.data,o),o,r)!==this._lastFocusedCellKey)return[];for(var c=o,f=0,d=c-1;d>=0&&f<this._scrollMetrics.visibleLength;d--)c--,f+=this.__getFrameMetricsApprox(d,r).length;for(var m=o,_=0,g=m+1;g<u&&_<this._scrollMetrics.visibleLength;g++)m++,_+=this.__getFrameMetricsApprox(g,r).length;return[{first:c,last:m}]},this._checkProps(e),this._fillRateHelper=new Re(this._getFrameMetrics),this._updateCellsToRenderBatcher=new Ce(this._updateCellsToRender,(t=this.props.updateCellsBatchingPeriod)!==null&&t!==void 0?t:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(r=>({viewabilityHelper:new ie(r.viewabilityConfig),onViewableItemsChanged:r.onViewableItemsChanged}));else{var s=this.props,l=s.onViewableItemsChanged,n=s.viewabilityConfig;l&&this._viewabilityTuples.push({viewabilityHelper:new ie(n),onViewableItemsChanged:l})}var h=k._initialRenderRegion(e);this.state={cellsAroundViewport:h,renderMask:k._createRenderMask(e,h)},this.invertedWheelEventHandler=r=>{var a=this.props.horizontal?r.target.scrollLeft:r.target.scrollTop,o=this.props.horizontal?r.target.scrollWidth:r.target.scrollHeight,u=this.props.horizontal?r.target.clientWidth:r.target.clientHeight,c=o>u,f=this.props.horizontal?r.deltaX||r.wheelDeltaX:r.deltaY||r.wheelDeltaY,d=f;c&&(d=f<0?Math.min(f+a,0):Math.max(f-(o-u-a),0));var m=f-d;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var _=this._scrollRef.getScrollableNode();if(this.props.horizontal){r.target.scrollLeft+=m;var g=_.scrollLeft-d;_.scrollLeft=this.props.getItemLayout?g:Math.min(g,this._totalCellLength)}else{r.target.scrollTop+=m;var y=_.scrollTop-d;_.scrollTop=this.props.getItemLayout?y:Math.min(y,this._totalCellLength)}r.preventDefault()}}}_checkProps(e){var t=e.onScroll,s=e.windowSize,l=e.getItemCount,n=e.data,h=e.initialScrollIndex;p(!t||!t.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),p(oe(s)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),p(l,'VirtualizedList: The "getItemCount" prop must be provided');var r=l(n);h!=null&&!this._hasTriggeredInitialScrollToIndex&&(h<0||r>0&&h>=r)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+h+'" is not valid (list has '+r+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,t,s){var l=e.getItemCount(e.data);p(t.first>=0&&t.last>=t.first-1&&t.last<l,'Invalid cells around viewport "['+t.first+", "+t.last+']" was passed to VirtualizedList._createRenderMask');var n=new Ie(l);if(l>0){for(var h=[t,...s??[]],r=0,a=h;r<a.length;r++){var o=a[r];n.addCells(o)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var u=k._initialRenderRegion(e);n.addCells(u)}var c=new Set(e.stickyHeaderIndices);k._ensureClosestStickyHeader(e,c,n,t.first)}return n}static _initialRenderRegion(e){var t,s=e.getItemCount(e.data),l=Math.max(0,Math.min(s-1,Math.floor((t=e.initialScrollIndex)!==null&&t!==void 0?t:0))),n=Math.min(s,l+Ke(e.initialNumToRender))-1;return{first:l,last:n}}static _ensureClosestStickyHeader(e,t,s,l){for(var n=e.ListHeaderComponent?1:0,h=l-1;h>=0;h--)if(t.has(h+n)){s.addCells({first:h,last:h});break}}_adjustCellsAroundViewport(e,t){var s=e.data,l=e.getItemCount,n=ae(e.onEndReachedThreshold),h=this._scrollMetrics,r=h.contentLength,a=h.offset,o=h.visibleLength,u=r-o-a;if(o<=0||r<=0)return t.last>=l(s)?k._constrainToItemCount(t,e):t;var c;if(e.disableVirtualization){var f=u<n*o?J(e.maxToRenderPerBatch):0;c={first:0,last:Math.min(t.last+f,l(s)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(u)>=Number.EPSILON)return t.last>=l(s)?k._constrainToItemCount(t,e):t;c=ze(e,J(e.maxToRenderPerBatch),oe(e.windowSize),t,this.__getFrameMetricsApprox,this._scrollMetrics),p(c.last<l(s),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var d=this._findFirstChildWithMore(c.first,c.last);c.last=d??c.last}return c}_findFirstChildWithMore(e,t){for(var s=e;s<=t;s++){var l=this._indicesToKeys.get(s);if(l!=null&&this._nestedChildLists.anyInCell(l,n=>n.hasMore()))return s}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,t){var s=e.getItemCount(e.data);if(s===t.renderMask.numCells())return t;var l=k._constrainToItemCount(t.cellsAroundViewport,e);return{cellsAroundViewport:l,renderMask:k._createRenderMask(e,l)}}_pushCells(e,t,s,l,n,h){var r=this,a=this.props,o=a.CellRendererComponent,u=a.ItemSeparatorComponent,c=a.ListHeaderComponent,f=a.ListItemComponent,d=a.data,m=a.debug,_=a.getItem,g=a.getItemCount,y=a.getItemLayout,C=a.horizontal,R=a.renderItem,S=c?1:0,M=g(d)-1,b;n=Math.min(M,n);for(var I=function(){var O=_(d,w),T=r._keyExtractor(O,w,r.props);r._indicesToKeys.set(w,T),s.has(w+S)&&t.push(e.length);var V=y==null||m||r._fillRateHelper.enabled();e.push(v.createElement(Fe,D({CellRendererComponent:o,ItemSeparatorComponent:w<M?u:void 0,ListItemComponent:f,cellKey:T,horizontal:C,index:w,inversionStyle:h,item:O,key:T,prevCellKey:b,onUpdateSeparators:r._onUpdateSeparators,onCellFocusCapture:P=>r._onCellFocusCapture(T),onUnmount:r._onCellUnmount,ref:P=>{r._cellRefs[T]=P},renderItem:R},V&&{onCellLayout:r._onCellLayout}))),b=T},w=l;w<=n;w++)I()}static _constrainToItemCount(e,t){var s=t.getItemCount(t.data),l=Math.min(s-1,e.last),n=J(t.maxToRenderPerBatch);return{first:te(0,s-1-n,e.first),last:l}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===A(this.props.horizontal))}_keyExtractor(e,t,s){if(s.keyExtractor!=null)return s.keyExtractor(e,t);var l=G(e,t);return l===String(t)&&(X=!0,e.type&&e.type.displayName&&(Y=e.type.displayName)),l}render(){this._checkProps(this.props);var e=this.props,t=e.ListEmptyComponent,s=e.ListFooterComponent,l=e.ListHeaderComponent,n=this.props,h=n.data,r=n.horizontal,a=this.props.inverted?A(this.props.horizontal)?x.horizontallyInverted:x.verticallyInverted:null,o=[],u=new Set(this.props.stickyHeaderIndices),c=[];if(l){u.has(0)&&c.push(0);var f=v.isValidElement(l)?l:v.createElement(l,null);o.push(v.createElement(W,{cellKey:this._getCellKey()+"-header",key:"$header"},v.createElement(E,{onLayout:this._onLayoutHeader,style:[a,this.props.ListHeaderComponentStyle]},f)))}var d=this.props.getItemCount(h);if(d===0&&t){var m=v.isValidElement(t)?t:v.createElement(t,null);o.push(v.createElement(W,{cellKey:this._getCellKey()+"-empty",key:"$empty"},v.cloneElement(m,{onLayout:z=>{this._onLayoutEmpty(z),m.props.onLayout&&m.props.onLayout(z)},style:[a,m.props.style]})))}if(d>0){X=!1,Y="";for(var _=this._getSpacerKey(!r),g=this.state.renderMask.enumerateRegions(),y=De(g,z=>z.isSpacer),C=N(g),R;!(R=C()).done;){var S=R.value;if(S.isSpacer){if(this.props.disableVirtualization)continue;var M=S===y,b=M&&!this.props.getItemLayout,I=b?te(S.first-1,S.last,this._highestMeasuredFrameIndex):S.last,w=this.__getFrameMetricsApprox(S.first,this.props),F=this.__getFrameMetricsApprox(I,this.props),O=F.offset+F.length-w.offset;o.push(v.createElement(E,{key:"$spacer-"+S.first,style:{[_]:O}}))}else this._pushCells(o,c,u,S.first,S.last,a)}!this._hasWarned.keys&&X&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",Y),this._hasWarned.keys=!0)}if(s){var T=v.isValidElement(s)?s:v.createElement(s,null);o.push(v.createElement(W,{cellKey:this._getFooterCellKey(),key:"$footer"},v.createElement(E,{onLayout:this._onLayoutFooter,style:[a,this.props.ListFooterComponentStyle]},T)))}var V=L(L({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:He(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:c,style:a?[a,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<d-1;var P=v.createElement(xe,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:A(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},v.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(V),{ref:this._captureScrollRef},o)),H=P;return this.props.debug?v.createElement(E,{style:x.debug},H,this._renderDebugOverlay()):H}componentDidUpdate(e){var t=this.props,s=t.data,l=t.extraData;(s!==e.data||l!==e.extraData)&&this._viewabilityTuples.forEach(h=>{h.viewabilityHelper.resetViewableIndices()});var n=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),n&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,t=>{t.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,t,s,l)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:t}),this._scrollMetrics.contentLength=this._selectLength({width:s,height:l});var n=this._convertParentScrollMetrics(this.context.getScrollMetrics()),h=this._scrollMetrics.visibleLength!==n.visibleLength||this._scrollMetrics.offset!==n.offset;h&&(this._scrollMetrics.visibleLength=n.visibleLength,this._scrollMetrics.offset=n.offset,this._nestedChildLists.forEach(r=>{r.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),t=[],s=this.props.getItemCount(this.props.data),l=0;l<s;l++){var n=this.__getFrameMetricsApprox(l,this.props);n.inLayout&&t.push(n)}var h=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,r=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),a=r.offset+r.length-h,o=this._scrollMetrics.offset,u=this._scrollMetrics.visibleLength;return v.createElement(E,{style:[x.debugOverlayBase,x.debugOverlay]},t.map((c,f)=>v.createElement(E,{key:"f"+f,style:[x.debugOverlayBase,x.debugOverlayFrame,{top:c.offset*e,height:c.length*e}]})),v.createElement(E,{style:[x.debugOverlayBase,x.debugOverlayFrameLast,{top:h*e,height:a*e}]}),v.createElement(E,{style:[x.debugOverlayBase,x.debugOverlayFrameVis,{top:o*e,height:u*e}]}))}_selectLength(e){return A(this.props.horizontal)?e.width:e.height}_selectOffset(e){return A(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,t=e.data,s=e.getItemCount,l=e.onStartReached,n=e.onStartReachedThreshold,h=e.onEndReached,r=e.onEndReachedThreshold,a=e.initialScrollIndex,o=this._scrollMetrics,u=o.contentLength,c=o.visibleLength,f=o.offset,d=f,m=u-c-f;d<le&&(d=0),m<le&&(m=0);var _=2,g=n!=null?n*c:_,y=r!=null?r*c:_,C=d<=g,R=m<=y;h&&this.state.cellsAroundViewport.last===s(t)-1&&R&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,h({distanceFromEnd:m})):l!=null&&this.state.cellsAroundViewport.first===0&&C&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!a||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,l({distanceFromStart:d})):(this._sentStartForContentLength=C?this._sentStartForContentLength:0,this._sentEndForContentLength=R?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,t=e.first,s=e.last,l=this._scrollMetrics,n=l.offset,h=l.visibleLength,r=l.velocity,a=this.props.getItemCount(this.props.data),o=!1,u=Ne(this.props.onStartReachedThreshold),c=ae(this.props.onEndReachedThreshold);if(t>0){var f=n-this.__getFrameMetricsApprox(t,this.props).offset;o=f<0||r<-2&&f<ne(u,h)}if(!o&&s>=0&&s<a-1){var d=this.__getFrameMetricsApprox(s,this.props).offset-(n+h);o=d<0||r>2&&d<ne(c,h)}if(o&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,t){this._viewabilityTuples.forEach(s=>{s.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,s.onViewableItemsChanged,t)})}}k.contextType=$;var x=Q.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),he=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Be(i,e){return!!(i===e||he(i)&&he(e))}function We(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!Be(i[t],e[t]))return!1;return!0}function $e(i,e){e===void 0&&(e=We);var t=null;function s(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];if(t&&t.lastThis===this&&e(l,t.lastArgs))return t.lastResult;var h=i.apply(this,l);return t={lastResult:h,lastArgs:l,lastThis:this},h}return s.clear=function(){t=null},s}var Ue=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function je(i){return i??ve.OS==="android"}function K(i){return i??1}function qe(i){return typeof Object(i).length=="number"}class Xe extends v.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=t=>{this._listRef=t},this._getItem=(t,s)=>{var l=K(this.props.numColumns);if(l>1){for(var n=[],h=0;h<l;h++){var r=s*l+h;if(r<t.length){var a=t[r];n.push(a)}}return n}else return t[s]},this._getItemCount=t=>{if(t!=null&&qe(t)){var s=K(this.props.numColumns);return s>1?Math.ceil(t.length/s):t.length}else return 0},this._keyExtractor=(t,s)=>{var l,n=K(this.props.numColumns),h=(l=this.props.keyExtractor)!==null&&l!==void 0?l:G;return n>1?(p(Array.isArray(t),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",n),t.map((r,a)=>h(r,s*n+a)).join(":")):h(t,s)},this._renderer=(t,s,l,n,h)=>{var r=K(n),a=u=>t?v.createElement(t,u):s?s(u):null,o=u=>{if(r>1){var c=u.item,f=u.index;return p(Array.isArray(c),"Expected array of items with numColumns > 1"),v.createElement(E,{style:[Ye.row,l]},c.map((d,m)=>{var _=a({item:d,index:f*r+m,separators:u.separators});return _!=null?v.createElement(v.Fragment,{key:m},_):null}))}else return a(u)};return t?{ListItemComponent:o}:{renderItem:o}},this._memoizedRenderer=$e(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(t=>({viewabilityConfig:t.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(t.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){p(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),p(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),p(!_e(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),p(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var t=e.getItem,s=e.getItemCount,l=e.horizontal,n=e.columnWrapperStyle,h=e.onViewableItemsChanged,r=e.viewabilityConfigCallbackPairs,a=K(this.props.numColumns);p(!t&&!s,"FlatList does not support custom data formats."),a>1?p(!l,"numColumns does not support horizontal."):p(!n,"columnWrapperStyle not supported for single column lists"),p(!(h&&r),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,t){var s,l=K(this.props.numColumns),n=(s=this.props.keyExtractor)!==null&&s!==void 0?s:G;t.item.forEach((h,r)=>{p(t.index!=null,"Missing index!");var a=t.index*l+r;e.push(L(L({},t),{},{item:h,key:n(h,a),index:a}))})}_createOnViewableItemsChanged(e){return t=>{var s=K(this.props.numColumns);if(e)if(s>1){var l=[],n=[];t.viewableItems.forEach(h=>this._pushMultiColumnViewable(n,h)),t.changed.forEach(h=>this._pushMultiColumnViewable(l,h)),e({viewableItems:n,changed:l})}else e(t)}}render(){var e=this.props,t=e.numColumns,s=e.columnWrapperStyle,l=e.removeClippedSubviews,n=e.strictMode,h=n===void 0?!1:n,r=ue(e,Ue),a=h?this._memoizedRenderer:this._renderer;return v.createElement(k,D({},r,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:je(l)},a(this.props.ListItemComponent,this.props.renderItem,s,t,this.props.extraData)))}}var Ye=Q.create({row:{flexDirection:"row"}});const tt=Xe;export{tt as F,ve as P,k as V,N as _,G as k};
//# sourceMappingURL=index-DIz0UnDg.js.map
