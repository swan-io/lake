import{i as l,z as G,j as e,B as se,s as ie,V as z,I as M,S as j,T as H,L as le,N as C,b as ee,c as g,ac as ce,a as U,t as J,d as ae,r as ne,f as ue,u as te,e as de}from"./ScrollView-yhnlmysC.js";import{a as he}from"./Link-CQWMoBp8.js";import{r as s}from"./iframe-BnDr4jPr.js";import{a as re,u as pe}from"./Pressable-C27QPiJN.js";import{n as fe}from"./function-Noa7diWy.js";import{F as me}from"./FocusTrap-BIfNg75L.js";import{L as we}from"./Link-CBWEiJRY.js";import{T as ge}from"./TransitionView-D_rp2bTU.js";const xe=40,r=ie.create({container:{borderBottomWidth:1,borderBottomColor:g.gray[100],zIndex:10},link:{...J.medium,position:"relative",color:g.gray[700],height:xe,whiteSpace:"nowrap",display:"flex",flexDirection:"row",alignItems:"center"},activeLink:{color:g.current[500],boxShadow:`inset 0 -2px ${g.gray[700]}`},hoveredLink:{boxShadow:`inset 0 -2px ${g.gray[700]}`},underline:{position:"absolute",bottom:0,height:2,width:1,backgroundColor:g.current[500]},animatedUnderline:{transformOrigin:"0 0",transition:"200ms ease-in-out transform"},placeholder:{position:"absolute",top:0,left:0,right:0,visibility:"hidden",flexDirection:"row",alignItems:"flex-end",overflow:"hidden",pointerEvents:"none"},count:{...J.smallRegular,color:g.current[500],backgroundColor:g.current[50],borderColor:g.current[100],borderWidth:1,borderRadius:ne[4],paddingHorizontal:U[4],minWidth:U[24],display:"inline-block",textAlign:"center"},dropdownHandleContainer:{alignItems:"center",justifyContent:"center",alignSelf:"stretch"},dropdownPlacement:{position:"absolute",right:0,top:"100%"},dropdown:{position:"absolute",right:0,top:"100%",backgroundColor:ee.accented,borderRadius:ne[8],boxShadow:ae.modal,paddingVertical:U[8]},dropdownLink:{...J.regular,paddingHorizontal:U[16],paddingVertical:U[8],whiteSpace:"nowrap"},dropdownLinkTextHovered:{backgroundColor:g.gray[50]},dropdownLinkTextActive:{boxShadow:`inset 3px 0 ${g.current.primary}`,color:g.current.primary},separator:{position:"absolute",top:0,left:ce[16],bottom:0,width:1,backgroundColor:g.gray[100]},sticky:{backgroundColor:ee.default,position:"sticky",top:-1}}),Q=({ref:d,children:a,style:T,tab:x,onChange:k,activeTabId:p,onBlur:y,onFocus:u,onPress:n})=>G(x).with({url:C.string},({url:h})=>e.jsx(we,{ref:d,to:h,style:T,onFocus:u,onBlur:y,onPress:n,children:a})).with({id:C.string},({id:h})=>{const f=h===p;return e.jsx(re,{ref:d,style:F=>T({...F,active:f}),onPress:()=>{k?.(h),n?.()},onFocus:u,onBlur:y,children:a})}).exhaustive(),ye=({tabs:d,onHoverStart:a,onHoverEnd:T,onLinkFocus:x,onLinkBlur:k,onLinkPress:p,activeTabId:y,onChange:u})=>{const n=s.useRef(null);return te(n,{onHoverStart:a,onHoverEnd:T}),e.jsx(z,{role:"menu",style:r.dropdown,ref:n,children:d.map(h=>{const f=K(h);return e.jsx(Q,{onChange:u,activeTabId:y,tab:h,onFocus:x,onBlur:k,onPress:p,role:"menuitem",ariaCurrentValue:"location",style:({active:F,hovered:q})=>[r.dropdownLink,F&&r.dropdownLinkTextActive,q&&r.dropdownLinkTextHovered],children:h.label},f)})})},Fe=new Set(["ForcedOpen","OpenFromFocus"]),je=new Set(["Open","ForcedOpen","OpenFromFocus"]),ke=new Set(["ForcedOpen"]),be=({ref:d,tabs:a,otherLabel:T,currentUrl:x,activeTabId:k,onChange:p})=>{const[y,u]=s.useReducer((t,c)=>G([c,t]).returnType().with(["ForceToggle","Closed"],["ForceToggle","Open"],["ForceToggle","ForcedClosed"],()=>"ForcedOpen").with(["ForceToggle","OpenFromFocus"],["ForceToggle","ForcedOpen"],()=>"ForcedClosed").with(["ForceClose",C.any],()=>"ForcedClosed").with(["FocusHandle","ForcedClosed"],()=>"Closed").with(["Open","ForcedOpen"],["FocusHandle","ForcedOpen"],["Close","ForcedOpen"],()=>"ForcedOpen").with(["Open",C.any],()=>"Open").with(["FocusHandle",C.any],()=>"OpenFromFocus").with(["Close",C.any],()=>"Closed").exhaustive(),"Closed"),n=s.useRef(void 0),h=s.useRef(null),f=s.useRef(null),F=s.useRef(null),{onHandleFocus:q,onLinkFocus:A,onAnyBlur:P,onHoverStart:D,onHoverEnd:_,onPress:W,onPressOutside:E,onEscapeKey:V}=s.useMemo(()=>({onHandleFocus:t=>{if(ue(f.current))return;F.current=Date.now();const c=f.current,o=t;c.contains(o.relatedTarget)||(l(n.current)&&clearTimeout(n.current),u("FocusHandle"))},onLinkFocus:()=>{l(n.current)&&clearTimeout(n.current),u("Open")},onAnyBlur:()=>{l(n.current)&&clearTimeout(n.current),n.current=window.setTimeout(()=>{u("Close")},300)},onHoverStart:()=>{l(n.current)&&clearTimeout(n.current),u("Open")},onHoverEnd:()=>{l(n.current)&&clearTimeout(n.current),n.current=window.setTimeout(()=>{u("Close")},300)},onPress:()=>{F.current!=null&&Date.now()-F.current<32||(l(n.current)&&clearTimeout(n.current),u("ForceToggle"))},onPressOutside:t=>{l(h.current)&&h.current.contains(t.target)||(l(n.current)&&clearTimeout(n.current),u("ForceClose"),n.current=window.setTimeout(()=>{u("Close")},300))},onEscapeKey:()=>{l(n.current)&&clearTimeout(n.current),u("ForceClose"),n.current=window.setTimeout(()=>{u("Close")},300)}}),[]);s.useEffect(()=>()=>{l(n.current)&&clearTimeout(n.current)},[]);const N=je.has(y),$=Fe.has(y),S=ke.has(y);te(h,{onHoverStart:D,onHoverEnd:_});const I=pe(f,d),X=s.useMemo(()=>a.find(t=>Y({activeTabId:k,currentLocationURL:x,tab:t})),[k,x,a]);return e.jsxs(z,{style:r.dropdownHandleContainer,ref:I,children:[e.jsxs(re,{ref:h,role:"button","aria-expanded":N,"aria-haspopup":"true",onFocus:q,onBlur:P,onPress:W,style:({hovered:t})=>[r.link,l(X)?r.activeLink:t?r.hoveredLink:null],children:[e.jsx(H,{children:T}),e.jsx(j,{width:8}),e.jsx(H,{style:r.count,children:a.length}),e.jsx(j,{width:4}),e.jsx(M,{name:"chevron-down-filled",size:12})]}),e.jsx(ge,{...de.fadeAndSlideInFromBottom,style:r.dropdownPlacement,children:N?e.jsx(me,{autoFocus:$,focusLock:S,returnFocus:S,onClickOutside:E,onEscapeKey:S?V:void 0,children:e.jsx(ye,{onChange:p,activeTabId:k,tabs:a,onHoverStart:D,onHoverEnd:_,onLinkFocus:A,onLinkBlur:P,onLinkPress:V})}):null})]})},Y=({tab:d,activeTabId:a,currentLocationURL:T})=>G(d).with({url:C.string},({url:x})=>T.startsWith(x)).with({id:C.string},({id:x})=>l(a)&&x===a).exhaustive(),K=d=>G(d).with({url:C.string},({url:a})=>a).with({id:C.string},({id:a})=>a).exhaustive(),Le=({tabs:d,otherLabel:a,hideIfSingleItem:T=!0,sticky:x=!1,padding:k,activeTabId:p,onChange:y})=>{const u=s.useRef(null),n=s.useRef(null),h=s.useRef(null),f=s.useRef({}),F=s.useRef({}),[{left:q,width:A},P]=s.useState({left:0,width:0}),[D,_]=s.useState(!1),[[W,E],V]=s.useState([[],[]]),N=he(),{path:$}=N,S=N.toString();s.useEffect(()=>{if(l(f.current)){const t=Object.entries(f.current),c=u.current;for(const[o,m]of t)if((o===p||"/"+$.join("/")===o)&&l(m)&&l(c)){m.measureLayout(c,(b,R,L)=>{P({left:b-(k??0),width:L})},fe);return}}P({left:0,width:0})},[$,W,E,k,p]),s.useEffect(()=>{_(A>0)},[A]);const I=s.useCallback(({width:t})=>{const c=d.map(i=>{if(F.current){const O=K(i),v=F.current[O];if(l(v)){const B=v.getBoundingClientRect().width;return{tab:i,width:B+32}}else return{tab:i,width:0}}else return{tab:i,width:0}}),o=[],m=[];let b=0;c.forEach(i=>{if(b+=i.width,b<t)o.push({...i.tab,width:i.width});else if(Y({activeTabId:p,currentLocationURL:S,tab:i.tab})){for(;o.length!==0&&o.reduce((O,v)=>O+v.width,0)+(i.width+16)>=t;){const O=o.pop();l(O)&&(m.unshift(O),b-=O.width)}o.push({...i.tab,width:i.width})}else m.push({...i.tab,width:i.width})});const R=h.current;let L=100;l(R)&&(L=R.getBoundingClientRect().width);const w=o.findIndex(i=>Y({activeTabId:p,currentLocationURL:S,tab:i}));if(w!==-1){const i=o[w],O=i?.width??0,v=[...o.slice(0,w),...o.slice(w+1)];for(;v.length!==0&&v.reduce((B,oe)=>B+oe.width,0)+O+(m.length>=1?L:0)>=t;){const B=v.pop();l(B)&&m.unshift(B)}const Z=[...v.slice(0,w),...i!=null?[i]:[],...v.slice(w)];V([Z,m])}else V([o,m])},[d,p,S]),X=s.useCallback(({target:t,nativeEvent:{layout:{width:c}}})=>{I({container:t,width:c})},[I]);return s.useLayoutEffect(()=>{const t=n.current;if(t){const c=t,o=c.getBoundingClientRect().width;I({container:c,width:o})}},[I]),d.length<=1&&T?null:e.jsxs(se,{alignItems:"center",direction:"row",role:"tablist",ref:u,style:[r.container,x&&r.sticky,{paddingHorizontal:k}],children:[e.jsxs(z,{style:r.placeholder,"aria-hidden":!0,ref:n,onLayout:X,children:[d.map(t=>{const{label:c,icon:o,count:m,endElement:b}=t,R=K(t);return e.jsxs(s.Fragment,{children:[e.jsxs(Q,{ref:L=>{F.current&&(F.current[R]=L)},activeTabId:p,tab:t,onChange:y,style:({active:L,hovered:w})=>[r.link,L?r.activeLink:w?r.hoveredLink:null],children:[l(o)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{name:o,size:16,color:"currentColor"}),e.jsx(j,{width:8})]}),e.jsx(H,{children:c}),l(b)&&e.jsxs(e.Fragment,{children:[e.jsx(j,{width:8}),b]}),m!=null?e.jsxs(e.Fragment,{children:[e.jsx(j,{width:8}),e.jsx(H,{style:r.count,children:m})]}):null]}),e.jsx(j,{width:32})]},R)}),e.jsxs(le,{ref:h,style:r.link,children:[e.jsx(H,{children:a}),e.jsx(j,{width:8}),e.jsx(H,{style:r.count,children:d.length}),e.jsx(j,{width:4}),e.jsx(M,{name:"chevron-down-filled",size:12})]})]}),W.map(t=>{const{label:c,icon:o,withSeparator:m,count:b,endElement:R}=t,L=K(t);return e.jsxs(s.Fragment,{children:[e.jsxs(Q,{ref:w=>{f.current&&(f.current[L]=w)},onChange:y,activeTabId:p,tab:t,role:"tab",style:({active:w,hovered:i})=>[r.link,w?r.activeLink:i?r.hoveredLink:null],children:[m===!0&&e.jsx(z,{style:r.separator,role:"none"}),l(o)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{name:o,size:16,color:"currentColor"}),e.jsx(j,{width:8})]}),e.jsx(H,{children:c}),l(R)&&e.jsxs(e.Fragment,{children:[e.jsx(j,{width:8}),R]}),b!=null?e.jsxs(e.Fragment,{children:[e.jsx(j,{width:8}),e.jsx(H,{style:r.count,children:b})]}):null]}),e.jsx(j,{width:32})]},L)}),E.length>0?e.jsx(be,{ref:t=>{E.forEach(c=>{if(f.current){const o=K(c);f.current[o]=t}})},onChange:y,tabs:E,currentUrl:S,otherLabel:a,activeTabId:p}):null,D&&e.jsx(z,{style:[r.underline,r.animatedUnderline,{transform:`translateX(${q}px)`,width:A}]})]})};Le.__docgenInfo={description:"",methods:[],displayName:"TabView",props:{activeTabId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},tabs:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`({ id: string } | { url: string }) & {
  count?: number;
  icon?: IconName;
  endElement?: ReactNode;
  label: string;
  withSeparator?: boolean;
}`,elements:[{name:"unknown"},{name:"signature",type:"object",raw:`{
  count?: number;
  icon?: IconName;
  endElement?: ReactNode;
  label: string;
  withSeparator?: boolean;
}`,signature:{properties:[{key:"count",value:{name:"number",required:!1}},{key:"icon",value:{name:"unknown",required:!1}},{key:"endElement",value:{name:"ReactNode",required:!1}},{key:"label",value:{name:"string",required:!0}},{key:"withSeparator",value:{name:"boolean",required:!1}}]}}]}],raw:"Tab[]"},description:""},otherLabel:{required:!0,tsType:{name:"string"},description:""},hideIfSingleItem:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},padding:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof spacingValues)[number]"},description:""},sticky:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{Le as T};
//# sourceMappingURL=TabView-L81IeI47.js.map
