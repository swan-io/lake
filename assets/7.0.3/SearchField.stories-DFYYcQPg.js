import{i as I,s as F,c as f,b as R,d as W,r as D,j as e,V as g,p as _,w as q,Z as S,S as T,L as j,B as E,I as N}from"./Space-ChRvaji1.js";import{r as c}from"./index-CBqU2yxZ.js";import{F as z}from"./Fill-C-xdVwoM.js";import{u as G}from"./useBoolean-B5BCxMq_.js";import{L as M}from"./LakeButton-DtHKm00B.js";import{L as $}from"./LakeTextInput-DYhrKkdF.js";import{R as A}from"./ResponsiveContainer-BR850dXq.js";import{T as H}from"./TransitionView-3jE9ifvD.js";import{P as O}from"./index-iZC5RSM6.js";import{T as Z}from"./Tag-CVWgFnN7.js";import{S as J,a as x}from"./_StoriesComponents-DuIeS3XV.js";import"./extends-CCbyfPlC.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BtM5VmRH.js";import"./commonStyles-t4XfA7cz.js";import"./Pressable-DD_-8IPu.js";import"./index-BkhpigpK.js";import"./LakeSelect-CgOPdElg.js";import"./useDisclosure-CS9t68_Y.js";import"./a11y-DXvpDVrG.js";import"./Popover-W8rJZAJy.js";import"./useResponsive-D6E4JWMY.js";import"./function-BFp54dyh.js";import"./BottomPanel-CGLS6Zjq.js";import"./useBodyClassName-FAgY5CgW.js";import"./math-GD6vsjlw.js";import"./FocusTrap-C4GXdqkW.js";import"./array-rjEBP2Ry.js";import"./LoadingView-DwJWTgnl.js";import"./index-DxBwiG1s.js";import"./index-NToXCmvy.js";const K=(n,i)=>{const t=c.useRef(void 0);return c.useCallback(o=>(I(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(n,i,o),()=>clearTimeout(t.current)),[n,i])},a=F.create({container:{flexGrow:1,flexShrink:1},input:{transition:"300ms ease-in-out border-color",maxWidth:202,minWidth:38,justifyContent:"flex-end"},focus:{outlineStyle:"none",borderColor:f.current.primary},clearButton:{marginRight:R[8]},clear:{width:8,height:8},smallButtonContainer:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1},largeInputContainer:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1},openSearchFieldContainer:{position:"absolute",right:0,top:0,bottom:0},openSearchField:{position:"absolute",right:0,top:0,bottom:0,boxShadow:`0 0 20px 20px ${W.default}`,borderRadius:D[6]}}),Q=({inputRef:n,placeholder:i,initialValue:t,onChange:o,setFocused:s,hasFocus:u,clear:d,currentValue:l,renderEnd:r})=>e.jsxs(g,{style:a.smallButtonContainer,children:[e.jsx(M,{mode:"secondary",size:"small",ariaLabel:i,icon:"search-filled",onPress:()=>{s.on()},pill:l!==""}),e.jsx(H,{style:a.openSearchFieldContainer,..._.fadeAndSlideInFromRight,children:u?e.jsx(g,{style:a.openSearchField,children:e.jsx(L,{inputRef:n,placeholder:i,initialValue:t,onChange:o,setFocused:s,hasFocus:u,clear:d,currentValue:l,renderEnd:r})}):null})]}),L=({inputRef:n,placeholder:i,initialValue:t,onChange:o,setFocused:s,hasFocus:u,clear:d,renderEnd:l})=>{const r=c.useRef(null);return e.jsx($,{ref:n,autoFocus:u,icon:"search-filled",placeholder:i,defaultValue:t,inputMode:"search",onChangeText:o,hideErrors:!0,renderEnd:()=>e.jsxs(e.Fragment,{children:[e.jsx(O,{onPress:()=>{r.current!=null&&clearTimeout(r.current),d()},style:a.clearButton,children:e.jsx(q,{viewBox:"0 0 16 16",style:a.clear,children:e.jsxs(e.Fragment,{children:[e.jsx(S,{x1:"0",x2:"16",y1:"0",y2:"16",strokeLinecap:"round",stroke:f.gray[500],strokeWidth:2}),e.jsx(S,{x1:"0",x2:"16",y1:"16",y2:"0",strokeLinecap:"round",stroke:f.gray[500],strokeWidth:2})]})})}),l==null?void 0:l()]}),onFocus:()=>{r.current!=null&&clearTimeout(r.current),s.on()},onBlur:()=>{r.current=window.setTimeout(()=>{s.off()},300)},containerStyle:a.largeInputContainer,style:[a.input,u?a.focus:null]})},m=({initialValue:n,placeholder:i,onChangeText:t,debounceDuration:o=500,maxWidth:s,renderEnd:u})=>{const[d,l]=G(!1),r=c.useRef(null),[w,y]=c.useState(n),P=K(h=>{t(h),y(h.trim())},o),V=c.useCallback(()=>{r.current instanceof HTMLInputElement&&(r.current.clear(),r.current.focus(),t(""),y(""))},[t]),B={inputRef:r,placeholder:i,initialValue:n,onChange:P,setFocused:l,hasFocus:d,clear:V,currentValue:w,renderEnd:u};return e.jsx(A,{breakpoint:200,style:[a.container,s!=null&&{maxWidth:s}],children:({large:h})=>{const v=h?L:Q;return e.jsx(v,{...B})}})};m.__docgenInfo={description:"",methods:[],displayName:"LakeSearchField",props:{initialValue:{required:!0,tsType:{name:"string"},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!0,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""},debounceDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},maxWidth:{required:!1,tsType:{name:"number"},description:""},renderEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => ReactNode",signature:{arguments:[],return:{name:"ReactNode"}}},description:""}}};const U=F.create({container:{maxWidth:600}}),Ve={title:"Forms/SearchField",component:m},p=()=>{const[n,i]=c.useState(),[t,o]=c.useState();return e.jsxs(J,{title:"SearchField",children:[e.jsxs(x,{title:"Default",style:U.container,children:[e.jsx(m,{initialValue:"",placeholder:"Placeholder",onChangeText:i}),e.jsx(T,{height:12}),e.jsxs(j,{children:["Debounced value: ",n]})]}),e.jsxs(x,{title:"With initialValue",children:[e.jsxs(E,{direction:"row",children:[e.jsx(N,{name:"add-circle-filled",size:32}),e.jsx(z,{minWidth:96}),e.jsx(m,{initialValue:"Initial value",placeholder:"Placeholder",onChangeText:o})]}),e.jsx(T,{height:12}),e.jsxs(j,{children:["Debounced value: ",t]})]}),e.jsx(x,{title:"With counter",children:e.jsx(m,{initialValue:"Initial value",placeholder:"Placeholder",onChangeText:o,renderEnd:()=>e.jsx(Z,{children:"44"})})})]})};p.__docgenInfo={description:"",methods:[],displayName:"Variations"};var k,b,C;p.parameters={...p.parameters,docs:{...(k=p.parameters)==null?void 0:k.docs,source:{originalSource:`() => {
  const [text1, setText1] = useState<string>();
  const [text2, setText2] = useState<string>();
  return <StoryBlock title="SearchField">
      <StoryPart title="Default" style={styles.container}>
        <LakeSearchField initialValue="" placeholder="Placeholder" onChangeText={setText1} />
        <Space height={12} />
        <LakeText>Debounced value: {text1}</LakeText>
      </StoryPart>

      <StoryPart title="With initialValue">
        <Box direction="row">
          <Icon name="add-circle-filled" size={32} />
          <Fill minWidth={96} />

          <LakeSearchField initialValue="Initial value" placeholder="Placeholder" onChangeText={setText2} />
        </Box>

        <Space height={12} />
        <LakeText>Debounced value: {text2}</LakeText>
      </StoryPart>

      <StoryPart title="With counter">
        <LakeSearchField initialValue="Initial value" placeholder="Placeholder" onChangeText={setText2} renderEnd={() => <Tag>44</Tag>} />
      </StoryPart>
    </StoryBlock>;
}`,...(C=(b=p.parameters)==null?void 0:b.docs)==null?void 0:C.source}}};const Be=["Variations"];export{p as Variations,Be as __namedExportsOrder,Ve as default};
//# sourceMappingURL=SearchField.stories-DFYYcQPg.js.map
