import{S as T,g as S,r as P,s as D,f as F,c as H,a as R,P as G,j as c,V as v,o as X}from"./Space-dbcd355c.js";import{r as y}from"./index-1e572255.js";import{c as _}from"./commonStyles-d52fedae.js";import{u as I}from"./useBodyClassName-915b7711.js";import{l as g}from"./math-8ab2da29.js";import{F as B}from"./FocusTrap-6956aa84.js";import{L as j}from"./LoadingView-3eb08139.js";import{T as M}from"./TransitionView-d77c48bc.js";import{I as x}from"./index-2c79fb4a.js";import{P as U}from"./index-63588c04.js";var p={centroidDimension:function(n,o,l,r){var t=n.touchBank,s=0,m=0,a=n.numberActiveTouches===1?n.touchBank[n.indexOfSingleActiveTouch]:null;if(a!==null)a.touchActive&&a.currentTimeStamp>o&&(s+=r&&l?a.currentPageX:r&&!l?a.currentPageY:!r&&l?a.previousPageX:a.previousPageY,m=1);else for(var u=0;u<t.length;u++){var d=t[u];if(d!=null&&d.touchActive&&d.currentTimeStamp>=o){var C=void 0;r&&l?C=d.currentPageX:r&&!l?C=d.currentPageY:!r&&l?C=d.previousPageX:C=d.previousPageY,s+=C,m++}}return m>0?s/m:p.noCentroid},currentCentroidXOfTouchesChangedAfter:function(n,o){return p.centroidDimension(n,o,!0,!0)},currentCentroidYOfTouchesChangedAfter:function(n,o){return p.centroidDimension(n,o,!1,!0)},previousCentroidXOfTouchesChangedAfter:function(n,o){return p.centroidDimension(n,o,!0,!1)},previousCentroidYOfTouchesChangedAfter:function(n,o){return p.centroidDimension(n,o,!1,!1)},currentCentroidX:function(n){return p.centroidDimension(n,0,!0,!0)},currentCentroidY:function(n){return p.centroidDimension(n,0,!1,!0)},noCentroid:-1};const h=p;var E=h.currentCentroidXOfTouchesChangedAfter,Y=h.currentCentroidYOfTouchesChangedAfter,V=h.previousCentroidXOfTouchesChangedAfter,k=h.previousCentroidYOfTouchesChangedAfter,w=h.currentCentroidX,N=h.currentCentroidY,f={_initializeGestureState(e){e.moveX=0,e.moveY=0,e.x0=0,e.y0=0,e.dx=0,e.dy=0,e.vx=0,e.vy=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove(e,n){e.numberActiveTouches=n.numberActiveTouches,e.moveX=E(n,e._accountsForMovesUpTo),e.moveY=Y(n,e._accountsForMovesUpTo);var o=e._accountsForMovesUpTo,l=V(n,o),r=E(n,o),t=k(n,o),s=Y(n,o),m=e.dx+(r-l),a=e.dy+(s-t),u=n.mostRecentTimeStamp-e._accountsForMovesUpTo;e.vx=(m-e.dx)/u,e.vy=(a-e.dy)/u,e.dx=m,e.dy=a,e._accountsForMovesUpTo=n.mostRecentTimeStamp},create(e){var n={handle:null,shouldCancelClick:!1,timeout:null},o={stateID:Math.random(),moveX:0,moveY:0,x0:0,y0:0,dx:0,dy:0,vx:0,vy:0,numberActiveTouches:0,_accountsForMovesUpTo:0},l={onStartShouldSetResponder(r){return e.onStartShouldSetPanResponder==null?!1:e.onStartShouldSetPanResponder(r,o)},onMoveShouldSetResponder(r){return e.onMoveShouldSetPanResponder==null?!1:e.onMoveShouldSetPanResponder(r,o)},onStartShouldSetResponderCapture(r){return r.nativeEvent.touches.length===1&&f._initializeGestureState(o),o.numberActiveTouches=r.touchHistory.numberActiveTouches,e.onStartShouldSetPanResponderCapture!=null?e.onStartShouldSetPanResponderCapture(r,o):!1},onMoveShouldSetResponderCapture(r){var t=r.touchHistory;return o._accountsForMovesUpTo===t.mostRecentTimeStamp?!1:(f._updateGestureStateOnMove(o,t),e.onMoveShouldSetPanResponderCapture?e.onMoveShouldSetPanResponderCapture(r,o):!1)},onResponderGrant(r){return n.handle||(n.handle=x.createInteractionHandle()),n.timeout&&q(n),n.shouldCancelClick=!0,o.x0=w(r.touchHistory),o.y0=N(r.touchHistory),o.dx=0,o.dy=0,e.onPanResponderGrant&&e.onPanResponderGrant(r,o),e.onShouldBlockNativeResponder==null?!0:e.onShouldBlockNativeResponder(r,o)},onResponderReject(r){b(n,e.onPanResponderReject,r,o)},onResponderRelease(r){b(n,e.onPanResponderRelease,r,o),A(n),f._initializeGestureState(o)},onResponderStart(r){var t=r.touchHistory;o.numberActiveTouches=t.numberActiveTouches,e.onPanResponderStart&&e.onPanResponderStart(r,o)},onResponderMove(r){var t=r.touchHistory;o._accountsForMovesUpTo!==t.mostRecentTimeStamp&&(f._updateGestureStateOnMove(o,t),e.onPanResponderMove&&e.onPanResponderMove(r,o))},onResponderEnd(r){var t=r.touchHistory;o.numberActiveTouches=t.numberActiveTouches,b(n,e.onPanResponderEnd,r,o)},onResponderTerminate(r){b(n,e.onPanResponderTerminate,r,o),A(n),f._initializeGestureState(o)},onResponderTerminationRequest(r){return e.onPanResponderTerminationRequest==null?!0:e.onPanResponderTerminationRequest(r,o)},onClickCapture:r=>{n.shouldCancelClick===!0&&(r.stopPropagation(),r.preventDefault())}};return{panHandlers:l,getInteractionHandle(){return n.handle}}}};function b(e,n,o,l){e.handle&&(x.clearInteractionHandle(e.handle),e.handle=null),n&&n(o,l)}function q(e){clearTimeout(e.timeout)}function A(e){e.timeout=setTimeout(()=>{e.shouldCancelClick=!1},250)}const z=f,O=100,K=.008,$=g({elasticLength:O,elasticStrength:K}),W=100,J=.5,Q="rgba(0, 0, 0, 0.6)",i=T.create({fill:{...T.absoluteFillObject,position:"fixed",animationFillMode:"forwards"},overlay:{...T.absoluteFillObject,backgroundColor:Q},overlayEnter:{animationKeyframes:{"0%":{opacity:0}},animationDuration:"200ms",animationTimingFunction:"ease-in-out"},overlayLeave:{animationKeyframes:{"100%":{opacity:0}},animationDuration:"200ms",animationTimingFunction:"ease-in-out"},modalEnter:{animationKeyframes:{"0%":{opacity:0,transform:"translateY(20px)"}},animationDuration:"300ms",animationTimingFunction:"ease-in-out"},modalLeave:{animationKeyframes:{"100%":{opacity:0,transform:"translateY(20px)"}},animationDuration:"300ms",animationTimingFunction:"ease-in-out"},container:{...T.absoluteFillObject,transitionDuration:"300ms",transitionProperty:"transform"},bottomCache:{position:"absolute",bottom:-O+1,width:"100%",height:O,backgroundColor:S.accented},modalContainer:{...T.absoluteFillObject},modalContentContainer:{justifyContent:"flex-end",flexGrow:1},trap:{..._.fill},modal:{backgroundColor:S.accented,borderTopLeftRadius:P[8],borderTopRightRadius:P[8],boxShadow:D.modal,alignSelf:"stretch"},pressableOverlay:{..._.fill,outlineWidth:0,opacity:0},grabContainer:{paddingHorizontal:128,paddingVertical:F[12]},grabLine:{backgroundColor:H.gray[100],height:5,borderRadius:P[4]}}),L=({visible:e,onPressClose:n,children:o,returnFocus:l=!0})=>{const[r,t]=y.useState(()=>{}),s=y.useRef(null);y.useEffect(()=>{const a=document.createElement("div");return document.body.append(a),t(a),()=>{a.remove(),t(void 0)}},[]);const m=y.useMemo(()=>z.create({onMoveShouldSetPanResponder:()=>!0,onPanResponderGrant:()=>{s.current instanceof HTMLElement&&(s.current.style.transitionDuration="0ms")},onPanResponderMove:(a,{dy:u})=>{const d=u>0?u:-$(-u);s.current instanceof HTMLElement&&(s.current.style.transform=`translateY(${d}px)`)},onPanResponderRelease:(a,u)=>{s.current instanceof HTMLElement&&(s.current.style.transitionDuration=null),u.dy>W||u.vy>J?n():s.current instanceof HTMLElement&&(s.current.style.transform="translateY(0px)")}}),[n]);return I("BottomPanelOpen",{enabled:e}),r==null?null:R(G,{container:r,children:[c(M,{style:i.fill,enter:i.overlayEnter,leave:i.overlayLeave,children:e?c(v,{style:i.overlay}):null}),c(y.Suspense,{fallback:c(j,{color:S.accented,delay:0}),children:c(M,{style:i.fill,enter:i.modalEnter,leave:i.modalLeave,children:e?R(v,{ref:s,style:i.container,children:[c(X,{style:i.modalContainer,contentContainerStyle:i.modalContentContainer,children:R(B,{autoFocus:!0,focusLock:!0,returnFocus:l,style:i.trap,children:[n!=null?c(U,{onPress:n,style:i.pressableOverlay}):null,R(v,{style:i.modal,children:[c(v,{style:i.grabContainer,...m.panHandlers,children:c(v,{style:i.grabLine})}),o]})]})}),c(v,{style:i.bottomCache})]}):null})})]})};try{L.displayName="BottomPanel",L.__docgenInfo={description:"",displayName:"BottomPanel",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onPressClose:{defaultValue:null,description:"",name:"onPressClose",required:!0,type:{name:"() => void"}},returnFocus:{defaultValue:{value:"true"},description:"",name:"returnFocus",required:!1,type:{name:"boolean"}}}}}catch{}export{L as B};
//# sourceMappingURL=BottomPanel-1201cbbd.js.map
