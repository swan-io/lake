import{S as m,g as U,r as X,s as K,o as E,N as z,_ as G,j as n,P as J,a as Q,V as Y,p as Z}from"./Space-06e7e043.js";import{r as a}from"./index-b9a8c83f.js";import{u as $}from"./useResponsive-bfde6150.js";import{B as ee}from"./BottomPanel-4f2ca9ac.js";import{F as te}from"./FocusTrap-4bc9ace1.js";import{T as ae}from"./TransitionView-908f1c26.js";import{P}from"./index-b53b1800.js";const i=m.create({container:{...m.absoluteFillObject,pointerEvents:"none"},contents:{...m.absoluteFillObject},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popover:{pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",backgroundColor:U.accented,borderRadius:X[8],marginVertical:4,overflow:"hidden",boxShadow:K.modal},popoverContents:{alignItems:"stretch"}}),oe={availableSpaceAbove:0,availableSpaceBelow:0,availableSpaceBefore:0,availableSpaceAfter:0,top:0,bottom:0,left:0,right:0,availableHeight:0,width:0},ne="flex-end",le="flex-start",re={...E.fadeAndSlideInFromBottom,leave:[E.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},ie=600,x=a.memo(({children:o,id:B,label:C,role:F="dialog",describedBy:R,matchReferenceWidth:_=!1,matchReferenceMinWidth:q=!1,onDismiss:l,referenceRef:s,returnFocus:A=!0,autoFocus:I=!0,visible:r,underlay:f=!0,safetyMargin:u=8,forcedMode:T})=>{const[b,v]=a.useState(null),h=a.useRef(null),{desktop:k}=$(ie),[{availableSpaceAbove:d,availableSpaceBelow:c,availableSpaceBefore:y,availableSpaceAfter:w,top:H,bottom:O,left:W,right:D,availableHeight:S,width:g},j]=a.useState(oe);a.useEffect(()=>{const e=s.current;if(e!=null&&r){const t=e.getBoundingClientRect(),p=t.top,V=window.innerHeight-t.bottom;j({availableSpaceAbove:p,availableSpaceBelow:V,availableSpaceBefore:t.left,availableSpaceAfter:window.innerWidth-t.right,top:Math.max(t.bottom,u),bottom:Math.max(window.innerHeight-t.top,u),left:Math.max(t.left,u),right:Math.max(window.innerWidth-t.right,u),availableHeight:p<=V?window.innerHeight-t.top-(t.bottom-t.top)-20:p-20,width:t.right-t.left})}},[u,s,r]),a.useEffect(()=>{const e=h.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),a.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),v(e),()=>{v(null),e.remove()}},[]);const M=a.useCallback(e=>{e.preventDefault(),l()},[l]),N=a.useCallback(({target:e})=>{const t=s.current;(!(t instanceof Element)||!(e instanceof Element)||t!==e&&!t.contains(e))&&l()},[s,l]),L=a.useCallback(e=>{e.preventDefault()},[]);return b==null?null:z(T).with(G.nullish,()=>k?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?n(ee,{visible:r,onPressClose:l,returnFocus:!1,children:typeof o=="function"?o({mode:"panel"}):o}):n(J,{container:b,children:n(ae,{style:i.container,...re,children:r?Q(Y,{style:i.contents,children:[f?n(P,{ref:h,style:i.underlay,onPress:M,role:"button","aria-label":"Close"}):null,S>0?n(Z,{style:[i.popover,d<=c&&{top:H},d>c&&{bottom:O},y<=w&&{left:W},y>w&&{right:D},q&&{minWidth:g},_&&{width:g},{maxHeight:S}],contentContainerStyle:[i.popoverContents,{justifyContent:d>c?ne:le}],id:B,role:F,"aria-describedby":R,"aria-label":C,children:n(te,{focusLock:!0,returnFocus:A,autoFocus:I,onEscapeKey:l,onClickOutside:f?void 0:N,children:n(P,{tabIndex:-1,onPress:L,style:i.defaultCursor,children:typeof o=="function"?o({mode:"dropdown"}):o})})}):null]}):null})})});try{x.displayName="Popover",x.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<unknown>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}}}}}catch{}export{x as P};
//# sourceMappingURL=Popover-479dbc4a.js.map
