import{i as I,s as L,c as y,b as R,d as D,r as W,j as e,V as S,D as N,h as E,p as _,U as T,S as j,L as k,B as q,I as M}from"./Space-zGNthD9D.js";import{r as c}from"./index-uCp2LrAq.js";import{F as z}from"./Fill-CgpLXZdR.js";import{u as G}from"./useBoolean-DklP6dZn.js";import{L as O}from"./LakeButton-Zf29iGD6.js";import{L as $}from"./LakeTextInput-B-jnGSd8.js";import{R as A}from"./ResponsiveContainer-COUhlsWE.js";import{T as H}from"./TransitionView-CEAYCQ-u.js";import{M as U}from"./index-D8ARPVHb.js";import{T as J}from"./Tag-Cwybh6oq.js";import{S as K,a as f}from"./_StoriesComponents-6W14nzOo.js";import"./extends-CF3RwP-h.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BOkhicXD.js";import"./commonStyles-t4XfA7cz.js";import"./Pressable-DsW3i5ER.js";import"./index-BgtmwnaA.js";import"./LakeSelect-DgM4Ffyg.js";import"./useDisclosure-X_l1NENI.js";import"./a11y-DXvpDVrG.js";import"./Popover-DHAI8Em3.js";import"./BottomPanel-kZZupON0.js";import"./useBodyClassName-CiTylq2A.js";import"./math-CMPBFgTl.js";import"./FocusTrap-B-u8WGCK.js";import"./array-rjEBP2Ry.js";import"./Suspendable-C5Crw117.js";import"./useResponsive-jo24iYWf.js";import"./function-77u7Dq4b.js";const Q=(r,n)=>{const t=c.useRef(void 0);return c.useCallback(i=>(I(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(r,n,i),()=>clearTimeout(t.current)),[r,n])},o=L.create({container:{flexGrow:1,flexShrink:1},input:{transition:"300ms ease-in-out border-color",maxWidth:202,minWidth:38,justifyContent:"flex-end"},focus:{outlineStyle:"none",borderColor:y.current.primary},clearButton:{marginRight:R[8]},clear:{width:8,height:8},smallButtonContainer:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1},largeInputContainer:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1},openSearchFieldContainer:{position:"absolute",right:0,top:0,bottom:0},openSearchField:{position:"absolute",right:0,top:0,bottom:0,boxShadow:`0 0 20px 20px ${D.default}`,borderRadius:W[6]}}),X=({inputRef:r,placeholder:n,initialValue:t,onChange:i,setFocused:a,hasFocus:u,clear:p,currentValue:s,renderEnd:l})=>e.jsxs(S,{style:o.smallButtonContainer,children:[e.jsx(O,{mode:"secondary",size:"small",ariaLabel:n,icon:"search-filled",onPress:()=>{a.on()},pill:s!==""}),e.jsx(H,{style:o.openSearchFieldContainer,...N.fadeAndSlideInFromRight,children:u?e.jsx(S,{style:o.openSearchField,children:e.jsx(w,{inputRef:r,placeholder:n,initialValue:t,onChange:i,setFocused:a,hasFocus:u,clear:p,currentValue:s,renderEnd:l})}):null})]}),w=({inputRef:r,placeholder:n,initialValue:t,onChange:i,setFocused:a,hasFocus:u,clear:p,renderEnd:s,currentValue:l})=>{const d=c.useRef(null);return e.jsx($,{ref:r,autoFocus:u,icon:"search-filled",placeholder:n,defaultValue:t,inputMode:"search",onChangeText:i,hideErrors:!0,renderEnd:()=>e.jsxs(e.Fragment,{children:[E(l)&&e.jsx(U,{onPress:()=>{d.current!=null&&clearTimeout(d.current),p()},style:o.clearButton,children:e.jsx(_,{viewBox:"0 0 16 16",style:o.clear,children:e.jsxs(e.Fragment,{children:[e.jsx(T,{x1:"0",x2:"16",y1:"0",y2:"16",strokeLinecap:"round",stroke:y.gray[500],strokeWidth:2}),e.jsx(T,{x1:"0",x2:"16",y1:"16",y2:"0",strokeLinecap:"round",stroke:y.gray[500],strokeWidth:2})]})})}),s==null?void 0:s()]}),onFocus:()=>{d.current!=null&&clearTimeout(d.current),a.on()},onBlur:()=>{d.current=window.setTimeout(()=>{a.off()},300)},containerStyle:o.largeInputContainer,style:[o.input,u?o.focus:null]})},h=({initialValue:r,placeholder:n,onChangeText:t,debounceDuration:i=500,maxWidth:a,renderEnd:u})=>{const[p,s]=G(!1),l=c.useRef(null),[d,g]=c.useState(r),V=Q(x=>{t(x),g(x.trim())},i),P=c.useCallback(()=>{l.current instanceof HTMLInputElement&&(l.current.clear(),l.current.focus(),t(""),g(""))},[t]),B={inputRef:l,placeholder:n,initialValue:r,onChange:V,setFocused:s,hasFocus:p,clear:P,currentValue:d,renderEnd:u};return e.jsx(A,{breakpoint:200,style:[o.container,a!=null&&{maxWidth:a}],children:({large:x})=>{const v=x?w:X;return e.jsx(v,{...B})}})};h.__docgenInfo={description:"",methods:[],displayName:"LakeSearchField",props:{initialValue:{required:!0,tsType:{name:"string"},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!0,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""},debounceDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},maxWidth:{required:!1,tsType:{name:"number"},description:""},renderEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => ReactNode",signature:{arguments:[],return:{name:"ReactNode"}}},description:""}}};const Y=L.create({container:{maxWidth:600}}),Ve={title:"Forms/SearchField",component:h},m=()=>{const[r,n]=c.useState(),[t,i]=c.useState();return e.jsxs(K,{title:"SearchField",children:[e.jsxs(f,{title:"Default",style:Y.container,children:[e.jsx(h,{initialValue:"",placeholder:"Placeholder",onChangeText:n}),e.jsx(j,{height:12}),e.jsxs(k,{children:["Debounced value: ",r]})]}),e.jsxs(f,{title:"With initialValue",children:[e.jsxs(q,{direction:"row",children:[e.jsx(M,{name:"add-circle-filled",size:32}),e.jsx(z,{minWidth:96}),e.jsx(h,{initialValue:"Initial value",placeholder:"Placeholder",onChangeText:i})]}),e.jsx(j,{height:12}),e.jsxs(k,{children:["Debounced value: ",t]})]}),e.jsx(f,{title:"With counter",children:e.jsx(h,{initialValue:"Initial value",placeholder:"Placeholder",onChangeText:i,renderEnd:()=>e.jsx(J,{children:"44"})})})]})};m.__docgenInfo={description:"",methods:[],displayName:"Variations"};var b,C,F;m.parameters={...m.parameters,docs:{...(b=m.parameters)==null?void 0:b.docs,source:{originalSource:`() => {
  const [text1, setText1] = useState<string>();
  const [text2, setText2] = useState<string>();
  return <StoryBlock title="SearchField">
      <StoryPart title="Default" style={styles.container}>
        <LakeSearchField initialValue="" placeholder="Placeholder" onChangeText={setText1} />
        <Space height={12} />
        <LakeText>Debounced value: {text1}</LakeText>
      </StoryPart>

      <StoryPart title="With initialValue">
        <Box direction="row">
          <Icon name="add-circle-filled" size={32} />
          <Fill minWidth={96} />

          <LakeSearchField initialValue="Initial value" placeholder="Placeholder" onChangeText={setText2} />
        </Box>

        <Space height={12} />
        <LakeText>Debounced value: {text2}</LakeText>
      </StoryPart>

      <StoryPart title="With counter">
        <LakeSearchField initialValue="Initial value" placeholder="Placeholder" onChangeText={setText2} renderEnd={() => <Tag>44</Tag>} />
      </StoryPart>
    </StoryBlock>;
}`,...(F=(C=m.parameters)==null?void 0:C.docs)==null?void 0:F.source}}};const Pe=["Variations"];export{m as Variations,Pe as __namedExportsOrder,Ve as default};
//# sourceMappingURL=SearchField.stories-B9PIKhne.js.map
