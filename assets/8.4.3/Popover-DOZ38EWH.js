import{_ as $}from"./extends-CF3RwP-h.js";import{_ as we,V as M,Y as L,X as _,Z as Re,s as U,F as le,d as Me,r as Ee,b as ke,g as xe,D as ce,ak as Fe,$ as de,z as Pe,j as P,P as Oe}from"./Space-B4Qk6WP7.js";import{R as Ve,r as m}from"./index-uCp2LrAq.js";import{g as ze}from"./_commonjsHelpers-BosuxZz1.js";import{u as Ae}from"./useResponsive-CHheHyU5.js";import{n as De}from"./function-pg8x_Wne.js";import{B as Ke}from"./BottomPanel-CD3PA7wj.js";import{F as He}from"./FocusTrap-DOGttOjF.js";import{T as Ne}from"./TransitionView-DHf_wMwC.js";import{M as fe}from"./index-Bg-WljPs.js";var Be={OS:"web",select:i=>"web"in i?i.web:i.default,get isTesting(){return!1}},We=function i(e,t,s){if(s===void 0&&(s=-1),s===0)return!0;if(e===t||typeof e=="function"&&typeof t=="function")return!1;if(typeof e!="object"||e===null)return e!==t;if(typeof t!="object"||t===null||e.constructor!==t.constructor)return!0;if(Array.isArray(e)){var a=e.length;if(t.length!==a)return!0;for(var l=0;l<a;l++)if(i(e[l],t[l],s-1))return!0}else{for(var h in e)if(i(e[h],t[h],s-1))return!0;for(var r in t)if(e[r]===void 0&&t[r]!==void 0)return!0}return!1};function me(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,s=Array(e);t<e;t++)s[t]=i[t];return s}function $e(i,e){if(i){if(typeof i=="string")return me(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?me(i,e):void 0}}function H(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=$e(i))||e){t&&(i=t);var s=0;return function(){return s>=i.length?{done:!0}:{done:!1,value:i[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ue=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function qe(i){i.colors,i.enabled,i.onRefresh,i.progressBackgroundColor,i.progressViewOffset,i.refreshing,i.size,i.tintColor,i.title,i.titleColor;var e=we(i,Ue);return Ve.createElement(M,e)}class je{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(t=>this.enqueue(t))}cancelTasks(e){this._queueStack=this._queueStack.map(t=>L(L({},t),{},{tasks:t.tasks.filter(s=>e.indexOf(s)===-1)})).filter((t,s)=>t.tasks.length>0||s===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{typeof t=="object"&&t.gen?this._genPromise(t):typeof t=="object"&&t.run?t.run():(_(typeof t=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(t,null,2)),t())}catch(s){throw s.message="TaskQueue: Error with task "+(t.name||"")+": "+s.message,s}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&t.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1}),s=t-1,a=this._queueStack[s];e.gen().then(()=>{a.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(l=>{setTimeout(()=>{throw l.message="TaskQueue: Error resolving Promise in task "+e.name+": "+l.message,l},0)})}}class Qe{constructor(){this._registry={}}addListener(e,t,s){var a=Xe(this._registry,e),l={context:s,listener:t,remove(){a.delete(l)}};return a.add(l),l}emit(e){var t=this._registry[e];if(t!=null){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];for(var h=0,r=[...t];h<r.length;h++){var n=r[h];n.listener.apply(n.context,a)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var t=this._registry[e];return t==null?0:t.size}}function Xe(i,e){var t=i[e];return t==null&&(t=new Set,i[e]=t),t}var Ye=function(e,t){return setTimeout(()=>{var s=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-s))}})},1)},Je=Re&&typeof window.requestIdleCallback<"u",Ge=Je?window.requestIdleCallback:Ye,Y=new Qe,oe={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(i){var e=[],t=new Promise(s=>{W(),i&&e.push(i),e.push({run:s,name:"resolve "+(i&&i.name||"?")}),G.enqueueTasks(e)});return{then:t.then.bind(t),done:t.then.bind(t),cancel:()=>{G.cancelTasks(e)}}},createInteractionHandle(){W();var i=++Ze;return J.add(i),i},clearInteractionHandle(i){_(!!i,"Must provide a handle to clear."),W(),J.delete(i),he.add(i)},addListener:Y.addListener.bind(Y),setDeadline(i){Z=i}},q=new Set,J=new Set,he=new Set,G=new je({onMoreTasks:W}),Q=0,Ze=0,Z=-1;function W(){Q||(Z>0?Q=setTimeout(ve):Q=Ge(ve))}function ve(){Q=0;var i=q.size;J.forEach(s=>q.add(s)),he.forEach(s=>q.delete(s));var e=q.size;if(i!==0&&e===0?Y.emit(oe.Events.interactionComplete):i===0&&e!==0&&Y.emit(oe.Events.interactionStart),e===0){for(var t=Date.now();G.hasTasksToProcess();)if(G.processNext(),Z>0&&Date.now()-t>=Z){W();break}}J.clear(),he.clear()}class et{constructor(e,t){this._delay=t,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=oe.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function pe(i,e,t){return e<i?i:e>t?t:e}function tt(){return console.log(...arguments)}class rt{constructor(e){_(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(_(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var t=this._findRegion(e.first),s=t[0],a=t[1],l=this._findRegion(e.last),h=l[0],r=l[1];if(!(a===r&&!s.isSpacer)){var n=[],o=[],u=L(L({},e),{},{isSpacer:!1});s.first<u.first&&(s.isSpacer?n.push({first:s.first,last:u.first-1,isSpacer:!0}):u.first=s.first),h.last>u.last&&(h.isSpacer?o.push({first:u.last+1,last:h.last,isSpacer:!0}):u.last=h.last);var c=[...n,u,...o],d=r-a+1;this._regions.splice(a,d,...c)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((t,s)=>t.first===e._regions[s].first&&t.last===e._regions[s].last&&t.isSpacer===e._regions[s].isSpacer)}_findRegion(e){for(var t=0,s=this._regions.length-1;t<=s;){var a=Math.floor((t+s)/2),l=this._regions[a];if(e>=l.first&&e<=l.last)return[l,a];e<l.first?s=a-1:e>l.last&&(t=a+1)}_(!1,"A region was not found containing cellIdx "+e)}}class st{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,t){var s;_(!this._childrenToCellKey.has(e),"Trying to add already present child list");var a=(s=this._cellKeyToChildren.get(t))!==null&&s!==void 0?s:new Set;a.add(e),this._cellKeyToChildren.set(t,a),this._childrenToCellKey.set(e,t)}remove(e){var t=this._childrenToCellKey.get(e);_(t!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var s=this._cellKeyToChildren.get(t);_(s,"_cellKeyToChildren should contain cellKey"),s.delete(e),s.size===0&&this._cellKeyToChildren.delete(t)}forEach(e){for(var t=H(this._cellKeyToChildren.values()),s;!(s=t()).done;)for(var a=s.value,l=H(a),h;!(h=l()).done;){var r=h.value;e(r)}}forEachInCell(e,t){for(var s,a=(s=this._cellKeyToChildren.get(e))!==null&&s!==void 0?s:[],l=H(a),h;!(h=l()).done;){var r=h.value;t(r)}}anyInCell(e,t){for(var s,a=(s=this._cellKeyToChildren.get(e))!==null&&s!==void 0?s:[],l=H(a),h;!(h=l()).done;){var r=h.value;if(t(r))return!0}return!1}size(){return this._childrenToCellKey.size}}class _e{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var j=[],ge=10,re=null;class it{static addListener(e){return re===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),j.push(e),{remove:()=>{j=j.filter(t=>e!==t)}}}static setSampleRate(e){re=e}static setMinSampleCount(e){ge=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new _e,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(re||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<ge){this._resetData();return}var t=global.performance.now()-e,s=L(L({},this._info),{},{total_time_spent:t});j.forEach(a=>a(s)),this._resetData()}}}computeBlankness(e,t,s){if(!this._enabled||e.getItemCount(e.data)===0||t.last<t.first||this._samplesStartTime==null)return 0;var a=s.dOffset,l=s.offset,h=s.velocity,r=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(r),this._info.pixels_scrolled+=Math.round(Math.abs(a));var n=Math.round(Math.abs(h)*1e3),o=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=o-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=o-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var u=0,c=t.first,d=this._getFrameMetrics(c,e);c<=t.last&&(!d||!d.inLayout);)d=this._getFrameMetrics(c,e),c++;d&&c>0&&(u=Math.min(r,Math.max(0,d.offset-l)));for(var f=0,v=t.last,p=this._getFrameMetrics(v,e);v>=t.first&&(!p||!p.inLayout);)p=this._getFrameMetrics(v,e),v--;if(p&&v<e.getItemCount(e.data)-1){var y=p.offset+p.length;f=Math.min(r,Math.max(0,l+r-y))}var C=Math.round(u+f),b=C/r;return b>0?(this._anyBlankStartTime=o,this._info.any_blank_speed_sum+=n,this._info.any_blank_count++,this._info.pixels_blank+=C,b>.5&&(this._mostlyBlankStartTime=o,this._info.mostly_blank_count++)):(n<.01||Math.abs(a)<1)&&this.deactivateAndFlush(),b}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new _e,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class at extends m.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,t){typeof e=="function"?super.setState((s,a)=>{this._inAsyncStateUpdate=!0;var l;try{l=e(s,a)}catch(h){throw h}finally{this._inAsyncStateUpdate=!1}return l},t):super.setState(e,t)}_installSetStateHooks(){var e=this,t=this.props,s=this.state;Object.defineProperty(this,"props",{get(){return _(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),t},set(a){t=a}}),Object.defineProperty(this,"state",{get(){return _(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),s},set(a){s=a}})}}class ye{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,s,a,l){var h=e.getItemCount(e.data),r=this._config,n=r.itemVisiblePercentThreshold,o=r.viewAreaCoveragePercentThreshold,u=o!=null,c=u?o:n;_(c!=null&&n!=null!=(o!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var d=[];if(h===0)return d;var f=-1,v=l||{first:0,last:h-1},p=v.first,y=v.last;if(y>=h)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:l,itemCount:h})),[];for(var C=p;C<=y;C++){var b=a(C,e);if(b){var I=b.offset-t,w=I+b.length;if(I<s&&w>0)f=C,nt(u,c,I,w,s,b.length)&&d.push(C);else if(f>=0)break}}return d}onUpdate(e,t,s,a,l,h,r){var n=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||n===0||!a(0,e))){var o=[];if(n&&(o=this.computeViewableItems(e,t,s,a,r)),!(this._viewableIndices.length===o.length&&this._viewableIndices.every((c,d)=>c===o[d])))if(this._viewableIndices=o,this._config.minimumViewTime){var u=setTimeout(()=>{this._timers.delete(u),this._onUpdateSync(e,o,h,l)},this._config.minimumViewTime);this._timers.add(u)}else this._onUpdateSync(e,o,h,l)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,t,s,a){t=t.filter(b=>this._viewableIndices.includes(b));for(var l=this._viewableItems,h=new Map(t.map(b=>{var I=a(b,!0,e);return[I.key,I]})),r=[],n=H(h),o;!(o=n()).done;){var u=o.value,c=u[0],d=u[1];l.has(c)||r.push(d)}for(var f=H(l),v;!(v=f()).done;){var p=v.value,y=p[0],C=p[1];h.has(y)||r.push(L(L({},C),{},{isViewable:!1}))}r.length>0&&(this._viewableItems=h,s({viewableItems:Array.from(h.values()),changed:r,viewabilityConfig:this._config}))}}function nt(i,e,t,s,a,l){if(ot(t,s,a))return!0;var h=lt(t,s,a),r=100*(i?h/a:h/l);return r>=e}function lt(i,e,t){var s=Math.min(e,t)-Math.max(i,0);return Math.max(0,s)}function ot(i,e,t){return i>=0&&e<=t&&e>i}var ee=m.createContext(null);function ht(i){var e=i.children,t=i.value,s=m.useMemo(()=>({cellKey:null,getScrollMetrics:t.getScrollMetrics,horizontal:t.horizontal,getOutermostParentListRef:t.getOutermostParentListRef,registerAsNestedChild:t.registerAsNestedChild,unregisterAsNestedChild:t.unregisterAsNestedChild}),[t.getScrollMetrics,t.horizontal,t.getOutermostParentListRef,t.registerAsNestedChild,t.unregisterAsNestedChild]);return m.createElement(ee.Provider,{value:s},e)}function X(i){var e=i.cellKey,t=i.children,s=m.useContext(ee),a=m.useMemo(()=>s==null?null:L(L({},s),{},{cellKey:e}),[s,e]);return m.createElement(ee.Provider,{value:a},t)}class ut extends m.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,t=e.cellKey,s=e.prevCellKey;this.props.onUpdateSeparators([t,s],{highlighted:!0})},unhighlight:()=>{var e=this.props,t=e.cellKey,s=e.prevCellKey;this.props.onUpdateSeparators([t,s],{highlighted:!1})},updateProps:(e,t)=>{var s=this.props,a=s.cellKey,l=s.prevCellKey;this.props.onUpdateSeparators([e==="leading"?l:a],t)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,t){return{separatorProps:L(L({},t.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(t=>({separatorProps:L(L({},t.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,t,s,a){if(e&&t&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),t)return m.createElement(t,{item:s,index:a,separators:this._separators});if(e)return e({item:s,index:a,separators:this._separators});_(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,t=e.CellRendererComponent,s=e.ItemSeparatorComponent,a=e.ListItemComponent,l=e.cellKey,h=e.horizontal,r=e.item,n=e.index,o=e.inversionStyle,u=e.onCellFocusCapture,c=e.onCellLayout,d=e.renderItem,f=this._renderElement(d,a,r,n),v=m.isValidElement(s)?s:s&&m.createElement(s,this.state.separatorProps),p=o?h?[se.rowReverse,o]:[se.columnReverse,o]:h?[se.row,o]:o,y=t?m.createElement(t,$({cellKey:l,index:n,item:r,style:p,onFocusCapture:u},c&&{onLayout:this._onLayout}),f,v):m.createElement(M,$({style:p,onFocusCapture:u},c&&{onLayout:this._onLayout}),f,v);return m.createElement(X,{cellKey:this.props.cellKey},y)}}var se=U.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function ct(i,e,t,s){s===void 0&&(s=1);for(var a=e.getItemCount(e.data),l=[],h=0;h<i.length;h++)for(var r=i[h],n=0,o=a-1;n<=o;){var u=n+(o-n>>>1),c=t(u,e),d=c.offset*s,f=(c.offset+c.length)*s;if(u===0&&r<d||u!==0&&r<=d)o=u-1;else if(r>f)n=u+1;else{l[h]=u;break}}return l}function dt(i,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,i.last)-Math.max(e.first,i.first))}function ft(i,e,t,s,a,l){var h=i.getItemCount(i.data);if(h===0)return{first:0,last:-1};var r=l.offset,n=l.velocity,o=l.visibleLength,u=l.zoomScale,c=u===void 0?1:u,d=Math.max(0,r),f=d+o,v=(t-1)*o,p=.5,y=n>1?"after":n<-1?"before":"none",C=Math.max(0,d-(1-p)*v),b=Math.max(0,f+p*v),I=a(h-1,i).offset*c;if(I<C)return{first:Math.max(0,h-1-e),last:h-1};var w=ct([C,d,f,b],i,a,c),R=w[0],S=w[1],T=w[2],g=w[3];R=R??0,S=S??Math.max(0,R),g=g??h-1,T=T??Math.min(g,S+e-1);for(var E={first:S,last:T},O=dt(s,E);!(S<=R&&T>=g);){var k=O>=e,A=S<=s.first||S>s.last,V=S>R&&(!k||!A),N=T>=s.last||T<s.first,z=T<g&&(!k||!N);if(k&&!V&&!z)break;V&&!(y==="after"&&z&&N)&&(A&&O++,S--),z&&!(y==="before"&&V&&A)&&(N&&O++,T++)}if(!(T>=S&&S>=0&&T<h&&S>=R&&T<=g&&S<=E.first&&T>=E.last))throw new Error("Bad window calculation "+JSON.stringify({first:S,last:T,itemCount:h,overscanFirst:R,overscanLast:g,visible:E}));return{first:S,last:T}}function ue(i,e){return typeof i=="object"&&(i==null?void 0:i.key)!=null?i.key:typeof i=="object"&&(i==null?void 0:i.id)!=null?i.id:String(e)}var te={exports:{}};function Te(i,e){if(i!=null)return i;var t=new Error(e!==void 0?e:"Got unexpected "+i);throw t.framesToPop=1,t}te.exports=Te;te.exports.default=Te;Object.defineProperty(te.exports,"__esModule",{value:!0});var mt=te.exports;const vt=ze(mt);var Ce=.001,ie=!1,ae="";function D(i){return i??!1}function pt(i){return i??10}function ne(i){return i??10}function _t(i){return i??2}function be(i){return i??2}function Se(i,e){return i*e/2}function gt(i){return i??50}function Le(i){return i??21}function yt(i,e){for(var t=i.length-1;t>=0;t--)if(e(i[t]))return i[t];return null}class x extends at{scrollToEnd(e){var t=e?e.animated:!0,s=this.props.getItemCount(this.props.data)-1;if(!(s<0)){var a=this.__getFrameMetricsApprox(s,this.props),l=Math.max(0,a.offset+a.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(D(this.props.horizontal)?{x:l,animated:t}:{y:l,animated:t})}}}scrollToIndex(e){var t=this.props,s=t.data,a=t.horizontal,l=t.getItemCount,h=t.getItemLayout,r=t.onScrollToIndexFailed,n=e.animated,o=e.index,u=e.viewOffset,c=e.viewPosition;if(_(o>=0,"scrollToIndex out of range: requested index "+o+" but minimum is 0"),_(l(s)>=1,"scrollToIndex out of range: item length "+l(s)+" but minimum is 1"),_(o<l(s),"scrollToIndex out of range: requested index "+o+" is out of 0 to "+(l(s)-1)),!h&&o>this._highestMeasuredFrameIndex){_(!!r,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),r({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:o});return}var d=this.__getFrameMetricsApprox(Math.floor(o),this.props),f=Math.max(0,this._getOffsetApprox(o,this.props)-(c||0)*(this._scrollMetrics.visibleLength-d.length))-(u||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(a?{x:f,animated:n}:{y:f,animated:n})}}scrollToItem(e){for(var t=e.item,s=this.props,a=s.data,l=s.getItem,h=s.getItemCount,r=h(a),n=0;n<r;n++)if(l(a,n)===t){this.scrollToIndex(L(L({},e),{},{index:n}));break}}scrollToOffset(e){var t=e.animated,s=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(D(this.props.horizontal)?{x:s,animated:t}:{y:s,animated:t})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var t;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=r=>{this._nestedChildLists.add(r.ref,r.cellKey),this._hasInteracted&&r.ref.recordInteraction()},this._unregisterAsNestedChild=r=>{this._nestedChildLists.remove(r.ref)},this._onUpdateSeparators=(r,n)=>{r.forEach(o=>{var u=o!=null&&this._cellRefs[o];u&&u.updateSeparatorProps(n)})},this._getSpacerKey=r=>r?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new st,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=r=>{this._scrollRef=r},this._defaultRenderScrollComponent=r=>{var n=r.onRefresh;if(this._isNestedWithSameOrientation())return m.createElement(M,r);if(n){var o;return _(typeof r.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((o=r.refreshing)!==null&&o!==void 0?o:"undefined")+"`"),m.createElement(le,$({},r,{refreshControl:r.refreshControl==null?m.createElement(qe,{refreshing:r.refreshing,onRefresh:n,progressViewOffset:r.progressViewOffset}):r.refreshControl}))}else return m.createElement(le,r)},this._onCellLayout=(r,n,o)=>{var u=r.nativeEvent.layout,c={offset:this._selectOffset(u),length:this._selectLength(u),index:o,inLayout:!0},d=this._frames[n];!d||c.offset!==d.offset||c.length!==d.length||o!==d.index?(this._totalCellLength+=c.length-(d?d.length:0),this._totalCellsMeasured+=d?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[n]=c,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,o),this._scheduleCellsToRenderUpdate()):this._frames[n].inLayout=!0,this._triggerRemeasureForChildListsInCell(n),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=r=>{delete this._cellRefs[r];var n=this._frames[r];n&&(this._frames[r]=L(L({},n),{},{inLayout:!1}))},this._onLayout=r=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(r.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(r),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=r=>{this.props.onLayout&&this.props.onLayout(r)},this._onLayoutFooter=r=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(r.nativeEvent.layout)},this._onLayoutHeader=r=>{this._headerLength=this._selectLength(r.nativeEvent.layout)},this._onContentSizeChange=(r,n)=>{r>0&&n>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:vt(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(r,n),this._scrollMetrics.contentLength=this._selectLength({height:n,width:r}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=r=>{var n=r.offset-this._offsetFromParentVirtualizedList,o=r.visibleLength,u=n-this._scrollMetrics.offset,c=this._scrollMetrics.contentLength;return{visibleLength:o,contentLength:c,offset:n,dOffset:u}},this._onScroll=r=>{this._nestedChildLists.forEach(C=>{C._onScroll(r)}),this.props.onScroll&&this.props.onScroll(r);var n=r.timeStamp,o=this._selectLength(r.nativeEvent.layoutMeasurement),u=this._selectLength(r.nativeEvent.contentSize),c=this._selectOffset(r.nativeEvent.contentOffset),d=c-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var f=this._convertParentScrollMetrics({visibleLength:o,offset:c});o=f.visibleLength,u=f.contentLength,c=f.offset,d=f.dOffset}var v=this._scrollMetrics.timestamp?Math.max(1,n-this._scrollMetrics.timestamp):1,p=d/v;v>500&&this._scrollMetrics.dt>500&&u>5*o&&!this._hasWarned.perf&&(tt("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:v,prevDt:this._scrollMetrics.dt,contentLength:u}),this._hasWarned.perf=!0);var y=r.nativeEvent.zoomScale<0?1:r.nativeEvent.zoomScale;this._scrollMetrics={contentLength:u,dt:v,dOffset:d,offset:c,timestamp:n,velocity:p,visibleLength:o,zoomScale:y},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),p!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=r=>{this._nestedChildLists.forEach(n=>{n._onScrollBeginDrag(r)}),this._viewabilityTuples.forEach(n=>{n.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(r)},this._onScrollEndDrag=r=>{this._nestedChildLists.forEach(o=>{o._onScrollEndDrag(r)});var n=r.nativeEvent.velocity;n&&(this._scrollMetrics.velocity=this._selectOffset(n)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(r)},this._onMomentumScrollBegin=r=>{this._nestedChildLists.forEach(n=>{n._onMomentumScrollBegin(r)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(r)},this._onMomentumScrollEnd=r=>{this._nestedChildLists.forEach(n=>{n._onMomentumScrollEnd(r)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(r)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((r,n)=>{var o=this._adjustCellsAroundViewport(n,r.cellsAroundViewport),u=x._createRenderMask(n,o,this._getNonViewportRenderRegions(n));return o.first===r.cellsAroundViewport.first&&o.last===r.cellsAroundViewport.last&&u.equals(r.renderMask)?null:{cellsAroundViewport:o,renderMask:u}})},this._createViewToken=(r,n,o)=>{var u=o.data,c=o.getItem,d=c(u,r);return{index:r,item:d,key:this._keyExtractor(d,r,o),isViewable:n}},this._getOffsetApprox=(r,n)=>{if(Number.isInteger(r))return this.__getFrameMetricsApprox(r,n).offset;var o=this.__getFrameMetricsApprox(Math.floor(r),n),u=r-Math.floor(r);return o.offset+u*o.length},this.__getFrameMetricsApprox=(r,n)=>{var o=this._getFrameMetrics(r,n);if(o&&o.index===r)return o;var u=n.data,c=n.getItemCount,d=n.getItemLayout;return _(r>=0&&r<c(u),"Tried to get frame for out of range index "+r),_(!d,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*r}},this._getFrameMetrics=(r,n)=>{var o=n.data,u=n.getItem,c=n.getItemCount,d=n.getItemLayout;_(r>=0&&r<c(o),"Tried to get frame for out of range index "+r);var f=u(o,r),v=this._frames[this._keyExtractor(f,r,n)];return(!v||v.index!==r)&&d?d(o,r):v},this._getNonViewportRenderRegions=r=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var n=this._cellRefs[this._lastFocusedCellKey],o=n.props.index,u=r.getItemCount(r.data);if(o>=u||this._keyExtractor(r.getItem(r.data,o),o,r)!==this._lastFocusedCellKey)return[];for(var c=o,d=0,f=c-1;f>=0&&d<this._scrollMetrics.visibleLength;f--)c--,d+=this.__getFrameMetricsApprox(f,r).length;for(var v=o,p=0,y=v+1;y<u&&p<this._scrollMetrics.visibleLength;y++)v++,p+=this.__getFrameMetricsApprox(y,r).length;return[{first:c,last:v}]},this._checkProps(e),this._fillRateHelper=new it(this._getFrameMetrics),this._updateCellsToRenderBatcher=new et(this._updateCellsToRender,(t=this.props.updateCellsBatchingPeriod)!==null&&t!==void 0?t:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(r=>({viewabilityHelper:new ye(r.viewabilityConfig),onViewableItemsChanged:r.onViewableItemsChanged}));else{var s=this.props,a=s.onViewableItemsChanged,l=s.viewabilityConfig;a&&this._viewabilityTuples.push({viewabilityHelper:new ye(l),onViewableItemsChanged:a})}var h=x._initialRenderRegion(e);this.state={cellsAroundViewport:h,renderMask:x._createRenderMask(e,h)},this.invertedWheelEventHandler=r=>{var n=this.props.horizontal?r.target.scrollLeft:r.target.scrollTop,o=this.props.horizontal?r.target.scrollWidth:r.target.scrollHeight,u=this.props.horizontal?r.target.clientWidth:r.target.clientHeight,c=o>u,d=this.props.horizontal?r.deltaX||r.wheelDeltaX:r.deltaY||r.wheelDeltaY,f=d;c&&(f=d<0?Math.min(d+n,0):Math.max(d-(o-u-n),0));var v=d-f;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var p=this._scrollRef.getScrollableNode();if(this.props.horizontal){r.target.scrollLeft+=v;var y=p.scrollLeft-f;p.scrollLeft=this.props.getItemLayout?y:Math.min(y,this._totalCellLength)}else{r.target.scrollTop+=v;var C=p.scrollTop-f;p.scrollTop=this.props.getItemLayout?C:Math.min(C,this._totalCellLength)}r.preventDefault()}}}_checkProps(e){var t=e.onScroll,s=e.windowSize,a=e.getItemCount,l=e.data,h=e.initialScrollIndex;_(!t||!t.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),_(Le(s)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),_(a,'VirtualizedList: The "getItemCount" prop must be provided');var r=a(l);h!=null&&!this._hasTriggeredInitialScrollToIndex&&(h<0||r>0&&h>=r)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+h+'" is not valid (list has '+r+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,t,s){var a=e.getItemCount(e.data);_(t.first>=0&&t.last>=t.first-1&&t.last<a,'Invalid cells around viewport "['+t.first+", "+t.last+']" was passed to VirtualizedList._createRenderMask');var l=new rt(a);if(a>0){for(var h=[t,...s??[]],r=0,n=h;r<n.length;r++){var o=n[r];l.addCells(o)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var u=x._initialRenderRegion(e);l.addCells(u)}var c=new Set(e.stickyHeaderIndices);x._ensureClosestStickyHeader(e,c,l,t.first)}return l}static _initialRenderRegion(e){var t,s=e.getItemCount(e.data),a=Math.max(0,Math.min(s-1,Math.floor((t=e.initialScrollIndex)!==null&&t!==void 0?t:0))),l=Math.min(s,a+pt(e.initialNumToRender))-1;return{first:a,last:l}}static _ensureClosestStickyHeader(e,t,s,a){for(var l=e.ListHeaderComponent?1:0,h=a-1;h>=0;h--)if(t.has(h+l)){s.addCells({first:h,last:h});break}}_adjustCellsAroundViewport(e,t){var s=e.data,a=e.getItemCount,l=be(e.onEndReachedThreshold),h=this._scrollMetrics,r=h.contentLength,n=h.offset,o=h.visibleLength,u=r-o-n;if(o<=0||r<=0)return t.last>=a(s)?x._constrainToItemCount(t,e):t;var c;if(e.disableVirtualization){var d=u<l*o?ne(e.maxToRenderPerBatch):0;c={first:0,last:Math.min(t.last+d,a(s)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(u)>=Number.EPSILON)return t.last>=a(s)?x._constrainToItemCount(t,e):t;c=ft(e,ne(e.maxToRenderPerBatch),Le(e.windowSize),t,this.__getFrameMetricsApprox,this._scrollMetrics),_(c.last<a(s),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var f=this._findFirstChildWithMore(c.first,c.last);c.last=f??c.last}return c}_findFirstChildWithMore(e,t){for(var s=e;s<=t;s++){var a=this._indicesToKeys.get(s);if(a!=null&&this._nestedChildLists.anyInCell(a,l=>l.hasMore()))return s}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,t){var s=e.getItemCount(e.data);if(s===t.renderMask.numCells())return t;var a=x._constrainToItemCount(t.cellsAroundViewport,e);return{cellsAroundViewport:a,renderMask:x._createRenderMask(e,a)}}_pushCells(e,t,s,a,l,h){var r=this,n=this.props,o=n.CellRendererComponent,u=n.ItemSeparatorComponent,c=n.ListHeaderComponent,d=n.ListItemComponent,f=n.data,v=n.debug,p=n.getItem,y=n.getItemCount,C=n.getItemLayout,b=n.horizontal,I=n.renderItem,w=c?1:0,R=y(f)-1,S;l=Math.min(R,l);for(var T=function(){var O=p(f,g),k=r._keyExtractor(O,g,r.props);r._indicesToKeys.set(g,k),s.has(g+w)&&t.push(e.length);var A=C==null||v||r._fillRateHelper.enabled();e.push(m.createElement(ut,$({CellRendererComponent:o,ItemSeparatorComponent:g<R?u:void 0,ListItemComponent:d,cellKey:k,horizontal:b,index:g,inversionStyle:h,item:O,key:k,prevCellKey:S,onUpdateSeparators:r._onUpdateSeparators,onCellFocusCapture:V=>r._onCellFocusCapture(k),onUnmount:r._onCellUnmount,ref:V=>{r._cellRefs[k]=V},renderItem:I},A&&{onCellLayout:r._onCellLayout}))),S=k},g=a;g<=l;g++)T()}static _constrainToItemCount(e,t){var s=t.getItemCount(t.data),a=Math.min(s-1,e.last),l=ne(t.maxToRenderPerBatch);return{first:pe(0,s-1-l,e.first),last:a}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===D(this.props.horizontal))}_keyExtractor(e,t,s){if(s.keyExtractor!=null)return s.keyExtractor(e,t);var a=ue(e,t);return a===String(t)&&(ie=!0,e.type&&e.type.displayName&&(ae=e.type.displayName)),a}render(){this._checkProps(this.props);var e=this.props,t=e.ListEmptyComponent,s=e.ListFooterComponent,a=e.ListHeaderComponent,l=this.props,h=l.data,r=l.horizontal,n=this.props.inverted?D(this.props.horizontal)?F.horizontallyInverted:F.verticallyInverted:null,o=[],u=new Set(this.props.stickyHeaderIndices),c=[];if(a){u.has(0)&&c.push(0);var d=m.isValidElement(a)?a:m.createElement(a,null);o.push(m.createElement(X,{cellKey:this._getCellKey()+"-header",key:"$header"},m.createElement(M,{onLayout:this._onLayoutHeader,style:[n,this.props.ListHeaderComponentStyle]},d)))}var f=this.props.getItemCount(h);if(f===0&&t){var v=m.isValidElement(t)?t:m.createElement(t,null);o.push(m.createElement(X,{cellKey:this._getCellKey()+"-empty",key:"$empty"},m.cloneElement(v,{onLayout:z=>{this._onLayoutEmpty(z),v.props.onLayout&&v.props.onLayout(z)},style:[n,v.props.style]})))}if(f>0){ie=!1,ae="";for(var p=this._getSpacerKey(!r),y=this.state.renderMask.enumerateRegions(),C=yt(y,z=>z.isSpacer),b=H(y),I;!(I=b()).done;){var w=I.value;if(w.isSpacer){if(this.props.disableVirtualization)continue;var R=w===C,S=R&&!this.props.getItemLayout,T=S?pe(w.first-1,w.last,this._highestMeasuredFrameIndex):w.last,g=this.__getFrameMetricsApprox(w.first,this.props),E=this.__getFrameMetricsApprox(T,this.props),O=E.offset+E.length-g.offset;o.push(m.createElement(M,{key:"$spacer-"+w.first,style:{[p]:O}}))}else this._pushCells(o,c,u,w.first,w.last,n)}!this._hasWarned.keys&&ie&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",ae),this._hasWarned.keys=!0)}if(s){var k=m.isValidElement(s)?s:m.createElement(s,null);o.push(m.createElement(X,{cellKey:this._getFooterCellKey(),key:"$footer"},m.createElement(M,{onLayout:this._onLayoutFooter,style:[n,this.props.ListFooterComponentStyle]},k)))}var A=L(L({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:gt(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:c,style:n?[n,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<f-1;var V=m.createElement(ht,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:D(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},m.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(A),{ref:this._captureScrollRef},o)),N=V;return this.props.debug?m.createElement(M,{style:F.debug},N,this._renderDebugOverlay()):N}componentDidUpdate(e){var t=this.props,s=t.data,a=t.extraData;(s!==e.data||a!==e.extraData)&&this._viewabilityTuples.forEach(h=>{h.viewabilityHelper.resetViewableIndices()});var l=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),l&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,t=>{t.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,t,s,a)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:t}),this._scrollMetrics.contentLength=this._selectLength({width:s,height:a});var l=this._convertParentScrollMetrics(this.context.getScrollMetrics()),h=this._scrollMetrics.visibleLength!==l.visibleLength||this._scrollMetrics.offset!==l.offset;h&&(this._scrollMetrics.visibleLength=l.visibleLength,this._scrollMetrics.offset=l.offset,this._nestedChildLists.forEach(r=>{r.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),t=[],s=this.props.getItemCount(this.props.data),a=0;a<s;a++){var l=this.__getFrameMetricsApprox(a,this.props);l.inLayout&&t.push(l)}var h=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,r=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),n=r.offset+r.length-h,o=this._scrollMetrics.offset,u=this._scrollMetrics.visibleLength;return m.createElement(M,{style:[F.debugOverlayBase,F.debugOverlay]},t.map((c,d)=>m.createElement(M,{key:"f"+d,style:[F.debugOverlayBase,F.debugOverlayFrame,{top:c.offset*e,height:c.length*e}]})),m.createElement(M,{style:[F.debugOverlayBase,F.debugOverlayFrameLast,{top:h*e,height:n*e}]}),m.createElement(M,{style:[F.debugOverlayBase,F.debugOverlayFrameVis,{top:o*e,height:u*e}]}))}_selectLength(e){return D(this.props.horizontal)?e.width:e.height}_selectOffset(e){return D(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,t=e.data,s=e.getItemCount,a=e.onStartReached,l=e.onStartReachedThreshold,h=e.onEndReached,r=e.onEndReachedThreshold,n=e.initialScrollIndex,o=this._scrollMetrics,u=o.contentLength,c=o.visibleLength,d=o.offset,f=d,v=u-c-d;f<Ce&&(f=0),v<Ce&&(v=0);var p=2,y=l!=null?l*c:p,C=r!=null?r*c:p,b=f<=y,I=v<=C;h&&this.state.cellsAroundViewport.last===s(t)-1&&I&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,h({distanceFromEnd:v})):a!=null&&this.state.cellsAroundViewport.first===0&&b&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!n||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,a({distanceFromStart:f})):(this._sentStartForContentLength=b?this._sentStartForContentLength:0,this._sentEndForContentLength=I?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,t=e.first,s=e.last,a=this._scrollMetrics,l=a.offset,h=a.visibleLength,r=a.velocity,n=this.props.getItemCount(this.props.data),o=!1,u=_t(this.props.onStartReachedThreshold),c=be(this.props.onEndReachedThreshold);if(t>0){var d=l-this.__getFrameMetricsApprox(t,this.props).offset;o=d<0||r<-2&&d<Se(u,h)}if(!o&&s>=0&&s<n-1){var f=this.__getFrameMetricsApprox(s,this.props).offset-(l+h);o=f<0||r>2&&f<Se(c,h)}if(o&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,t){this._viewabilityTuples.forEach(s=>{s.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,s.onViewableItemsChanged,t)})}}x.contextType=ee;var F=U.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),Ie=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ct(i,e){return!!(i===e||Ie(i)&&Ie(e))}function bt(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!Ct(i[t],e[t]))return!1;return!0}function St(i,e){e===void 0&&(e=bt);var t=null;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(t&&t.lastThis===this&&e(a,t.lastArgs))return t.lastResult;var h=i.apply(this,a);return t={lastResult:h,lastArgs:a,lastThis:this},h}return s.clear=function(){t=null},s}var Lt=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function It(i){return i??Be.OS==="android"}function K(i){return i??1}function wt(i){return typeof Object(i).length=="number"}class Ht extends m.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=t=>{this._listRef=t},this._getItem=(t,s)=>{var a=K(this.props.numColumns);if(a>1){for(var l=[],h=0;h<a;h++){var r=s*a+h;if(r<t.length){var n=t[r];l.push(n)}}return l}else return t[s]},this._getItemCount=t=>{if(t!=null&&wt(t)){var s=K(this.props.numColumns);return s>1?Math.ceil(t.length/s):t.length}else return 0},this._keyExtractor=(t,s)=>{var a,l=K(this.props.numColumns),h=(a=this.props.keyExtractor)!==null&&a!==void 0?a:ue;return l>1?(_(Array.isArray(t),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",l),t.map((r,n)=>h(r,s*l+n)).join(":")):h(t,s)},this._renderer=(t,s,a,l,h)=>{var r=K(l),n=u=>t?m.createElement(t,u):s?s(u):null,o=u=>{if(r>1){var c=u.item,d=u.index;return _(Array.isArray(c),"Expected array of items with numColumns > 1"),m.createElement(M,{style:[Tt.row,a]},c.map((f,v)=>{var p=n({item:f,index:d*r+v,separators:u.separators});return p!=null?m.createElement(m.Fragment,{key:v},p):null}))}else return n(u)};return t?{ListItemComponent:o}:{renderItem:o}},this._memoizedRenderer=St(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(t=>({viewabilityConfig:t.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(t.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){_(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),_(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),_(!We(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),_(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var t=e.getItem,s=e.getItemCount,a=e.horizontal,l=e.columnWrapperStyle,h=e.onViewableItemsChanged,r=e.viewabilityConfigCallbackPairs,n=K(this.props.numColumns);_(!t&&!s,"FlatList does not support custom data formats."),n>1?_(!a,"numColumns does not support horizontal."):_(!l,"columnWrapperStyle not supported for single column lists"),_(!(h&&r),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,t){var s,a=K(this.props.numColumns),l=(s=this.props.keyExtractor)!==null&&s!==void 0?s:ue;t.item.forEach((h,r)=>{_(t.index!=null,"Missing index!");var n=t.index*a+r;e.push(L(L({},t),{},{item:h,key:l(h,n),index:n}))})}_createOnViewableItemsChanged(e){return t=>{var s=K(this.props.numColumns);if(e)if(s>1){var a=[],l=[];t.viewableItems.forEach(h=>this._pushMultiColumnViewable(l,h)),t.changed.forEach(h=>this._pushMultiColumnViewable(a,h)),e({viewableItems:l,changed:a})}else e(t)}}render(){var e=this.props,t=e.numColumns,s=e.columnWrapperStyle,a=e.removeClippedSubviews,l=e.strictMode,h=l===void 0?!1:l,r=we(e,Lt),n=h?this._memoizedRenderer:this._renderer;return m.createElement(x,$({},r,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:It(a)},n(this.props.ListItemComponent,this.props.renderItem,s,t,this.props.extraData)))}}var Tt=U.create({row:{flexDirection:"row"}});const B=U.create({container:{...U.absoluteFillObject,pointerEvents:"none"},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popoverContainer:{position:"absolute",display:"flex"},popover:{pointerEvents:"auto",display:"flex",flexDirection:"column",backgroundColor:Me.accented,borderRadius:Ee[8],marginVertical:ke[8],overflow:"hidden",boxShadow:xe.modal,flexGrow:1,alignSelf:"stretch"},popoverContents:{alignItems:"stretch"}}),Rt={...ce.fadeAndSlideInFromBottom,leave:[ce.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},Mt=600,Et=m.memo(({children:i,id:e,label:t,role:s="dialog",describedBy:a,matchReferenceWidth:l=!1,matchReferenceMinWidth:h=!1,onDismiss:r=De,onEscapeKey:n=r,referenceRef:o,returnFocus:u=!0,autoFocus:c=!0,visible:d,underlay:f=!0,forcedMode:v})=>{const[p,y]=m.useState(null),C=m.useRef(null),{desktop:b}=Ae(Mt),{position:I}=Fe({referenceRef:o,visible:d,matchReferenceWidth:l,matchReferenceMinWidth:h});m.useEffect(()=>{const g=C.current;!d&&g!=null&&(g.style.pointerEvents="none")},[d]),m.useEffect(()=>{const g=document.createElement("div");return document.body.append(g),y(g),()=>{y(null),g.remove()}},[]);const w=m.useCallback(g=>{g.preventDefault(),r()},[r]),R=m.useCallback(({target:g})=>{const E=o.current;(!(E instanceof Element)||!(g instanceof Element)||E!==g&&!E.contains(g))&&r()},[o,r]),S=m.useCallback(g=>{g.preventDefault()},[]);return p==null?null:de(v).with(Pe.nullish,()=>b?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?P.jsx(Ke,{visible:d,onPressClose:r,returnFocus:!1,children:typeof i=="function"?i({mode:"panel"}):i}):P.jsxs(Oe,{container:p,children:[d&&f?P.jsx(fe,{ref:C,style:B.underlay,onPress:w,"aria-label":"Close"}):null,P.jsx(Ne,{style:B.container,...Rt,children:I.isSome()?P.jsx(M,{style:I.get().rootStyle,children:P.jsx(M,{style:[B.popoverContainer,I.get().style,{alignItems:de(I.get().horizontalPosition).with("left",()=>"flex-start").with("center",()=>"center").with("right",()=>"flex-end").exhaustive()}],children:P.jsx(le,{style:B.popover,contentContainerStyle:B.popoverContents,id:e,role:s,"aria-describedby":a,"aria-label":t,children:P.jsx(He,{focusLock:!0,returnFocus:u,autoFocus:c,onEscapeKey:n,onClickOutside:f?void 0:R,children:P.jsx(fe,{tabIndex:-1,onPress:S,style:B.defaultCursor,children:typeof i=="function"?i({mode:"dropdown"}):i})})})})}):null})]})});Et.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{role:{defaultValue:{value:'"dialog"',computed:!1},required:!1},matchReferenceWidth:{defaultValue:{value:"false",computed:!1},required:!1},matchReferenceMinWidth:{defaultValue:{value:"false",computed:!1},required:!1},onDismiss:{defaultValue:{value:"() => {}",computed:!1},required:!1},onEscapeKey:{defaultValue:{value:"onDismiss = noop",computed:!1},required:!1},returnFocus:{defaultValue:{value:"true",computed:!1},required:!1},autoFocus:{defaultValue:{value:"true",computed:!1},required:!1},underlay:{defaultValue:{value:"true",computed:!1},required:!1}}};export{Ht as F,Et as P,x as V,H as _,Be as a,ue as k};
//# sourceMappingURL=Popover-DOZ38EWH.js.map
