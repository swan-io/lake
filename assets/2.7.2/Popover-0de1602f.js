import{S as p,f as U,r as X,s as K,m as E,j as n,a as z,V as G,n as J}from"./Space-214db1c8.js";import{r as a}from"./index-76fb7be0.js";import{R as Q,H as Y}from"./index-138dbb7e.js";import{u as Z}from"./useResponsive-9a79a8b7.js";import{B as $}from"./BottomPanel-0997d181.js";import{F as ee}from"./FocusTrap-560da67b.js";import{P as te}from"./Portal-70b25019.js";import{T as ae}from"./TransitionView-616a182f.js";import{P}from"./index-9d3f10b3.js";const i=p.create({container:{...p.absoluteFillObject,pointerEvents:"none"},contents:{...p.absoluteFillObject},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popover:{pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",backgroundColor:U.accented,borderRadius:X[8],marginVertical:4,overflow:"hidden",boxShadow:K.modal},popoverContents:{alignItems:"stretch"}}),oe={availableSpaceAbove:0,availableSpaceBelow:0,availableSpaceBefore:0,availableSpaceAfter:0,top:0,bottom:0,left:0,right:0,availableHeight:0,width:0},ne="flex-end",le="flex-start",re={...E.fadeAndSlideInFromBottom,leave:[E.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},ie=600,x=a.memo(({children:o,id:B,label:C,role:R="dialog",describedBy:F,matchReferenceWidth:q=!1,matchReferenceMinWidth:_=!1,onDismiss:l,referenceRef:s,returnFocus:A=!0,autoFocus:H=!0,visible:r,underlay:f=!0,safetyMargin:u=8,forcedMode:I})=>{const[b,v]=a.useState(null),h=a.useRef(null),{desktop:T}=Z(ie),[{availableSpaceAbove:d,availableSpaceBelow:c,availableSpaceBefore:y,availableSpaceAfter:w,top:k,bottom:O,left:W,right:D,availableHeight:S,width:g},j]=a.useState(oe);a.useEffect(()=>{const e=s.current;if(e!=null&&r){const t=e.getBoundingClientRect(),m=t.top,V=window.innerHeight-t.bottom;j({availableSpaceAbove:m,availableSpaceBelow:V,availableSpaceBefore:t.left,availableSpaceAfter:window.innerWidth-t.right,top:Math.max(t.bottom,u),bottom:Math.max(window.innerHeight-t.top,u),left:Math.max(t.left,u),right:Math.max(window.innerWidth-t.right,u),availableHeight:m<=V?window.innerHeight-t.top-(t.bottom-t.top)-20:m-20,width:t.right-t.left})}},[u,s,r]),a.useEffect(()=>{const e=h.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),a.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),v(e),()=>{v(null),e.remove()}},[]);const M=a.useCallback(e=>{e.preventDefault(),l()},[l]),L=a.useCallback(({target:e})=>{const t=s.current;(!(t instanceof Element)||!(e instanceof Element)||t!==e&&!t.contains(e))&&l()},[s,l]),N=a.useCallback(e=>{e.preventDefault()},[]);return b==null?null:Q(I).with(Y.nullish,()=>T?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?n($,{visible:r,onPressClose:l,returnFocus:!1,children:typeof o=="function"?o({mode:"panel"}):o}):n(te,{container:b,children:n(ae,{style:i.container,...re,children:r?z(G,{style:i.contents,children:[f?n(P,{ref:h,style:i.underlay,onPress:M,role:"button","aria-label":"Close"}):null,S>0?n(J,{style:[i.popover,d<=c&&{top:k},d>c&&{bottom:O},y<=w&&{left:W},y>w&&{right:D},_&&{minWidth:g},q&&{width:g},{maxHeight:S}],contentContainerStyle:[i.popoverContents,{justifyContent:d>c?ne:le}],id:B,role:R,"aria-describedby":F,"aria-label":C,children:n(ee,{focusLock:!0,returnFocus:A,autoFocus:H,onEscapeKey:l,onClickOutside:f?void 0:L,children:n(P,{tabIndex:-1,onPress:N,style:i.defaultCursor,children:typeof o=="function"?o({mode:"dropdown"}):o})})}):null]}):null})})});try{x.displayName="Popover",x.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<unknown>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}}}}}catch{}export{x as P};
//# sourceMappingURL=Popover-0de1602f.js.map
