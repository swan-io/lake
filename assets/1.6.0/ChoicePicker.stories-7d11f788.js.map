{"version":3,"file":"ChoicePicker.stories-7d11f788.js","sources":["../../../packages/lake/src/components/ChoicePicker.tsx"],"sourcesContent":["import { ReactNode, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { breakpoints, negativeSpacings, spacings } from \"../constants/design\";\nimport { useResponsive } from \"../hooks/useResponsive\";\nimport { LakeButton } from \"./LakeButton\";\nimport { LakeRadio } from \"./LakeRadio\";\nimport { Pressable } from \"./Pressable\";\nimport { Space } from \"./Space\";\nimport { Tile } from \"./Tile\";\n\nconst styles = StyleSheet.create({\n  root: {\n    alignSelf: \"stretch\",\n    alignItems: \"stretch\",\n    flexGrow: 1,\n    overflow: \"hidden\",\n    marginHorizontal: negativeSpacings[12],\n  },\n  container: {\n    alignSelf: \"stretch\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    alignItems: \"stretch\",\n    justifyContent: \"center\",\n  },\n  mobileContainer: {\n    flexWrap: \"nowrap\",\n    justifyContent: \"flex-start\",\n    transitionProperty: \"transform\",\n    transitionDuration: \"300ms\",\n    transitionTimingFunction: \"ease-in-out\",\n  },\n  item: {\n    flexGrow: 0,\n    flexBasis: \"33.333%\",\n    maxWidth: 300,\n    padding: spacings[12],\n    transform: \"translateZ(0px)\",\n    animationKeyframes: {\n      from: {\n        opacity: 0,\n        transform: \"translateZ(0px) translateX(50px)\",\n      },\n      to: {\n        opacity: 1,\n        transform: \"translateZ(0px) translateX(0px)\",\n      },\n    },\n    animationDuration: \"200ms\",\n    animationFillMode: \"backwards\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  itemLarge: {\n    flexBasis: \"50%\",\n    maxWidth: \"none\",\n  },\n  itemSmallViewport: {\n    width: \"100%\",\n    flexBasis: \"auto\",\n    maxWidth: \"none\",\n  },\n  tileContents: {\n    alignItems: \"center\",\n    alignSelf: \"stretch\",\n    flexGrow: 1,\n  },\n  tileRenderedContents: {\n    alignItems: \"center\",\n    alignSelf: \"stretch\",\n    flexGrow: 1,\n  },\n  leftButton: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: negativeSpacings[24],\n    transform: \"translateY(-50%)\",\n  },\n  rightButton: {\n    position: \"absolute\",\n    top: \"50%\",\n    right: negativeSpacings[24],\n    transform: \"translateY(-50%)\",\n  },\n});\n\ntype Props<T> = {\n  items: T[];\n  large?: boolean;\n  renderItem: (value: T) => ReactNode;\n  value?: T;\n  getId?: (item: T) => unknown;\n  onChange: (value: T) => void;\n};\n\nconst identity = <T,>(x: T) => x;\n\nexport const ChoicePicker = <T,>({\n  items,\n  getId = identity,\n  large = false,\n  renderItem,\n  value,\n  onChange,\n}: Props<T>) => {\n  const { desktop } = useResponsive(breakpoints.medium);\n  const [index, setIndex] = useState(0);\n\n  return (\n    <View>\n      <View style={styles.root}>\n        <View\n          style={[\n            styles.container,\n            !desktop && styles.mobileContainer,\n            !desktop && { transform: `translateX(-${100 * index}%)` },\n          ]}\n        >\n          {items.map((item, index) => (\n            <Pressable\n              key={String(index)}\n              style={[\n                styles.item,\n                large && styles.itemLarge,\n                !desktop && styles.itemSmallViewport,\n                { animationDelay: `${200 + 100 * index}ms` },\n              ]}\n              onPress={() => onChange(item)}\n            >\n              {({ hovered }) => (\n                <Tile\n                  hovered={hovered}\n                  selected={value != null && getId(item) === getId(value)}\n                  flexGrow={1}\n                >\n                  <View style={styles.tileContents}>\n                    <View style={styles.tileRenderedContents}>{renderItem(item)}</View>\n                    <Space height={24} />\n                    <LakeRadio value={value != null && getId(item) === getId(value)} />\n                  </View>\n                </Tile>\n              )}\n            </Pressable>\n          ))}\n        </View>\n      </View>\n\n      {!desktop && (\n        <View style={styles.leftButton}>\n          <LakeButton\n            icon=\"chevron-left-filled\"\n            mode=\"secondary\"\n            forceBackground={true}\n            onPress={() => setIndex(Math.max(0, index - 1))}\n            disabled={index === 0}\n          />\n        </View>\n      )}\n\n      {!desktop && (\n        <View style={styles.rightButton}>\n          <LakeButton\n            icon=\"chevron-right-filled\"\n            mode=\"secondary\"\n            forceBackground={true}\n            onPress={() => setIndex(Math.min(items.length - 1, index + 1))}\n            disabled={index === items.length - 1}\n          />\n        </View>\n      )}\n    </View>\n  );\n};\n"],"names":["styles","StyleSheet","negativeSpacings","spacings","identity","x","ChoicePicker","items","getId","large","renderItem","value","onChange","desktop","useResponsive","breakpoints","index","setIndex","useState","jsxs","View","jsx","item","index2","Pressable","hovered","Tile","Space","LakeRadio","LakeButton"],"mappings":"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"}