{"version":3,"file":"BottomPanel-15e8c4f5.js","sources":["../../../packages/lake/src/components/BottomPanel.tsx"],"sourcesContent":["import { ReactNode, Suspense, useEffect, useState } from \"react\";\nimport { Pressable, ScrollView, StyleSheet, View } from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { backgroundColor, radii, shadows, spacings } from \"../constants/design\";\nimport { useBodyClassName } from \"../hooks/useBodyClassName\";\nimport { FocusTrap } from \"./FocusTrap\";\nimport { LoadingView } from \"./LoadingView\";\nimport { Portal } from \"./Portal\";\nimport { TransitionView } from \"./TransitionView\";\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n    animationFillMode: \"forwards\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalEnter: {\n    animationKeyframes: {\n      \"0%\": {\n        opacity: 0,\n        transform: \"translateY(20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalLeave: {\n    animationKeyframes: {\n      \"100%\": {\n        opacity: 0,\n        transform: \"translateY(20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalContainer: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  modalContentContainer: {\n    justifyContent: \"flex-end\",\n    flexGrow: 1,\n  },\n  trap: {\n    ...commonStyles.fill,\n  },\n  modal: {\n    backgroundColor: backgroundColor.accented,\n    borderTopLeftRadius: radii[8],\n    borderTopRightRadius: radii[8],\n    boxShadow: shadows.modal,\n    alignSelf: \"stretch\",\n    marginTop: spacings[32],\n  },\n  pressableOverlay: {\n    ...StyleSheet.absoluteFillObject,\n  },\n});\n\ntype Props = {\n  visible: boolean;\n  onPressClose: () => void;\n  children: ReactNode;\n  returnFocus?: boolean;\n};\n\nexport const BottomPanel = ({ visible, onPressClose, children, returnFocus = true }: Props) => {\n  const [rootElement, setRootElement] = useState<Element | undefined>(() => undefined);\n\n  useEffect(() => {\n    const rootElement = document.createElement(\"div\");\n    document.body.append(rootElement);\n    setRootElement(rootElement);\n    return () => {\n      rootElement.remove();\n      setRootElement(undefined);\n    };\n  }, []);\n\n  useBodyClassName(\"BottomPanelOpen\", { enabled: visible });\n\n  if (rootElement == null) {\n    return null;\n  }\n\n  return (\n    <Portal container={rootElement}>\n      <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n        {visible ? <View style={styles.overlay} /> : null}\n      </TransitionView>\n\n      <Suspense fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n        <TransitionView style={styles.fill} enter={styles.modalEnter} leave={styles.modalLeave}>\n          {visible ? (\n            <ScrollView\n              style={styles.modalContainer}\n              contentContainerStyle={styles.modalContentContainer}\n            >\n              <FocusTrap\n                autoFocus={true}\n                focusLock={true}\n                returnFocus={returnFocus}\n                style={styles.trap}\n              >\n                {onPressClose != null ? (\n                  <Pressable onPress={onPressClose} style={styles.pressableOverlay} />\n                ) : null}\n              </FocusTrap>\n\n              <View style={styles.modal}>{children}</View>\n            </ScrollView>\n          ) : null}\n        </TransitionView>\n      </Suspense>\n    </Portal>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","commonStyles","backgroundColor","radii","shadows","spacings","BottomPanel","visible","onPressClose","children","returnFocus","rootElement","setRootElement","useState","useEffect","rootElement2","useBodyClassName","jsxs","Portal","jsx","TransitionView","View","Suspense","LoadingView","ScrollView","FocusTrap","Pressable"],"mappings":"ubAUA,MAAAA,EAAA,qBAEAC,EAAAC,EAAA,OAAA,CAAiC,KAAA,CACzB,GAAAA,EAAA,mBACU,SAAA,QACJ,kBAAA,UACS,EACrB,QAAA,CACS,GAAAA,EAAA,mBACO,gBAAAF,CACG,EACnB,aAAA,CACc,mBAAA,CACQ,KAAA,CAAA,QAAA,CAAA,CACC,EACrB,kBAAA,QACmB,wBAAA,aACM,EAC3B,aAAA,CACc,mBAAA,CACQ,OAAA,CAAA,QAAA,CAAA,CACG,EACvB,kBAAA,QACmB,wBAAA,aACM,EAC3B,WAAA,CACY,mBAAA,CACU,KAAA,CACZ,QAAA,EACK,UAAA,kBACE,CACb,EACF,kBAAA,QACmB,wBAAA,aACM,EAC3B,WAAA,CACY,mBAAA,CACU,OAAA,CACV,QAAA,EACG,UAAA,kBACE,CACb,EACF,kBAAA,QACmB,wBAAA,aACM,EAC3B,eAAA,CACgB,GAAAE,EAAA,kBACA,EAChB,sBAAA,CACuB,eAAA,WACL,SAAA,CACN,EACZ,KAAA,CACM,GAAAC,EAAA,IACY,EAClB,MAAA,CACO,gBAAAC,EAAA,SAC4B,oBAAAC,EAAA,CAAA,EACL,qBAAAA,EAAA,CAAA,EACC,UAAAC,EAAA,MACV,UAAA,UACR,UAAAC,EAAA,EAAA,CACW,EACxB,iBAAA,CACkB,GAAAL,EAAA,kBACF,CAElB,CAAA,EASOM,EAAA,CAAA,CAAA,QAAAC,EAAA,aAAAC,EAAA,SAAAC,EAAA,YAAAC,EAAA,MAAA,CACL,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAAA,SAAA,IAAA,EAAA,EAcA,OAZAC,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAA,SAAA,cAAA,KAAA,EACA,gBAAA,KAAA,OAAAA,CAAA,EACAH,EAAAG,CAAA,EACA,IAAA,CACEA,EAAA,OAAA,EACAH,EAAA,MAAA,CAAwB,CAC1B,EAAA,CAAA,CAAA,EAGFI,EAAA,kBAAA,CAAA,QAAAT,CAAA,CAAA,EAEAI,GAAA,KACE,KAGFM,EAAAC,EAAA,CAAA,UAAAP,EAAA,SAAA,CAEIQ,EAAAC,EAAA,CAAA,MAAArB,EAAA,KAAA,MAAAA,EAAA,aAAA,MAAAA,EAAA,aAAA,SAAAQ,EAAAY,EAAAE,EAAA,CAAA,MAAAtB,EAAA,OAAA,CAAA,EAAA,KAAA,EAEAoB,EAAAG,EAAAA,SAAA,CAAA,SAAAH,EAAAI,EAAA,CAAA,MAAArB,EAAA,SAAA,MAAA,CAAA,CAAA,EAAA,SAAAiB,EAAAC,EAAA,CAAA,MAAArB,EAAA,KAAA,MAAAA,EAAA,WAAA,MAAAA,EAAA,WAAA,SAAAQ,EAAAU,EAKMO,EAAC,CAAA,MAAAzB,EAAA,eACe,sBAAAA,EAAA,sBACgB,SAAA,CAE9BoB,EAAAM,EAAC,CAAA,UAAA,GACY,UAAA,GACA,YAAAf,EACX,MAAAX,EAAA,KACc,SAAAS,GAAA,KAAAW,EAAAO,EAAA,CAAA,QAAAlB,EAAA,MAAAT,EAAA,gBAAA,CAAA,EAAA,IAIV,CAAA,EACNoB,EAAAE,EAAA,CAAA,MAAAtB,EAAA,MAAA,SAAAU,EAAA,CAEqC,CAAA,CAAA,EAAA,IAAA,CAAA,EAAA,CAI7C,CAAA,CAAA,CAGN"}