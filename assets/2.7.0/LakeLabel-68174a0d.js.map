{"version":3,"file":"LakeLabel-68174a0d.js","sources":["../../../packages/lake/src/components/LakeLabel.tsx"],"sourcesContent":["import { ReactNode, useCallback, useRef, useState } from \"react\";\nimport {\n  StyleProp,\n  StyleSheet,\n  TextProps,\n  View,\n  ViewStyle,\n  unstable_createElement,\n} from \"react-native\";\nimport { match } from \"ts-pattern\";\nimport { v4 as uuid } from \"uuid\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { ColorVariants, colors, fonts, spacings, texts } from \"../constants/design\";\nimport { isNotNullish } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { LakeText } from \"./LakeText\";\nimport { Space, SpacingValue } from \"./Space\";\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: spacings[4],\n  },\n  label: {\n    ...texts.medium,\n    fontFamily: fonts.primary,\n    color: colors.gray[700],\n  },\n  shrink: {\n    flexShrink: 1,\n  },\n  optionalLabel: {\n    fontStyle: \"italic\",\n  },\n});\n\ntype LabelType = \"form\" | \"formSmall\" | \"view\" | \"viewSmall\" | \"radioGroup\";\n\ntype Props = {\n  label: string;\n  optionalLabel?: string;\n  readOnlyColor?: string;\n  color?: ColorVariants;\n  type?: LabelType;\n  extra?: () => ReactNode;\n  help?: ReactNode;\n  render: (id: string) => ReactNode;\n  actions?: ReactNode;\n  readOnly?: boolean;\n  style?: StyleProp<ViewStyle>;\n};\n\nconst Label = (\n  props: TextProps & { htmlFor: string; onClick: (event: React.MouseEvent) => void },\n) => {\n  return unstable_createElement(\"label\", props);\n};\n\nconst defaultLabelType: LabelType = \"formSmall\";\n\nexport const LakeLabel = ({\n  label,\n  optionalLabel,\n  extra,\n  readOnly = false,\n  color = \"current\",\n  readOnlyColor = colors[color].primary,\n  type = defaultLabelType,\n  help,\n  render,\n  actions,\n  style,\n}: Props) => {\n  const [id] = useState(() => uuid());\n  const containerRef = useRef<View | null>(null);\n\n  const onClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault();\n      if (containerRef.current != null) {\n        const container = containerRef.current as unknown as HTMLElement;\n        const target = container.querySelector(`[id=\"${id}\"]`) as HTMLElement;\n        target?.focus();\n      }\n    },\n    [id],\n  );\n\n  return (\n    <Box\n      style={[styles.container, style]}\n      direction=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"spaceBetween\"\n    >\n      <View style={commonStyles.fill} ref={containerRef}>\n        <Box direction=\"row\" justifyContent=\"spaceBetween\" alignItems=\"center\">\n          <Box direction=\"row\" style={styles.shrink}>\n            {type === \"form\" || type === \"formSmall\" || type === \"radioGroup\" ? (\n              <Label\n                onClick={onClick}\n                htmlFor={id}\n                style={[styles.label, readOnly && { color: readOnlyColor }]}\n              >\n                {label}\n\n                {optionalLabel != null ? (\n                  <>\n                    {\" - \"}\n                    <LakeText color={colors.gray[400]} style={styles.optionalLabel}>\n                      {optionalLabel}\n                    </LakeText>\n                  </>\n                ) : null}\n              </Label>\n            ) : (\n              <LakeText variant=\"medium\" color={readOnlyColor} id={id}>\n                {label}\n\n                {optionalLabel != null ? (\n                  <>\n                    {\" - \"}\n                    <LakeText color={colors.gray[400]} style={styles.optionalLabel}>\n                      {optionalLabel}\n                    </LakeText>\n                  </>\n                ) : null}\n              </LakeText>\n            )}\n\n            {isNotNullish(extra) && extra()}\n          </Box>\n\n          {isNotNullish(help) && (\n            <>\n              <Space width={16} />\n\n              {help}\n            </>\n          )}\n        </Box>\n\n        <Space\n          height={match(type)\n            .returnType<SpacingValue>()\n            .with(\"formSmall\", \"viewSmall\", () => 4)\n            .with(\"form\", \"view\", () => 8)\n            .with(\"radioGroup\", () => 12)\n            .exhaustive()}\n        />\n\n        <View aria-labelledby={type === \"view\" || type === \"viewSmall\" ? id : undefined}>\n          {render(id)}\n        </View>\n      </View>\n\n      {isNotNullish(actions) && (\n        <>\n          <Space width={16} />\n\n          {actions}\n        </>\n      )}\n    </Box>\n  );\n};\n"],"names":["styles","StyleSheet","spacings","texts","fonts","colors","Label","props","unstable_createElement","defaultLabelType","LakeLabel","label","optionalLabel","extra","readOnly","color","readOnlyColor","type","help","render","actions","style","id","useState","uuid","containerRef","useRef","onClick","useCallback","event","target","jsxs","Box","View","commonStyles","Fragment","jsx","LakeText","isNotNullish","Space","match"],"mappings":"uSAkBA,MAAAA,EAAAC,EAAA,OAAA,CAAiC,UAAA,CACpB,WAAAC,EAAA,CAAA,CACa,EACxB,MAAA,CACO,GAAAC,EAAA,OACI,WAAAC,EAAA,QACS,MAAAC,EAAA,KAAA,GAAA,CACI,EACxB,OAAA,CACQ,WAAA,CACM,EACd,cAAA,CACe,UAAA,QACF,CAEf,CAAA,EAkBAC,EAAAC,GAGEC,EAAA,QAAAD,CAAA,EAGFE,EAAA,YAEOC,EAAA,CAAA,CAAmB,MAAAC,EACxB,cAAAC,EACA,MAAAC,EACA,SAAAC,EAAA,GACW,MAAAC,EAAA,UACH,cAAAC,EAAAX,EAAAU,CAAA,EAAA,QACsB,KAAAE,EAAAR,EACvB,KAAAS,EACP,OAAAC,EACA,QAAAC,EACA,MAAAC,CAEF,IAAA,CACE,KAAA,CAAAC,CAAA,EAAAC,EAAA,SAAA,IAAAC,EAAA,CAAA,EACAC,EAAAC,SAAA,IAAA,EAEAC,EAAAC,EAAA,YAAgBC,GAAA,CAGZ,GADAA,EAAA,eAAA,EACAJ,EAAA,SAAA,KAAA,CAEE,MAAAK,EADAL,EAAA,QACA,cAAA,QAAAH,KAAA,EACAQ,GAAA,MAAAA,EAAA,QACF,EACF,CAAAR,CAAA,CACG,EAGL,OAAAS,EACEC,EAAC,CAAA,MAAA,CAAAhC,EAAA,UAAAqB,CAAA,EACgC,UAAA,MACrB,WAAA,SACC,eAAA,eACI,SAAA,CAEfU,EAAAE,EAAA,CAAA,MAAAC,EAAA,KAAA,IAAAT,EAAA,SAAA,CACEM,EAAAC,EAAA,CAAA,UAAA,MAAA,eAAA,eAAA,WAAA,SAAA,SAAA,CACED,EAAAC,EAAA,CAAA,UAAA,MAAA,MAAAhC,EAAA,OAAA,SAAA,CACGiB,IAAA,QAAAA,IAAA,aAAAA,IAAA,aAAAc,EACCzB,EAAC,CAAA,QAAAqB,EACC,QAAAL,EACS,MAAA,CAAAtB,EAAA,MAAAc,GAAA,CAAA,MAAAE,EAAA,EACiD,SAAA,CAEzDL,EAAAC,GAAA,KAAAmB,EAAAI,EAAA,CAAA,SAAA,CAII,MAAAC,EAAAC,EAAA,CAAA,MAAAhC,EAAA,KAAA,GAAA,EAAA,MAAAL,EAAA,cAAA,SAAAY,CAAA,CAAA,CAGD,CAAA,CAAA,EAAA,IAEA,CAAA,CAAA,EAAAmB,EAAAM,EAAA,CAAA,QAAA,SAAA,MAAArB,EAAA,GAAAM,EAAA,SAAA,CAIHX,EAAAC,GAAA,KAAAmB,EAAAI,EAAA,CAAA,SAAA,CAII,MAAAC,EAAAC,EAAA,CAAA,MAAAhC,EAAA,KAAA,GAAA,EAAA,MAAAL,EAAA,cAAA,SAAAY,CAAA,CAAA,CAGD,CAAA,CAAA,EAAA,IAEA,EAAA,EACN0B,EAAAzB,CAAA,GAAAA,EAAA,CAG4B,EAAA,EAChCyB,EAAApB,CAAA,GAAAa,EAAAI,EAAA,CAAA,SAAA,CAIIC,EAAAG,EAAA,CAAA,MAAA,EAAA,CAAA,EAAkBrB,CAEjB,EAAA,CACH,EAAA,EAEJkB,EAEAG,EAAC,CAAA,OAAAC,EAAAvB,CAAA,EAAA,WAAA,EAAA,KAAA,YAAA,YAAA,IAAA,CAAA,EAAA,KAAA,OAAA,OAAA,IAAA,CAAA,EAAA,KAAA,aAAA,IAAA,EAAA,EAAA,WAAA,CAMe,CAAA,EAChBmB,EAAAH,EAAA,CAAA,kBAAAhB,IAAA,QAAAA,IAAA,YAAAK,EAAA,OAAA,SAAAH,EAAAG,CAAA,CAAA,CAAA,CAIA,EAAA,EACFgB,EAAAlB,CAAA,GAAAW,EAAAI,EAAA,CAAA,SAAA,CAIIC,EAAAG,EAAA,CAAA,MAAA,EAAA,CAAA,EAAkBnB,CAEjB,EAAA,CACH,CAAA,CAAA,CAIR"}