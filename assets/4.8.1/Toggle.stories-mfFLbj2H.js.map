{"version":3,"file":"Toggle.stories-mfFLbj2H.js","sources":["../../../packages/lake/src/components/Toggle.tsx"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { StyleSheet, Text, View, ViewStyle } from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { colors } from \"../constants/design\";\nimport { Box } from \"./Box\";\nimport { Icon } from \"./Icon\";\nimport { LakeText } from \"./LakeText\";\nimport { Pressable } from \"./Pressable\";\n\nconst HEIGHT = 26;\nconst BORDER_WIDTH = 1;\n\nconst styles = StyleSheet.create({\n  switch: {\n    userSelect: \"none\",\n    flexDirection: \"row\",\n    borderRadius: HEIGHT / 2,\n    transform: \"translateZ(0px)\",\n    width: \"min-content\",\n    borderColor: colors.gray[100],\n    borderWidth: BORDER_WIDTH,\n  },\n  handle: {\n    position: \"absolute\",\n    width: HEIGHT,\n    height: HEIGHT,\n    top: -BORDER_WIDTH,\n    borderRadius: HEIGHT / 2,\n    transitionDuration: \"300ms\",\n    transitionTimingFunction: \"ease-in-out\",\n    borderWidth: BORDER_WIDTH,\n  },\n  switchItem: {\n    paddingHorizontal: 8,\n    height: HEIGHT - BORDER_WIDTH * 2,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n\ntype Props = {\n  value: boolean;\n  disabled?: boolean;\n  onToggle: (next: boolean) => void;\n  mode?: \"desktop\" | \"mobile\";\n  onLabel: string;\n  offLabel: string;\n};\n\nexport const Toggle = ({\n  onToggle,\n  value,\n  disabled = false,\n  mode = \"desktop\",\n  onLabel,\n  offLabel,\n}: Props) => {\n  const containerRef = useRef<View | null>(null);\n  const onItemRef = useRef<Text | null>(null);\n  const offItemRef = useRef<Text | null>(null);\n  const [handleStyle, setHandleStyle] = useState<ViewStyle>();\n  const isMobile = mode === \"mobile\";\n  const onColor = value ? colors.positive[500] : colors.gray[500];\n  const offColor = !value ? colors.negative[500] : colors.gray[500];\n\n  const reajustLayout = useCallback(() => {\n    (value ? onItemRef : offItemRef).current?.measureLayout(\n      containerRef.current as unknown as number,\n      (left, _, width) => {\n        setHandleStyle(prev => ({\n          transitionProperty: prev ? \"width, transform\" : \"none\",\n          width: width + 2 * BORDER_WIDTH,\n          transform: `translateX(${value ? -BORDER_WIDTH : left - 2 * BORDER_WIDTH}px)`,\n        }));\n      },\n      () => {},\n    );\n  }, [value]);\n\n  useEffect(reajustLayout, [reajustLayout, value, isMobile, onLabel, offLabel]);\n\n  return (\n    <Pressable\n      style={[styles.switch, disabled && commonStyles.disabled]}\n      onPress={() => onToggle(!value)}\n      aria-disabled={disabled}\n      aria-checked={value}\n      disabled={disabled}\n      ref={containerRef}\n      role=\"switch\"\n      onLayout={reajustLayout}\n    >\n      <View\n        style={[\n          styles.handle,\n          handleStyle,\n          {\n            borderColor: value ? colors.positive[500] : colors.negative[500],\n            backgroundColor: value ? colors.positive[50] : colors.negative[50],\n          },\n        ]}\n      />\n\n      <Box style={styles.switchItem} ref={onItemRef}>\n        {isMobile ? (\n          <Icon size={16} name=\"checkmark-circle-regular\" color={onColor} />\n        ) : (\n          <LakeText variant=\"smallMedium\" color={onColor}>\n            {onLabel}\n          </LakeText>\n        )}\n      </Box>\n\n      <Box style={styles.switchItem} ref={offItemRef}>\n        {isMobile ? (\n          <Icon size={16} name=\"subtract-circle-regular\" color={offColor} />\n        ) : (\n          <LakeText variant=\"smallMedium\" color={offColor}>\n            {offLabel}\n          </LakeText>\n        )}\n      </Box>\n    </Pressable>\n  );\n};\n"],"names":["HEIGHT","BORDER_WIDTH","styles","StyleSheet","colors","Toggle","onToggle","value","disabled","mode","onLabel","offLabel","containerRef","useRef","onItemRef","offItemRef","handleStyle","setHandleStyle","useState","isMobile","onColor","offColor","reajustLayout","useCallback","_a","left","_","width","prev","useEffect","jsxs","Pressable","commonStyles","jsx","View","Box","Icon","LakeText"],"mappings":"yXASA,MAAAA,EAAA,GACAC,EAAA,EAEAC,EAAAC,EAAA,OAAA,CAAiC,OAAA,CACvB,WAAA,OACM,cAAA,MACG,aAAAH,EAAA,EACQ,UAAA,kBACZ,MAAA,cACJ,YAAAI,EAAA,KAAA,GAAA,EACqB,YAAAH,CACf,EACf,OAAA,CACQ,SAAA,WACI,MAAAD,EACH,OAAAA,EACC,IAAA,CAAAC,EACF,aAAAD,EAAA,EACiB,mBAAA,QACH,yBAAA,cACM,YAAAC,CACb,EACf,WAAA,CACY,kBAAA,EACS,OAAAD,EAAAC,EAAA,EACa,QAAA,OACvB,WAAA,SACG,eAAA,QACI,CAEpB,CAAA,EAWOI,EAAA,CAAA,CAAgB,SAAAC,EACrB,MAAAC,EACA,SAAAC,EAAA,GACW,KAAAC,EAAA,UACJ,QAAAC,EACP,SAAAC,CAEF,IAAA,CACE,MAAAC,EAAAC,SAAA,IAAA,EACAC,EAAAD,SAAA,IAAA,EACAE,EAAAF,SAAA,IAAA,EACA,CAAAG,EAAAC,CAAA,EAAAC,EAAA,SAAA,EACAC,EAAAV,IAAA,SACAW,EAAAb,EAAAH,EAAA,SAAA,GAAA,EAAAA,EAAA,KAAA,GAAA,EACAiB,EAAAd,EAAAH,EAAA,KAAA,GAAA,EAAAA,EAAA,SAAA,GAAA,EAEAkB,EAAAC,EAAAA,YAAA,IAAA,QACEC,GAAAjB,EAAAO,EAAAC,GAAA,UAAA,MAAAS,EAAA,cAA0CZ,EAAA,QAC3B,CAAAa,EAAAC,EAAAC,IAAA,CAEXV,EAAAW,IAAA,CAAwB,mBAAAA,EAAA,mBAAA,OAC0B,MAAAD,EAAA,EAAA1B,EAC7B,UAAA,cAAAM,EAAA,CAAAN,EAAAwB,EAAA,EAAAxB,CAAA,KACqD,EAAA,CACxE,EACJ,IAAA,CACM,EACR,EAAA,CAAAM,CAAA,CAAA,EAGFsB,OAAAA,YAAAP,EAAA,CAAAA,EAAAf,EAAAY,EAAAT,EAAAC,CAAA,CAAA,EAEAmB,EACEC,EAAC,CAAA,MAAA,CAAA7B,EAAA,OAAAM,GAAAwB,EAAA,QAAA,EACyD,QAAA,IAAA1B,EAAA,CAAAC,CAAA,EAC1B,gBAAAC,EACf,eAAAD,EACD,SAAAC,EACd,IAAAI,EACK,KAAA,SACA,SAAAU,EACK,SAAA,CAEVW,EAAAC,EAAC,CAAA,MAAA,CACQhC,EAAA,OACEc,EACP,CACA,YAAAT,EAAAH,EAAA,SAAA,GAAA,EAAAA,EAAA,SAAA,GAAA,EACiE,gBAAAG,EAAAH,EAAA,SAAA,EAAA,EAAAA,EAAA,SAAA,EAAA,CACE,CACnE,CACF,CAAA,EACF6B,EAAAE,EAAA,CAAA,MAAAjC,EAAA,WAAA,IAAAY,EAAA,SAAAK,EAAAc,EAAAG,EAAA,CAAA,KAAA,GAAA,KAAA,2BAAA,MAAAhB,CAAA,CAAA,EAAAa,EAAAI,EAAA,CAAA,QAAA,cAAA,MAAAjB,EAAA,SAAAV,CAAA,CAAA,CAAA,CAAA,EAUAuB,EAAAE,EAAA,CAAA,MAAAjC,EAAA,WAAA,IAAAa,EAAA,SAAAI,EAAAc,EAAAG,EAAA,CAAA,KAAA,GAAA,KAAA,0BAAA,MAAAf,CAAA,CAAA,EAAAY,EAAAI,EAAA,CAAA,QAAA,cAAA,MAAAhB,EAAA,SAAAV,CAAA,CAAA,CAAA,CAAA,CAUA,CAAA,CAAA,CAGN;;;;;;;;;;;;;;;;;;;"}