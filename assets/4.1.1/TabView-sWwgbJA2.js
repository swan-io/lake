import{S as ce,c as g,t as Y,r as ne,s as K,g as re,h as ae,n as ue,N as J,w as R,a as e,o as de,l as s,C as ie,j as y,V as q,T as E,b as O,I as G,v as he,F as X,L as pe}from"./Space-bKyZCUEf.js";import{P as fe}from"./index-zwxHXgzQ.js";import{r as o}from"./index-4g5l5LRQ.js";import{a as le,u as we}from"./Pressable-YBO-2maz.js";import{n as me}from"./function-sfCq9YxC.js";import{B as ge}from"./commonStyles-bsfvYOkm.js";import{F as ye}from"./FocusTrap-EqaM0m69.js";import{L as Fe}from"./Link-EknlXg72.js";import{T as ke}from"./TransitionView-mfh3FK_R.js";const ve=40,r=ce.create({container:{borderBottomWidth:1,borderBottomColor:g.gray[100],zIndex:10},link:{...Y.medium,position:"relative",color:g.gray[700],height:ve,whiteSpace:"nowrap",display:"flex",flexDirection:"row",alignItems:"center"},activeLink:{color:g.current[500],boxShadow:`inset 0 -2px ${g.gray[700]}`},hoveredLink:{boxShadow:`inset 0 -2px ${g.gray[700]}`},underline:{position:"absolute",bottom:0,height:2,width:1,backgroundColor:g.current[500]},animatedUnderline:{transformOrigin:"0 0",transition:"200ms ease-in-out transform"},placeholder:{position:"absolute",top:0,left:0,right:0,visibility:"hidden",flexDirection:"row",alignItems:"flex-end",overflow:"hidden",pointerEvents:"none"},count:{...Y.smallRegular,color:g.current[500],backgroundColor:g.current[50],borderColor:g.current[100],borderWidth:1,borderRadius:ne[4],paddingHorizontal:K[4],minWidth:K[24],display:"inline-block",textAlign:"center"},dropdownHandleContainer:{alignItems:"center",justifyContent:"center",alignSelf:"stretch"},dropdownPlacement:{position:"absolute",right:0,top:"100%"},dropdown:{position:"absolute",right:0,top:"100%",backgroundColor:re.accented,borderRadius:ne[8],boxShadow:ae.modal,paddingVertical:K[8]},dropdownLink:{...Y.regular,paddingHorizontal:K[16],paddingVertical:K[8],whiteSpace:"nowrap"},dropdownLinkTextHovered:{backgroundColor:g.gray[50]},dropdownLinkTextActive:{boxShadow:`inset 3px 0 ${g.current.primary}`,color:g.current.primary},separator:{position:"absolute",top:0,left:ue[16],bottom:0,width:1,backgroundColor:g.gray[100]},sticky:{backgroundColor:re.default,position:"sticky",top:-1}}),Z=o.forwardRef(({children:c,style:d,tab:b,onChange:p,activeTabId:x,onBlur:f,onFocus:F,onPress:a},t)=>J(b).with({url:R.string},({url:h})=>e(Fe,{ref:t,to:h,style:d,onFocus:F,onBlur:f,onPress:a,children:c})).with({id:R.string},({id:h})=>{const w=h===x;return e(le,{ref:t,style:k=>d({...k,active:w}),onPress:()=>{p==null||p(h),a==null||a()},onFocus:F,onBlur:f,children:c})}).exhaustive()),be=({tabs:c,onHoverStart:d,onHoverEnd:b,onLinkFocus:p,onLinkBlur:x,onLinkPress:f,activeTabId:F,onChange:a})=>{const t=o.useRef(null);return ie(t,{onHoverStart:d,onHoverEnd:b}),e(q,{role:"menu",style:r.dropdown,ref:t,children:c.map(h=>{const w=j(h);return e(Z,{onChange:a,activeTabId:F,tab:h,onFocus:p,onBlur:x,onPress:f,role:"menuitem",ariaCurrentValue:"location",style:({active:k,hovered:A})=>[r.dropdownLink,k&&r.dropdownLinkTextActive,A&&r.dropdownLinkTextHovered],children:h.label},w)})})},Le=new Set(["ForcedOpen","OpenFromFocus"]),Ce=new Set(["Open","ForcedOpen","OpenFromFocus"]),Te=new Set(["ForcedOpen"]),Oe=o.forwardRef(({tabs:c,otherLabel:d,currentUrl:b,activeTabId:p,onChange:x},f)=>{const[F,a]=o.useReducer((n,u)=>J([u,n]).returnType().with(["ForceToggle","Closed"],["ForceToggle","Open"],["ForceToggle","ForcedClosed"],()=>"ForcedOpen").with(["ForceToggle","OpenFromFocus"],["ForceToggle","ForcedOpen"],()=>"ForcedClosed").with(["ForceClose",R.any],()=>"ForcedClosed").with(["FocusHandle","ForcedClosed"],()=>"Closed").with(["Open","ForcedOpen"],["FocusHandle","ForcedOpen"],["Close","ForcedOpen"],()=>"ForcedOpen").with(["Open",R.any],()=>"Open").with(["FocusHandle",R.any],()=>"OpenFromFocus").with(["Close",R.any],()=>"Closed").exhaustive(),"Closed"),t=o.useRef(void 0),h=o.useRef(null),w=o.useRef(null),k=o.useRef(null),{onHandleFocus:A,onLinkFocus:U,onAnyBlur:D,onHoverStart:N,onHoverEnd:W,onPress:$,onPressOutside:V,onEscapeKey:P}=o.useMemo(()=>({onHandleFocus:n=>{if(de(w.current))return;k.current=Date.now();const u=w.current,i=n;u.contains(i.relatedTarget)||(s(t.current)&&clearTimeout(t.current),a("FocusHandle"))},onLinkFocus:()=>{s(t.current)&&clearTimeout(t.current),a("Open")},onAnyBlur:()=>{s(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(()=>{a("Close")},300)},onHoverStart:()=>{s(t.current)&&clearTimeout(t.current),a("Open")},onHoverEnd:()=>{s(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(()=>{a("Close")},300)},onPress:()=>{k.current!=null&&Date.now()-k.current<32||(s(t.current)&&clearTimeout(t.current),a("ForceToggle"))},onPressOutside:n=>{s(h.current)&&h.current.contains(n.target)||(s(t.current)&&clearTimeout(t.current),a("ForceClose"),t.current=window.setTimeout(()=>{a("Close")},300))},onEscapeKey:()=>{s(t.current)&&clearTimeout(t.current),a("ForceClose"),t.current=window.setTimeout(()=>{a("Close")},300)}}),[]);o.useEffect(()=>()=>{s(t.current)&&clearTimeout(t.current)},[]);const z=Ce.has(F),M=Le.has(F),I=Te.has(F);ie(h,{onHoverStart:N,onHoverEnd:W});const _=we(w,f),Q=o.useMemo(()=>c.find(n=>ee({activeTabId:p,currentLocationURL:b,tab:n})),[p,b,c]);return y(q,{style:r.dropdownHandleContainer,ref:_,children:[y(le,{ref:h,role:"button","aria-expanded":z,"aria-haspopup":"true",onFocus:A,onBlur:D,onPress:$,style:({hovered:n})=>[r.link,s(Q)?r.activeLink:n?r.hoveredLink:null],children:[e(E,{children:d}),e(O,{width:8}),e(E,{style:r.count,children:c.length}),e(O,{width:4}),e(G,{name:"chevron-down-filled",size:12})]}),e(ke,{...he.fadeAndSlideInFromBottom,style:r.dropdownPlacement,children:z?e(ye,{autoFocus:M,focusLock:I,returnFocus:I,onClickOutside:V,onEscapeKey:I?P:void 0,children:e(be,{onChange:x,activeTabId:p,tabs:c,onHoverStart:N,onHoverEnd:W,onLinkFocus:U,onLinkBlur:D,onLinkPress:P})}):null})]})}),ee=({tab:c,activeTabId:d,currentLocationURL:b})=>J(c).with({url:R.string},({url:p})=>b.startsWith(p)).with({id:R.string},({id:p})=>s(d)&&p===d).exhaustive(),j=c=>J(c).with({url:R.string},({url:d})=>d).with({id:R.string},({id:d})=>d).exhaustive(),oe=({tabs:c,otherLabel:d,hideIfSingleItem:b=!0,sticky:p=!1,padding:x,activeTabId:f,onChange:F})=>{const a=o.useRef(null),t=o.useRef(null),h=o.useRef(null),w=o.useRef({}),k=o.useRef({}),[{left:A,width:U},D]=o.useState({left:0,width:0}),[N,W]=o.useState(!1),[[$,V],P]=o.useState([[],[]]),z=fe(),{path:M}=z,I=z.toString();o.useEffect(()=>{if(s(w.current)){const n=Object.entries(w.current),u=a.current;for(const[i,m]of n)if((i===f||"/"+M.join("/")===i)&&s(m)&&s(u)){m.measureLayout(u,(v,L,C)=>{D({left:v-(x??0),width:C})},me);return}}D({left:0,width:0})},[M,$,V,x,f]),o.useEffect(()=>{W(U>0)},[U]);const _=o.useCallback(({width:n})=>{const u=c.map(l=>{if(k.current){const H=j(l),T=k.current[H];if(s(T)){const B=T.getBoundingClientRect().width;return{tab:l,width:B+32}}else return{tab:l,width:0}}else return{tab:l,width:0}}),i=[],m=[];let v=0;u.forEach(l=>{if(v+=l.width,v<n)i.push({...l.tab,width:l.width});else if(ee({activeTabId:f,currentLocationURL:I,tab:l.tab})){for(;i.length!==0&&i.reduce((H,T)=>H+T.width,0)+(l.width+16)>=n;){const H=i.pop();s(H)&&(m.unshift(H),v-=H.width)}i.push({...l.tab,width:l.width})}else m.push({...l.tab,width:l.width})});const L=h.current;let C=100;s(L)&&(C=L.getBoundingClientRect().width);const S=i.findIndex(l=>ee({activeTabId:f,currentLocationURL:I,tab:l}));if(S!==-1){const l=i[S],H=(l==null?void 0:l.width)??0,T=[...i.slice(0,S),...i.slice(S+1)];for(;T.length!==0&&T.reduce((B,se)=>B+se.width,0)+H+(m.length>=1?C:0)>=n;){const B=T.pop();s(B)&&m.unshift(B)}const te=[...T.slice(0,S),...l!=null?[l]:[],...T.slice(S)];P([te,m])}else P([i,m])},[c,f,I]),Q=o.useCallback(({target:n,nativeEvent:{layout:{width:u}}})=>{_({container:n,width:u})},[_]);return o.useLayoutEffect(()=>{const n=t.current;if(n){const u=n,i=u.getBoundingClientRect().width;_({container:u,width:i})}},[_]),c.length<=1&&b?null:y(ge,{alignItems:"center",direction:"row",role:"tablist",ref:a,style:[r.container,p&&r.sticky,{paddingHorizontal:x}],children:[y(q,{style:r.placeholder,"aria-hidden":!0,ref:t,onLayout:Q,children:[c.map(n=>{const{label:u,icon:i,count:m}=n,v=j(n);return y(o.Fragment,{children:[y(Z,{ref:L=>{k.current&&(k.current[v]=L)},activeTabId:f,tab:n,onChange:F,style:({active:L,hovered:C})=>[r.link,L?r.activeLink:C?r.hoveredLink:null],children:[s(i)&&y(X,{children:[e(G,{name:i,size:16,color:"currentColor"}),e(O,{width:8})]}),e(E,{children:u}),m!=null?y(X,{children:[e(O,{width:8}),e(E,{style:r.count,children:m})]}):null]}),e(O,{width:32})]},v)}),y(pe,{ref:h,style:r.link,children:[e(E,{children:d}),e(O,{width:8}),e(E,{style:r.count,children:c.length}),e(O,{width:4}),e(G,{name:"chevron-down-filled",size:12})]})]}),$.map(n=>{const{label:u,icon:i,withSeparator:m,count:v}=n,L=j(n);return y(o.Fragment,{children:[y(Z,{ref:C=>{w.current&&(w.current[L]=C)},onChange:F,activeTabId:f,tab:n,role:"tab",style:({active:C,hovered:S})=>[r.link,C?r.activeLink:S?r.hoveredLink:null],children:[m===!0&&e(q,{style:r.separator,role:"none"}),s(i)&&y(X,{children:[e(G,{name:i,size:16,color:"currentColor"}),e(O,{width:8})]}),e(E,{children:u}),v!=null?y(X,{children:[e(O,{width:8}),e(E,{style:r.count,children:v})]}):null]}),e(O,{width:32})]},L)}),V.length>0?e(Oe,{ref:n=>{V.forEach(u=>{if(w.current){const i=j(u);w.current[i]=n}})},onChange:F,tabs:V,currentUrl:I,otherLabel:d,activeTabId:f}):null,N&&e(q,{style:[r.underline,r.animatedUnderline,{transform:`translateX(${A}px) scaleX(${U})`}]})]})};try{oe.displayName="TabView",oe.__docgenInfo={description:"",displayName:"TabView",props:{activeTabId:{defaultValue:null,description:"",name:"activeTabId",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((id: string) => void)"}},tabs:{defaultValue:null,description:"",name:"tabs",required:!0,type:{name:"Tab[]"}},otherLabel:{defaultValue:null,description:"",name:"otherLabel",required:!0,type:{name:"string"}},hideIfSingleItem:{defaultValue:{value:"true"},description:"",name:"hideIfSingleItem",required:!1,type:{name:"boolean"}},padding:{defaultValue:null,description:"",name:"padding",required:!1,type:{name:"enum",value:[{value:"16"},{value:"4"},{value:"8"},{value:"12"},{value:"20"},{value:"24"},{value:"32"},{value:"40"},{value:"48"},{value:"72"},{value:"96"}]}},sticky:{defaultValue:{value:"false"},description:"",name:"sticky",required:!1,type:{name:"boolean"}}}}}catch{}export{oe as T};
//# sourceMappingURL=TabView-sWwgbJA2.js.map
