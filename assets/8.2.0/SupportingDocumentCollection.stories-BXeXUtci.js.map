{"version":3,"file":"SupportingDocumentCollection.stories-BXeXUtci.js","sources":["../../../packages/lake/src/components/Form.tsx","../../../packages/shared-business/src/components/SupportingDocumentCollection.tsx"],"sourcesContent":["import { forwardRef, memo, ReactNode } from \"react\";\nimport { unstable_createElement as createElement, View, ViewProps } from \"react-native\";\nimport { Except } from \"type-fest\";\nimport { commonStyles } from \"../constants/commonStyles\";\n\ntype Props = Except<ViewProps, \"role\"> & {\n  children?: ReactNode;\n  onReset?: (event: React.FormEvent<HTMLElement>) => void;\n  onSubmit?: (event: React.FormEvent<HTMLElement>) => void;\n};\n\nexport const Form = memo(\n  forwardRef<View, Props>(({ style, onReset, onSubmit, ...props }, forwardedRef) =>\n    createElement(\"form\", {\n      ...props,\n      ref: forwardedRef,\n      onReset: (event: React.FormEvent<HTMLElement>) => {\n        event.preventDefault();\n        onReset?.(event);\n      },\n      onSubmit: (event: React.FormEvent<HTMLElement>) => {\n        event.preventDefault();\n        onSubmit?.(event);\n      },\n      style: [commonStyles.view, style],\n    }),\n  ),\n);\n\nForm.displayName = \"Form\";\n","import { Array, Future, Option, Result } from \"@swan-io/boxed\";\nimport { Form } from \"@swan-io/lake/src/components/Form\";\nimport { LakeButton, LakeButtonGroup } from \"@swan-io/lake/src/components/LakeButton\";\nimport { LakeCopyButton } from \"@swan-io/lake/src/components/LakeCopyButton\";\nimport { LakeLabel } from \"@swan-io/lake/src/components/LakeLabel\";\nimport { LakeText } from \"@swan-io/lake/src/components/LakeText\";\nimport { LakeTooltip } from \"@swan-io/lake/src/components/LakeTooltip\";\nimport { ReadOnlyFieldList } from \"@swan-io/lake/src/components/ReadOnlyFieldList\";\nimport { Space } from \"@swan-io/lake/src/components/Space\";\nimport { colors } from \"@swan-io/lake/src/constants/design\";\nimport { isNotNullish, isNotNullishOrEmpty } from \"@swan-io/lake/src/utils/nullish\";\nimport { NetworkError, Request, Response, TimeoutError, badStatusToError } from \"@swan-io/request\";\nimport {\n  ForwardedRef,\n  Fragment,\n  Ref,\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { match } from \"ts-pattern\";\nimport { UploadFileInput, UploadOutputWithId } from \"../hooks/useFilesUploader\";\nimport { SwanFile } from \"../utils/SwanFile\";\nimport { isTranslationKey, locale, t } from \"../utils/i18n\";\nimport { FilesUploader, FilesUploaderRef } from \"./FilesUploader\";\nimport { LakeModal } from \"./LakeModal\";\n\nconst ACCEPTED_FORMATS = [\"application/pdf\", \"image/png\", \"image/jpeg\"];\n\nexport type Document<Purpose extends string> = {\n  purpose: Purpose;\n  file: SwanFile;\n};\n\ntype UploadInput<Purpose extends string> = { fileName: string; purpose: Purpose };\nexport type UploadOutput = { url: string; fields: { key: string; value: string }[] };\n\ntype SupportingDocumentCollectionStatus =\n  | \"WaitingForDocument\"\n  | \"PendingReview\"\n  | \"Approved\"\n  | \"Canceled\"\n  | \"Rejected\";\n\ntype PurposeMetadata = {\n  title: string;\n  values: {\n    type?: \"text\" | \"copy\";\n    title: string;\n    value: string;\n  }[];\n};\n\ntype Props<Purpose extends string> = {\n  status: SupportingDocumentCollectionStatus;\n  generateUpload: (\n    input: UploadInput<Purpose>,\n  ) => Future<Result<UploadOutputWithId<UploadOutput>, unknown>>;\n  documents: Document<Purpose>[];\n  requiredDocumentPurposes: Purpose[];\n  uploadFile?: (\n    config: UploadFileInput<UploadOutput>,\n  ) => Future<Result<Response<string>, NetworkError | TimeoutError>>;\n  onChange?: (documents: Document<Purpose>[]) => void;\n  onRemoveFile?: (file: SwanFile) => Future<Result<unknown, unknown>>;\n  templateLanguage?: string;\n  showIds?: boolean;\n  readOnly?: boolean;\n  getPurposeMetadata?: (purose: Purpose) => PurposeMetadata | undefined;\n  readonlyDocumentPurposes?: Purpose[];\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    opacity: 1,\n  },\n  buttonWithDefaultCursor: {\n    opacity: 1,\n    cursor: \"default\",\n  },\n});\n\ntype HelpProps =\n  | {\n      type: \"tooltip\";\n      text: string;\n      width?: number;\n    }\n  | {\n      type: \"button\";\n      label: string;\n      onPress: () => void;\n    };\n\nconst Help = (props: HelpProps) => {\n  return match(props)\n    .with({ type: \"tooltip\" }, ({ text, width }) => (\n      <LakeTooltip\n        content={text}\n        width={width}\n        togglableOnFocus={true}\n        placement=\"right\"\n        maxWidth={400}\n      >\n        <LakeButton\n          mode=\"tertiary\"\n          size=\"small\"\n          color=\"gray\"\n          icon=\"question-circle-regular\"\n          disabled={true}\n          style={[styles.button, styles.buttonWithDefaultCursor]}\n          ariaLabel={t(\"supportingDocuments.help.whatIsThis\")}\n        />\n      </LakeTooltip>\n    ))\n    .with({ type: \"button\" }, ({ label, onPress }) => (\n      <LakeButton\n        mode=\"tertiary\"\n        size=\"small\"\n        color=\"gray\"\n        icon=\"question-circle-regular\"\n        onPress={onPress}\n        style={styles.button}\n        ariaLabel={t(\"supportingDocuments.help.whatIsThis\")}\n      >\n        {label}\n      </LakeButton>\n    ))\n    .exhaustive();\n};\n\nexport const getSupportingDocumentPurposeLabel = (purpose: string) => {\n  const key = `supportingDocuments.purpose.${purpose}`;\n  if (isTranslationKey(key)) {\n    return t(key);\n  } else {\n    return purpose;\n  }\n};\n\nexport const getSupportingDocumentPurposeDescriptionLabel = (purpose: string) => {\n  const key = `supportingDocuments.purpose.${purpose}.description`;\n  if (isTranslationKey(key)) {\n    return t(key);\n  } else {\n    return \"\";\n  }\n};\n\nexport type SupportingDocumentCollectionRef<Purpose extends string> = {\n  areAllRequiredDocumentsFilled: () => boolean;\n  addDocument: (document: Document<Purpose>) => void;\n};\n\nexport const SupportingDocumentCollectionWithRef = <Purpose extends string>(\n  {\n    documents,\n    generateUpload,\n    uploadFile,\n    requiredDocumentPurposes,\n    templateLanguage = locale.language,\n    status,\n    onRemoveFile,\n    showIds = false,\n    readOnly = false,\n    getPurposeMetadata,\n    readonlyDocumentPurposes = [],\n  }: Props<Purpose>,\n  ref: Ref<SupportingDocumentCollectionRef<Purpose>>,\n) => {\n  const [showPowerOfAttorneyModal, setShowPowerOfAttorneyModal] = useState(false);\n  const [showSwornStatementModal, setShowSwornStatementModal] = useState(false);\n  const [currentMetadata, setCurrentMetadata] = useState<PurposeMetadata | undefined>(undefined);\n\n  const [addedDocuments, setAddedDocuments] = useState<Document<Purpose>[]>([]);\n\n  const orderedDocumentPurposes = useMemo(() => {\n    // Get all purposes to display: the required ones and the ones that have at least a document\n    const allPurposes = new Set(requiredDocumentPurposes);\n    const allDocuments = [...addedDocuments, ...documents];\n    allDocuments.forEach(document => allPurposes.add(document.purpose));\n\n    const documentsByPurpose = new Map(\n      [...allPurposes].map(purpose => {\n        const purposeDocuments = allDocuments.filter(document => document.purpose === purpose);\n        return [purpose, purposeDocuments];\n      }),\n    );\n\n    // Map purposes to their priorities (lower priority comes first)\n    // We precompute it to avoid running on each `sort` callback call\n    const allRequiredPurposes = new Set(requiredDocumentPurposes);\n    // Indices:\n    // -> 0: documents aren't empty and all validated\n    // -> 1: purpose is required\n    // -> 2: purpose isn't required\n    const priorityByPurpose = new Map(\n      [...allPurposes].map(purpose => {\n        const purposeDocuments = documentsByPurpose.get(purpose) ?? [];\n        const areAllPurposeDocumentsValidated =\n          purposeDocuments.length > 0 &&\n          purposeDocuments.every(document => document.file.statusInfo.status === \"Validated\");\n\n        const priority = areAllPurposeDocumentsValidated\n          ? 0\n          : allRequiredPurposes.has(purpose)\n            ? 1\n            : 2;\n\n        return [purpose, priority];\n      }),\n    );\n\n    return [...allPurposes]\n      .sort((purposeA, purposeB) => {\n        const purposeAPriority = priorityByPurpose.get(purposeA) ?? 2;\n        const purposeBPriority = priorityByPurpose.get(purposeB) ?? 2;\n\n        return purposeBPriority > purposeAPriority ? -1 : 1;\n      })\n      .map(purpose => {\n        const documents = documentsByPurpose.get(purpose) ?? [];\n        return {\n          purpose,\n          files: documents.map(item => item.file),\n          isRequired: allRequiredPurposes.has(purpose),\n          areAllDocumentsValidated: priorityByPurpose.get(purpose) === 0,\n        };\n      });\n  }, [requiredDocumentPurposes, documents, addedDocuments]);\n\n  const filesByRequiredPurpose = useRef(\n    new Map(\n      Array.filterMap(orderedDocumentPurposes, ({ isRequired, purpose, files }) =>\n        isRequired ? Option.Some([purpose, files]) : Option.None(),\n      ),\n    ),\n  );\n\n  const filesUploaderRefByPurpose = useRef<Partial<Record<Purpose, FilesUploaderRef | null>>>({});\n\n  useImperativeHandle(ref, () => ({\n    areAllRequiredDocumentsFilled: () => {\n      const filesByPurposes = [...filesByRequiredPurpose.current.values()];\n      return filesByPurposes.every(files => files.length > 0);\n    },\n    addDocument: document => {\n      setAddedDocuments(documents => [...documents, document]);\n    },\n  }));\n\n  useEffect(() => {\n    const lastAddedDocument = addedDocuments[addedDocuments.length - 1];\n    if (lastAddedDocument != null) {\n      const ref = filesUploaderRefByPurpose.current[lastAddedDocument?.purpose];\n      if (ref != null) {\n        ref.add(lastAddedDocument.file);\n      }\n    }\n  }, [addedDocuments]);\n\n  const showableDocumentPurposes = orderedDocumentPurposes.filter(({ files }) => {\n    // Completely hide the purpose section if empty and no action is available\n    if (readOnly && files.length === 0) {\n      return false;\n    }\n    return true;\n  });\n\n  return (\n    <Form>\n      {showableDocumentPurposes.map(({ purpose, files, areAllDocumentsValidated, isRequired }) => {\n        const metadata = getPurposeMetadata?.(purpose);\n\n        return (\n          <Fragment key={purpose}>\n            <LakeLabel\n              label={getSupportingDocumentPurposeLabel(purpose)}\n              help={\n                isNotNullish(metadata) ? (\n                  <Help\n                    type=\"button\"\n                    label={metadata.title}\n                    onPress={() => setCurrentMetadata(metadata)}\n                  />\n                ) : (\n                  match(purpose as string)\n                    .with(\"PowerOfAttorney\", () => (\n                      <Help\n                        type=\"button\"\n                        label={t(\"supportingDocuments.help.whatIsThis\")}\n                        onPress={() => setShowPowerOfAttorneyModal(true)}\n                      />\n                    ))\n                    .with(\"SwornStatement\", () => (\n                      <Help\n                        type=\"button\"\n                        label={t(\"supportingDocuments.help.whatIsThis\")}\n                        onPress={() => setShowSwornStatementModal(true)}\n                      />\n                    ))\n                    .otherwise(() => {\n                      const label = getSupportingDocumentPurposeDescriptionLabel(purpose);\n                      return isNotNullishOrEmpty(label) ? (\n                        <Help type=\"tooltip\" text={label} />\n                      ) : null;\n                    })\n                )\n              }\n              render={() => (\n                <FilesUploader\n                  ref={ref => (filesUploaderRefByPurpose.current[purpose] = ref)}\n                  // Only allow uploading is the Supporting Document Collection awaits for docs\n                  // and that the specific purpose isn't already fully validated\n                  canUpload={\n                    !readonlyDocumentPurposes.includes(purpose) &&\n                    !readOnly &&\n                    status === \"WaitingForDocument\" &&\n                    !areAllDocumentsValidated\n                  }\n                  accept={ACCEPTED_FORMATS}\n                  maxSize={20_000_000}\n                  icon=\"document-regular\"\n                  initialFiles={files}\n                  generateUpload={generateUpload}\n                  getUploadConfig={file => ({ fileName: file.name, purpose })}\n                  uploadFile={\n                    isNotNullish(uploadFile)\n                      ? uploadFile\n                      : ({ upload, file, onLoadStart, onProgress }) => {\n                          const body = new FormData();\n                          upload.fields.forEach(({ key, value }) => body.append(key, value));\n                          body.append(\"file\", file);\n                          return Request.make({\n                            url: upload.url,\n                            method: \"POST\",\n                            onLoadStart,\n                            onProgress,\n                            body,\n                          }).mapOkToResult(badStatusToError);\n                        }\n                  }\n                  formatAndSizeDescription={t(\"supportingDocuments.documentTypes\", {\n                    maxSizeMB: 20_000_000 / 1_000_000,\n                  })}\n                  onRemoveFile={readOnly ? undefined : onRemoveFile}\n                  onChange={files => {\n                    if (isRequired) {\n                      filesByRequiredPurpose.current.set(purpose, files);\n                    }\n                  }}\n                  showIds={showIds}\n                />\n              )}\n            />\n\n            <Space height={24} />\n          </Fragment>\n        );\n      })}\n\n      {showableDocumentPurposes.length === 0 ? (\n        <>\n          <Space height={24} />\n          <LakeText align=\"center\">{t(\"supportingDocuments.noDocuments\")}</LakeText>\n          <Space height={24} />\n        </>\n      ) : null}\n\n      <LakeModal\n        visible={showPowerOfAttorneyModal}\n        title={t(\"supportingDocuments.powerOfAttorneyModal.title\")}\n        icon=\"document-regular\"\n        onPressClose={() => setShowPowerOfAttorneyModal(false)}\n      >\n        <LakeText>{t(\"supportingDocuments.powerOfAttorneyModal.description\")}</LakeText>\n        <Space height={16} />\n\n        <LakeButtonGroup paddingBottom={0}>\n          <LakeButton\n            grow={true}\n            color=\"current\"\n            onPress={() =>\n              window.open(\n                `/power-of-attorney-template/${match(templateLanguage)\n                  .with(\"fr\", () => \"fr\")\n                  .with(\"de\", () => \"de\")\n                  .with(\"es\", () => \"es\")\n                  .otherwise(() => \"en\")}.pdf`,\n              )\n            }\n          >\n            {t(\"supportingDocuments.downloadTemplate\")}\n          </LakeButton>\n        </LakeButtonGroup>\n      </LakeModal>\n\n      <LakeModal\n        visible={showSwornStatementModal}\n        title={t(\"supportingDocuments.purpose.SwornStatement\")}\n        icon=\"document-regular\"\n        onPressClose={() => setShowSwornStatementModal(false)}\n      >\n        <LakeText>{t(\"supportingDocuments.purpose.SwornStatement.description\")}</LakeText>\n        <Space height={16} />\n\n        <LakeButtonGroup paddingBottom={0}>\n          <LakeButton\n            grow={true}\n            color=\"current\"\n            onPress={() => window.open(\"/sworn-statement-template/es.pdf\")}\n          >\n            {t(\"supportingDocuments.downloadTemplate\")}\n          </LakeButton>\n        </LakeButtonGroup>\n      </LakeModal>\n\n      <LakeModal\n        visible={isNotNullish(currentMetadata)}\n        title={t(\"supportingDocuments.informations\")}\n        icon=\"document-regular\"\n        onPressClose={() => setCurrentMetadata(undefined)}\n      >\n        <ReadOnlyFieldList>\n          {currentMetadata?.values.map(({ title, value, type }) => (\n            <LakeLabel\n              type=\"viewSmall\"\n              label={title}\n              actions={\n                type === \"copy\" && (\n                  <LakeCopyButton\n                    valueToCopy={value}\n                    copiedText={t(\"copyButton.copiedTooltip\")}\n                    copyText={t(\"copyButton.copyTooltip\")}\n                  />\n                )\n              }\n              render={() => (\n                <LakeText variant=\"regular\" color={colors.gray[900]}>\n                  {value}\n                </LakeText>\n              )}\n            />\n          ))}\n        </ReadOnlyFieldList>\n      </LakeModal>\n    </Form>\n  );\n};\n\nexport const SupportingDocumentCollection = forwardRef(SupportingDocumentCollectionWithRef) as <\n  I extends string,\n>(\n  props: Props<I> & { ref?: ForwardedRef<SupportingDocumentCollectionRef<I>> },\n) => ReturnType<typeof SupportingDocumentCollectionWithRef>;\n"],"names":["Form","memo","forwardRef","style","onReset","onSubmit","props","forwardedRef","createElement","event","commonStyles","ACCEPTED_FORMATS","styles","StyleSheet","Help","match","text","width","jsx","LakeTooltip","LakeButton","t","label","onPress","getSupportingDocumentPurposeLabel","purpose","key","isTranslationKey","getSupportingDocumentPurposeDescriptionLabel","SupportingDocumentCollectionWithRef","documents","generateUpload","uploadFile","requiredDocumentPurposes","templateLanguage","locale","status","onRemoveFile","showIds","readOnly","getPurposeMetadata","readonlyDocumentPurposes","ref","showPowerOfAttorneyModal","setShowPowerOfAttorneyModal","useState","showSwornStatementModal","setShowSwornStatementModal","currentMetadata","setCurrentMetadata","addedDocuments","setAddedDocuments","orderedDocumentPurposes","useMemo","allPurposes","allDocuments","document","documentsByPurpose","purposeDocuments","allRequiredPurposes","priorityByPurpose","priority","purposeA","purposeB","purposeAPriority","item","filesByRequiredPurpose","useRef","Array","isRequired","files","Option","filesUploaderRefByPurpose","useImperativeHandle","useEffect","lastAddedDocument","showableDocumentPurposes","areAllDocumentsValidated","metadata","jsxs","Fragment","LakeLabel","isNotNullish","isNotNullishOrEmpty","FilesUploader","file","upload","onLoadStart","onProgress","body","value","Request","badStatusToError","Space","LakeText","LakeModal","LakeButtonGroup","ReadOnlyFieldList","title","type","LakeCopyButton","colors","SupportingDocumentCollection"],"mappings":"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"}