{"version":3,"file":"LakeSlider-lamrT3Ub.js","sources":["../../../packages/lake/src/components/LakeSlider.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport { breakpoints } from \"../constants/design\";\nimport { Box } from \"./Box\";\nimport { LakeLabel } from \"./LakeLabel\";\nimport { LakeTextInput } from \"./LakeTextInput\";\nimport { ResponsiveContainer } from \"./ResponsiveContainer\";\n\nexport type SliderProps = {\n  label: string;\n  value: number;\n  min: number;\n  max: number;\n  step: number;\n  unit: string;\n  disabled?: boolean;\n  onChange: (value: number) => void;\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    zIndex: 1,\n  },\n  input: {\n    maxWidth: 120,\n    zIndex: 1,\n    position: \"relative\",\n  },\n});\n\nexport const sliderBreakpoint = breakpoints.tiny;\n\nexport const LakeSlider = ({\n  label,\n  value,\n  min,\n  max,\n  step,\n  unit,\n  disabled = false,\n  onChange,\n}: SliderProps) => {\n  const [dirtyValue, setDirtyValue] = useState(String(value));\n\n  useEffect(() => {\n    setDirtyValue(String(value));\n  }, [value]);\n\n  const sanitizeInput = useCallback(() => {\n    const cleanValue = Math.max(Math.min(Number(dirtyValue), max), min);\n    setDirtyValue(String(cleanValue));\n    onChange(cleanValue);\n  }, [min, max, dirtyValue, onChange]);\n\n  return (\n    <ResponsiveContainer breakpoint={sliderBreakpoint} style={styles.container}>\n      {({ large }) => (\n        <>\n          {large ? (\n            <>\n              <Box direction=\"row\" justifyContent=\"end\">\n                <View>\n                  <LakeTextInput\n                    style={styles.input}\n                    unit={unit}\n                    value={dirtyValue}\n                    onChangeText={setDirtyValue}\n                    onBlur={sanitizeInput}\n                    inputMode=\"decimal\"\n                    disabled={disabled}\n                  />\n                </View>\n              </Box>\n\n              <input\n                type=\"range\"\n                min={min}\n                max={max}\n                step={step}\n                value={value}\n                disabled={disabled}\n                onChange={event => onChange(Number(event.target.value))}\n                style={{\n                  backgroundSize: `${((value - min) / (max - min)) * 100}% 100%`,\n                  ...(disabled ? commonStyles.disabled : {}),\n                }}\n              />\n            </>\n          ) : (\n            <LakeLabel\n              label={label}\n              render={id => (\n                <LakeTextInput\n                  id={id}\n                  unit={unit}\n                  value={dirtyValue}\n                  onChangeText={setDirtyValue}\n                  onBlur={sanitizeInput}\n                  inputMode=\"decimal\"\n                  disabled={disabled}\n                />\n              )}\n            />\n          )}\n        </>\n      )}\n    </ResponsiveContainer>\n  );\n};\n"],"names":["styles","StyleSheet","sliderBreakpoint","breakpoints","LakeSlider","label","value","min","max","step","unit","disabled","onChange","dirtyValue","setDirtyValue","useState","useEffect","sanitizeInput","useCallback","cleanValue","jsx","ResponsiveContainer","large","Fragment","jsxs","Box","View","LakeTextInput","event","commonStyles","LakeLabel","id"],"mappings":"2TAoBA,MAAAA,EAAAC,EAAA,OAAA,CAAiC,UAAA,CACpB,OAAA,CACD,EACV,MAAA,CACO,SAAA,IACK,OAAA,EACF,SAAA,UACE,CAEd,CAAA,EAEOC,EAAAC,EAAA,KAEAC,EAAA,CAAA,CAAoB,MAAAC,EACzB,MAAAC,EACA,IAAAC,EACA,IAAAC,EACA,KAAAC,EACA,KAAAC,EACA,SAAAC,EAAA,GACW,SAAAC,CAEb,IAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,OAAAT,CAAA,CAAA,EAEAU,EAAAA,UAAA,IAAA,CACEF,EAAA,OAAAR,CAAA,CAAA,CAA2B,EAAA,CAAAA,CAAA,CAAA,EAG7B,MAAAW,EAAAC,EAAAA,YAAA,IAAA,CACE,MAAAC,EAAA,KAAA,IAAA,KAAA,IAAA,OAAAN,CAAA,EAAAL,CAAA,EAAAD,CAAA,EACAO,EAAA,OAAAK,CAAA,CAAA,EACAP,EAAAO,CAAA,CAAmB,EAAA,CAAAZ,EAAAC,EAAAK,EAAAD,CAAA,CAAA,EAGrB,OAAAQ,EAAAC,EAAA,CAAA,WAAAnB,EAAA,MAAAF,EAAA,UAAA,SAAA,CAAA,CAAA,MAAAsB,KAAAF,EAAAG,EAAA,CAAA,SAAAD,EAAAE,EAAAD,EAAA,CAAA,SAAA,CAMYH,EAAAK,EAAA,CAAA,UAAA,MAAA,eAAA,MAAA,SAAAL,EAAAM,EAAA,CAAA,SAAAN,EAEIO,EAAC,CAAA,MAAA3B,EAAA,MACe,KAAAU,EACd,MAAAG,EACO,aAAAC,EACO,OAAAG,EACN,UAAA,UACE,SAAAN,CACV,CAAA,CAAA,CAAA,CAAA,CAAA,EAGNS,EAEA,QAAC,CAAA,KAAA,QACM,IAAAb,EACL,IAAAC,EACA,KAAAC,EACA,MAAAH,EACA,SAAAK,EACA,SAAAiB,GAAAhB,EAAA,OAAAgB,EAAA,OAAA,KAAA,CAAA,EACsD,MAAA,CAC/C,eAAA,IAAAtB,EAAAC,IAAAC,EAAAD,GAAA,GAAA,SACiD,GAAAI,EAAAkB,EAAA,SAAA,CAAA,CACd,CAC1C,CAAA,CACF,CAAA,CAAA,EAAAT,EAGFU,EAAC,CAAA,MAAAzB,EACC,OAAA0B,GAAAX,EAEEO,EAAC,CAAA,GAAAI,EACC,KAAArB,EACA,MAAAG,EACO,aAAAC,EACO,OAAAG,EACN,UAAA,UACE,SAAAN,CACV,CAAA,CACF,CAAA,CAAA,CAAA,CAAA,CAAA,CAQhB"}