import{_ as $e}from"./extends-98964cd2.js";import{z as De,A as le,B as ye,S as We,_ as Xe,C as je,V as ze}from"./Space-16642e3d.js";import{r as d}from"./index-8db94870.js";var ue="DELAY",S="ERROR",ce="LONG_PRESS_DETECTED",E="NOT_RESPONDER",A="RESPONDER_ACTIVE_LONG_PRESS_START",W="RESPONDER_ACTIVE_PRESS_START",se="RESPONDER_INACTIVE_PRESS_START",qe="RESPONDER_GRANT",$="RESPONDER_RELEASE",ge="RESPONDER_TERMINATED",ve=Object.freeze({NOT_RESPONDER:{DELAY:S,RESPONDER_GRANT:se,RESPONDER_RELEASE:S,RESPONDER_TERMINATED:S,LONG_PRESS_DETECTED:S},RESPONDER_INACTIVE_PRESS_START:{DELAY:W,RESPONDER_GRANT:S,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:S},RESPONDER_ACTIVE_PRESS_START:{DELAY:S,RESPONDER_GRANT:S,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:A},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:S,RESPONDER_GRANT:S,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:A},ERROR:{DELAY:E,RESPONDER_GRANT:se,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:E}}),Ee=e=>e===W||e===A,Z=e=>e.getAttribute("role")==="button",de=e=>e===se||e===W||e===A,Je=e=>e===ge||e===$,fe=e=>{var n=e.key,i=e.target,s=i.getAttribute("role"),t=n===" "||n==="Spacebar";return n==="Enter"||t&&s==="button"},Qe=450,Ze=50;class et{constructor(n){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=E,this.configure(n)}configure(n){this._config=n}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var n=(t,r)=>{t.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=E,this._isPointerTouch=t.nativeEvent.type==="touchstart",this._receiveSignal(qe,t);var a=ee(this._config.delayPressStart,0,Ze);r!==!1&&a>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(ue,t)},a):this._receiveSignal(ue,t);var o=ee(this._config.delayLongPress,10,Qe);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(t)},o+a)},i=t=>{this._receiveSignal($,t)},s=t=>{var r=this._config.onPress,a=t.target;if(this._touchState!==E&&fe(t)){i(t),document.removeEventListener("keyup",s);var o=a.getAttribute("role"),l=a.tagName.toLowerCase(),v=o==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea";r!=null&&!v&&r(t)}};return{onStartShouldSetResponder:t=>{var r=this._config.disabled;return r&&Z(t.currentTarget)&&t.stopPropagation(),r==null?!0:!r},onKeyDown:t=>{var r=this._config.disabled,a=t.key,o=t.target;if(!r&&fe(t)){this._touchState===E&&(n(t,!1),document.addEventListener("keyup",s));var l=o.getAttribute("role"),v=a===" "||a==="Spacebar",y=l==="button"||l==="menuitem";v&&y&&t.preventDefault(),t.stopPropagation()}},onResponderGrant:t=>n(t),onResponderMove:t=>{this._config.onPressMove!=null&&this._config.onPressMove(t);var r=_e(t);if(this._touchActivatePosition!=null){var a=this._touchActivatePosition.pageX-r.pageX,o=this._touchActivatePosition.pageY-r.pageY;Math.hypot(a,o)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:t=>i(t),onResponderTerminate:t=>{t.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(ge,t)},onResponderTerminationRequest:t=>{var r=this._config,a=r.cancelable,o=r.disabled,l=r.onLongPress;return!o&&l!=null&&this._isPointerTouch&&t.nativeEvent.type==="contextmenu"?!1:a??!0},onClick:t=>{var r=this._config,a=r.disabled,o=r.onPress;a?Z(t.currentTarget)&&t.stopPropagation():(t.stopPropagation(),this._longPressDispatched||this._selectionTerminated?t.preventDefault():o!=null&&t.altKey===!1&&o(t))},onContextMenu:t=>{var r=this._config,a=r.disabled,o=r.onLongPress;a?Z(t.currentTarget)&&t.stopPropagation():o!=null&&this._isPointerTouch&&!t.defaultPrevented&&(t.preventDefault(),t.stopPropagation())}}}_receiveSignal(n,i){var s=this._touchState,t=null;ve[s]!=null&&(t=ve[s][n]),!(this._touchState===E&&n===$)&&(t==null||t===S?console.error("PressResponder: Invalid signal "+n+" for state "+s+" on responder"):s!==t&&(this._performTransitionSideEffects(s,t,n,i),this._touchState=t))}_performTransitionSideEffects(n,i,s,t){if(Je(s)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),de(n)&&s===ce){var r=this._config.onLongPress;r!=null&&t.nativeEvent.key==null&&(r(t),this._longPressDispatched=!0)}var a=Ee(n),o=Ee(i);if(!a&&o?this._activate(t):a&&!o&&this._deactivate(t),de(n)&&s===$){var l=this._config,v=l.onLongPress,y=l.onPress;if(y!=null){var m=v!=null&&n===A;m||!o&&!a&&(this._activate(t),this._deactivate(t))}}this._cancelPressDelayTimeout()}_activate(n){var i=this._config,s=i.onPressChange,t=i.onPressStart,r=_e(n);this._touchActivatePosition={pageX:r.pageX,pageY:r.pageY},t!=null&&t(n),s!=null&&s(!0)}_deactivate(n){var i=this._config,s=i.onPressChange,t=i.onPressEnd;function r(){t!=null&&t(n),s!=null&&s(!1)}var a=ee(this._config.delayPressEnd);a>0?this._pressOutDelayTimeout=setTimeout(()=>{r()},a):r()}_handleLongPress(n){(this._touchState===W||this._touchState===A)&&this._receiveSignal(ce,n)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function ee(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),Math.max(n,e??i)}function _e(e){var n=e.nativeEvent,i=n.changedTouches,s=n.touches;return s!=null&&s.length>0?s[0]:i!=null&&i.length>0?i[0]:e.nativeEvent}function tt(e,n){var i=d.useRef(null);i.current==null&&(i.current=new et(n));var s=i.current;return d.useEffect(()=>{s.configure(n)},[n,s]),d.useEffect(()=>()=>{s.reset()},[s]),d.useDebugValue(n),s.getEventHandlers()}var nt=()=>{};function rt(){var e=!1;if(De)try{var n={};Object.defineProperty(n,"passive",{get(){return e=!0,!1}}),window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{}return e}var st=rt();function it(e){return e==null?!1:st?e:!!e.capture}function at(){return this.cancelBubble}function ot(){return this.defaultPrevented}function lt(e){return e.nativeEvent=e,e.persist=nt,e.isDefaultPrevented=ot,e.isPropagationStopped=at,e}function c(e,n,i,s){var t=it(s),r=a=>i(lt(a));return e.addEventListener(n,r,t),function(){e!=null&&e.removeEventListener(n,r,t)}}var ut=()=>typeof window<"u"&&window.PointerEvent!=null,T="keyboard",f="keyboard",x,k,G=!1,ct=new Set,U="keyboard",I="mouse",te="touch",vt="blur",me="contextmenu",Et="focus",dt="keydown",Oe="mousedown",pe="mousemove",Le="mouseup",Ne="pointerdown",be="pointermove",Ae="scroll",Ce="selectionchange",Me="touchcancel",Ie="touchmove",He="touchstart",ft="visibilitychange",Pe={passive:!0},_={capture:!0,passive:!0};function we(){(x!=null||k!=null)&&(x!=null&&(f=x,x=null),k!=null&&(T=k,k=null),g())}function _t(){x=f,k=T,T=U,f=U,g(),G=!1}function Pt(){we()}function ht(e){e.metaKey||e.altKey||e.ctrlKey||f!==U&&(f=U,T=U,g())}function Rt(){document.visibilityState!=="hidden"&&we()}function R(e){var n=e.type;if(ut()){if(n===Ne){T!==e.pointerType&&(f=e.pointerType,T=e.pointerType,g());return}if(n===be){f!==e.pointerType&&(f=e.pointerType,g());return}}else{if(G||(n===Oe&&T!==I&&(f=I,T=I,g()),n===pe&&f!==I&&(f=I,g())),n===He){G=!0,e.touches&&e.touches.length>1&&(G=!1),T!==te&&(f=te,T=te,g());return}(n===me||n===Le||n===Ce||n===Ae||n===Me||n===Ie)&&(G=!1)}}De&&(c(window,vt,_t,Pe),c(window,Et,Pt,Pe),c(document,dt,ht,_),c(document,ft,Rt,_),c(document,Ne,R,_),c(document,be,R,_),c(document,me,R,_),c(document,Oe,R,_),c(document,pe,R,_),c(document,Le,R,_),c(document,Me,R,_),c(document,Ie,R,_),c(document,He,R,_),c(document,Ce,R,_),c(document,Ae,R,_));function g(){var e={activeModality:T,modality:f};ct.forEach(n=>{n(e)})}function St(){return f}function H(e,n){var i=le(()=>new Map),s=le(()=>(t,r)=>{var a=i.get(t);a!=null&&a(),r==null&&(i.delete(t),r=()=>{});var o=c(t,e,r,n);return i.set(t,o),o});return ye(()=>()=>{i.forEach(t=>{t()}),i.clear()},[i]),s}var Tt={},w={passive:!0},he="react-gui:hover:lock",Re="react-gui:hover:unlock",Dt=()=>typeof window<"u"&&window.PointerEvent!=null;function Se(e,n,i){var s=document.createEvent("CustomEvent"),t=i||Tt,r=t.bubbles,a=r===void 0?!0:r,o=t.cancelable,l=o===void 0?!0:o,v=t.detail;s.initCustomEvent(n,a,l,v),e.dispatchEvent(s)}function ne(e){var n=e.pointerType;return n??St()}function yt(e,n){var i=n.contain,s=n.disabled,t=n.onHoverStart,r=n.onHoverChange,a=n.onHoverUpdate,o=n.onHoverEnd,l=Dt(),v=H(l?"pointermove":"mousemove",w),y=H(l?"pointerenter":"mouseenter",w),m=H(l?"pointerleave":"mouseleave",w),p=H(he,w),C=H(Re,w);ye(()=>{var D=e.current;if(D!==null){var M=function(u){o!=null&&o(u),r!=null&&r(!1),v(D,null),m(D,null)},V=function(u){var P=e.current;P!=null&&ne(u)!=="touch"&&(i&&Se(P,Re),M(u))},Y=function(u){ne(u)!=="touch"&&a!=null&&(u.x==null&&(u.x=u.clientX),u.y==null&&(u.y=u.clientY),a(u))},L=function(u){t!=null&&t(u),r!=null&&r(!0),a!=null&&v(D,s?null:Y),m(D,s?null:V)},F=function(u){var P=e.current;if(P!=null&&ne(u)!=="touch"){i&&Se(P,he),L(u);var K=function(b){b.target!==P&&M(u)},X=function(b){b.target!==P&&L(u)};p(P,s?null:K),C(P,s?null:X)}};y(D,s?null:F)}},[y,v,m,p,C,i,s,t,r,a,o,e])}var gt=["children","delayLongPress","delayPressIn","delayPressOut","disabled","onBlur","onContextMenu","onFocus","onHoverIn","onHoverOut","onKeyDown","onLongPress","onPress","onPressMove","onPressIn","onPressOut","style","tabIndex","testOnly_hovered","testOnly_pressed"];function mt(e,n){var i=e.children,s=e.delayLongPress,t=e.delayPressIn,r=e.delayPressOut,a=e.disabled,o=e.onBlur,l=e.onContextMenu,v=e.onFocus,y=e.onHoverIn,m=e.onHoverOut,p=e.onKeyDown,C=e.onLongPress,D=e.onPress,M=e.onPressMove,V=e.onPressIn,Y=e.onPressOut,L=e.style,F=e.tabIndex,N=e.testOnly_hovered,u=e.testOnly_pressed,P=Xe(e,gt),K=re(N===!0),X=K[0],j=K[1],b=re(!1),ke=b[0],B=b[1],ie=re(u===!0),Ge=ie[0],ae=ie[1],O=d.useRef(null),Ue=je(n,O),Ve=d.useMemo(()=>({delayLongPress:s,delayPressStart:t,delayPressEnd:r,disabled:a,onLongPress:C,onPress:D,onPressChange:ae,onPressStart:V,onPressMove:M,onPressEnd:Y}),[s,t,r,a,C,D,V,M,Y,ae]),z=tt(O,Ve),q=z.onContextMenu,J=z.onKeyDown;yt(O,{contain:!0,disabled:a,onHoverChange:j,onHoverStart:y,onHoverEnd:m});var oe={hovered:X,focused:ke,pressed:Ge},Ye=d.useCallback(h=>{h.nativeEvent.target===O.current&&(B(!1),o!=null&&o(h))},[O,B,o]),Fe=d.useCallback(h=>{h.nativeEvent.target===O.current&&(B(!0),v!=null&&v(h))},[O,B,v]),Ke=d.useCallback(h=>{q!=null&&q(h),l!=null&&l(h)},[l,q]),Be=d.useCallback(h=>{J!=null&&J(h),p!=null&&p(h)},[p,J]),Q;return F!==void 0?Q=F:Q=a?-1:0,d.createElement(ze,$e({},P,z,{"aria-disabled":a,onBlur:Ye,onContextMenu:Ke,onFocus:Fe,onKeyDown:Be,ref:Ue,style:[a?Te.disabled:Te.active,typeof L=="function"?L(oe):L],tabIndex:Q}),typeof i=="function"?i(oe):i)}function re(e){var n=d.useState(!1),i=n[0],s=n[1];return[i||e,s]}var Te=We.create({active:{cursor:"pointer",touchAction:"manipulation"},disabled:{pointerEvents:"box-none"}}),xe=d.memo(d.forwardRef(mt));xe.displayName="Pressable";const Nt=xe;export{Nt as P};
//# sourceMappingURL=index-bd4a99ad.js.map
