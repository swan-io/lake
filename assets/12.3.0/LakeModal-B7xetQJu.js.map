{"version":3,"file":"LakeModal-B7xetQJu.js","sources":["../../../packages/shared-business/src/components/LakeModal.tsx"],"sourcesContent":["import { FocusTrap } from \"@swan-io/lake/src/components/FocusTrap\";\nimport { Icon, IconName } from \"@swan-io/lake/src/components/Icon\";\nimport { LakeButton } from \"@swan-io/lake/src/components/LakeButton\";\nimport { LakeHeading } from \"@swan-io/lake/src/components/LakeHeading\";\nimport { LoadingView } from \"@swan-io/lake/src/components/LoadingView\";\nimport { Portal } from \"@swan-io/lake/src/components/Portal\";\nimport { Pressable } from \"@swan-io/lake/src/components/Pressable\";\nimport { Context, ResponsiveContainer } from \"@swan-io/lake/src/components/ResponsiveContainer\";\nimport { ScrollView } from \"@swan-io/lake/src/components/ScrollView\";\nimport { Space } from \"@swan-io/lake/src/components/Space\";\nimport { Suspendable } from \"@swan-io/lake/src/components/Suspendable\";\nimport { TransitionView } from \"@swan-io/lake/src/components/TransitionView\";\nimport { commonStyles } from \"@swan-io/lake/src/constants/commonStyles\";\nimport {\n  ColorVariants,\n  backgroundColor,\n  breakpoints,\n  colors,\n  negativeSpacings,\n  shadows,\n  spacings,\n} from \"@swan-io/lake/src/constants/design\";\nimport { useBodyClassName } from \"@swan-io/lake/src/hooks/useBodyClassName\";\nimport { ReactNode, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { t } from \"../utils/i18n\";\n\nexport type LakeModalProps = {\n  visible: boolean;\n  title?: string;\n  icon?: IconName;\n  color?: ColorVariants;\n  children: ReactNode | ((context: Context) => ReactNode);\n  maxWidth?: number;\n  onPressClose?: () => void;\n};\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    animationFillMode: \"forwards\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalEnter: {\n    animationKeyframes: {\n      \"0%\": {\n        opacity: 0,\n        transform: \"translateY(-20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalLeave: {\n    animationKeyframes: {\n      \"100%\": {\n        opacity: 0,\n        transform: \"translateY(-20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalContainer: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  modalContentContainer: {\n    padding: spacings[24],\n    justifyContent: \"center\",\n    flexGrow: 1,\n  },\n  modalContentContainerSmall: {\n    padding: spacings[8],\n    flexGrow: 1,\n    justifyContent: \"center\",\n  },\n  modal: {\n    backgroundColor: backgroundColor.default,\n    borderRadius: 24,\n    padding: spacings[48],\n    boxShadow: shadows.modal,\n    alignSelf: \"stretch\",\n    width: \"100%\",\n    marginHorizontal: \"auto\",\n  },\n  modalSmall: {\n    borderRadius: 16,\n    backgroundColor: backgroundColor.default,\n    width: \"100%\",\n    padding: spacings[24],\n    alignSelf: \"stretch\",\n    marginHorizontal: \"auto\",\n  },\n  modalHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  modalIconTitle: {\n    ...commonStyles.fill,\n  },\n  trap: {\n    ...commonStyles.fill,\n  },\n  pressableOverlay: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  closeButton: {\n    top: negativeSpacings[16],\n    right: negativeSpacings[16],\n  },\n});\n\nexport const LakeModal = ({\n  visible,\n  icon,\n  title,\n  color = \"current\",\n  children,\n  maxWidth = 570,\n\n  onPressClose,\n}: LakeModalProps) => {\n  const [rootElement, setRootElement] = useState<Element | undefined>(() => undefined);\n\n  useEffect(() => {\n    const rootElement = document.createElement(\"div\");\n    document.body.append(rootElement);\n    setRootElement(rootElement);\n    return () => {\n      rootElement.remove();\n      setRootElement(undefined);\n    };\n  }, []);\n\n  useBodyClassName(\"ModalOpen\", { enabled: visible });\n\n  if (rootElement == null) {\n    return null;\n  }\n\n  return (\n    <Portal container={rootElement}>\n      <View aria-modal={true} style={[styles.container, !visible && styles.inert]}>\n        <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n          {visible ? <View style={styles.overlay} /> : null}\n        </TransitionView>\n\n        <Suspendable fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n          <TransitionView style={styles.fill} enter={styles.modalEnter} leave={styles.modalLeave}>\n            {visible ? (\n              <ResponsiveContainer style={styles.root} breakpoint={breakpoints.tiny}>\n                {({ large, small }) => (\n                  <FocusTrap\n                    autoFocus={true}\n                    focusLock={true}\n                    returnFocus={true}\n                    onEscapeKey={onPressClose}\n                    style={styles.trap}\n                  >\n                    <ScrollView\n                      style={styles.modalContainer}\n                      contentContainerStyle={\n                        large ? styles.modalContentContainer : styles.modalContentContainerSmall\n                      }\n                    >\n                      {onPressClose != null ? (\n                        <Pressable onPress={onPressClose} style={styles.pressableOverlay} />\n                      ) : null}\n\n                      <View\n                        role=\"dialog\"\n                        style={[large ? styles.modal : styles.modalSmall, { maxWidth }]}\n                      >\n                        <View style={styles.modalHeader}>\n                          <View style={styles.modalIconTitle}>\n                            {icon != null ? (\n                              <Icon name={icon} size={large ? 40 : 32} color={colors[color][500]} />\n                            ) : null}\n\n                            {icon != null && title != null ? <Space height={12} /> : null}\n\n                            {title != null ? (\n                              <>\n                                <LakeHeading level={2} variant=\"h3\">\n                                  {title}\n                                </LakeHeading>\n\n                                <Space height={12} />\n                              </>\n                            ) : null}\n                          </View>\n\n                          {onPressClose != null ? (\n                            <LakeButton\n                              style={styles.closeButton}\n                              mode=\"tertiary\"\n                              onPress={onPressClose}\n                              icon=\"lake-close\"\n                              ariaLabel={t(\"common.close\")}\n                            />\n                          ) : null}\n                        </View>\n\n                        {typeof children === \"function\" ? children({ large, small }) : children}\n                      </View>\n                    </ScrollView>\n                  </FocusTrap>\n                )}\n              </ResponsiveContainer>\n            ) : null}\n          </TransitionView>\n        </Suspendable>\n      </View>\n    </Portal>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","spacings","backgroundColor","shadows","commonStyles","negativeSpacings","LakeModal","visible","icon","title","color","children","maxWidth","onPressClose","rootElement","setRootElement","useState","useEffect","useBodyClassName","Portal","jsxs","View","jsx","TransitionView","Suspendable","LoadingView","ResponsiveContainer","breakpoints","large","small","FocusTrap","ScrollView","Pressable","Icon","colors","Space","Fragment","LakeHeading","LakeButton","t"],"mappings":"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"}