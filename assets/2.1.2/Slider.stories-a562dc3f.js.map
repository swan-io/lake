{"version":3,"file":"Slider.stories-a562dc3f.js","sources":["../../../packages/lake/src/components/LakeSlider.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { breakpoints } from \"../constants/design\";\nimport { Box } from \"./Box\";\nimport { LakeLabel } from \"./LakeLabel\";\nimport { LakeTextInput } from \"./LakeTextInput\";\nimport { ResponsiveContainer } from \"./ResponsiveContainer\";\n\nexport type SliderProps = {\n  label: string;\n  value: number;\n  min: number;\n  max: number;\n  step: number;\n  unit: string;\n  onChange: (value: number) => void;\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    zIndex: 1,\n  },\n  input: {\n    maxWidth: 120,\n    zIndex: 1,\n    position: \"relative\",\n  },\n});\n\nexport const sliderBreakpoint = breakpoints.tiny;\n\nexport const LakeSlider = ({ label, value, min, max, step, unit, onChange }: SliderProps) => {\n  const [dirtyValue, setDirtyValue] = useState(String(value));\n\n  useEffect(() => {\n    setDirtyValue(String(value));\n  }, [value]);\n\n  const sanitizeInput = useCallback(() => {\n    const cleanValue = Math.max(Math.min(Number(dirtyValue), max), min);\n    setDirtyValue(String(cleanValue));\n    onChange(cleanValue);\n  }, [min, max, dirtyValue, onChange]);\n\n  return (\n    <ResponsiveContainer breakpoint={sliderBreakpoint} style={styles.container}>\n      {({ large }) => (\n        <>\n          {large ? (\n            <>\n              <Box direction=\"row\" justifyContent=\"end\">\n                <View>\n                  <LakeTextInput\n                    style={styles.input}\n                    unit={unit}\n                    value={dirtyValue}\n                    onChangeText={setDirtyValue}\n                    onBlur={sanitizeInput}\n                    inputMode=\"decimal\"\n                  />\n                </View>\n              </Box>\n\n              <input\n                type=\"range\"\n                min={min}\n                max={max}\n                step={step}\n                value={value}\n                onChange={event => onChange(Number(event.target.value))}\n                style={{ backgroundSize: `${((value - min) / (max - min)) * 100}% 100%` }}\n              />\n            </>\n          ) : (\n            <LakeLabel\n              label={label}\n              render={id => (\n                <LakeTextInput\n                  id={id}\n                  unit={unit}\n                  value={dirtyValue}\n                  onChangeText={setDirtyValue}\n                  onBlur={sanitizeInput}\n                  inputMode=\"decimal\"\n                />\n              )}\n            />\n          )}\n        </>\n      )}\n    </ResponsiveContainer>\n  );\n};\n"],"names":["styles","StyleSheet","sliderBreakpoint","breakpoints","LakeSlider","label","value","min","max","step","unit","onChange","dirtyValue","setDirtyValue","useState","useEffect","sanitizeInput","useCallback","cleanValue","jsx","ResponsiveContainer","large","Fragment","jsxs","Box","View","LakeTextInput","event","LakeLabel","id"],"mappings":"klBAkBA,MAAAA,EAAAC,EAAA,OAAA,CAAiC,UAAA,CACpB,OAAA,CACD,EACV,MAAA,CACO,SAAA,IACK,OAAA,EACF,SAAA,UACE,CAEd,CAAA,EAEOC,EAAAC,EAAA,KAEAC,EAAA,CAAA,CAAA,MAAAC,EAAA,MAAAC,EAAA,IAAAC,EAAA,IAAAC,EAAA,KAAAC,EAAA,KAAAC,EAAA,SAAAC,KAAA,CACL,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,OAAAR,CAAA,CAAA,EAEAS,EAAAA,UAAA,IAAA,CACEF,EAAA,OAAAP,CAAA,CAAA,CAA2B,EAAA,CAAAA,CAAA,CAAA,EAG7B,MAAAU,EAAAC,EAAAA,YAAA,IAAA,CACE,MAAAC,EAAA,KAAA,IAAA,KAAA,IAAA,OAAAN,CAAA,EAAAJ,CAAA,EAAAD,CAAA,EACAM,EAAA,OAAAK,CAAA,CAAA,EACAP,EAAAO,CAAA,CAAmB,EAAA,CAAAX,EAAAC,EAAAI,EAAAD,CAAA,CAAA,EAGrB,OAAAQ,EAAAC,EAAA,CAAA,WAAAlB,EAAA,MAAAF,EAAA,UAAA,SAAA,CAAA,CAAA,MAAAqB,KAAAF,EAAAG,EAAA,CAAA,SAAAD,EAAAE,EAAAD,EAAA,CAAA,SAAA,CAMYH,EAAAK,EAAA,CAAA,UAAA,MAAA,eAAA,MAAA,SAAAL,EAAAM,EAAA,CAAA,SAAAN,EAEIO,EAAC,CAAA,MAAA1B,EAAA,MACe,KAAAU,EACd,MAAAE,EACO,aAAAC,EACO,OAAAG,EACN,UAAA,SACE,CAAA,CAAA,CAAA,CAAA,CAAA,EAGhBG,EAEA,QAAC,CAAA,KAAA,QACM,IAAAZ,EACL,IAAAC,EACA,KAAAC,EACA,MAAAH,EACA,SAAAqB,GAAAhB,EAAA,OAAAgB,EAAA,OAAA,KAAA,CAAA,EACsD,MAAA,CAAA,eAAA,IAAArB,EAAAC,IAAAC,EAAAD,GAAA,WAAA,CACkB,CAAA,CAC1E,CAAA,CAAA,EAAAY,EAGFS,EAAC,CAAA,MAAAvB,EACC,OAAAwB,GAAAV,EAEEO,EAAC,CAAA,GAAAG,EACC,KAAAnB,EACA,MAAAE,EACO,aAAAC,EACO,OAAAG,EACN,UAAA,SACE,CAAA,CACZ,CAAA,CAAA,CAAA,CAAA,CAAA,CAQhB;;;;;;;;;;;;;;;;;;;;;;;;"}