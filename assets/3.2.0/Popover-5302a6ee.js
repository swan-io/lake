import{S as m,e as U,r as X,k as z,p as E,N as G,_ as J,j as n,P as Q,a as Y,V as Z,q as $}from"./Space-a6afbbbf.js";import{r as a}from"./index-f1286426.js";import{u as ee}from"./useResponsive-cad86890.js";import{n as te}from"./function-a81f264e.js";import{B as ae}from"./BottomPanel-efd73b50.js";import{F as oe}from"./FocusTrap-86591623.js";import{T as ne}from"./TransitionView-8087a4d7.js";import{P}from"./index-1845dc94.js";const i=m.create({container:{...m.absoluteFillObject,pointerEvents:"none"},contents:{...m.absoluteFillObject},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popover:{pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",backgroundColor:U.accented,borderRadius:X[8],marginVertical:4,overflow:"hidden",boxShadow:z.modal},popoverContents:{alignItems:"stretch"}}),le={availableSpaceAbove:0,availableSpaceBelow:0,availableSpaceBefore:0,availableSpaceAfter:0,top:0,bottom:0,left:0,right:0,availableHeight:0,width:0},re="flex-end",ie="flex-start",se={...E.fadeAndSlideInFromBottom,leave:[E.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},ue=600,x=a.memo(({children:o,id:B,label:q,role:C="dialog",describedBy:F,matchReferenceWidth:R=!1,matchReferenceMinWidth:_=!1,onDismiss:l=te,onEscapeKey:A=l,referenceRef:u,returnFocus:k=!0,autoFocus:I=!0,visible:r,underlay:f=!0,safetyMargin:s=8,forcedMode:T})=>{const[b,v]=a.useState(null),h=a.useRef(null),{desktop:H}=ee(ue),[{availableSpaceAbove:d,availableSpaceBelow:c,availableSpaceBefore:y,availableSpaceAfter:w,top:O,bottom:W,left:D,right:j,availableHeight:S,width:g},M]=a.useState(le);a.useEffect(()=>{const e=u.current;if(e!=null&&r){const t=e.getBoundingClientRect(),p=t.top,V=window.innerHeight-t.bottom;M({availableSpaceAbove:p,availableSpaceBelow:V,availableSpaceBefore:t.left,availableSpaceAfter:window.innerWidth-t.right,top:Math.max(t.bottom,s),bottom:Math.max(window.innerHeight-t.top,s),left:Math.max(t.left,s),right:Math.max(window.innerWidth-t.right,s),availableHeight:p<=V?window.innerHeight-t.top-(t.bottom-t.top)-20:p-20,width:t.right-t.left})}},[s,u,r]),a.useEffect(()=>{const e=h.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),a.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),v(e),()=>{v(null),e.remove()}},[]);const N=a.useCallback(e=>{e.preventDefault(),l()},[l]),L=a.useCallback(({target:e})=>{const t=u.current;(!(t instanceof Element)||!(e instanceof Element)||t!==e&&!t.contains(e))&&l()},[u,l]),K=a.useCallback(e=>{e.preventDefault()},[]);return b==null?null:G(T).with(J.nullish,()=>H?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?n(ae,{visible:r,onPressClose:l,returnFocus:!1,children:typeof o=="function"?o({mode:"panel"}):o}):n(Q,{container:b,children:n(ne,{style:i.container,...se,children:r?Y(Z,{style:i.contents,children:[f?n(P,{ref:h,style:i.underlay,onPress:N,role:"button","aria-label":"Close"}):null,S>0?n($,{style:[i.popover,d<=c&&{top:O},d>c&&{bottom:W},y<=w&&{left:D},y>w&&{right:j},_&&{minWidth:g},R&&{width:g},{maxHeight:S}],contentContainerStyle:[i.popoverContents,{justifyContent:d>c?re:ie}],id:B,role:C,"aria-describedby":F,"aria-label":q,children:n(oe,{focusLock:!0,returnFocus:k,autoFocus:I,onEscapeKey:A,onClickOutside:f?void 0:L,children:n(P,{tabIndex:-1,onPress:K,style:i.defaultCursor,children:typeof o=="function"?o({mode:"dropdown"}):o})})}):null]}):null})})});try{x.displayName="Popover",x.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"(() => void)"}},onEscapeKey:{defaultValue:null,description:"",name:"onEscapeKey",required:!1,type:{name:"(() => void)"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<unknown>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}}}}}catch{}export{x as P};
//# sourceMappingURL=Popover-5302a6ee.js.map
