{"version":3,"file":"WithPartnerAccentColor-jC1v7CuH.js","sources":["../../../packages/lake/src/components/WithPartnerAccentColor.tsx"],"sourcesContent":["import { darken, meetsContrastGuidelines, setLightness, shade } from \"polished\";\nimport { ReactNode, useLayoutEffect, useRef } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { ColorScale } from \"../constants/design\";\nimport { isNotNullish } from \"../utils/nullish\";\n\ntype Props = {\n  color: string;\n  children: ReactNode;\n  scoped?: boolean;\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexGrow: 1,\n    flexBasis: \"0%\",\n  },\n});\n\nconst getContrastColor = (color: string) => {\n  if (meetsContrastGuidelines(\"#FFF\", color).AALarge) {\n    return \"#fff\";\n  }\n\n  let text = color;\n  while (!meetsContrastGuidelines(text, color).AALarge) {\n    text = darken(0.25, text);\n  }\n  return text;\n};\n\nexport const WithPartnerAccentColor = ({ color, scoped = false, children }: Props) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    try {\n      if (isNotNullish(containerRef.current)) {\n        const element = containerRef.current as unknown as HTMLElement;\n        let scalePower = 1;\n        while (\n          !meetsContrastGuidelines(setLightness(Math.pow(0.5, scalePower), color), \"#fff\").AALarge\n        ) {\n          scalePower += 0.1;\n        }\n\n        const colorScale: ColorScale = {\n          0: setLightness(Math.pow(1.0, scalePower), color),\n          50: setLightness(Math.pow(0.97, scalePower), color),\n          100: setLightness(Math.pow(0.9, scalePower), color),\n          200: setLightness(Math.pow(0.8, scalePower), color),\n          300: setLightness(Math.pow(0.7, scalePower), color),\n          400: setLightness(Math.pow(0.6, scalePower), color),\n          500: setLightness(Math.pow(0.5, scalePower), color),\n          600: setLightness(Math.pow(0.4, scalePower), color),\n          700: setLightness(Math.pow(0.3, scalePower), color),\n          800: setLightness(Math.pow(0.2, scalePower), color),\n          900: setLightness(Math.pow(0.1, scalePower), color),\n          primary: color,\n          contrast: getContrastColor(color),\n          secondary: shade(0.2, color),\n        };\n\n        const rootElement = scoped ? element : element.ownerDocument.documentElement;\n\n        rootElement.style.setProperty(\"--color-partner-900\", colorScale[900], \"\");\n        rootElement.style.setProperty(\"--color-partner-800\", colorScale[800], \"\");\n        rootElement.style.setProperty(\"--color-partner-700\", colorScale[700], \"\");\n        rootElement.style.setProperty(\"--color-partner-600\", colorScale[600], \"\");\n        rootElement.style.setProperty(\"--color-partner-500\", colorScale[500], \"\");\n        rootElement.style.setProperty(\"--color-partner-400\", colorScale[400], \"\");\n        rootElement.style.setProperty(\"--color-partner-300\", colorScale[300], \"\");\n        rootElement.style.setProperty(\"--color-partner-200\", colorScale[200], \"\");\n        rootElement.style.setProperty(\"--color-partner-100\", colorScale[100], \"\");\n        rootElement.style.setProperty(\"--color-partner-50\", colorScale[50], \"\");\n        rootElement.style.setProperty(\"--color-partner-primary\", colorScale.primary, \"\");\n        rootElement.style.setProperty(\"--color-partner-secondary\", colorScale.secondary, \"\");\n        rootElement.style.setProperty(\"--color-partner-contrast\", colorScale.contrast, \"\");\n      }\n    } catch (err) {\n      // will default to white label color\n    }\n  }, [color, scoped]);\n\n  return (\n    <View ref={containerRef} style={styles.container}>\n      {children}\n    </View>\n  );\n};\n"],"names":["styles","StyleSheet","getContrastColor","color","meetsContrastGuidelines","text","darken","WithPartnerAccentColor","scoped","children","containerRef","useRef","useLayoutEffect","isNotNullish","element","scalePower","setLightness","colorScale","shade","rootElement","jsx","View"],"mappings":"yKAYA,MAAAA,EAAAC,EAAA,OAAA,CAAiC,UAAA,CACpB,SAAA,EACC,UAAA,IACC,CAEf,CAAA,EAEAC,EAAAC,GAAA,CACE,GAAAC,EAAA,OAAAD,CAAA,EAAA,QACE,MAAA,OAGF,IAAAE,EAAAF,EACA,KAAA,CAAAC,EAAAC,EAAAF,CAAA,EAAA,SACEE,EAAAC,EAAA,IAAAD,CAAA,EAEF,OAAAA,CACF,EAEOE,EAAA,CAAA,CAAA,MAAAJ,EAAA,OAAAK,EAAA,GAAA,SAAAC,CAAA,IAAA,CACL,MAAAC,EAAAC,SAAA,IAAA,EAEAC,OAAAA,EAAAA,gBAAA,IAAA,CACE,GAAA,CACE,GAAAC,EAAAH,EAAA,OAAA,EAAA,CACE,MAAAI,EAAAJ,EAAA,QACA,IAAAK,EAAA,EACA,KAAA,CAAAX,EAAAY,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EAAA,MAAA,EAAA,SAGEY,GAAA,GAGF,MAAAE,EAAA,CAA+B,EAAAD,EAAA,KAAA,IAAA,EAAAD,CAAA,EAAAZ,CAAA,EACmB,GAAAa,EAAA,KAAA,IAAA,IAAAD,CAAA,EAAAZ,CAAA,EACE,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,IAAAa,EAAA,KAAA,IAAA,GAAAD,CAAA,EAAAZ,CAAA,EACA,QAAAA,EACzC,SAAAD,EAAAC,CAAA,EACuB,UAAAe,EAAA,GAAAf,CAAA,CACL,EAG7BgB,EAAAX,EAAAM,EAAAA,EAAA,cAAA,gBAEAK,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,sBAAAF,EAAA,GAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,qBAAAF,EAAA,EAAA,EAAA,EAAA,EACAE,EAAA,MAAA,YAAA,0BAAAF,EAAA,QAAA,EAAA,EACAE,EAAA,MAAA,YAAA,4BAAAF,EAAA,UAAA,EAAA,EACAE,EAAA,MAAA,YAAA,2BAAAF,EAAA,SAAA,EAAA,CAAiF,CACnF,MAAA,CACY,CAEd,EAAA,CAAAd,EAAAK,CAAA,CAAA,EAGFY,EAAAC,EAAA,CAAA,IAAAX,EAAA,MAAAV,EAAA,UAAA,SAAAS,CAAA,CAAA,CAKF"}