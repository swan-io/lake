import{s as b,g as G,r as J,l as Q,u as x,N as Y,v as Z,a as n,P as $,j as ee,V as te,w as ae}from"./Space-DIU66NF3.js";import{r as a}from"./index-CBqU2yxZ.js";import{u as oe}from"./useResponsive-DW34VTCx.js";import{n as ne}from"./function-Vf2Vyrzm.js";import{B as le}from"./BottomPanel-Gllz2Mnd.js";import{F as re}from"./FocusTrap-De6CoX29.js";import{T as ie}from"./TransitionView-px9Vo-l4.js";import{P as B}from"./index-5m6Gx_BB.js";const u=b.create({container:{...b.absoluteFillObject,pointerEvents:"none"},contents:{...b.absoluteFillObject},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popover:{pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",backgroundColor:G.accented,borderRadius:J[8],marginVertical:4,overflow:"hidden",boxShadow:Q.modal},popoverContents:{alignItems:"stretch"}}),se={availableSpaceAbove:0,availableSpaceBelow:0,availableSpaceBefore:0,availableSpaceAfter:0,top:0,bottom:0,left:0,right:0,availableHeight:0,width:0},ue="flex-end",de="flex-start",ce={...x.fadeAndSlideInFromBottom,leave:[x.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},pe=600,q=a.memo(({children:o,id:C,label:F,role:R="dialog",describedBy:_,matchReferenceWidth:T=!1,matchReferenceMinWidth:A=!1,onDismiss:l=ne,onEscapeKey:I=l,referenceRef:c,returnFocus:O=!0,autoFocus:k=!0,visible:r,underlay:v=!0,safetyMargin:d=8,forcedMode:H,field:i=!1})=>{const[h,y]=a.useState(null),w=a.useRef(null),{desktop:W}=oe(pe),[{availableSpaceAbove:p,availableSpaceBelow:m,availableSpaceBefore:V,availableSpaceAfter:g,top:D,bottom:j,left:M,right:N,availableHeight:S,width:E},L]=a.useState(se);a.useEffect(()=>{var s;const e=c.current;if(e!=null&&r){const t=e.getBoundingClientRect(),f=t.top,P=window.innerHeight-t.bottom,z=((s=window.visualViewport)==null?void 0:s.offsetTop)??0;L({availableSpaceAbove:f,availableSpaceBelow:P,availableSpaceBefore:t.left,availableSpaceAfter:window.innerWidth-t.right,top:z+Math.max(t.bottom,d),bottom:Math.max(window.innerHeight-t.top,d),left:Math.max(t.left,d),right:Math.max(window.innerWidth-t.right,d),availableHeight:i||f<=P?window.innerHeight-t.top-(t.bottom-t.top)-20:f-20,width:t.right-t.left})}},[d,c,r,i]),a.useEffect(()=>{const e=w.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),a.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),y(e),()=>{y(null),e.remove()}},[]);const K=a.useCallback(e=>{e.preventDefault(),l()},[l]),U=a.useCallback(({target:e})=>{const s=c.current;(!(s instanceof Element)||!(e instanceof Element)||s!==e&&!s.contains(e))&&l()},[c,l]),X=a.useCallback(e=>{e.preventDefault()},[]);return h==null?null:Y(H).with(Z.nullish,()=>W?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?n(le,{visible:r,onPressClose:l,returnFocus:!1,children:typeof o=="function"?o({mode:"panel"}):o}):n($,{container:h,children:n(ie,{style:u.container,...ce,children:r?ee(te,{style:u.contents,children:[v?n(B,{ref:w,style:u.underlay,onPress:K,"aria-label":"Close"}):null,S>0?n(ae,{style:[u.popover,(i||p<=m)&&{top:D},!i&&p>m&&{bottom:j},V<=g&&{left:M},V>g&&{right:N},A&&{minWidth:E},T&&{width:E},{maxHeight:i?void 0:S}],contentContainerStyle:[u.popoverContents,{justifyContent:!i&&p>m?ue:de}],id:C,role:R,"aria-describedby":_,"aria-label":F,children:n(re,{focusLock:!0,returnFocus:O,autoFocus:k,onEscapeKey:I,onClickOutside:v?void 0:U,children:n(B,{tabIndex:-1,onPress:X,style:u.defaultCursor,children:typeof o=="function"?o({mode:"dropdown"}):o})})}):null]}):null})})});try{q.displayName="Popover",q.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"(() => void)"}},onEscapeKey:{defaultValue:null,description:"",name:"onEscapeKey",required:!1,type:{name:"(() => void)"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<unknown>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}},field:{defaultValue:null,description:"",name:"field",required:!1,type:{name:"boolean"}}}}}catch{}export{q as P};
//# sourceMappingURL=Popover-DO2mij7y.js.map
