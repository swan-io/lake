import{S as le,c as d,t as Q,r as Z,d as _,e as ee,h as ae,n as se,g as ce,i as s,j as h,V as D,a as e,T as C,b as y,m as ue,F as j,L as de}from"./Space-440b76c9.js";import{K as he}from"./index-b1631bd3.js";import{r as i}from"./index-ebeaab24.js";import{Q as pe,H as M,B as fe}from"./index-d72389eb.js";import{u as ne,a as me}from"./useMergeRefs-f3bffa94.js";import{n as we}from"./function-fbf93c31.js";import{F as ge}from"./FocusTrap-9569bd56.js";import{I as $}from"./Icon-9753edde.js";import{L as J}from"./Link-3e98713f.js";import{a as be}from"./Pressable-66d9a52f.js";import{T as ye}from"./TransitionView-772fdbde.js";import{S as Fe}from"./_StoriesComponents-c0e841df.js";import"./extends-98964cd2.js";import"./with-selector-6c55c874.js";import"./index-1cb3eff1.js";import"./Boxed-dafb0729.js";import"./array-b3630b94.js";import"./Svg-a6ebee14.js";const ke=40,o=le.create({container:{borderBottomWidth:1,borderBottomColor:d.gray[100],zIndex:10},link:{...Q.medium,position:"relative",color:d.gray[700],height:ke,whiteSpace:"nowrap",display:"flex",flexDirection:"row",alignItems:"center"},activeLink:{color:d.current[500],boxShadow:`inset 0 -2px ${d.gray[700]}`},hoveredLink:{boxShadow:`inset 0 -2px ${d.gray[700]}`},underline:{position:"absolute",bottom:0,height:2,width:1,backgroundColor:d.current[500]},animatedUnderline:{transformOrigin:"0 0",transition:"200ms ease-in-out transform"},placeholder:{position:"absolute",top:0,left:0,right:0,visibility:"hidden",flexDirection:"row",alignItems:"flex-end",overflow:"hidden",pointerEvents:"none"},count:{...Q.smallRegular,color:d.current[500],backgroundColor:d.current[50],borderColor:d.current[100],borderWidth:1,borderRadius:Z[4],paddingHorizontal:_[4],minWidth:_[24],display:"inline-block",textAlign:"center"},dropdownHandleContainer:{alignItems:"center",justifyContent:"center",alignSelf:"stretch"},dropdownPlacement:{position:"absolute",right:0,top:"100%"},dropdown:{position:"absolute",right:0,top:"100%",backgroundColor:ee.accented,borderRadius:Z[8],boxShadow:ae.modal,paddingVertical:_[8]},dropdownLink:{...Q.regular,paddingHorizontal:_[16],paddingVertical:_[8],whiteSpace:"nowrap"},dropdownLinkTextHovered:{backgroundColor:d.gray[50]},dropdownLinkTextActive:{boxShadow:`inset 3px 0 ${d.current.primary}`,color:d.current.primary},separator:{position:"absolute",top:0,left:se[16],bottom:0,width:1,backgroundColor:d.gray[100]},sticky:{backgroundColor:ee.default,position:"sticky",top:-1}}),ve=({tabs:p,onHoverStart:S,onHoverEnd:H,onLinkFocus:E,onLinkBlur:F,onLinkPress:c})=>{const t=i.useRef(null);return ne(t,{onHoverStart:S,onHoverEnd:H}),e(D,{role:"menu",style:o.dropdown,ref:t,children:p.map(({url:w,label:f})=>e(J,{to:w,onFocus:E,onBlur:F,onPress:c,role:"menuitem",ariaCurrentValue:"location",style:({active:g,hovered:I})=>[o.dropdownLink,g&&o.dropdownLinkTextActive,I&&o.dropdownLinkTextHovered],children:f},w))})},Te=new Set(["ForcedOpen","OpenFromFocus"]),Ce=new Set(["Open","ForcedOpen","OpenFromFocus"]),Le=new Set(["ForcedOpen"]),Se=i.forwardRef(({tabs:p,otherLabel:S,currentUrl:H},E)=>{const[F,c]=i.useReducer((r,n)=>pe([n,r]).returnType().with(["ForceToggle","Closed"],["ForceToggle","Open"],["ForceToggle","ForcedClosed"],()=>"ForcedOpen").with(["ForceToggle","OpenFromFocus"],["ForceToggle","ForcedOpen"],()=>"ForcedClosed").with(["ForceClose",M.any],()=>"ForcedClosed").with(["FocusHandle","ForcedClosed"],()=>"Closed").with(["Open","ForcedOpen"],["FocusHandle","ForcedOpen"],["Close","ForcedOpen"],()=>"ForcedOpen").with(["Open",M.any],()=>"Open").with(["FocusHandle",M.any],()=>"OpenFromFocus").with(["Close",M.any],()=>"Closed").exhaustive(),"Closed"),t=i.useRef(void 0),w=i.useRef(null),f=i.useRef(null),g=i.useRef(null),{onHandleFocus:I,onLinkFocus:P,onAnyBlur:V,onHoverStart:U,onHoverEnd:q,onPress:K,onPressOutside:O,onEscapeKey:A}=i.useMemo(()=>({onHandleFocus:r=>{if(ce(f.current))return;g.current=Date.now();const n=f.current,a=r;n.contains(a.relatedTarget)||(s(t.current)&&clearTimeout(t.current),c("FocusHandle"))},onLinkFocus:()=>{s(t.current)&&clearTimeout(t.current),c("Open")},onAnyBlur:()=>{s(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(()=>{c("Close")},300)},onHoverStart:()=>{s(t.current)&&clearTimeout(t.current),c("Open")},onHoverEnd:()=>{s(t.current)&&clearTimeout(t.current),t.current=window.setTimeout(()=>{c("Close")},300)},onPress:()=>{g.current!=null&&Date.now()-g.current<32||(s(t.current)&&clearTimeout(t.current),c("ForceToggle"))},onPressOutside:r=>{s(w.current)&&w.current.contains(r.target)||(s(t.current)&&clearTimeout(t.current),c("ForceClose"),t.current=window.setTimeout(()=>{c("Close")},300))},onEscapeKey:()=>{s(t.current)&&clearTimeout(t.current),c("ForceClose"),t.current=window.setTimeout(()=>{c("Close")},300)}}),[]);i.useEffect(()=>()=>{s(t.current)&&clearTimeout(t.current)},[]);const B=Ce.has(F),z=Te.has(F),v=Le.has(F);ne(w,{onHoverStart:U,onHoverEnd:q});const R=me(f,E),X=p.find(({url:r})=>r===H);return h(D,{style:o.dropdownHandleContainer,ref:R,children:[h(be,{ref:w,role:"button","aria-expanded":B,"aria-haspopup":"true",onFocus:I,onBlur:V,onPress:K,style:({hovered:r})=>[o.link,s(X)?o.activeLink:r?o.hoveredLink:null],children:[e(C,{children:S}),e(y,{width:8}),e(C,{style:o.count,children:p.length}),e(y,{width:4}),e($,{name:"chevron-down-filled",size:12})]}),e(ye,{...ue.fadeAndSlideInFromBottom,style:o.dropdownPlacement,children:B?e(ge,{autoFocus:z,focusLock:v,returnFocus:v,onClickOutside:O,onEscapeKey:v?A:void 0,children:e(ve,{tabs:p,onHoverStart:U,onHoverEnd:q,onLinkFocus:P,onLinkBlur:V,onLinkPress:A})}):null})]})}),G=({tabs:p,otherLabel:S,hideIfSingleItem:H=!0,sticky:E=!1,padding:F})=>{const c=i.useRef(null),t=i.useRef(null),w=i.useRef(null),f=i.useRef({}),g=i.useRef({}),[{left:I,width:P},V]=i.useState({left:0,width:0}),[U,q]=i.useState(!1),[[K,O],A]=i.useState([[],[]]),B=he(),{path:z}=B,v=B.toString();i.useEffect(()=>{if(s(f.current)){const r=Object.entries(f.current),n=c.current;for(const[a,u]of r)if("/"+z.join("/")===a&&s(u)&&s(n)){u.measureLayout(n,(m,k,x)=>{V({left:m-(F??0),width:x})},we);return}}V({left:0,width:0})},[z,K,O,F]),i.useEffect(()=>{q(P>0)},[P]);const R=i.useCallback(({width:r})=>{const n=p.map(l=>{if(g.current){const b=g.current[l.url];if(s(b)){const Y=b.getBoundingClientRect().width;return{tab:l,width:Y+32}}else return{tab:l,width:0}}else return{tab:l,width:0}}),a=[],u=[];let m=0;n.forEach(l=>{if(m+=l.width,m<r)a.push({...l.tab,width:l.width});else if(v.startsWith(l.tab.url)){for(;a.length!==0&&a.reduce((b,T)=>b+T.width,0)+(l.width+16)>=r;){const b=a.pop();s(b)&&(u.unshift(b),m-=b.width)}a.push({...l.tab,width:l.width})}else u.push({...l.tab,width:l.width})});const k=w.current;let x=100;s(k)&&(x=k.getBoundingClientRect().width);const L=a.findIndex(l=>v.startsWith(l.url));if(L!==-1){const l=a[L],b=(l==null?void 0:l.width)??0,T=[...a.slice(0,L),...a.slice(L+1)];for(;T.length!==0&&T.reduce((W,ie)=>W+ie.width,0)+b+(u.length>=1?x:0)>=r;){const W=T.pop();s(W)&&u.unshift(W)}const Y=[...T.slice(0,L),...l!=null?[l]:[],...T.slice(L)];A([Y,u])}else A([a,u])},[p,v]),X=i.useCallback(({target:r,nativeEvent:{layout:{width:n}}})=>{R({container:r,width:n})},[R]);return i.useLayoutEffect(()=>{const r=t.current;if(r){const n=r,a=n.getBoundingClientRect().width;R({container:n,width:a})}},[R]),p.length<=1&&H?null:h(fe,{alignItems:"center",direction:"row",role:"tablist",ref:c,style:[o.container,E&&o.sticky,{paddingHorizontal:F}],children:[h(D,{style:o.placeholder,"aria-hidden":!0,ref:t,onLayout:X,children:[p.map(({label:r,url:n,icon:a,count:u})=>h(i.Fragment,{children:[h(J,{ref:m=>{g.current&&(g.current[n]=m)},to:n,style:({active:m,hovered:k})=>[o.link,m?o.activeLink:k?o.hoveredLink:null],children:[s(a)&&h(j,{children:[e($,{name:a,size:16,color:"currentColor"}),e(y,{width:8})]}),e(C,{children:r}),u!=null?h(j,{children:[e(y,{width:8}),e(C,{style:o.count,children:u})]}):null]}),e(y,{width:32})]},n)),h(de,{ref:w,style:o.link,children:[e(C,{children:S}),e(y,{width:8}),e(C,{style:o.count,children:p.length}),e(y,{width:4}),e($,{name:"chevron-down-filled",size:12})]})]}),K.map(({label:r,url:n,icon:a,withSeparator:u,count:m})=>h(i.Fragment,{children:[h(J,{role:"tab",ref:k=>{f.current&&(f.current[n]=k)},to:n,style:({active:k,hovered:x})=>[o.link,k?o.activeLink:x?o.hoveredLink:null],children:[u===!0&&e(D,{style:o.separator,role:"none"}),s(a)&&h(j,{children:[e($,{name:a,size:16,color:"currentColor"}),e(y,{width:8})]}),e(C,{children:r}),m!=null?h(j,{children:[e(y,{width:8}),e(C,{style:o.count,children:m})]}):null]}),e(y,{width:32})]},n)),O.length>0?e(Se,{ref:r=>{O.forEach(n=>{f.current&&(f.current[n.url]=r)})},tabs:O,currentUrl:v,otherLabel:S}):null,U&&e(D,{style:[o.underline,o.animatedUnderline,{transform:`translateX(${I}px) scaleX(${P})`}]})]})};try{G.displayName="TabView",G.__docgenInfo={description:"",displayName:"TabView",props:{tabs:{defaultValue:null,description:"",name:"tabs",required:!0,type:{name:"Tab[]"}},otherLabel:{defaultValue:null,description:"",name:"otherLabel",required:!0,type:{name:"string"}},hideIfSingleItem:{defaultValue:{value:"true"},description:"",name:"hideIfSingleItem",required:!1,type:{name:"boolean"}},padding:{defaultValue:null,description:"",name:"padding",required:!1,type:{name:"enum",value:[{value:"16"},{value:"4"},{value:"8"},{value:"12"},{value:"20"},{value:"24"},{value:"32"},{value:"40"},{value:"48"},{value:"72"},{value:"96"}]}},sticky:{defaultValue:{value:"false"},description:"",name:"sticky",required:!1,type:{name:"boolean"}}}}}catch{}const Me={title:"Interactivity/TabView",component:G},N=()=>e(Fe,{title:"TabView",description:"You can reduce window's width to see behavior when there isn't enough space to display all tabs",children:e(G,{tabs:[{label:"SEPA Credit Transfers",url:"/simulator/sct",count:2},{label:"SEPA Direct Debits",url:"/simulator/sdd",icon:"building-regular"},{label:"Cards",url:"/simulator/cards",withSeparator:!0},{label:"Apple Pay/Google Pay",url:"/simulator/apple-pay-google-pay"},{label:"Account holders",url:"/simulator/account-holders"},{label:"Merchant acquiring",url:"/simulator/merchant-acquiring"}],otherLabel:"More"})});var te,re,oe;N.parameters={...N.parameters,docs:{...(te=N.parameters)==null?void 0:te.docs,source:{originalSource:`() => {
  return <StoryBlock title="TabView" description="You can reduce window's width to see behavior when there isn't enough space to display all tabs">
      <TabView tabs={[{
      label: "SEPA Credit Transfers",
      url: "/simulator/sct",
      count: 2
    }, {
      label: "SEPA Direct Debits",
      url: "/simulator/sdd",
      icon: "building-regular"
    }, {
      label: "Cards",
      url: "/simulator/cards",
      withSeparator: true
    }, {
      label: "Apple Pay/Google Pay",
      url: "/simulator/apple-pay-google-pay"
    }, {
      label: "Account holders",
      url: "/simulator/account-holders"
    }, {
      label: "Merchant acquiring",
      url: "/simulator/merchant-acquiring"
    }]} otherLabel="More" />
    </StoryBlock>;
}`,...(oe=(re=N.parameters)==null?void 0:re.docs)==null?void 0:oe.source}}};const Ne=["Default"];export{N as Default,Ne as __namedExportsOrder,Me as default};
//# sourceMappingURL=TabView.stories-07652686.js.map
