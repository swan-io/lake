{"version":3,"file":"Switch-251d8b22.js","sources":["../../../packages/lake/src/hooks/useAnimatedValue.ts","../../../packages/lake/src/components/Switch.tsx"],"sourcesContent":["import { MutableRefObject, useRef } from \"react\";\nimport { Animated } from \"react-native\";\n\nconst UNSET = Symbol(\"unset\");\n\nexport const useAnimatedValue = (value: number): Animated.Value => {\n  const ref = useRef<Animated.Value | typeof UNSET>(UNSET);\n\n  if (ref.current === UNSET) {\n    ref.current = new Animated.Value(value);\n  }\n\n  return (ref as MutableRefObject<Animated.Value>).current;\n};\n","import { forwardRef, memo, useEffect, useRef } from \"react\";\nimport { Animated, Pressable, StyleSheet, View } from \"react-native\";\nimport { backgroundColor, colors, shadows } from \"../constants/design\";\nimport { useAnimatedValue } from \"../hooks/useAnimatedValue\";\nimport { interpolate } from \"../utils/math\";\nimport { Icon } from \"./Icon\";\n\nconst WIDTH = 36;\nconst BUTTON_SIZE = 16;\nconst PADDING = 2;\n\nconst styles = StyleSheet.create({\n  base: {\n    backgroundColor: colors.gray[300],\n    borderRadius: 10,\n    height: 20,\n    width: WIDTH,\n    boxSizing: \"content-box\",\n    transitionProperty: \"background-color\",\n    transitionDuration: \"300ms\",\n    boxShadow: \"inset 0 0 0 1px rgba(0, 0, 0, 0.2)\",\n  },\n  active: {\n    backgroundColor: colors.positive[500],\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  opaque: {\n    opacity: 1,\n  },\n  button: {\n    alignItems: \"center\",\n    backgroundColor: backgroundColor.accented,\n    borderRadius: 8,\n    boxShadow: shadows.tile,\n    height: 16,\n    justifyContent: \"center\",\n    left: 0,\n    position: \"absolute\",\n    top: PADDING,\n    width: BUTTON_SIZE,\n  },\n  icon: {\n    opacity: 0,\n    transitionProperty: \"opacity\",\n    transitionDuration: \"300ms\",\n  },\n  shadow: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: 10,\n    boxShadow: shadows.tile,\n    opacity: 0,\n    transitionProperty: \"opacity\",\n    transitionDuration: \"300ms\",\n  },\n});\n\ntype Props = {\n  value: boolean;\n  onValueChange?: (value: boolean) => void;\n  disabled?: boolean;\n};\n\nexport const Switch = memo(\n  forwardRef<View, Props>(({ value, disabled = false, onValueChange }, ref) => {\n    const animatedValue = value ? 1 : 0;\n    const animation = useAnimatedValue(animatedValue);\n    const buttonRef = useRef<View>(null);\n\n    useEffect(() => {\n      const interpolateValue = interpolate({\n        inputRange: [0, 1],\n        outputRange: [PADDING, WIDTH - BUTTON_SIZE - PADDING],\n      });\n\n      const id = animation.addListener(({ value }) => {\n        if (buttonRef.current instanceof HTMLElement) {\n          buttonRef.current.style.transform = `translateX(${interpolateValue(value)}px)`;\n        }\n      });\n\n      return () => {\n        animation.removeListener(id);\n      };\n    }, [animation]);\n\n    useEffect(() => {\n      Animated.spring(animation, {\n        bounciness: 6,\n        speed: 25,\n        toValue: animatedValue,\n        useNativeDriver: false,\n      }).start();\n    }, [animation, animatedValue]);\n\n    return (\n      <Pressable\n        ref={ref}\n        role=\"switch\"\n        disabled={disabled}\n        onPress={() => onValueChange?.(!value)}\n      >\n        {({ hovered }) => (\n          <>\n            <View style={[styles.shadow, hovered && styles.opaque]} />\n\n            <View style={[styles.base, value && styles.active, disabled && styles.disabled]}>\n              <View ref={buttonRef} style={styles.button}>\n                <Icon\n                  color={colors.positive[400]}\n                  name=\"checkmark-filled\"\n                  size={10}\n                  style={[styles.icon, value && styles.opaque]}\n                />\n              </View>\n            </View>\n          </>\n        )}\n      </Pressable>\n    );\n  }),\n);\n"],"names":["UNSET","useAnimatedValue","value","ref","useRef","Animated","WIDTH","BUTTON_SIZE","PADDING","styles","StyleSheet","colors","backgroundColor","shadows","Switch","memo","forwardRef","disabled","onValueChange","animatedValue","animation","buttonRef","useEffect","interpolateValue","interpolate","id","value2","jsx","Pressable","hovered","jsxs","Fragment","View","Icon"],"mappings":"6RAGA,MAAMA,EAAQ,OAAO,OAAO,EAEfC,EAAoBC,GAAkC,CAC3D,MAAAC,EAAMC,SAAsCJ,CAAK,EAEnD,OAAAG,EAAI,UAAYH,IAClBG,EAAI,QAAU,IAAIE,EAAS,MAAMH,CAAK,GAGhCC,EAAyC,OACnD,ECNAG,EAAA,GACAC,EAAA,GACAC,EAAA,EAEAC,EAAAC,EAAA,OAAA,CAAiC,KAAA,CACzB,gBAAAC,EAAA,KAAA,GAAA,EAC4B,aAAA,GAClB,OAAA,GACN,MAAAL,EACD,UAAA,cACI,mBAAA,mBACS,mBAAA,QACA,UAAA,oCACT,EACb,OAAA,CACQ,gBAAAK,EAAA,SAAA,GAAA,CAC8B,EACtC,SAAA,CACU,QAAA,EACC,EACX,OAAA,CACQ,QAAA,CACG,EACX,OAAA,CACQ,WAAA,SACM,gBAAAC,EAAA,SACqB,aAAA,EACnB,UAAAC,EAAA,KACK,OAAA,GACX,eAAA,SACQ,KAAA,EACV,SAAA,WACI,IAAAL,EACL,MAAAD,CACE,EACT,KAAA,CACM,QAAA,EACK,mBAAA,UACW,mBAAA,OACA,EACtB,OAAA,CACQ,SAAA,WACI,MAAA,OACH,OAAA,OACC,aAAA,GACM,UAAAM,EAAA,KACK,QAAA,EACV,mBAAA,UACW,mBAAA,OACA,CAExB,CAAA,EAQOC,EAAAC,EAAA,KAAeC,EAAA,WAAA,CAAA,CAAA,MAAAd,EAAA,SAAAe,EAAA,GAAA,cAAAC,CAAA,EAAAf,IAAA,CAElB,MAAAgB,EAAAjB,EAAA,EAAA,EACAkB,EAAAnB,EAAAkB,CAAA,EACAE,EAAAjB,SAAA,IAAA,EAEAkB,OAAAA,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAAC,EAAA,CAAqC,WAAA,CAAA,EAAA,CAAA,EAClB,YAAA,CAAAhB,EAAAF,EAAAC,EAAAC,CAAA,CACmC,CAAA,EAGtDiB,EAAAL,EAAA,YAAA,CAAA,CAAA,MAAAM,KAAA,CACEL,EAAA,mBAAA,cACEA,EAAA,QAAA,MAAA,UAAA,cAAAE,EAAAG,CAAA,OACF,CAAA,EAGF,MAAA,IAAA,CACEN,EAAA,eAAAK,CAAA,CAA2B,CAC7B,EAAA,CAAAL,CAAA,CAAA,EAGFE,EAAAA,UAAA,IAAA,CACEjB,EAAA,OAAAe,EAAA,CAA2B,WAAA,EACb,MAAA,GACL,QAAAD,EACE,gBAAA,EACQ,CAAA,EAAA,MAAA,CACV,EAAA,CAAAC,EAAAD,CAAA,CAAA,EAGXQ,EACEC,EAAC,CAAA,IAAAzB,EACC,KAAA,SACK,SAAAc,EACL,QAAA,IAAAC,GAAA,YAAAA,EAAA,CAAAhB,GACqC,SAAA,CAAA,CAAA,QAAA2B,CAAA,IAAAC,EAAAC,EAAA,CAAA,SAAA,CAIjCJ,EAAAK,EAAA,CAAA,MAAA,CAAAvB,EAAA,OAAAoB,GAAApB,EAAA,MAAA,EAAA,EAAwDkB,EAAAK,EAAA,CAAA,MAAA,CAAAvB,EAAA,KAAAP,GAAAO,EAAA,OAAAQ,GAAAR,EAAA,QAAA,EAAA,SAAAkB,EAAAK,EAAA,CAAA,IAAAX,EAAA,MAAAZ,EAAA,OAAA,SAAAkB,EAIpDM,EAAC,CAAA,MAAAtB,EAAA,SAAA,GAAA,EAC2B,KAAA,mBACrB,KAAA,GACC,MAAA,CAAAF,EAAA,KAAAP,GAAAO,EAAA,MAAA,CACqC,CAAA,CAAA,CAAA,CAAA,CAAA,CAGjD,EAAA,CACF,CAAA,CAEJ,CAAA,CAGN"}