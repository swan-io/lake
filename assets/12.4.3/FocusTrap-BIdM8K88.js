import{i as v,f as w,z as q,j as S,V as M}from"./ScrollView-QW6wCPfG.js";import{r as e}from"./iframe-BcXOmEjy.js";import{f as g,l as F}from"./array-BfAlyugE.js";const j=(t,r)=>{const o=e.useRef(t);e.useEffect(()=>{o.current=t},[t]),e.useEffect(()=>{const i=window.setInterval(()=>o.current(i),r);return()=>window.clearInterval(i)},[r])},H=({containerRef:t,onClickOutside:r,onFocusOutside:o})=>{const i=e.useRef(!1),a=e.useCallback(s=>{const u=s.target;return v(t.current)&&t.current instanceof HTMLElement&&t.current.contains(u)},[t]);e.useEffect(()=>{if(w(r))return;const s=c=>{a(c)||(i.current=!0)},u=c=>{!a(c)&&i.current&&(r==null||r(c)),i.current=!1};return document.addEventListener("mousedown",s,!0),document.addEventListener("mouseup",u,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("touchend",u,!0),()=>{document.removeEventListener("mousedown",s,!0),document.removeEventListener("mouseup",u,!0),document.removeEventListener("touchstart",s,!0),document.removeEventListener("touchend",u,!0)}},[a,r]),e.useEffect(()=>{if(w(o))return;const s=u=>{a(u)||o==null||o(u)};return document.addEventListener("focusin",s,!0),()=>{document.removeEventListener("focusin",s,!0)}},[a,o])},x=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'].join(", "),L=(t=document.documentElement,r=!0)=>(r&&t.matches(x)?[t]:[]).concat(Array.from(t.querySelectorAll(x)));let y=0;const C=({ref:t,children:r,focusLock:o,onClickOutside:i,onEscapeKey:a,returnFocus:s,style:u,autoFocus:c})=>{const m=e.useRef(null),b=e.useRef(null),h=e.useRef(!1);e.useImperativeHandle(t,()=>({setInitiallyFocusedElement:n=>{b.current=n}}));const[T]=e.useState(y);e.useEffect(()=>(++y,()=>{--y}));const I=e.useCallback(({nativeEvent:n})=>{q(n.key).with("Escape",()=>{y===T+1&&(a==null||a())}).with("Tab",()=>{if(!o)return;const d=m.current;if(v(d)){const f=n.target,l=L(d),p=g(l),E=F(l);f===p&&n.shiftKey&&(n.preventDefault(),E==null||E.focus()),f===E&&!n.shiftKey&&(n.preventDefault(),p==null||p.focus())}}).otherwise(()=>{})},[o,a,T]);e.useEffect(()=>{if(s)return b.current=document.activeElement,()=>{var n;h.current||(n=b.current)==null||n.focus()}},[s]),j(n=>{if(c){const d=m.current;if(v(d)){if(d.offsetWidth===0)return;const f=L(d),l=g(f);l==null||l.focus(),window.clearInterval(n)}}},16);const R=e.useCallback(()=>{h.current=!0},[]);return H({containerRef:m,onClickOutside:i,onFocusOutside:R}),S.jsx(M,{ref:m,onKeyDownCapture:I,style:u,children:r})};C.__docgenInfo={description:"",methods:[{name:"setInitiallyFocusedElement",docblock:null,modifiers:[],params:[{name:"element",optional:!1,type:null}],returns:null}],displayName:"FocusTrap",props:{ref:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:`{
  setInitiallyFocusedElement: (element: HTMLElement) => void;
}`,signature:{properties:[{key:"setInitiallyFocusedElement",value:{name:"signature",type:"function",raw:"(element: HTMLElement) => void",signature:{arguments:[{type:{name:"HTMLElement"},name:"element"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<FocusTrapRef>"},description:""},autoFocus:{required:!0,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},focusLock:{required:!0,tsType:{name:"boolean"},description:""},onClickOutside:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: TouchEvent | MouseEvent) => void",signature:{arguments:[{type:{name:"union",raw:"TouchEvent | MouseEvent",elements:[{name:"TouchEvent"},{name:"MouseEvent"}]},name:"event"}],return:{name:"void"}}},description:""},onEscapeKey:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},returnFocus:{required:!0,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"StyleProp",elements:[{name:"ViewStyle"}],raw:"StyleProp<ViewStyle>"},description:""}}};export{C as F,L as g};
//# sourceMappingURL=FocusTrap-BIdM8K88.js.map
