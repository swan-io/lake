import{_ as Xe}from"./extends-98964cd2.js";import{Q as ye,ad as ue,a3 as ge,S as je,l as ze,a8 as qe,V as Qe}from"./Space-0999e141.js";import{r as d}from"./index-b9a8c83f.js";var ce="DELAY",S="ERROR",ve="LONG_PRESS_DETECTED",E="NOT_RESPONDER",A="RESPONDER_ACTIVE_LONG_PRESS_START",X="RESPONDER_ACTIVE_PRESS_START",se="RESPONDER_INACTIVE_PRESS_START",Je="RESPONDER_GRANT",$="RESPONDER_RELEASE",me="RESPONDER_TERMINATED",Ee=Object.freeze({NOT_RESPONDER:{DELAY:S,RESPONDER_GRANT:se,RESPONDER_RELEASE:S,RESPONDER_TERMINATED:S,LONG_PRESS_DETECTED:S},RESPONDER_INACTIVE_PRESS_START:{DELAY:X,RESPONDER_GRANT:S,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:S},RESPONDER_ACTIVE_PRESS_START:{DELAY:S,RESPONDER_GRANT:S,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:A},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:S,RESPONDER_GRANT:S,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:A},ERROR:{DELAY:E,RESPONDER_GRANT:se,RESPONDER_RELEASE:E,RESPONDER_TERMINATED:E,LONG_PRESS_DETECTED:E}}),Oe=e=>e.getAttribute("role"),ie=e=>e.tagName.toLowerCase(),de=e=>e===X||e===A,W=e=>Oe(e)==="button",fe=e=>e===se||e===X||e===A,Ze=e=>e===me||e===$,_e=e=>{var n=e.key,s=e.target,i=n===" "||n==="Spacebar",t=ie(s)==="button"||W(s);return n==="Enter"||i&&t},et=450,tt=50;class nt{constructor(n){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=E,this.configure(n)}configure(n){this._config=n}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var n=(t,r)=>{t.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=E,this._isPointerTouch=t.nativeEvent.type==="touchstart",this._receiveSignal(Je,t);var a=ee(this._config.delayPressStart,0,tt);r!==!1&&a>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(ce,t)},a):this._receiveSignal(ce,t);var o=ee(this._config.delayLongPress,10,et);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(t)},o+a)},s=t=>{this._receiveSignal($,t)},i=t=>{var r=this._config.onPress,a=t.target;if(this._touchState!==E&&_e(t)){s(t),document.removeEventListener("keyup",i);var o=a.getAttribute("role"),l=ie(a),c=o==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea";r!=null&&!c&&r(t)}};return{onStartShouldSetResponder:t=>{var r=this._config.disabled;return r&&W(t.currentTarget)&&t.stopPropagation(),r==null?!0:!r},onKeyDown:t=>{var r=this._config.disabled,a=t.key,o=t.target;if(!r&&_e(t)){this._touchState===E&&(n(t,!1),document.addEventListener("keyup",i));var l=a===" "||a==="Spacebar",c=Oe(o),y=c==="button"||c==="menuitem";l&&y&&ie(o)!=="button"&&t.preventDefault(),t.stopPropagation()}},onResponderGrant:t=>n(t),onResponderMove:t=>{this._config.onPressMove!=null&&this._config.onPressMove(t);var r=Pe(t);if(this._touchActivatePosition!=null){var a=this._touchActivatePosition.pageX-r.pageX,o=this._touchActivatePosition.pageY-r.pageY;Math.hypot(a,o)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:t=>s(t),onResponderTerminate:t=>{t.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(me,t)},onResponderTerminationRequest:t=>{var r=this._config,a=r.cancelable,o=r.disabled,l=r.onLongPress;return!o&&l!=null&&this._isPointerTouch&&t.nativeEvent.type==="contextmenu"?!1:a??!0},onClick:t=>{var r=this._config,a=r.disabled,o=r.onPress;a?W(t.currentTarget)&&t.stopPropagation():(t.stopPropagation(),this._longPressDispatched||this._selectionTerminated?t.preventDefault():o!=null&&t.altKey===!1&&o(t))},onContextMenu:t=>{var r=this._config,a=r.disabled,o=r.onLongPress;a?W(t.currentTarget)&&t.stopPropagation():o!=null&&this._isPointerTouch&&!t.defaultPrevented&&(t.preventDefault(),t.stopPropagation())}}}_receiveSignal(n,s){var i=this._touchState,t=null;Ee[i]!=null&&(t=Ee[i][n]),!(this._touchState===E&&n===$)&&(t==null||t===S?console.error("PressResponder: Invalid signal "+n+" for state "+i+" on responder"):i!==t&&(this._performTransitionSideEffects(i,t,n,s),this._touchState=t))}_performTransitionSideEffects(n,s,i,t){if(Ze(i)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),fe(n)&&i===ve){var r=this._config.onLongPress;r!=null&&t.nativeEvent.key==null&&(r(t),this._longPressDispatched=!0)}var a=de(n),o=de(s);if(!a&&o?this._activate(t):a&&!o&&this._deactivate(t),fe(n)&&i===$){var l=this._config,c=l.onLongPress,y=l.onPress;if(y!=null){var m=c!=null&&n===A;m||!o&&!a&&(this._activate(t),this._deactivate(t))}}this._cancelPressDelayTimeout()}_activate(n){var s=this._config,i=s.onPressChange,t=s.onPressStart,r=Pe(n);this._touchActivatePosition={pageX:r.pageX,pageY:r.pageY},t!=null&&t(n),i!=null&&i(!0)}_deactivate(n){var s=this._config,i=s.onPressChange,t=s.onPressEnd;function r(){t!=null&&t(n),i!=null&&i(!1)}var a=ee(this._config.delayPressEnd);a>0?this._pressOutDelayTimeout=setTimeout(()=>{r()},a):r()}_handleLongPress(n){(this._touchState===X||this._touchState===A)&&this._receiveSignal(ve,n)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function ee(e,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Math.max(n,e??s)}function Pe(e){var n=e.nativeEvent,s=n.changedTouches,i=n.touches;return i!=null&&i.length>0?i[0]:s!=null&&s.length>0?s[0]:e.nativeEvent}function rt(e,n){var s=d.useRef(null);s.current==null&&(s.current=new nt(n));var i=s.current;return d.useEffect(()=>{i.configure(n)},[n,i]),d.useEffect(()=>()=>{i.reset()},[i]),d.useDebugValue(n),i.getEventHandlers()}var st=()=>{};function it(){var e=!1;if(ye)try{var n={};Object.defineProperty(n,"passive",{get(){return e=!0,!1}}),window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{}return e}var at=it();function ot(e){return e==null?!1:at?e:!!e.capture}function lt(){return this.cancelBubble}function ut(){return this.defaultPrevented}function ct(e){return e.nativeEvent=e,e.persist=st,e.isDefaultPrevented=ut,e.isPropagationStopped=lt,e}function v(e,n,s,i){var t=ot(i),r=a=>s(ct(a));return e.addEventListener(n,r,t),function(){e!=null&&e.removeEventListener(n,r,t)}}var vt=()=>typeof window<"u"&&window.PointerEvent!=null,T="keyboard",f="keyboard",x,k,G=!1,Et=new Set,U="keyboard",I="mouse",te="touch",dt="blur",pe="contextmenu",ft="focus",_t="keydown",Le="mousedown",Ne="mousemove",be="mouseup",Ae="pointerdown",Ce="pointermove",Me="scroll",Ie="selectionchange",He="touchcancel",we="touchmove",xe="touchstart",Pt="visibilitychange",he={passive:!0},_={capture:!0,passive:!0};function ke(){(x!=null||k!=null)&&(x!=null&&(f=x,x=null),k!=null&&(T=k,k=null),g())}function ht(){x=f,k=T,T=U,f=U,g(),G=!1}function Rt(){ke()}function St(e){e.metaKey||e.altKey||e.ctrlKey||f!==U&&(f=U,T=U,g())}function Tt(){document.visibilityState!=="hidden"&&ke()}function R(e){var n=e.type;if(vt()){if(n===Ae){T!==e.pointerType&&(f=e.pointerType,T=e.pointerType,g());return}if(n===Ce){f!==e.pointerType&&(f=e.pointerType,g());return}}else{if(G||(n===Le&&T!==I&&(f=I,T=I,g()),n===Ne&&f!==I&&(f=I,g())),n===xe){G=!0,e.touches&&e.touches.length>1&&(G=!1),T!==te&&(f=te,T=te,g());return}(n===pe||n===be||n===Ie||n===Me||n===He||n===we)&&(G=!1)}}ye&&(v(window,dt,ht,he),v(window,ft,Rt,he),v(document,_t,St,_),v(document,Pt,Tt,_),v(document,Ae,R,_),v(document,Ce,R,_),v(document,pe,R,_),v(document,Le,R,_),v(document,Ne,R,_),v(document,be,R,_),v(document,He,R,_),v(document,we,R,_),v(document,xe,R,_),v(document,Ie,R,_),v(document,Me,R,_));function g(){var e={activeModality:T,modality:f};Et.forEach(n=>{n(e)})}function Dt(){return f}function H(e,n){var s=ue(()=>new Map),i=ue(()=>(t,r)=>{var a=s.get(t);a!=null&&a(),r==null&&(s.delete(t),r=()=>{});var o=v(t,e,r,n);return s.set(t,o),o});return ge(()=>()=>{s.forEach(t=>{t()}),s.clear()},[s]),i}var yt={},w={passive:!0},Re="react-gui:hover:lock",Se="react-gui:hover:unlock",gt=()=>typeof window<"u"&&window.PointerEvent!=null;function Te(e,n,s){var i=document.createEvent("CustomEvent"),t=s||yt,r=t.bubbles,a=r===void 0?!0:r,o=t.cancelable,l=o===void 0?!0:o,c=t.detail;i.initCustomEvent(n,a,l,c),e.dispatchEvent(i)}function ne(e){var n=e.pointerType;return n??Dt()}function mt(e,n){var s=n.contain,i=n.disabled,t=n.onHoverStart,r=n.onHoverChange,a=n.onHoverUpdate,o=n.onHoverEnd,l=gt(),c=H(l?"pointermove":"mousemove",w),y=H(l?"pointerenter":"mouseenter",w),m=H(l?"pointerleave":"mouseleave",w),p=H(Re,w),C=H(Se,w);ge(()=>{var D=e.current;if(D!==null){var M=function(u){o!=null&&o(u),r!=null&&r(!1),c(D,null),m(D,null)},V=function(u){var P=e.current;P!=null&&ne(u)!=="touch"&&(s&&Te(P,Se),M(u))},Y=function(u){ne(u)!=="touch"&&a!=null&&(u.x==null&&(u.x=u.clientX),u.y==null&&(u.y=u.clientY),a(u))},L=function(u){t!=null&&t(u),r!=null&&r(!0),a!=null&&c(D,i?null:Y),m(D,i?null:V)},F=function(u){var P=e.current;if(P!=null&&ne(u)!=="touch"){s&&Te(P,Re),L(u);var K=function(b){b.target!==P&&M(u)},j=function(b){b.target!==P&&L(u)};p(P,i?null:K),C(P,i?null:j)}};y(D,i?null:F)}},[y,c,m,p,C,s,i,t,r,a,o,e])}var Ot=["children","delayLongPress","delayPressIn","delayPressOut","disabled","onBlur","onContextMenu","onFocus","onHoverIn","onHoverOut","onKeyDown","onLongPress","onPress","onPressMove","onPressIn","onPressOut","style","tabIndex","testOnly_hovered","testOnly_pressed"];function pt(e,n){var s=e.children,i=e.delayLongPress,t=e.delayPressIn,r=e.delayPressOut,a=e.disabled,o=e.onBlur,l=e.onContextMenu,c=e.onFocus,y=e.onHoverIn,m=e.onHoverOut,p=e.onKeyDown,C=e.onLongPress,D=e.onPress,M=e.onPressMove,V=e.onPressIn,Y=e.onPressOut,L=e.style,F=e.tabIndex,N=e.testOnly_hovered,u=e.testOnly_pressed,P=ze(e,Ot),K=re(N===!0),j=K[0],z=K[1],b=re(!1),Ue=b[0],B=b[1],ae=re(u===!0),Ve=ae[0],oe=ae[1],O=d.useRef(null),Ye=qe(n,O),Fe=d.useMemo(()=>({delayLongPress:i,delayPressStart:t,delayPressEnd:r,disabled:a,onLongPress:C,onPress:D,onPressChange:oe,onPressStart:V,onPressMove:M,onPressEnd:Y}),[i,t,r,a,C,D,V,M,Y,oe]),q=rt(O,Fe),Q=q.onContextMenu,J=q.onKeyDown;mt(O,{contain:!0,disabled:a,onHoverChange:z,onHoverStart:y,onHoverEnd:m});var le={hovered:j,focused:Ue,pressed:Ve},Ke=d.useCallback(h=>{h.nativeEvent.target===O.current&&(B(!1),o!=null&&o(h))},[O,B,o]),Be=d.useCallback(h=>{h.nativeEvent.target===O.current&&(B(!0),c!=null&&c(h))},[O,B,c]),$e=d.useCallback(h=>{Q!=null&&Q(h),l!=null&&l(h)},[l,Q]),We=d.useCallback(h=>{J!=null&&J(h),p!=null&&p(h)},[p,J]),Z;return F!==void 0?Z=F:Z=a?-1:0,d.createElement(Qe,Xe({},P,q,{"aria-disabled":a,onBlur:Ke,onContextMenu:$e,onFocus:Be,onKeyDown:We,ref:Ye,style:[a?De.disabled:De.active,typeof L=="function"?L(le):L],tabIndex:Z}),typeof s=="function"?s(le):s)}function re(e){var n=d.useState(!1),s=n[0],i=n[1];return[s||e,i]}var De=je.create({active:{cursor:"pointer",touchAction:"manipulation"},disabled:{pointerEvents:"box-none"}}),Ge=d.memo(d.forwardRef(pt));Ge.displayName="Pressable";const At=Ge;export{At as P};
//# sourceMappingURL=index-a557cce7.js.map
