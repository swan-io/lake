import{s as f,e as D,r as T,d as M,h as O,q as y,u as W,N as v,v as j,a as t,j as H,P as L,V as b,w as N}from"./Space-BLTJaWwn.js";import{r as o}from"./index-CBqU2yxZ.js";import{u as A}from"./useResponsive-ySRiRh3Z.js";import{n as K}from"./function-BOrG1jbP.js";import{B as z}from"./BottomPanel-CBlrm5U6.js";import{F as G}from"./FocusTrap-BekeliH_.js";import{T as U}from"./TransitionView-CgiyVXp-.js";import{P as h}from"./index-Gzpn0eiA.js";const l=f.create({container:{...f.absoluteFillObject,pointerEvents:"none"},defaultCursor:{cursor:"default"},underlay:{pointerEvents:"auto",cursor:"default",position:"fixed",left:0,top:0,bottom:0,right:0},popoverContainer:{position:"absolute",display:"flex"},popover:{pointerEvents:"auto",display:"flex",flexDirection:"column",backgroundColor:D.accented,borderRadius:T[8],marginVertical:M[8],overflow:"hidden",boxShadow:O.modal,flexGrow:1,alignSelf:"stretch"},popoverContents:{alignItems:"stretch"}}),J={...y.fadeAndSlideInFromBottom,leave:[y.fadeAndSlideInFromBottom.leave,{animationDuration:"100ms"}]},Q=600,V=o.memo(({children:n,id:w,label:P,role:g="dialog",describedBy:x,matchReferenceWidth:C=!1,matchReferenceMinWidth:q=!1,onDismiss:a=K,onEscapeKey:E=a,referenceRef:i,returnFocus:R=!0,autoFocus:B=!0,visible:r,underlay:d=!0,forcedMode:_})=>{const[c,p]=o.useState(null),m=o.useRef(null),{desktop:F}=A(Q),{position:s}=W({referenceRef:i,visible:r,matchReferenceWidth:C,matchReferenceMinWidth:q});o.useEffect(()=>{const e=m.current;!r&&e!=null&&(e.style.pointerEvents="none")},[r]),o.useEffect(()=>{const e=document.createElement("div");return document.body.append(e),p(e),()=>{p(null),e.remove()}},[]);const S=o.useCallback(e=>{e.preventDefault(),a()},[a]),k=o.useCallback(({target:e})=>{const u=i.current;(!(u instanceof Element)||!(e instanceof Element)||u!==e&&!u.contains(e))&&a()},[i,a]),I=o.useCallback(e=>{e.preventDefault()},[]);return c==null?null:v(_).with(j.nullish,()=>F?"Dropdown":"BottomPanel").with("BottomPanel",()=>"BottomPanel").with("Dropdown",()=>"Dropdown").exhaustive()==="BottomPanel"?t(z,{visible:r,onPressClose:a,returnFocus:!1,children:typeof n=="function"?n({mode:"panel"}):n}):H(L,{container:c,children:[r&&d?t(h,{ref:m,style:l.underlay,onPress:S,"aria-label":"Close"}):null,t(U,{style:l.container,...J,children:s.isSome()?t(b,{style:s.get().rootStyle,children:t(b,{style:[l.popoverContainer,s.get().style,{alignItems:v(s.get().horizontalPosition).with("left",()=>"flex-start").with("center",()=>"center").with("right",()=>"flex-end").exhaustive()}],children:t(N,{style:l.popover,contentContainerStyle:l.popoverContents,id:w,role:g,"aria-describedby":x,"aria-label":P,children:t(G,{focusLock:!0,returnFocus:R,autoFocus:B,onEscapeKey:E,onClickOutside:d?void 0:k,children:t(h,{tabIndex:-1,onPress:I,style:l.defaultCursor,children:typeof n=="function"?n({mode:"dropdown"}):n})})})})}):null})]})});try{V.displayName="Popover",V.__docgenInfo={description:"",displayName:"Popover",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"combobox"'},{value:'"dialog"'},{value:'"listbox"'}]}},describedBy:{defaultValue:null,description:"",name:"describedBy",required:!1,type:{name:"string"}},matchReferenceWidth:{defaultValue:null,description:"",name:"matchReferenceWidth",required:!1,type:{name:"boolean"}},matchReferenceMinWidth:{defaultValue:null,description:"",name:"matchReferenceMinWidth",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"(() => void)"}},onEscapeKey:{defaultValue:null,description:"",name:"onEscapeKey",required:!1,type:{name:"(() => void)"}},referenceRef:{defaultValue:null,description:"",name:"referenceRef",required:!0,type:{name:"RefObject<View | Text>"}},returnFocus:{defaultValue:null,description:"",name:"returnFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},underlay:{defaultValue:null,description:"",name:"underlay",required:!1,type:{name:"boolean"}},safetyMargin:{defaultValue:null,description:"",name:"safetyMargin",required:!1,type:{name:"number"}},forcedMode:{defaultValue:null,description:"",name:"forcedMode",required:!1,type:{name:"enum",value:[{value:'"Dropdown"'},{value:'"BottomPanel"'}]}}}}}catch{}export{V as P};
//# sourceMappingURL=Popover-DE_gRY0D.js.map
