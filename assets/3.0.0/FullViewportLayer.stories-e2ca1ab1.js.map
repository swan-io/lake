{"version":3,"file":"FullViewportLayer.stories-e2ca1ab1.js","sources":["../../../packages/lake/src/components/FullViewportLayer.tsx"],"sourcesContent":["import { ReactNode, Suspense, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { backgroundColor } from \"../constants/design\";\nimport { FocusTrap } from \"./FocusTrap\";\nimport { LoadingView } from \"./LoadingView\";\nimport { Portal } from \"./Portal\";\nimport { TransitionView } from \"./TransitionView\";\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n    overflow: \"hidden\",\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    animationFillMode: \"forwards\",\n    overflow: \"hidden\",\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0, transform: \"translateZ(0px) translateX(200px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  containerLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0, transform: \"translateZ(0px) translateX(200px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    transform: \"translateZ(0px)\",\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    backgroundColor: backgroundColor.default,\n  },\n  contentsEnter: {\n    animationKeyframes: {\n      \"0%\": { transform: \"translateZ(0px) translateX(50px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsLeave: {\n    animationKeyframes: {\n      \"100%\": { transform: \"translateZ(0px) translateX(50px)\" },\n    },\n    animationDuration: \"500ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  contentsContainer: {\n    ...StyleSheet.absoluteFillObject,\n    zIndex: 2,\n    transform: \"translateZ(0px)\",\n    maxWidth: \"100%\",\n  },\n  contents: {\n    ...StyleSheet.absoluteFillObject,\n    maxWidth: \"100%\",\n  },\n});\n\ntype Props = {\n  visible: boolean;\n  children: ReactNode;\n};\n\nconst rootNode = document.querySelector(\"#full-page-layer-root\") as Element;\n\nexport const FullViewportLayer = ({ visible, children }: Props) => {\n  const [delayedVisible, setDelayedVisible] = useState(visible);\n\n  useEffect(() => {\n    setDelayedVisible(visible);\n  }, [visible]);\n\n  return (\n    <Portal container={rootNode}>\n      <View style={[styles.root, !visible && styles.inert]}>\n        <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n          {visible ? <View style={styles.overlay} /> : null}\n        </TransitionView>\n\n        <Suspense fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n          <TransitionView\n            style={styles.fill}\n            enter={styles.containerEnter}\n            leave={styles.containerLeave}\n          >\n            {delayedVisible ? (\n              <FocusTrap\n                focusLock={true}\n                autoFocus={true}\n                returnFocus={true}\n                style={styles.container}\n              >\n                <TransitionView\n                  style={styles.contentsContainer}\n                  enter={styles.contentsEnter}\n                  leave={styles.contentsLeave}\n                >\n                  <View style={styles.contents}>\n                    <View style={styles.contentsContainer}>{children}</View>\n                  </View>\n                </TransitionView>\n              </FocusTrap>\n            ) : null}\n          </TransitionView>\n        </Suspense>\n      </View>\n    </Portal>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","backgroundColor","rootNode","FullViewportLayer","visible","children","delayedVisible","setDelayedVisible","useState","useEffect","jsx","Portal","jsxs","View","TransitionView","Suspense","LoadingView","FocusTrap"],"mappings":"msBAQA,MAAAA,EAAA,qBAEAC,EAAAC,EAAA,OAAA,CAAiC,KAAA,CACzB,GAAAA,EAAA,mBACU,SAAA,QACJ,EACZ,MAAA,CACO,cAAA,MACU,EACjB,KAAA,CACM,GAAAA,EAAA,mBACU,kBAAA,WACK,SAAA,QACT,EACZ,aAAA,CACc,mBAAA,CACQ,KAAA,CAAA,QAAA,CAAA,CACC,EACrB,kBAAA,QACmB,wBAAA,aACM,EAC3B,aAAA,CACc,mBAAA,CACQ,OAAA,CAAA,QAAA,CAAA,CACG,EACvB,kBAAA,QACmB,wBAAA,aACM,EAC3B,eAAA,CACgB,mBAAA,CACM,KAAA,CAAA,QAAA,EAAA,UAAA,mCAAA,CACiD,EACrE,kBAAA,QACmB,wBAAA,aACM,EAC3B,eAAA,CACgB,mBAAA,CACM,OAAA,CAAA,QAAA,EAAA,UAAA,mCAAA,CACmD,EACvE,kBAAA,QACmB,wBAAA,aACM,EAC3B,QAAA,CACS,GAAAA,EAAA,mBACO,gBAAAF,CACG,EACnB,UAAA,CACW,GAAAE,EAAA,mBACK,UAAA,kBACH,cAAA,MACI,WAAA,UACH,gBAAAC,EAAA,OACqB,EACnC,cAAA,CACe,mBAAA,CACO,KAAA,CAAA,UAAA,kCAAA,CACoC,EACxD,kBAAA,QACmB,wBAAA,aACM,EAC3B,cAAA,CACe,mBAAA,CACO,OAAA,CAAA,UAAA,kCAAA,CACsC,EAC1D,kBAAA,QACmB,wBAAA,aACM,EAC3B,kBAAA,CACmB,GAAAD,EAAA,mBACH,OAAA,EACN,UAAA,kBACG,SAAA,MACD,EACZ,SAAA,CACU,GAAAA,EAAA,mBACM,SAAA,MACJ,CAEd,CAAA,EAOAE,EAAA,SAAA,cAAA,uBAAA,EAEOC,EAAA,CAAA,CAAA,QAAAC,EAAA,SAAAC,KAAA,CACL,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAAJ,CAAA,EAEAK,OAAAA,EAAAA,UAAA,IAAA,CACEF,EAAAH,CAAA,CAAyB,EAAA,CAAAA,CAAA,CAAA,EAG3BM,EAAAC,EAAA,CAAA,UAAAT,EAAA,SAAAU,EAAAC,EAAA,CAAA,MAAA,CAAAd,EAAA,KAAA,CAAAK,GAAAL,EAAA,KAAA,EAAA,SAAA,CAGMW,EAAAI,EAAA,CAAA,MAAAf,EAAA,KAAA,MAAAA,EAAA,aAAA,MAAAA,EAAA,aAAA,SAAAK,EAAAM,EAAAG,EAAA,CAAA,MAAAd,EAAA,OAAA,CAAA,EAAA,KAAA,EAEAW,EAAAK,EAAAA,SAAA,CAAA,SAAAL,EAAAM,EAAA,CAAA,MAAAf,EAAA,SAAA,MAAA,CAAA,CAAA,EAAA,SAAAS,EAGEI,EAAC,CAAA,MAAAf,EAAA,KACe,MAAAA,EAAA,eACA,MAAAA,EAAA,eACA,SAAAO,EAAAI,EAGZO,EAAC,CAAA,UAAA,GACY,UAAA,GACA,YAAA,GACE,MAAAlB,EAAA,UACC,SAAAW,EAEdI,EAAC,CAAA,MAAAf,EAAA,kBACe,MAAAA,EAAA,cACA,MAAAA,EAAA,cACA,SAAAW,EAAAG,EAAA,CAAA,MAAAd,EAAA,SAAA,SAAAW,EAAAG,EAAA,CAAA,MAAAd,EAAA,kBAAA,SAAAM,CAAA,CAAA,EAAA,CAId,CAAA,CACF,CAAA,EAAA,IAEA,CAAA,EAAA,CAER,CAAA,CAAA,CAAA,CAAA,CAIR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}