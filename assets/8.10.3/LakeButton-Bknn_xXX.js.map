{"version":3,"file":"LakeButton-Bknn_xXX.js","sources":["../../../packages/lake/src/components/LakeButton.tsx"],"sourcesContent":["import { Children, forwardRef, Fragment, memo, ReactNode } from \"react\";\nimport {\n  ActivityIndicator,\n  GestureResponderEvent,\n  HrefAttrs,\n  PressableStateCallbackType,\n  StyleProp,\n  StyleSheet,\n  View,\n  ViewStyle,\n} from \"react-native\";\nimport { match } from \"ts-pattern\";\nimport { commonStyles } from \"../constants/commonStyles\";\nimport {\n  backgroundColor,\n  colors,\n  ColorVariants,\n  invariantColors,\n  radii,\n  Spacings,\n  spacings,\n  texts,\n} from \"../constants/design\";\nimport { isNotNullish, isNullish } from \"../utils/nullish\";\nimport { Box } from \"./Box\";\nimport { Icon, IconName } from \"./Icon\";\nimport { LakeText } from \"./LakeText\";\nimport { Pressable } from \"./Pressable\";\nimport { Space } from \"./Space\";\n\nconst styles = StyleSheet.create({\n  base: {\n    alignItems: \"center\",\n    backgroundColor: colors.gray[900],\n    borderRadius: radii[6],\n    flexDirection: \"row\",\n    flexShrink: 0,\n    height: 48,\n    minWidth: 90,\n    justifyContent: \"center\",\n    paddingHorizontal: 20,\n    transitionDuration: \"150ms\",\n    transitionProperty: \"background-color, color\",\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  iconOnly: {\n    minWidth: 48,\n    width: 48,\n    paddingRight: 0,\n    paddingLeft: 0,\n  },\n  iconSmallOnly: {\n    minWidth: 40,\n    width: 40,\n    paddingRight: 0,\n    paddingLeft: 0,\n  },\n  hiddenView: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    transitionDuration: \"150ms\",\n    transitionProperty: \"opacity\",\n    opacity: 0,\n  },\n  pressed: {\n    opacity: 0.15,\n    backgroundColor: colors.gray[900],\n  },\n  small: {\n    height: 40,\n    paddingLeft: 16,\n    paddingRight: 16,\n  },\n  withIconStart: {\n    paddingRight: 24,\n    paddingLeft: 26,\n  },\n  withIconStartSmall: {\n    paddingRight: 19.5,\n    paddingLeft: 21.5,\n  },\n  withIconEnd: {\n    paddingRight: 20,\n    paddingLeft: 24,\n  },\n  withIconEndSmall: {\n    paddingRight: 20.5,\n    paddingLeft: 21.5,\n  },\n  text: texts.semibold,\n  textSmall: texts.smallSemibold,\n  resetOpacity: {\n    opacity: 1,\n  },\n  loaderContainer: {\n    ...StyleSheet.absoluteFillObject,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    transform: \"translateZ(0px)\",\n  },\n  group: {\n    flexDirection: \"row\",\n    alignItems: \"stretch\",\n    paddingVertical: spacings[16],\n  },\n  pill: {\n    width: 10,\n    height: 10,\n    borderRadius: 5,\n    borderWidth: 2,\n    borderColor: backgroundColor.default,\n    backgroundColor: colors.negative[500],\n    position: \"absolute\",\n    top: -3,\n    right: -3,\n  },\n  vertical: {\n    flexDirection: \"column\",\n    height: \"auto\",\n    paddingVertical: spacings[12],\n  },\n  verticalSmall: {\n    paddingVertical: spacings[8],\n  },\n  hidden: {\n    visibility: \"hidden\",\n  },\n});\n\nexport type ButtonProps = {\n  ariaControls?: string;\n  ariaExpanded?: boolean;\n  color?: ColorVariants;\n  disabled?: boolean;\n  direction?: \"column\" | \"row\";\n  loading?: boolean;\n  grow?: boolean;\n  icon?: IconName;\n  iconPosition?: \"start\" | \"end\";\n  mode?: \"primary\" | \"secondary\" | \"tertiary\";\n  onPress?: (event: GestureResponderEvent) => void;\n  size?: \"large\" | \"small\";\n  iconSize?: number;\n  style?: StyleProp<ViewStyle> | ((props: PressableStateCallbackType) => StyleProp<ViewStyle>);\n  forceBackground?: boolean;\n  href?: string;\n  hrefAttrs?: HrefAttrs;\n  pill?: boolean;\n} & (\n  | {\n      ariaLabel: string;\n      children?: never;\n    }\n  | {\n      ariaLabel?: string;\n      children: ReactNode;\n    }\n);\n\nexport const LakeButton = memo(\n  forwardRef<View, ButtonProps>(\n    (\n      {\n        ariaControls,\n        ariaExpanded,\n        ariaLabel,\n        children,\n        color = \"gray\",\n        direction = \"row\",\n        disabled = false,\n        icon,\n        grow = false,\n        iconPosition = \"start\",\n        loading = false,\n        mode = \"primary\",\n        onPress,\n        size = \"large\",\n        iconSize = size === \"small\" ? 18 : 20,\n        style,\n        forceBackground = false,\n        href,\n        hrefAttrs,\n        pill = false,\n      },\n      forwardedRef,\n    ) => {\n      const isPrimary = mode === \"primary\";\n      const isSmall = size === \"small\";\n\n      const vertical = direction === \"column\";\n      const spaceHeight = vertical ? 4 : undefined;\n      const spaceWidth = vertical ? undefined : isSmall ? 8 : 12;\n\n      const hasIcon = isNotNullish(icon);\n      const hasIconStart = hasIcon && iconPosition === \"start\";\n      const hasIconEnd = hasIcon && iconPosition === \"end\";\n      const hasOnlyIcon = hasIcon && isNullish(children);\n\n      return (\n        <Pressable\n          href={href}\n          hrefAttrs={hrefAttrs}\n          role={href != null ? \"link\" : \"button\"}\n          aria-busy={loading}\n          aria-disabled={disabled}\n          aria-controls={ariaControls}\n          aria-expanded={ariaExpanded}\n          aria-label={ariaLabel}\n          disabled={loading || disabled}\n          ref={forwardedRef}\n          onPress={onPress}\n          style={({ hovered, pressed, focused }) => [\n            styles.base,\n            isSmall && styles.small,\n\n            vertical && [styles.vertical, isSmall && styles.verticalSmall],\n\n            hasIconStart && isSmall ? styles.withIconStartSmall : styles.withIconStart,\n            hasIconEnd && (isSmall ? styles.withIconEndSmall : styles.withIconEnd),\n            hasOnlyIcon && (isSmall ? styles.iconSmallOnly : styles.iconOnly),\n\n            disabled && commonStyles.disabled,\n            disabled && forceBackground && styles.resetOpacity,\n            grow && styles.grow,\n\n            match(mode)\n              .with(\"primary\", () => ({\n                backgroundColor:\n                  color === \"warning\"\n                    ? hovered\n                      ? colors[color][600]\n                      : colors[color][500]\n                    : hovered\n                      ? colors[color].secondary\n                      : colors[color].primary,\n              }))\n              .with(\"secondary\", () => ({\n                backgroundColor: pressed\n                  ? colors[color][100]\n                  : hovered\n                    ? colors[color][50]\n                    : forceBackground\n                      ? backgroundColor.accented\n                      : invariantColors.transparent,\n                borderWidth: 1,\n                borderColor:\n                  disabled && forceBackground\n                    ? colors[color][100]\n                    : hovered\n                      ? colors[color][600]\n                      : colors[color][300],\n              }))\n              .with(\"tertiary\", () => ({\n                backgroundColor: pressed\n                  ? colors[color][200]\n                  : hovered\n                    ? colors[color][100]\n                    : invariantColors.transparent,\n              }))\n              .exhaustive(),\n\n            typeof style == \"function\" ? style({ hovered, pressed, focused }) : style,\n          ]}\n        >\n          {({ pressed, hovered }) => {\n            const textColor = isPrimary\n              ? colors[color].contrast\n              : disabled && forceBackground\n                ? colors[color][300]\n                : hovered || pressed\n                  ? colors[color][700]\n                  : colors[color][600];\n\n            return (\n              <>\n                {hasIconStart && (\n                  <>\n                    <Icon\n                      color={textColor}\n                      name={icon}\n                      size={iconSize}\n                      style={loading && styles.hidden}\n                    />\n\n                    {isNotNullish(children) && <Space height={spaceHeight} width={spaceWidth} />}\n                  </>\n                )}\n\n                {typeof children === \"string\" || typeof children === \"number\" ? (\n                  <LakeText\n                    numberOfLines={1}\n                    userSelect=\"none\"\n                    style={[\n                      isSmall ? styles.textSmall : styles.text,\n                      loading && styles.hidden,\n                      { color: textColor },\n                    ]}\n                  >\n                    {children}\n                  </LakeText>\n                ) : (\n                  <Box\n                    alignItems=\"center\"\n                    direction=\"row\"\n                    justifyContent=\"center\"\n                    style={[vertical && styles.vertical, loading && styles.hidden]}\n                  >\n                    {children}\n                  </Box>\n                )}\n\n                {hasIconEnd && (\n                  <>\n                    {isNotNullish(children) && <Space height={spaceHeight} width={spaceWidth} />}\n\n                    <Icon\n                      color={textColor}\n                      name={icon}\n                      size={iconSize}\n                      style={loading && styles.hidden}\n                    />\n                  </>\n                )}\n\n                {loading && (\n                  <View style={styles.loaderContainer}>\n                    <ActivityIndicator\n                      color={isPrimary ? colors[color].contrast : colors[color].primary}\n                      size={iconSize}\n                    />\n                  </View>\n                )}\n\n                {isPrimary && <View style={[styles.hiddenView, pressed && styles.pressed]} />}\n                {pill && <View style={styles.pill} />}\n              </>\n            );\n          }}\n        </Pressable>\n      );\n    },\n  ),\n);\n\nLakeButton.displayName = \"Button\";\n\ntype GroupProps = {\n  children: ReactNode;\n  justifyContent?: ViewStyle[\"justifyContent\"];\n  paddingBottom?: 0 | Spacings;\n};\n\nconst ZERO = 0;\n\nexport const LakeButtonGroup = ({\n  children,\n  justifyContent = \"flex-start\",\n  paddingBottom = 16,\n}: GroupProps) => (\n  <View\n    style={[\n      styles.group,\n      { justifyContent, paddingBottom: paddingBottom === 0 ? ZERO : spacings[paddingBottom] },\n    ]}\n  >\n    {Children.toArray(children).map((item, index) => (\n      <Fragment key={index}>\n        {index > 0 ? <Space width={16} /> : null}\n        {item}\n      </Fragment>\n    ))}\n  </View>\n);\n"],"names":["styles","StyleSheet","colors","radii","texts","spacings","backgroundColor","LakeButton","memo","forwardRef","ariaControls","ariaExpanded","ariaLabel","children","color","direction","disabled","icon","grow","iconPosition","loading","mode","onPress","size","iconSize","style","forceBackground","href","hrefAttrs","pill","forwardedRef","isPrimary","isSmall","vertical","spaceHeight","spaceWidth","hasIcon","isNotNullish","hasIconStart","hasIconEnd","hasOnlyIcon","isNullish","jsx","Pressable","hovered","pressed","focused","commonStyles","match","invariantColors","textColor","jsxs","Fragment","Icon","Space","LakeText","Box","View","ActivityIndicator","ZERO","LakeButtonGroup","justifyContent","paddingBottom","Children","item","index"],"mappings":"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"}