{"version":3,"file":"LakeModal-xdj-9iOF.js","sources":["../../../packages/shared-business/src/components/LakeModal.tsx"],"sourcesContent":["import { FocusTrap } from \"@swan-io/lake/src/components/FocusTrap\";\nimport { Icon, IconName } from \"@swan-io/lake/src/components/Icon\";\nimport { LakeButton } from \"@swan-io/lake/src/components/LakeButton\";\nimport { LakeHeading } from \"@swan-io/lake/src/components/LakeHeading\";\nimport { LoadingView } from \"@swan-io/lake/src/components/LoadingView\";\nimport { Portal } from \"@swan-io/lake/src/components/Portal\";\nimport { Pressable } from \"@swan-io/lake/src/components/Pressable\";\nimport { Context, ResponsiveContainer } from \"@swan-io/lake/src/components/ResponsiveContainer\";\nimport { ScrollView } from \"@swan-io/lake/src/components/ScrollView\";\nimport { Space } from \"@swan-io/lake/src/components/Space\";\nimport { Suspendable } from \"@swan-io/lake/src/components/Suspendable\";\nimport { TransitionView } from \"@swan-io/lake/src/components/TransitionView\";\nimport { commonStyles } from \"@swan-io/lake/src/constants/commonStyles\";\nimport {\n  ColorVariants,\n  backgroundColor,\n  breakpoints,\n  colors,\n  negativeSpacings,\n  shadows,\n  spacings,\n} from \"@swan-io/lake/src/constants/design\";\nimport { useBodyClassName } from \"@swan-io/lake/src/hooks/useBodyClassName\";\nimport { ReactNode, useEffect, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { t } from \"../utils/i18n\";\n\nexport type LakeModalProps = {\n  visible: boolean;\n  title?: string;\n  icon?: IconName;\n  color?: ColorVariants;\n  children: ReactNode | ((context: Context) => ReactNode);\n  maxWidth?: number;\n  onPressClose?: () => void;\n};\n\nconst BACKGROUND_COLOR = \"rgba(0, 0, 0, 0.6)\";\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n  },\n  inert: {\n    pointerEvents: \"none\",\n  },\n  fill: {\n    ...StyleSheet.absoluteFillObject,\n    animationFillMode: \"forwards\",\n  },\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    position: \"fixed\",\n    backgroundColor: BACKGROUND_COLOR,\n  },\n  overlayEnter: {\n    animationKeyframes: {\n      \"0%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  overlayLeave: {\n    animationKeyframes: {\n      \"100%\": { opacity: 0 },\n    },\n    animationDuration: \"200ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalEnter: {\n    animationKeyframes: {\n      \"0%\": {\n        opacity: 0,\n        transform: \"translateY(-20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalLeave: {\n    animationKeyframes: {\n      \"100%\": {\n        opacity: 0,\n        transform: \"translateY(-20px)\",\n      },\n    },\n    animationDuration: \"300ms\",\n    animationTimingFunction: \"ease-in-out\",\n  },\n  modalContainer: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  modalContentContainer: {\n    padding: spacings[24],\n    justifyContent: \"center\",\n    flexGrow: 1,\n  },\n  modalContentContainerSmall: {\n    padding: spacings[8],\n    flexGrow: 1,\n    justifyContent: \"center\",\n  },\n  modal: {\n    backgroundColor: backgroundColor.default,\n    borderRadius: 24,\n    padding: spacings[48],\n    boxShadow: shadows.modal,\n    alignSelf: \"stretch\",\n    width: \"100%\",\n    marginHorizontal: \"auto\",\n  },\n  modalSmall: {\n    borderRadius: 16,\n    backgroundColor: backgroundColor.default,\n    width: \"100%\",\n    padding: spacings[24],\n    alignSelf: \"stretch\",\n    marginHorizontal: \"auto\",\n  },\n  modalHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  modalIconTitle: {\n    ...commonStyles.fill,\n  },\n  trap: {\n    ...commonStyles.fill,\n  },\n  pressableOverlay: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  closeButton: {\n    top: negativeSpacings[16],\n    right: negativeSpacings[16],\n  },\n});\n\nexport const LakeModal = ({\n  visible,\n  icon,\n  title,\n  color = \"current\",\n  children,\n  maxWidth = 570,\n\n  onPressClose,\n}: LakeModalProps) => {\n  const [rootElement, setRootElement] = useState<Element | undefined>(() => undefined);\n\n  useEffect(() => {\n    const rootElement = document.createElement(\"div\");\n    document.body.append(rootElement);\n    setRootElement(rootElement);\n    return () => {\n      rootElement.remove();\n      setRootElement(undefined);\n    };\n  }, []);\n\n  useBodyClassName(\"ModalOpen\", { enabled: visible });\n\n  if (rootElement == null) {\n    return null;\n  }\n\n  return (\n    <Portal container={rootElement}>\n      <View aria-modal={true} style={[styles.container, !visible && styles.inert]}>\n        <TransitionView style={styles.fill} enter={styles.overlayEnter} leave={styles.overlayLeave}>\n          {visible ? <View style={styles.overlay} /> : null}\n        </TransitionView>\n\n        <Suspendable fallback={<LoadingView color={backgroundColor.accented} delay={0} />}>\n          <TransitionView style={styles.fill} enter={styles.modalEnter} leave={styles.modalLeave}>\n            {visible ? (\n              <ResponsiveContainer style={styles.root} breakpoint={breakpoints.tiny}>\n                {({ large, small }) => (\n                  <FocusTrap\n                    autoFocus={true}\n                    focusLock={true}\n                    returnFocus={true}\n                    onEscapeKey={onPressClose}\n                    style={styles.trap}\n                  >\n                    <ScrollView\n                      style={styles.modalContainer}\n                      contentContainerStyle={\n                        large ? styles.modalContentContainer : styles.modalContentContainerSmall\n                      }\n                    >\n                      {onPressClose != null ? (\n                        <Pressable onPress={onPressClose} style={styles.pressableOverlay} />\n                      ) : null}\n\n                      <View\n                        role=\"dialog\"\n                        style={[large ? styles.modal : styles.modalSmall, { maxWidth }]}\n                      >\n                        <View style={styles.modalHeader}>\n                          <View style={styles.modalIconTitle}>\n                            {icon != null ? (\n                              <Icon name={icon} size={large ? 40 : 32} color={colors[color][500]} />\n                            ) : null}\n\n                            {icon != null && title != null ? <Space height={12} /> : null}\n\n                            {title != null ? (\n                              <>\n                                <LakeHeading level={2} variant=\"h3\">\n                                  {title}\n                                </LakeHeading>\n\n                                <Space height={12} />\n                              </>\n                            ) : null}\n                          </View>\n\n                          {onPressClose != null ? (\n                            <LakeButton\n                              style={styles.closeButton}\n                              mode=\"tertiary\"\n                              onPress={onPressClose}\n                              icon=\"lake-close\"\n                              ariaLabel={t(\"common.close\")}\n                            />\n                          ) : null}\n                        </View>\n\n                        {typeof children == \"function\" ? children({ large, small }) : children}\n                      </View>\n                    </ScrollView>\n                  </FocusTrap>\n                )}\n              </ResponsiveContainer>\n            ) : null}\n          </TransitionView>\n        </Suspendable>\n      </View>\n    </Portal>\n  );\n};\n"],"names":["BACKGROUND_COLOR","styles","StyleSheet","spacings","backgroundColor","shadows","commonStyles","negativeSpacings","LakeModal","visible","icon","title","color","children","maxWidth","onPressClose","rootElement","setRootElement","useState","useEffect","useBodyClassName","Portal","jsxs","View","jsx","TransitionView","Suspendable","LoadingView","ResponsiveContainer","breakpoints","large","small","FocusTrap","ScrollView","Pressable","Icon","colors","Space","Fragment","LakeHeading","LakeButton","t"],"mappings":"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"}