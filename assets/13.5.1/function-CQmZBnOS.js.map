{"version":3,"file":"function-CQmZBnOS.js","sources":["../../../packages/lake/src/utils/function.ts"],"sourcesContent":["import { Dict } from \"@swan-io/boxed\";\nimport { P } from \"ts-pattern\";\nimport type { GuardP } from \"ts-pattern/types\";\n\nexport const identity = <T>(value: T): T => value;\nexport const noop = () => {};\nexport const stubFalse = (): false => false;\nexport const stubTrue = (): true => true;\n\nexport const deriveUnion = <T extends PropertyKey>(\n  object: Record<T, true>,\n): {\n  array: T[];\n  set: Set<T>;\n  is: (value: unknown) => value is T;\n  P: GuardP<unknown, T>;\n} => {\n  const array = Dict.keys(object);\n  const set = new Set(array);\n  const is = (value: unknown): value is T => set.has(value as T);\n  return { array, set, is, P: P.when(is) };\n};\n\nexport const memoize = <Input extends Array<unknown>, Output>(\n  func: (...input: Input) => Output,\n  getCacheKey: (...input: Input) => string,\n): ((...input: Input) => Output) => {\n  const cache = new Map<string, Output>();\n\n  return (...input: Input) => {\n    const key = getCacheKey(...input);\n\n    if (cache.has(key)) {\n      return cache.get(key) as Output;\n    }\n\n    const output = func(...input);\n    cache.set(key, output);\n    return output;\n  };\n};\n"],"names":["noop"],"mappings":"iCAKO,MAAMA,EAAO,IAAM,CAAC"}