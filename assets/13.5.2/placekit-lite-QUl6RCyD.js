const P=new Map;function A(){const t=[];return typeof window<"u"&&navigator.userAgent&&t.push(navigator.userAgent),t.push("PlaceKit/2.3.0 (Client=JavaScript)"),typeof process<"u"&&process.version&&t.push(`NodeJS/${process.version}`),t.join(" ")}function g(t,o={}){if(["string","undefined"].includes(typeof t))t||console.warn("PlaceKit: missing or empty `apiKey` argument.");else throw Error("PlaceKit: `apiKey` argument is invalid, expected a string.");let r=0;const a=["https://api.placekit.co"];let d=!1;const s={maxResults:5};typeof window<"u"&&navigator.language&&(s.language=navigator.language.slice(0,2));const b=A();function p(e="POST",c="",u={}){const{timeout:i,forwardIP:y,...f}=u,h=new AbortController,m=typeof i<"u"?setTimeout(()=>h.abort(),i):void 0,w=new URL(c.trim().replace(/^\/+/,""),a[r]);["GET","HEAD"].includes(e)&&typeof f<"u"&&Object.keys(f).forEach(n=>w.searchParams.append(n,f[n]));const v={"Content-Type":"application/json; charset=UTF-8","User-Agent":b,"x-placekit-api-key":t};return y&&(v["x-forwarded-for"]=y),fetch(w,{method:e,headers:v,signal:h.signal,body:["GET","HEAD"].includes(e)?void 0:JSON.stringify(f)}).then(async n=>{clearTimeout(m);const x=await n.json();if(!n.ok)throw{status:n.status,statusText:n.statusText,...x};return x}).catch(n=>{if((n.name==="AbortError"||n.status&&n.status>=500)&&(r++,r<a.length-1))return p(e,c,u);throw n})}const l={get options(){return s},get hasGeolocation(){return d},configure(e={}){if(!["object","undefined"].includes(typeof e)||Array.isArray(e)||e===null)throw Error("PlaceKit.configure: `opts` argument is invalid, expected an object.");Object.assign(s,e)},requestGeolocation(e={}){if(!["object","undefined"].includes(typeof e)||Array.isArray(e)||e===null)throw Error("PlaceKit.requestGeolocation: `opts` argument is invalid, expected an object.");return new Promise((c,u)=>{typeof window>"u"||!navigator.geolocation?u(Error("PlaceKit.requestGeolocation: geolocation is only available in the browser.")):navigator.geolocation.getCurrentPosition(i=>{d=!0,s.coordinates=`${i.coords.latitude},${i.coords.longitude}`,c(i)},i=>{d=!1,delete s.coordinates,u(Error(`PlaceKit.requestGeolocation: (${i.code}) ${i.message}`))},e)})},clearGeolocation(){d=!1,delete s.coordinates}};for(const[e,c]of P.entries()){if(e in l)throw Error(`PlaceKit extend: \`client.${e}\` already exists.`);l[e]=c(p,l)}return l.configure(o),l}g.extend=function(t,o){if(!o?.call)throw Error("PlaceKit extend: `init` argument is invalid, expected a function.");P.set(t,o)};g.extend("search",(t,o)=>(r,a={})=>{if(!["string","undefined"].includes(typeof r))throw Error("PlaceKit `client.search`: `query` argument is invalid, expected a string.");if(!["object","undefined"].includes(typeof a)||Array.isArray(a)||a===null)throw Error("PlaceKit.search: `opts` argument is invalid, expected an object.");return t("POST","search",{...o.options,...a,query:r})});g.extend("reverse",(t,o)=>(r={})=>{if(!["object","undefined"].includes(typeof r)||Array.isArray(r)||r===null)throw Error("PlaceKit.reverse: `opts` argument is invalid, expected an object.");return t("POST","reverse",{...o.options,...r})});export{g as default};
//# sourceMappingURL=placekit-lite-QUl6RCyD.js.map
